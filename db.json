{"meta":{"version":1,"warehouse":"6.0.0"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-landscape/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/js/jquery-3.6.4.min.js","path":"js/jquery-3.6.4.min.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/js/script.js","path":"js/script.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.css","path":"fancybox/jquery.fancybox.min.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.js","path":"fancybox/jquery.fancybox.min.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/images/banner.jpg","path":"css/images/banner.jpg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/js/copy-codeblock.js","path":"js/copy-codeblock.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/js/app.js","path":"js/app.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/lax.min.js","path":"lib/lax.min.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/preset/plain.styl","path":"preset/plain.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/fancybox/fancybox.css","path":"lib/fancybox/fancybox.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/demo.css","path":"lib/iconfont/demo.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/demo_index.html","path":"lib/iconfont/demo_index.html","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/fancybox/fancybox.umd.js","path":"lib/fancybox/fancybox.umd.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.eot","path":"lib/iconfont/iconfont.eot","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.css","path":"lib/iconfont/iconfont.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.svg","path":"lib/iconfont/iconfont.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.json","path":"lib/iconfont/iconfont.json","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.woff","path":"lib/iconfont/iconfont.woff","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.ttf","path":"lib/iconfont/iconfont.ttf","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/mdui_043tiny/mdui.css","path":"lib/mdui_043tiny/mdui.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/mdui_043tiny/mdui.js","path":"lib/mdui_043tiny/mdui.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.woff2","path":"lib/iconfont/iconfont.woff2","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.js","path":"lib/iconfont/iconfont.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/archive.styl","path":"css/archive.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/article.styl","path":"css/article.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/color.styl","path":"css/color.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/content.styl","path":"css/content.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/kira-code-copy.styl","path":"css/kira-code-copy.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/kira-friends.styl","path":"css/kira-friends.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/layout.styl","path":"css/layout.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/media.styl","path":"css/media.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/kira-image.styl","path":"css/kira-image.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/post.styl","path":"css/post.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/right-column.styl","path":"css/right-column.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/constants.styl","path":"css/constants.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/css/sidebar.styl","path":"css/sidebar.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/js/kira-image.js","path":"js/kira-image.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/lazysizes.js","path":"lib/lazysizes.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/smooth-scrolling.js","path":"lib/smooth-scrolling.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/js/kira-code-copy.js","path":"js/kira-code-copy.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/deps/css/APlayer.min.css","path":"deps/css/APlayer.min.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/deps/js/APlayer.min.js","path":"deps/js/APlayer.min.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/deps/js/Meting.min.js","path":"deps/js/Meting.min.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/highlight/highlight.min.js","path":"lib/highlight/highlight.min.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/mdui/mdui.min.css","path":"lib/mdui/mdui.min.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/highlight/atom-one-dark.min.css","path":"lib/highlight/atom-one-dark.min.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/mdui/mdui.min.js","path":"lib/mdui/mdui.min.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/demo_index.html","path":"lib/iconfont/demo_index.html","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/demo.css","path":"lib/iconfont/demo.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.js","path":"lib/iconfont/iconfont.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.css","path":"lib/iconfont/iconfont.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.json","path":"lib/iconfont/iconfont.json","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.ttf","path":"lib/iconfont/iconfont.ttf","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.woff","path":"lib/iconfont/iconfont.woff","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.woff2","path":"lib/iconfont/iconfont.woff2","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/fonts/roboto/Roboto-Bold.woff2","path":"lib/fonts/roboto/Roboto-Bold.woff2","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/fonts/roboto/Roboto-Medium.woff2","path":"lib/fonts/roboto/Roboto-Medium.woff2","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-kira/source/lib/fonts/roboto/Roboto-Regular.woff2","path":"lib/fonts/roboto/Roboto-Regular.woff2","modified":0,"renderable":1},{"_id":"source/pic/101573594_p0.png","path":"pic/101573594_p0.png","modified":0,"renderable":0},{"_id":"source/pic/125981673_p0.png","path":"pic/125981673_p0.png","modified":0,"renderable":0},{"_id":"source/pic/125349440_p0.png","path":"pic/125349440_p0.png","modified":0,"renderable":0},{"_id":"source/assert/eg1.png","path":"assert/eg1.png","modified":0,"renderable":0},{"_id":"source/assert/微信图片_20250914151010_28_9.png","path":"assert/微信图片_20250914151010_28_9.png","modified":0,"renderable":0},{"_id":"source/assert/machine_learining/1.png","path":"assert/machine_learining/1.png","modified":0,"renderable":0},{"_id":"source/assert/machine_learining/2.png","path":"assert/machine_learining/2.png","modified":0,"renderable":0},{"_id":"source/assert/machine_learining/3.png","path":"assert/machine_learining/3.png","modified":0,"renderable":0},{"_id":"source/assert/machine_learining/4.png","path":"assert/machine_learining/4.png","modified":0,"renderable":0},{"_id":"source/assert/rainwatertrap2.png","path":"assert/rainwatertrap2.png","modified":0,"renderable":0},{"_id":"source/assert/algorithm/rainwatertrap.png","path":"assert/algorithm/rainwatertrap.png","modified":0,"renderable":0},{"_id":"source/assert/algorithm/rainwatertrap2.png","path":"assert/algorithm/rainwatertrap2.png","modified":0,"renderable":0},{"_id":"source/dataset/banking_partial.csv","path":"dataset/banking_partial.csv","modified":0,"renderable":0},{"_id":"node_modules/hexo-theme-next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/css/noscript.styl","path":"css/noscript.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/logo-algolia-nebula-blue-full.svg","path":"images/logo-algolia-nebula-blue-full.svg","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/logo.svg","path":"images/logo.svg","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/bookmark.js","path":"js/bookmark.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/comments-buttons.js","path":"js/comments-buttons.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/comments.js","path":"js/comments.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/config.js","path":"js/config.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/motion.js","path":"js/motion.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/next-boot.js","path":"js/next-boot.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/pjax.js","path":"js/pjax.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/schedule.js","path":"js/schedule.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/sidebar.js","path":"js/sidebar.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/addtoany.js","path":"js/third-party/addtoany.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/fancybox.js","path":"js/third-party/fancybox.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/pace.js","path":"js/third-party/pace.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/quicklink.js","path":"js/third-party/quicklink.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/baidu-analytics.js","path":"js/third-party/analytics/baidu-analytics.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/google-analytics.js","path":"js/third-party/analytics/google-analytics.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/matomo.js","path":"js/third-party/analytics/matomo.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/growingio.js","path":"js/third-party/analytics/growingio.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/changyan.js","path":"js/third-party/comments/changyan.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqus.js","path":"js/third-party/comments/disqus.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqusjs.js","path":"js/third-party/comments/disqusjs.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/gitalk.js","path":"js/third-party/comments/gitalk.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/isso.js","path":"js/third-party/comments/isso.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/livere.js","path":"js/third-party/comments/livere.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/utterances.js","path":"js/third-party/comments/utterances.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/chatra.js","path":"js/third-party/chat/chatra.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/tidio.js","path":"js/third-party/chat/tidio.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/katex.js","path":"js/third-party/math/katex.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/mathjax.js","path":"js/third-party/math/mathjax.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/algolia-search.js","path":"js/third-party/search/algolia-search.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/local-search.js","path":"js/third-party/search/local-search.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/firestore.js","path":"js/third-party/statistics/firestore.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/lean-analytics.js","path":"js/third-party/statistics/lean-analytics.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/mermaid.js","path":"js/third-party/tags/mermaid.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/pdf.js","path":"js/third-party/tags/pdf.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/wavedrom.js","path":"js/third-party/tags/wavedrom.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1756308328891},{"_id":"source/_posts/test.md","hash":"e0f8716978ec44e8eae9bcc54b1bc8db22583974","modified":1761111830241},{"_id":"node_modules/hexo-theme-landscape/README.md","hash":"6497b70356271fd6f9f1dc862353be844c457a53","modified":1756308969812},{"_id":"node_modules/hexo-theme-landscape/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1756308962456},{"_id":"node_modules/hexo-theme-landscape/_config.yml","hash":"a93d7b3990e45bc7247eecf01888f71674887a63","modified":1756308970880},{"_id":"node_modules/hexo-theme-landscape/languages/de-DE.yml","hash":"d29d1c4256b7ed9df42f511c2ff0a23ad5fd6c1f","modified":1756308970950},{"_id":"node_modules/hexo-theme-landscape/package.json","hash":"06889bee30e4c39479467021da434d3a6a0990fc","modified":1756308969715},{"_id":"node_modules/hexo-theme-landscape/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":1756308970978},{"_id":"node_modules/hexo-theme-landscape/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1756308971043},{"_id":"node_modules/hexo-theme-landscape/languages/en-US.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1756308971122},{"_id":"node_modules/hexo-theme-landscape/languages/es-ES.yml","hash":"7008a8fc91f18d2a735864817b8ebda30c7a2c66","modified":1756308971238},{"_id":"node_modules/hexo-theme-landscape/languages/en.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1756308971180},{"_id":"node_modules/hexo-theme-landscape/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":1756308971266},{"_id":"node_modules/hexo-theme-landscape/languages/en-GB.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1756308971079},{"_id":"node_modules/hexo-theme-landscape/languages/fr-FR.yml","hash":"8d09dbdab00a30a2870b56f7c0a7ca7deafa7b88","modified":1756308971336},{"_id":"node_modules/hexo-theme-landscape/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":1756308971386},{"_id":"node_modules/hexo-theme-landscape/languages/hu.yml","hash":"284d557130bf54a74e7dcef9d42096130e4d9550","modified":1756308971595},{"_id":"node_modules/hexo-theme-landscape/languages/hu-HU.yml","hash":"712d18664898fa21ba38d4973e90ef41a324ea25","modified":1756308971558},{"_id":"node_modules/hexo-theme-landscape/languages/it-IT.yml","hash":"2cb6dc2fab9bd2dbe1c8bb869a9e8bf85a564fdd","modified":1756308971633},{"_id":"node_modules/hexo-theme-landscape/languages/it.yml","hash":"89b7d91306b2c1a0f3ac023b657bf974f798a1e8","modified":1756308971666},{"_id":"node_modules/hexo-theme-landscape/languages/ja-JP.yml","hash":"08481267e0c112e1f6855620f2837ec4c4a98bbd","modified":1756308971690},{"_id":"node_modules/hexo-theme-landscape/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":1756308971738},{"_id":"node_modules/hexo-theme-landscape/languages/mn-MN.yml","hash":"b9e5f3e7c0c2f779cf2cfded6db847b5941637ca","modified":1756308971924},{"_id":"node_modules/hexo-theme-landscape/languages/ko-KR.yml","hash":"19209ad8f9d4057e8df808937f950eb265e1db69","modified":1756308971830},{"_id":"node_modules/hexo-theme-landscape/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1756308972022},{"_id":"node_modules/hexo-theme-landscape/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1756308972068},{"_id":"node_modules/hexo-theme-landscape/languages/mn.yml","hash":"2e7523951072a9403ead3840ad823edd1084c116","modified":1756308971960},{"_id":"node_modules/hexo-theme-landscape/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":1756308971880},{"_id":"node_modules/hexo-theme-landscape/languages/pt-PT.yml","hash":"0f852b6b228e6ea59aa3540574bb89b233f2a098","modified":1756308972114},{"_id":"node_modules/hexo-theme-landscape/languages/ru-RU.yml","hash":"360d11a28bb768afb1dd15f63fa7fd3a8cc547ee","modified":1756308972205},{"_id":"node_modules/hexo-theme-landscape/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":1756308972164},{"_id":"node_modules/hexo-theme-landscape/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1756308972256},{"_id":"node_modules/hexo-theme-landscape/languages/nl-NL.yml","hash":"5ebbc30021f05d99938f96dfff280392df7f91f0","modified":1756308971996},{"_id":"node_modules/hexo-theme-landscape/languages/th.yml","hash":"84a55b00aa01f03982be294e43c33a20e6d32862","modified":1756308972337},{"_id":"node_modules/hexo-theme-landscape/languages/th-TH.yml","hash":"ebfdba9bc4842c829473c1e6e4544344f182724d","modified":1756308972289},{"_id":"node_modules/hexo-theme-landscape/languages/tr.yml","hash":"a1cdbfa17682d7a971de8ab8588bf57c74224b5b","modified":1756308972362},{"_id":"node_modules/hexo-theme-landscape/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1756308972420},{"_id":"node_modules/hexo-theme-landscape/layout/archive.ejs","hash":"97160b8111dd0283f8231408bcab4c87d31c1646","modified":1756308965410},{"_id":"node_modules/hexo-theme-landscape/layout/category.ejs","hash":"97160b8111dd0283f8231408bcab4c87d31c1646","modified":1756308966294},{"_id":"node_modules/hexo-theme-landscape/layout/index.ejs","hash":"57281fc3812c877ec2d8e89ec87ede57b9789d4c","modified":1756308967480},{"_id":"node_modules/hexo-theme-landscape/languages/zh-CN.yml","hash":"1efd95774f401c80193eac6ee3f1794bfe93dc5a","modified":1756308972401},{"_id":"node_modules/hexo-theme-landscape/layout/layout.ejs","hash":"0d1765036e4874500e68256fedb7470e96eeb6ee","modified":1756308967556},{"_id":"node_modules/hexo-theme-landscape/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1756308967858},{"_id":"node_modules/hexo-theme-landscape/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1756308967920},{"_id":"node_modules/hexo-theme-landscape/layout/tag.ejs","hash":"97160b8111dd0283f8231408bcab4c87d31c1646","modified":1756308968352},{"_id":"node_modules/hexo-theme-landscape/scripts/fancybox.js","hash":"c857d7a5e4a5d71c743a009c5932bf84229db428","modified":1756308968999},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/after-footer.ejs","hash":"1b89d0caba03a66a43d9c290a5e94fa438a89210","modified":1756308963784},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/article.ejs","hash":"e9d4678e14be5e3cd5e34d783e5af6d6626092f5","modified":1756308965623},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/archive-post.ejs","hash":"c7a71425a946d05414c069ec91811b5c09a92c47","modified":1756308964163},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/footer.ejs","hash":"3656eb692254346671abc03cb3ba1459829e0dce","modified":1756308966739},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/archive.ejs","hash":"0039146b8ccbdf9b9f8bee58fc6c238f0e9921fc","modified":1756308964516},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/google-analytics.ejs","hash":"2ea7442ea1e1a8ab4e41e26c563f58413b59a3d0","modified":1756308967141},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/head.ejs","hash":"0e94f5722d4c44d3cc91be2f4fd30b9ab503b868","modified":1756308967270},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/gauges-analytics.ejs","hash":"21a1e2a3907d1a3dad1cd0ab855fe6735f233c74","modified":1756308967032},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/header.ejs","hash":"6a5033d189554c9a6d42e2ef7952ae5c9742648e","modified":1756308967385},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/sidebar.ejs","hash":"930da35cc2d447a92e5ee8f835735e6fd2232469","modified":1756308968030},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/category.ejs","hash":"dd1e5af3c6af3f5d6c85dfd5ca1766faed6a0b05","modified":1756308966068},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/recent_posts.ejs","hash":"60c4b012dcc656438ff59997e60367e5a21ab746","modified":1756308967976},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/tagcloud.ejs","hash":"b4a2079101643f63993dcdb32925c9b071763b46","modified":1756308968423},{"_id":"node_modules/hexo-theme-landscape/source/css/_extend.styl","hash":"222fbe6d222531d61c1ef0f868c90f747b1c2ced","modified":1756308969894},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/tag.ejs","hash":"2de380865df9ab5f577f7d3bcadf44261eb5faae","modified":1756308968227},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/archive.ejs","hash":"beb4a86fcc82a9bdda9289b59db5a1988918bec3","modified":1756308964980},{"_id":"node_modules/hexo-theme-landscape/source/css/_variables.styl","hash":"ca28281423ae57d76b6c1eb91cd845fd4e518bd6","modified":1756308969958},{"_id":"node_modules/hexo-theme-landscape/source/css/style.styl","hash":"e55a1d92954ed20f6887f92dc727bb995a010a43","modified":1756308970798},{"_id":"node_modules/hexo-theme-landscape/source/js/script.js","hash":"49773efcb2221bbdf2d86f3f5c5ff2d841b528cc","modified":1756308969666},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.css","hash":"1be9b79be02a1cfc5d96c4a5e0feb8f472babd95","modified":1756308963120},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/mobile-nav.ejs","hash":"e952a532dfc583930a666b9d4479c32d4a84b44e","modified":1756308967634},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/category.ejs","hash":"c6bcd0e04271ffca81da25bcff5adf3d46f02fc0","modified":1756308965892},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/date.ejs","hash":"f1458584b679545830b75bef2526e2f3eb931045","modified":1756308966422},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/nav.ejs","hash":"16a904de7bceccbb36b4267565f2215704db2880","modified":1756308967727},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1756308966862},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/title.ejs","hash":"4d7e62574ddf46de9b41605fe3140d77b5ddb26d","modified":1756308968484},{"_id":"node_modules/hexo-theme-landscape/source/css/_util/mixin.styl","hash":"44f32767d9fd3c1c08a60d91f181ee53c8f0dbb3","modified":1756308970534},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/archive.styl","hash":"db15f5677dc68f1730e82190bab69c24611ca292","modified":1756308970052},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/article.styl","hash":"f608400a08cf137ab15ec1f44bac551950afe879","modified":1756308970136},{"_id":"node_modules/hexo-theme-landscape/source/css/_util/grid.styl","hash":"0bf55ee5d09f193e249083602ac5fcdb1e571aed","modified":1756308970391},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/comment.styl","hash":"79d280d8d203abb3bd933ca9b8e38c78ec684987","modified":1756308970228},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1756308968153},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/footer.styl","hash":"e35a060b8512031048919709a8e7b1ec0e40bc1b","modified":1756308970284},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/highlight.styl","hash":"9cc3b2927d814f2f6e8e188f9d3657b94f4c6ef3","modified":1756308970478},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/header.styl","hash":"268d2989acb06e2ddd06cc36a6918c6cd865476b","modified":1756308970438},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar-bottom.styl","hash":"8fd4f30d319542babfd31f087ddbac550f000a8a","modified":1756308970692},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/mobile.styl","hash":"a399cf9e1e1cec3e4269066e2948d7ae5854d745","modified":1756308970583},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar-aside.styl","hash":"890349df5145abf46ce7712010c89237900b3713","modified":1756308970630},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar.styl","hash":"404ec059dc674a48b9ab89cd83f258dec4dcb24d","modified":1756308970752},{"_id":"node_modules/hexo-theme-landscape/source/js/jquery-3.6.4.min.js","hash":"eda46747c71d38a880bee44f9a439c3858bb8f99","modified":1756308969360},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.js","hash":"6181412e73966696d08e1e5b1243a572d0f22ba6","modified":1756308969527},{"_id":"node_modules/hexo-theme-landscape/source/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1756308968888},{"_id":"public/2025/08/27/hello-world/index.html","hash":"1ba974760832be63bd119a7727d87000c9183b90","modified":1756309251568},{"_id":"public/archives/index.html","hash":"5715cf1f73b16b3b3b3932a8f1769cfc3ce9ff7a","modified":1756309251568},{"_id":"public/archives/2025/index.html","hash":"9b738a5deb69b9eb42a3f80abe71dd39d78fd186","modified":1756309251568},{"_id":"public/2025/08/27/test/index.html","hash":"95d69ee85b4e11a386218ed4fe5753879839f23d","modified":1756309251568},{"_id":"public/index.html","hash":"c0bc266c6460bcbe7ca04b31c423037dea5558f8","modified":1756309251568},{"_id":"public/archives/2025/08/index.html","hash":"86a631291b8b557206f85a610582912f60abd216","modified":1756309251568},{"_id":"public/fancybox/jquery.fancybox.min.css","hash":"1be9b79be02a1cfc5d96c4a5e0feb8f472babd95","modified":1756309251568},{"_id":"public/css/style.css","hash":"ecc329be740a220cc188ff49b02da4847cb7ee5e","modified":1756309251568},{"_id":"public/fancybox/jquery.fancybox.min.js","hash":"6181412e73966696d08e1e5b1243a572d0f22ba6","modified":1756309251568},{"_id":"public/js/jquery-3.6.4.min.js","hash":"eda46747c71d38a880bee44f9a439c3858bb8f99","modified":1756309251568},{"_id":"public/js/script.js","hash":"49773efcb2221bbdf2d86f3f5c5ff2d841b528cc","modified":1756309251568},{"_id":"public/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1756309251568},{"_id":"node_modules/hexo-theme-nexmoe/.eslintignore","hash":"1d606028dff10b1a8c635142235182379dc3c64e","modified":1756384386168},{"_id":"node_modules/hexo-theme-nexmoe/.eslintrc.json","hash":"ca45d8e5d80ad6b7004cddacae7fc7d8040b2d6f","modified":1756384397643},{"_id":"node_modules/hexo-theme-nexmoe/LICENSE","hash":"b314c7ebb7d599944981908b7f3ed33a30e78f3a","modified":1756384386502},{"_id":"node_modules/hexo-theme-nexmoe/index.js","hash":"f3d92ae5f32a9aee66f8b24083a2004d69a2b761","modified":1756384396414},{"_id":"node_modules/hexo-theme-nexmoe/README.md","hash":"7e77fc64595bc4afe6a56ebe0fe525a874b4f017","modified":1756384400525},{"_id":"node_modules/hexo-theme-nexmoe/renovate.json","hash":"767b077c7b615e20af3cf865813cd64674a9bea6","modified":1756384398294},{"_id":"node_modules/hexo-theme-nexmoe/package.json","hash":"5f5c79d7fdaa58fa87142085f1f010762afdd643","modified":1756384398211},{"_id":"node_modules/hexo-theme-nexmoe/.github/release-drafter.yml","hash":"9be21d7a486404050224d61415226e1ba321f169","modified":1756384403520},{"_id":"node_modules/hexo-theme-nexmoe/demo/package.json","hash":"883603a5be41686e89c26519e5bfe097343edcc6","modified":1756384398134},{"_id":"node_modules/hexo-theme-nexmoe/crowdin.yml","hash":"f9f02a9cab975c7de721c5dc4179b77870019cc6","modified":1756384402740},{"_id":"node_modules/hexo-theme-nexmoe/include/README.md","hash":"912c1a78db7138e3ff6e1ce622dd00e3bfb1afab","modified":1756384400466},{"_id":"node_modules/hexo-theme-nexmoe/demo/_config.yml","hash":"f5a551599d83995e0dbc4719e7950fa889b3dc64","modified":1756384402643},{"_id":"node_modules/hexo-theme-nexmoe/demo/_config.nexmoe.yml","hash":"8f508665b4512954103e04e1e86f9ebfe30e7748","modified":1756384402544},{"_id":"node_modules/hexo-theme-nexmoe/include/dependency.js","hash":"ed975738b982c19565bc2869a51277723fd23e6b","modified":1756384395412},{"_id":"node_modules/hexo-theme-nexmoe/languages/en.yml","hash":"1a2ab324edb076988fa7a098d2b011d80738a047","modified":1756384403026},{"_id":"node_modules/hexo-theme-nexmoe/include/config.js","hash":"f26ff9408ca6ce956ef40ac6c6996da36c9df67d","modified":1756384394844},{"_id":"node_modules/hexo-theme-nexmoe/languages/default.yml","hash":"c76f93c3c0ac4582694e330647f2fe424930ec3a","modified":1756384402864},{"_id":"node_modules/hexo-theme-nexmoe/languages/it.yml","hash":"334afb6a7967d71ebd2fb32bdd1f8b20174c82bd","modified":1756384403229},{"_id":"node_modules/hexo-theme-nexmoe/languages/ja.yml","hash":"773c3b0464771c6d5149a2175bb9d7eaceb755ea","modified":1756384403278},{"_id":"node_modules/hexo-theme-nexmoe/include/register.js","hash":"446119e7fbc44da8d0fc8c3628c14fadb225c558","modified":1756384397487},{"_id":"node_modules/hexo-theme-nexmoe/languages/zh-CN.yml","hash":"b30de168c5bc226cdb9dbd7358b7b0d33a34e1d5","modified":1756384403685},{"_id":"node_modules/hexo-theme-nexmoe/languages/zh.yml","hash":"81aa48d1ada886cb10f5a195c3afb250f962f3ac","modified":1756384403986},{"_id":"node_modules/hexo-theme-nexmoe/languages/zh-HK.yml","hash":"6b6ada7b425c137cd51edc2f4890b96a21482558","modified":1756384403824},{"_id":"node_modules/hexo-theme-nexmoe/layout/archives.ejs","hash":"2395fdfee67880c1c6b4796882c6fda67930f1f7","modified":1756384390773},{"_id":"node_modules/hexo-theme-nexmoe/layout/index.jsx","hash":"20373ddf76f6d59dde51833e754c9f70cc804f77","modified":1756384399169},{"_id":"node_modules/hexo-theme-nexmoe/languages/zh-TW.yml","hash":"e4ababddda52aa89f0fd51909c2211bcd10abb53","modified":1756384403943},{"_id":"node_modules/hexo-theme-nexmoe/layout/layout.jsx","hash":"e347c8e933b3e496add81502c1a2e229b0042f73","modified":1756384399267},{"_id":"node_modules/hexo-theme-nexmoe/layout/post.ejs","hash":"a22ebd3ceec83722a0c2b1a5bc11688818ae25a7","modified":1756384392766},{"_id":"node_modules/hexo-theme-nexmoe/source/_config.yml","hash":"c09a5a5a10889ef15cbfad988474527ccad19546","modified":1756384402689},{"_id":"node_modules/hexo-theme-nexmoe/layout/py.jsx","hash":"590216a1f66a2085d98544fe082c503ec3baa02e","modified":1756384399448},{"_id":"node_modules/hexo-theme-nexmoe/.github/ISSUE_TEMPLATE/bug_report_en.md","hash":"557484415c610222b16b58df470c2a768782c4fc","modified":1756384399855},{"_id":"node_modules/hexo-theme-nexmoe/scripts/index.js","hash":"c00aba78d38330728dbbdbb0bae57f1b00a7de5e","modified":1756384396549},{"_id":"node_modules/hexo-theme-nexmoe/.github/ISSUE_TEMPLATE/bug_report_zh.md","hash":"d6c77dbb2a3d638d748280fb37dd29375aebe98c","modified":1756384399894},{"_id":"node_modules/hexo-theme-nexmoe/.github/workflows/npm-publish.yml","hash":"b57ce794238f61bb8223752e516970cd1b7732c9","modified":1756384403433},{"_id":"node_modules/hexo-theme-nexmoe/.github/workflows/release-drafter.yml","hash":"ccbe1e1ae6ee3b2a7d32362791aa006afa95e94d","modified":1756384403614},{"_id":"node_modules/hexo-theme-nexmoe/.github/ISSUE_TEMPLATE/feature_request_zh.md","hash":"843abf5e1d7b06cb1feddd75f7025150d46a91c2","modified":1756384400184},{"_id":"node_modules/hexo-theme-nexmoe/.github/ISSUE_TEMPLATE/feature_request_en.md","hash":"803f6736473a122ed78867e64681defcd2edd954","modified":1756384400111},{"_id":"node_modules/hexo-theme-nexmoe/demo/.github/dependabot.yml","hash":"25b0257a0db2c5b6a5756d8990bc2cba12f54fc5","modified":1756384402955},{"_id":"node_modules/hexo-theme-nexmoe/demo/scaffolds/draft.md","hash":"204ab550ddffa92051ea0eb2484a78d84dac3693","modified":1756384400043},{"_id":"node_modules/hexo-theme-nexmoe/include/util/console.js","hash":"59cf9d277d3ac85a496689bd811b1c316001641d","modified":1756384394949},{"_id":"node_modules/hexo-theme-nexmoe/layout/_index/list.ejs","hash":"e98a95f50d6f9042302ec4fad62ac85c5336ba26","modified":1756384392467},{"_id":"node_modules/hexo-theme-nexmoe/demo/scaffolds/page.md","hash":"f0af1cb10f27d859caa51c8e3704469d9ed842a6","modified":1756384400339},{"_id":"node_modules/hexo-theme-nexmoe/demo/scaffolds/post.md","hash":"e7169dab8ce62d41e3734e30706fa786cc7d46f4","modified":1756384400421},{"_id":"node_modules/hexo-theme-nexmoe/layout/_widget/archive.ejs","hash":"2c8c5ee017bfdd56cbb80c7796ef9393aea16d52","modified":1756384390432},{"_id":"node_modules/hexo-theme-nexmoe/layout/_widget/category.ejs","hash":"99113b9f2cb4ffefdda3e3a343647ac6a5083091","modified":1756384391082},{"_id":"node_modules/hexo-theme-nexmoe/layout/_widget/search.ejs","hash":"9771d5e03623a8892c23dab9b24360edbaf87233","modified":1756384393153},{"_id":"node_modules/hexo-theme-nexmoe/layout/_widget/recent_posts.ejs","hash":"7d9eaf8228eda803aa4956e55432f78e056d6a01","modified":1756384392867},{"_id":"node_modules/hexo-theme-nexmoe/layout/_widget/social.ejs","hash":"133927c64cbe6f9cf6601e32be0b03ed576dfbf5","modified":1756384393304},{"_id":"node_modules/hexo-theme-nexmoe/layout/_widget/hitokoto.ejs","hash":"2c9c3567d2b5a99cdbca90673c638409529881db","modified":1756384392105},{"_id":"node_modules/hexo-theme-nexmoe/layout/_widget/tag.ejs","hash":"ddf844f08124454bea2a30f8349b63f3cb63ac16","modified":1756384393543},{"_id":"node_modules/hexo-theme-nexmoe/layout/_widget/tagcloud.ejs","hash":"25e1af5116bd5cbf6c1d1e259a8564e21a3a28d5","modified":1756384393676},{"_id":"node_modules/hexo-theme-nexmoe/layout/_partial/head.ejs","hash":"c14cec07f778dbf643e51671e47c2e6e711045b8","modified":1756384391741},{"_id":"node_modules/hexo-theme-nexmoe/layout/_partial/background.jsx","hash":"05ee70bc00ddac592469a9e56cfdb9f683f130ef","modified":1756384398423},{"_id":"node_modules/hexo-theme-nexmoe/layout/_partial/paginator.jsx","hash":"9b1f26c6f899b1c66c65d7213137f02796b56236","modified":1756384399302},{"_id":"node_modules/hexo-theme-nexmoe/layout/_partial/right.ejs","hash":"e4db789fcf7f7dfe58e22c78ae30a5db2355cc47","modified":1756384393023},{"_id":"node_modules/hexo-theme-nexmoe/layout/_widget/link.ejs","hash":"61bc7a6018309f5b3525b451ccdd62e6664f7e74","modified":1756384392269},{"_id":"node_modules/hexo-theme-nexmoe/scripts/helper/image_filter.js","hash":"284c3f15eaba3ff6db42fe12f921fada5c6f24b4","modified":1756384396344},{"_id":"node_modules/hexo-theme-nexmoe/source/css/style.styl","hash":"2021dacedfe0f6f2ed6fdf6a9e9c067fe792cde0","modified":1756384402058},{"_id":"node_modules/hexo-theme-nexmoe/scripts/helper/css_auto_version.js","hash":"354700a113aca785c82bd59a16901a2dff2a2580","modified":1756384395233},{"_id":"node_modules/hexo-theme-nexmoe/layout/_partial/searchbox.jsx","hash":"83714b79399e0bef913bef8c4dbef58e9dd875f2","modified":1756384399699},{"_id":"node_modules/hexo-theme-nexmoe/source/js/copy-codeblock.js","hash":"51f1b526133258db1080826574c50a683a34c559","modified":1756384395069},{"_id":"node_modules/hexo-theme-nexmoe/scripts/tag/links.js","hash":"3676a23bdf32e0c1a933ccb8a79da6c5880a2e19","modified":1756384396908},{"_id":"node_modules/hexo-theme-nexmoe/scripts/helper/js_auto_version.js","hash":"96e6d7d0dadd39198e33ec8d5f0331e4a600ca37","modified":1756384396623},{"_id":"node_modules/hexo-theme-nexmoe/scripts/tag/gallery.js","hash":"bc07b003bd405138ff4bca5fb03ba180fc29b92e","modified":1756384396154},{"_id":"node_modules/hexo-theme-nexmoe/source/js/app.js","hash":"965c3befaa26a06484204b34f20b8770e186866a","modified":1756384394650},{"_id":"node_modules/hexo-theme-nexmoe/source/js/search.js","hash":"eb69cd78f6ab8d3e83576dae29f09c9af0ffe8b9","modified":1756384397567},{"_id":"node_modules/hexo-theme-nexmoe/layout/_layout/xiaoshu/footer.jsx","hash":"3ede4910be7915854ee06a545aa8ee04bd216031","modified":1756384399012},{"_id":"node_modules/hexo-theme-nexmoe/layout/_layout/xiaoshu/header.jsx","hash":"3ede4910be7915854ee06a545aa8ee04bd216031","modified":1756384399121},{"_id":"node_modules/hexo-theme-nexmoe/layout/_layout/nexmoe/body.jsx","hash":"7e63a37bcd01a67950fb4f52895bf9e6cf9f955b","modified":1756384398500},{"_id":"node_modules/hexo-theme-nexmoe/source/preset/plain.styl","hash":"0413a4e36642110f0a23738d10f2874e6e43ed6d","modified":1756384401847},{"_id":"node_modules/hexo-theme-nexmoe/demo/source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1756384400312},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/lax.min.js","hash":"1de100aa90834f1f4fae9a4deb44a73048fefff0","modified":1756384396869},{"_id":"node_modules/hexo-theme-nexmoe/layout/_layout/xiaoshu/content.jsx","hash":"13a868d0b70283aaaa49770ad530261eda7a750d","modified":1756384398764},{"_id":"node_modules/hexo-theme-nexmoe/layout/_layout/nexmoe/header.ejs","hash":"24ebcbd15daee1b6b1ede4ffaffa9b86f7154167","modified":1756384391969},{"_id":"node_modules/hexo-theme-nexmoe/layout/_partial/_post/tag.ejs","hash":"5934bcb1b256642708c97f61da85fbdbd959a078","modified":1756384393395},{"_id":"node_modules/hexo-theme-nexmoe/layout/_layout/nexmoe/content.jsx","hash":"4bfadb1ce4e732289f43f81cfce41fb35a3f2f89","modified":1756384398616},{"_id":"node_modules/hexo-theme-nexmoe/layout/_layout/nexmoe/footer.jsx","hash":"167f67e30cdb15576c9cd9dd7cc6aafb4625e069","modified":1756384398878},{"_id":"node_modules/hexo-theme-nexmoe/layout/_partial/_post/meta.ejs","hash":"be2fdf6732f49d5d3277b4e4b0a4f9fc85fa4643","modified":1756384392657},{"_id":"node_modules/hexo-theme-nexmoe/layout/_partial/_post/word-count.ejs","hash":"5415f792394b364fcbc1502971874dac6ea54de4","modified":1756384393815},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_widget/hitokoto.styl","hash":"0086bb5a3f250439be64588fca075ee3326a6ad1","modified":1756384401400},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_partial/archives.styl","hash":"3f401f6caf7e7ed6c0b7fe622ed02a25cc9e5237","modified":1756384400632},{"_id":"node_modules/hexo-theme-nexmoe/layout/_partial/_post/copyright.ejs","hash":"bf2cb43d66842b4bc51eb6908c588044a68d1364","modified":1756384391433},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_widget/index.styl","hash":"465acffbe8cc98c3b275cc286c0991f422930b60","modified":1756384401471},{"_id":"node_modules/hexo-theme-nexmoe/layout/_layout/xiaoshu/body.jsx","hash":"1d8210e9968298440a1da0cc86c3e3454dba4427","modified":1756384398593},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_partial/pagination.styl","hash":"aa22dd62542d69f07ce5178cd3f94cf20c9f1bca","modified":1756384401720},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_partial/background.styl","hash":"a4c012e17734de0bf1a62bf5b5ebc98755b23bcb","modified":1756384400804},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_partial/copy-codeblock.styl","hash":"83372948cb098a8ad1da8bde17963701b8e39409","modified":1756384401100},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_index/list.styl","hash":"6ce0e88126225e582c4d788c4c88a30c11fee8fb","modified":1756384401653},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/fancybox/fancybox.css","hash":"cbce0cfc36f47e30e9c9824875f0b854a05f1916","modified":1756384388222},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_partial/py.styl","hash":"53c72cb99593d83523559013713fc25b4ae5957c","modified":1756384401902},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_partial/searchbox.styl","hash":"b25cefb269bb7188ed9d6ab0b530f30e138b33d1","modified":1756384401940},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/demo.css","hash":"53456972a11d52af67187fc17999e6665f9f06fe","modified":1756384387325},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/demo_index.html","hash":"a82acbfeabc50a6668ebf6115b5c5c3d308079b6","modified":1756384394279},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_partial/article.styl","hash":"726d9837026a4979dae3d9d790feba952de98b48","modified":1756384400755},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.eot","hash":"1d1851c2197382a9b7cd3b3fcdef79a61ad331f6","modified":1756384394074},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.css","hash":"3566d949bdc045cd816be382d180b796e0a78748","modified":1756384388634},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.json","hash":"0dd0193f6f400e5da6d3aef89f76c22c79e0f396","modified":1756384397710},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.woff","hash":"e292802913e6c248a17797dc24ecfc0a3473c3cf","modified":1756384402347},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.svg","hash":"2af6d26577c3ae2ca126351f0be764cbae9da6ff","modified":1756384402165},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.js","hash":"a536d4780220f9cd7fc5126d9ec1108b19afb6b9","modified":1756384396267},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.ttf","hash":"b0f4b5501cbcaeaf15dc608359574a29bc4c4265","modified":1756384402312},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_layout/nexmoe/content.styl","hash":"718c99320e6862a020e2652d8259c980283a6ac0","modified":1756384400900},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_layout/nexmoe/header.styl","hash":"b1c905f3a6089936aa6740546c266c03a99a8169","modified":1756384401242},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/iconfont/iconfont.woff2","hash":"9209e4f7e45d37e58356e5ede7ea9d6d9e922d77","modified":1756384402442},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_layout/xiaoshu/footer.styl","hash":"bebef911fb8030bbfed418492e6c1c0eae2306a7","modified":1756384401135},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_layout/xiaoshu/header.styl","hash":"fb047e449d0a3f37f8beffc31af0ed9ffa2da9d3","modified":1756384401287},{"_id":"node_modules/hexo-theme-nexmoe/source/css/_layout/xiaoshu/content.styl","hash":"0e382da59dfe8bb1451b115e1c32f40ed126174f","modified":1756384401015},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/fancybox/fancybox.umd.js","hash":"f2126b3e96721606a2ba20e0f148404814262171","modified":1756384395782},{"_id":"node_modules/hexo-theme-nexmoe/demo/package-lock.json","hash":"37e07fd906a664c3706e684e8efcb4d86f31e3e9","modified":1756384398058},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/mdui_043tiny/mdui.css","hash":"1500b5d27b8ce2e7c543bb6d7205de43059378db","modified":1756384390040},{"_id":"node_modules/hexo-theme-nexmoe/source/lib/mdui_043tiny/mdui.js","hash":"5c0bced25b23773e764338ae4581f366f984cb6c","modified":1756384397391},{"_id":"node_modules/hexo-theme-kira/package.json","hash":"333d633efed64bef936e7f508580b57c71c4762c","modified":1761111819888},{"_id":"node_modules/hexo-theme-kira/languages/it.yml","hash":"708e1a520eebd468b9895fe5f80c79c1cdca0fc8","modified":1756385950335},{"_id":"node_modules/hexo-theme-kira/languages/default.yml","hash":"975a90fd111336055181085e3c27e6f67d41f68b","modified":1756385950264},{"_id":"node_modules/hexo-theme-kira/languages/en.yml","hash":"d3e7f13edbe8c6fcf1c18f679c8fa9f919941d5b","modified":1756385950299},{"_id":"node_modules/hexo-theme-kira/languages/ja.yml","hash":"2f848f022dd6eb70893dbf0d1f68440d487b285e","modified":1756385950366},{"_id":"node_modules/hexo-theme-kira/languages/zh-CN.yml","hash":"975a90fd111336055181085e3c27e6f67d41f68b","modified":1756385950401},{"_id":"node_modules/hexo-theme-kira/languages/zh-HK.yml","hash":"52c501d778ed22d242c0cd405db38c985dbccfce","modified":1756385950453},{"_id":"node_modules/hexo-theme-kira/languages/zh-TW.yml","hash":"52c501d778ed22d242c0cd405db38c985dbccfce","modified":1756385950629},{"_id":"node_modules/hexo-theme-kira/layout/friends.ejs","hash":"0702afdbfa01a4266a29f3e018928a3a4aedd16a","modified":1756385944886},{"_id":"node_modules/hexo-theme-kira/readme.md","hash":"a32af4ed2ed53d223ad5456a5e0a45b46972306a","modified":1756385948594},{"_id":"node_modules/hexo-theme-kira/layout/index.ejs","hash":"d7dd4eba4d8b4306f78e59b7f7b7142e5e9755f2","modified":1756385945498},{"_id":"node_modules/hexo-theme-kira/layout/archives.ejs","hash":"bc09ed31aea541e207edfa0dc1482f74ed6d8361","modified":1756385944352},{"_id":"node_modules/hexo-theme-kira/layout/_widget/archive.ejs","hash":"1b7927c453a4ba3bc91f57585d1c9a028f3a2634","modified":1756385944064},{"_id":"node_modules/hexo-theme-kira/layout/layout.ejs","hash":"155fc956d1d3f70b97b7415503328af5b6d8ffc9","modified":1758373361456},{"_id":"node_modules/hexo-theme-kira/layout/_widget/social.ejs","hash":"78ee34ba7813bc3cb9ac0155a251a7db5fc20668","modified":1756385946053},{"_id":"node_modules/hexo-theme-kira/layout/post.ejs","hash":"4ec75cf603d272ed094ea79c615cda56b861bdcb","modified":1756385945823},{"_id":"node_modules/hexo-theme-kira/layout/components/right-column.ejs","hash":"6db93a9722a5288f96ab16dd54783e187909657f","modified":1756385945876},{"_id":"node_modules/hexo-theme-kira/layout/components/friends.ejs","hash":"1833dafebc1997996b8c77d55683b1d97de2a71b","modified":1756385944762},{"_id":"node_modules/hexo-theme-kira/layout/components/copyright.ejs","hash":"7a6bf6be3cd1605c7974a33baf8b54a90a50b141","modified":1756385944666},{"_id":"node_modules/hexo-theme-kira/scripts/tag/biliplayer.js","hash":"573c7bd45e38c96c5cad922e23d19e1abd70fb7b","modified":1756385946755},{"_id":"node_modules/hexo-theme-kira/layout/components/header.ejs","hash":"c1e28f64f4ea8cbccb77bcb7ebd78a7bbecf2f94","modified":1756385945317},{"_id":"node_modules/hexo-theme-kira/layout/components/kira-image.ejs","hash":"3222ae7c8d79afc3cd5ed0f1e8ef1b51b3fdda36","modified":1756385945602},{"_id":"node_modules/hexo-theme-kira/scripts/tag/kira-player.js","hash":"cfbae6ff10abc986ea05044c536b6870f3c2a0f5","modified":1756385947762},{"_id":"node_modules/hexo-theme-kira/layout/_widget/category.ejs","hash":"249ecb1c70bcbb5dd792deb7ca597ece06497cac","modified":1756385944517},{"_id":"node_modules/hexo-theme-kira/scripts/tag/meting.js","hash":"9d9474ea97a789b3c1d7b1153c30475eca0967d9","modified":1756385948173},{"_id":"node_modules/hexo-theme-kira/scripts/utils/image_auto_lazyload.js","hash":"fef224ee29365821af9a0d4fe18f99665a65eb80","modified":1756385947572},{"_id":"node_modules/hexo-theme-kira/scripts/tag/codepen.js","hash":"8b871ebc448984b97559f07313845c384080ed0f","modified":1756385946863},{"_id":"node_modules/hexo-theme-kira/layout/components/sidebar.ejs","hash":"f3a34ba45e03f231a0acc2ca81214cbb61c80d7e","modified":1756385945977},{"_id":"node_modules/hexo-theme-kira/LICENSE","hash":"16401737d2489b2399c6bcb2274e8835bc21c2ec","modified":1756385940041},{"_id":"node_modules/hexo-theme-kira/source/css/archive.styl","hash":"014aeb1e8edee23ab191accde28b903094e0250a","modified":1756385948698},{"_id":"node_modules/hexo-theme-kira/layout/_widget/tagcloud.ejs","hash":"ae70b1e05f4b9e0bdc4bc4946aab9a2f04b62441","modified":1756385946206},{"_id":"node_modules/hexo-theme-kira/source/css/color.styl","hash":"de24fe89ea6609bedb10d6883813900613bc666c","modified":1756385948885},{"_id":"node_modules/hexo-theme-kira/source/css/article.styl","hash":"5d71b0348e8777d44fcac4dd1b42691bb60ca0a0","modified":1756385948767},{"_id":"node_modules/hexo-theme-kira/source/css/content.styl","hash":"f855d66a230c058d879afabe9440d6983228f75c","modified":1756385949073},{"_id":"node_modules/hexo-theme-kira/source/css/kira-code-copy.styl","hash":"0ec2c5bee6b740d1c470b1552b0489ce2752a43b","modified":1756385949103},{"_id":"node_modules/hexo-theme-kira/source/css/kira-friends.styl","hash":"174acae9379c2521e9658ee7a9cca78121efdb56","modified":1756385949156},{"_id":"node_modules/hexo-theme-kira/source/css/constants.styl","hash":"9882f6fdf8b0a840b461fe68b5a5781ac5f9a135","modified":1756385948973},{"_id":"node_modules/hexo-theme-kira/source/css/kira-image.styl","hash":"6012db7df3e0491f2469025b8e39e3542a389e00","modified":1756385949269},{"_id":"node_modules/hexo-theme-kira/source/css/right-column.styl","hash":"a50707cf85e00790344d1822ca6aaf3482e06e90","modified":1756385949510},{"_id":"node_modules/hexo-theme-kira/source/css/layout.styl","hash":"4638f0d7f257287e680ac67abd3241331a7f57c5","modified":1756385949351},{"_id":"node_modules/hexo-theme-kira/source/css/media.styl","hash":"24e882ac68cc8ae1bbcdd156192101c68859bdc7","modified":1756385949397},{"_id":"node_modules/hexo-theme-kira/layout/components/comments/gitalk.ejs","hash":"6ea24c937c1b38598323cae3f42c2a5e12d8fff0","modified":1756385945126},{"_id":"node_modules/hexo-theme-kira/source/js/kira-image.js","hash":"84aa358b87ca68af35b331fc1c807f68f8c22dd4","modified":1756385947754},{"_id":"node_modules/hexo-theme-kira/source/css/post.styl","hash":"30165070270d51377ab8a5b2bd6ee03d81c2ab26","modified":1756385949443},{"_id":"node_modules/hexo-theme-kira/source/lib/lazysizes.js","hash":"3d7d083ddd43da4fbc5af70d888ad2f39d7c5f9b","modified":1756385947906},{"_id":"node_modules/hexo-theme-kira/source/js/kira-code-copy.js","hash":"768b978c8bef776a5ac32b3c86df498b881f882b","modified":1756385947721},{"_id":"node_modules/hexo-theme-kira/source/css/sidebar.styl","hash":"172f73ad5a78d7976a3b0e8f69672270520002ff","modified":1756385949553},{"_id":"node_modules/hexo-theme-kira/layout/components/comments/giscus.ejs","hash":"2df2a6b98e5060d0c2dd2ef9bb2f6a690a747e16","modified":1756385945029},{"_id":"node_modules/hexo-theme-kira/source/deps/js/Meting.min.js","hash":"c9a7d747dfa8fe4d3fc7ddb096b0506f55ff1fd4","modified":1756385948295},{"_id":"node_modules/hexo-theme-kira/source/lib/smooth-scrolling.js","hash":"13c907c5a0df08f4a94be5ee2ca544b5a5a247ad","modified":1756385948401},{"_id":"node_modules/hexo-theme-kira/source/deps/js/APlayer.min.js","hash":"70c0c4a9bf698747b7c058c21287ad617355e5dd","modified":1756385946640},{"_id":"node_modules/hexo-theme-kira/source/deps/css/APlayer.min.css","hash":"7f4f8913f2d46ade2def5134e2cc8684a4b87939","modified":1756385940824},{"_id":"node_modules/hexo-theme-kira/source/lib/highlight/atom-one-dark.min.css","hash":"56dddcd32332b54853ba9eadba3c883f95f00275","modified":1756385941530},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/demo.css","hash":"53456972a11d52af67187fc17999e6665f9f06fe","modified":1756385942241},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.css","hash":"84918de2a2e36d051ee51c3ea17f5d6e601714da","modified":1756385942510},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/demo_index.html","hash":"65b9325f267371c9e5a07a7a3a224c5766d07c18","modified":1756385946344},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.js","hash":"72c1211ab8026e3f7419f05bf8860fac6e96fe65","modified":1756385947481},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.json","hash":"fccceb7956fd4f43c5ce1a18a100513ba353753c","modified":1756385948478},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.ttf","hash":"a066712350eb107bdfeb78130ec4ce58d3a29655","modified":1756385949603},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.woff","hash":"7938931f0d753453933c6c75ff1ff1d02b51c983","modified":1756385949688},{"_id":"node_modules/hexo-theme-kira/source/lib/iconfont/iconfont.woff2","hash":"47b0a99b271ef70b3663dab0d611e471db59a49b","modified":1756385949795},{"_id":"node_modules/hexo-theme-kira/source/lib/highlight/highlight.min.js","hash":"9b0794e07fb0b700c73032b6ea596d88b2bbe196","modified":1756385947405},{"_id":"node_modules/hexo-theme-kira/source/lib/mdui/mdui.min.js","hash":"003a814293e06d95d569b7ba7bb4d2eb2a774caa","modified":1756385948083},{"_id":"node_modules/hexo-theme-kira/source/lib/fonts/roboto/Roboto-Bold.woff2","hash":"9074123ec9d4d6a7e21c2bee3f0110ca9a73733d","modified":1756385949940},{"_id":"node_modules/hexo-theme-kira/source/lib/fonts/roboto/Roboto-Medium.woff2","hash":"9f358fd5f441565282b54e8dc072a7d68f71a2fc","modified":1756385950033},{"_id":"node_modules/hexo-theme-kira/source/lib/fonts/roboto/Roboto-Regular.woff2","hash":"a18bcf95ada923da31f176137b8add02b0ba60f3","modified":1756385950219},{"_id":"node_modules/hexo-theme-kira/source/lib/mdui/mdui.min.css","hash":"5b08b35be36d94907e2205c3ed221db03a1f7b69","modified":1756385943824},{"_id":"source/friends.md","hash":"c7bd7ad6c95d75c506b9ed8dd6355fdcf2ab35a6","modified":1756385483631},{"_id":"source/about.md","hash":"b607354747ace8fe31efff3d9fa3d6d49c91c482","modified":1762506990241},{"_id":"source/archive.md","hash":"00d3773d9b4a900f930fab0daa16a60e505470b1","modified":1756385483628},{"_id":"source/About-Kei/index.md","hash":"3787e5b137816efaa5c3ca0dd430a701d5ab5650","modified":1756450842271},{"_id":"source/pic/125349440_p0.png","hash":"731cb93b4cb2513938e5f7e7e2e49f613a4a8ee8","modified":1748400423311},{"_id":"source/pic/125981673_p0.png","hash":"2734031ed178567d5f3b16dfbac527b26db57e6c","modified":1751698164830},{"_id":"source/pic/101573594_p0.png","hash":"1c49ad11716ea306db3f43891b52882d8cd80c38","modified":1756435256108},{"_id":"source/_posts/aboutKei.md","hash":"3884d1d3ffd652c6acef0837b92a97e1fc97c09d","modified":1762407825354},{"_id":"source/_posts/PythonTips.md","hash":"040cb0485b2144e8eb0d5d2eb2166c21fe463a87","modified":1758857676105},{"_id":"source/_posts/JavaTips.md","hash":"674af3f5f6d566ca89e18e28cd29637a4ca925b0","modified":1758969066957},{"_id":"source/_posts/climb_stairs.md","hash":"f3189c54a960de340ab1ad25dc9f8598978ae678","modified":1758641125829},{"_id":"source/_posts/combined_sum.md","hash":"c78672ec845d0ea7416be1ff1842d2b10e641a3e","modified":1758682105105},{"_id":"source/_posts/fixed_length_slide_window_problem.md","hash":"95f24511ce5b70880f4517f8ade106c90f05a421","modified":1758641170714},{"_id":"source/_posts/machine_learning.md","hash":"a490c79c1513bd26056bbefba4280051362e4dbc","modified":1758374233325},{"_id":"source/assert/eg1.png","hash":"bf2b8957e8797d3c8ad2bbcfd04960992c1f9350","modified":1758208199923},{"_id":"source/assert/微信图片_20250914151010_28_9.png","hash":"e7cb1d02a730c9b6f0c7cc95de3b8910e80001ea","modified":1757833837664},{"_id":"source/_posts/binarySearch.md","hash":"ee48664a77b4efb698c16840f82b53f8d4a60b1a","modified":1761111830194},{"_id":"source/_posts/machine_learning_.md","hash":"ec0506c2a3dc4e530f2997a1171acceede0ec5e8","modified":1761111830241},{"_id":"source/assert/machine_learining/1.png","hash":"12c5005f680a9a51d12e7077fda130e2de55501f","modified":1758380544428},{"_id":"source/assert/machine_learining/3.png","hash":"90d8a82cfe8faaeb236d94bfedbef19c31d6f33a","modified":1758380586364},{"_id":"source/assert/machine_learining/2.png","hash":"af3c3ace8d185c8203782188ee77dd306ba35556","modified":1758380563527},{"_id":"source/assert/machine_learining/4.png","hash":"a1a60ba253e479410c5acb8b9c36a1b91d7e52a6","modified":1758380603885},{"_id":"source/_posts/android_develop.md","hash":"637f1edaebc42d427f60324810b3b4432d748524","modified":1762155450255},{"_id":"source/_posts/monotonic_stack.md","hash":"5f4ca2b4113afc8aafcb7853adb81beb4dd85b0b","modified":1758969027655},{"_id":"source/assert/algorithm/rainwatertrap2.png","hash":"a9bd3cf1afe5c94feac06ac55461da7e5f4ca010","modified":1758965101919},{"_id":"source/assert/algorithm/rainwatertrap.png","hash":"d6302d62734ddb20329b7b1f21447c4534c6bd26","modified":1758964954235},{"_id":"source/assert/rainwatertrap2.png","hash":"d6302d62734ddb20329b7b1f21447c4534c6bd26","modified":1758965058718},{"_id":"source/dataset/banking_partial.csv","hash":"2a8143ea579eadf2cd488e85b9d488344cac2adc","modified":1758778466428},{"_id":"source/_posts/bit_calculate.md","hash":"abeac713e361ebb902ce6fd84d911b951553c26b","modified":1761111830210},{"_id":"source/_posts/my_calendar_app.md","hash":"a3faae3242f4967c4eba55735dc4bf2317fde808","modified":1762781017024},{"_id":"node_modules/hexo-theme-next/LICENSE.md","hash":"68fc9a03d50fd4b5ea97092b05967d1819dea2c4","modified":1762781823542},{"_id":"node_modules/hexo-theme-next/README.md","hash":"6f1bf93dbccc8545872fe27b4693fda59cdbfb89","modified":1762781823547},{"_id":"node_modules/hexo-theme-next/package.json","hash":"f32bd16fff879fd8624fe34097390613a8caab69","modified":1762781823407},{"_id":"node_modules/hexo-theme-next/_vendors.yml","hash":"3a282d441261c607928c34bea71ccbf92f910a97","modified":1762781823857},{"_id":"node_modules/hexo-theme-next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1762781823411},{"_id":"node_modules/hexo-theme-next/_config.yml","hash":"9be7c9254da20280bccf46327a4fa2daf7e8cce3","modified":1762781823854},{"_id":"node_modules/hexo-theme-next/docs/AUTHORS.md","hash":"a648823121563c34a177ae91f5a774b5e29f01a0","modified":1762781823413},{"_id":"node_modules/hexo-theme-next/docs/LICENSE.txt","hash":"f5b14f791b7cfa1d16da981d929152e088a5d1b8","modified":1762781823852},{"_id":"node_modules/hexo-theme-next/languages/README.md","hash":"b2567e32805dda79601157351a07e5ca9fe01315","modified":1762781823546},{"_id":"node_modules/hexo-theme-next/languages/ar.yml","hash":"7d0f39e8684284a04bb9808521c87fecda8bd131","modified":1762781823858},{"_id":"node_modules/hexo-theme-next/languages/bn.yml","hash":"564bed75da6e05b11dce6164508f97a15e2fb6c2","modified":1762781823876},{"_id":"node_modules/hexo-theme-next/languages/de.yml","hash":"79b37df731c29665dee6cd7c90d278e1edfb6e24","modified":1762781823877},{"_id":"node_modules/hexo-theme-next/languages/en.yml","hash":"ba0fd79a2b1d8db01a034180556061745965ff05","modified":1762781823878},{"_id":"node_modules/hexo-theme-next/languages/es.yml","hash":"dffc63ef42e1266b88e0acf08994fd17a9908d53","modified":1762781823892},{"_id":"node_modules/hexo-theme-next/languages/fa.yml","hash":"f3ffc444599f4ac92d62e9ed00a1490ebc277d70","modified":1762781823894},{"_id":"node_modules/hexo-theme-next/languages/eo.yml","hash":"e34bb33ae827bf2f0727088599a73bc64bdad1b0","modified":1762781823879},{"_id":"node_modules/hexo-theme-next/languages/fr.yml","hash":"8ac44e58f71a38b7697a2f7f98a6971ed818cb5b","modified":1762781823895},{"_id":"node_modules/hexo-theme-next/languages/id.yml","hash":"929df147f4f17d638b07de5fe52ca13e2549ab1c","modified":1762781823897},{"_id":"node_modules/hexo-theme-next/languages/it.yml","hash":"16d716ecfd748def2f6486ef5a82d0ab7ceb4890","modified":1762781823898},{"_id":"node_modules/hexo-theme-next/languages/ko.yml","hash":"d345a303310c8a5f4836c3683f3580f861ebd1b4","modified":1762781823903},{"_id":"node_modules/hexo-theme-next/languages/pt-BR.yml","hash":"76b8576ce228d540a16b1f0af5af2cce20923194","modified":1762781823905},{"_id":"node_modules/hexo-theme-next/languages/pt.yml","hash":"b62faaa767a45a613dd042b5f1903675eb5a8cf9","modified":1762781823906},{"_id":"node_modules/hexo-theme-next/languages/ja.yml","hash":"543222bfc516aab6c33e8534f807972ecb8943a9","modified":1762781823899},{"_id":"node_modules/hexo-theme-next/languages/nl.yml","hash":"3cb3687696635ec71b4ca40c5fc43b56acc8843e","modified":1762781823904},{"_id":"node_modules/hexo-theme-next/languages/ru.yml","hash":"c6d8de0ff7d8148d09993257cfd3b7aca755696c","modified":1762781823908},{"_id":"node_modules/hexo-theme-next/languages/si.yml","hash":"2d712eedf3f60d04d36c3108cf5a12e2a52e875c","modified":1762781823912},{"_id":"node_modules/hexo-theme-next/languages/tk.yml","hash":"511726054873f6f8d7ce0d2e803f6731de0ddbe7","modified":1762781823914},{"_id":"node_modules/hexo-theme-next/languages/th.yml","hash":"6829e998b39f8f143e20b276bb1f62d95a29de58","modified":1762781823914},{"_id":"node_modules/hexo-theme-next/languages/tr.yml","hash":"a57e4ed089b893a95f5e1ecff17ce625165f4d46","modified":1762781823917},{"_id":"node_modules/hexo-theme-next/languages/vi.yml","hash":"7ebcba5e1128784195e4681dffc9d34c4e873fec","modified":1762781823920},{"_id":"node_modules/hexo-theme-next/languages/uk.yml","hash":"ff537047b4b4c3ca9a7b64fa7f428a9942751eeb","modified":1762781823919},{"_id":"node_modules/hexo-theme-next/languages/zh-CN.yml","hash":"741d7efe0262c9cdc2c648014b55599665d90f6b","modified":1762781823921},{"_id":"node_modules/hexo-theme-next/languages/zh-HK.yml","hash":"8eb6a9f231ce1bfa54cc54418ccf14f01dcc9a31","modified":1762781823922},{"_id":"node_modules/hexo-theme-next/languages/zh-TW.yml","hash":"5c0f00cdac3f4727b880dd223f622a535736fa8e","modified":1762781823924},{"_id":"node_modules/hexo-theme-next/layout/_layout.njk","hash":"b17d44bd7379c23241053a0b7fbd38c9c43cc239","modified":1762781823549},{"_id":"node_modules/hexo-theme-next/layout/archive.njk","hash":"d759f4d2cf5ddc6875ea250113a00662c1caf6d1","modified":1762781823552},{"_id":"node_modules/hexo-theme-next/layout/index.njk","hash":"dd63e488ae8cc144335a5958acedf6a16edd7a92","modified":1762781823609},{"_id":"node_modules/hexo-theme-next/layout/category.njk","hash":"c68b7343d0f8145010f93351908cc36ef6212ec1","modified":1762781823564},{"_id":"node_modules/hexo-theme-next/layout/page.njk","hash":"af6d7570621be760536c216a56d74e40a1cceae2","modified":1762781823629},{"_id":"node_modules/hexo-theme-next/layout/post.njk","hash":"0bfce9f133f501a9a4837257e3b862b3bbca15be","modified":1762781823647},{"_id":"node_modules/hexo-theme-next/layout/tag.njk","hash":"9e16ba20c28a7f2c6bc75aa427f48122301a30aa","modified":1762781823654},{"_id":"node_modules/hexo-theme-next/docs/ru/README.md","hash":"30e929e1138445534a6f46d64667c17273337acf","modified":1762781823543},{"_id":"node_modules/hexo-theme-next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"12a6631617695504d5cf2a94b57d87bd331bef6f","modified":1762781823539},{"_id":"node_modules/hexo-theme-next/docs/zh-CN/CONTRIBUTING.md","hash":"a089f7a8368ab0b7d7b9b7ec0ac3767a453435df","modified":1762781823541},{"_id":"node_modules/hexo-theme-next/docs/zh-CN/README.md","hash":"93064dbd1a461d55c7c07a04626294c8150b4d1b","modified":1762781823544},{"_id":"node_modules/hexo-theme-next/layout/_macro/post-collapse.njk","hash":"313637fe3569f98fd926e8cd0fcc75d098eb6e6e","modified":1762781823635},{"_id":"node_modules/hexo-theme-next/layout/_macro/post.njk","hash":"ec9bb9c5ede773c02f0c8d8475245a8a437a2b71","modified":1762781823646},{"_id":"node_modules/hexo-theme-next/layout/_macro/sidebar.njk","hash":"85f3a2ab22601a9606f2f630289db1363b98018f","modified":1762781823650},{"_id":"node_modules/hexo-theme-next/layout/_partials/comments.njk","hash":"390d6cc85dca43541bd957a8a35c72d75b37ca72","modified":1762781823576},{"_id":"node_modules/hexo-theme-next/layout/_partials/languages.njk","hash":"e43f22198cccb5f6e306b1ce0d28d12a4fb891f8","modified":1762781823613},{"_id":"node_modules/hexo-theme-next/layout/_partials/footer.njk","hash":"fbf8232cacf0df87e88e74860be66c9f86018302","modified":1762781823587},{"_id":"node_modules/hexo-theme-next/layout/_partials/pagination.njk","hash":"bc719473ed5948ab6859449d60b8d36cfc1542b4","modified":1762781823630},{"_id":"node_modules/hexo-theme-next/layout/_scripts/index.njk","hash":"2a7dfffebad19b67dc9e3b2a6b2986d0630ef930","modified":1762781823601},{"_id":"node_modules/hexo-theme-next/layout/_scripts/vendors.njk","hash":"7261e24287984853c8ef08cda8bbc80cacf9bd6f","modified":1762781823661},{"_id":"node_modules/hexo-theme-next/layout/_third-party/addtoany.njk","hash":"ef64c6bfb8540cd874701236b9be47db2496e98e","modified":1762781823550},{"_id":"node_modules/hexo-theme-next/layout/_third-party/fancybox.njk","hash":"844559f46e2ff1c8be234d5763703106e2072a7b","modified":1762781823581},{"_id":"node_modules/hexo-theme-next/layout/_partials/widgets.njk","hash":"d83fb59f02c5e6630a7770401a05c02f6f07358b","modified":1762781823663},{"_id":"node_modules/hexo-theme-next/layout/_third-party/index.njk","hash":"dfd7cdd6ba89f8c3deabc27726c7a350cadafd11","modified":1762781823604},{"_id":"node_modules/hexo-theme-next/layout/_third-party/pace.njk","hash":"d7ad5714079f7f65446f880baf14722435ca9061","modified":1762781823626},{"_id":"node_modules/hexo-theme-next/layout/_third-party/quicklink.njk","hash":"0efed71ed530447718c4ea5bbd5fc8695b0b0d5f","modified":1762781823647},{"_id":"node_modules/hexo-theme-next/scripts/events/index.js","hash":"bd9ea82376cd87df611ea3ae077875c7c595a3df","modified":1762781823275},{"_id":"node_modules/hexo-theme-next/scripts/filters/default-injects.js","hash":"872f01cb10e422a648ea505436532e776e92926b","modified":1762781823240},{"_id":"node_modules/hexo-theme-next/scripts/filters/locals.js","hash":"9eb5310664759931287dd28ea39165dfb67f12ed","modified":1762781823366},{"_id":"node_modules/hexo-theme-next/scripts/filters/minify.js","hash":"43db8690d67c7545c5f081dbdc2601a0b2a16c5a","modified":1762781823373},{"_id":"node_modules/hexo-theme-next/scripts/helpers/font.js","hash":"4c84d45daac86396edf656d2a8abe6e7583491ea","modified":1762781823255},{"_id":"node_modules/hexo-theme-next/scripts/filters/post.js","hash":"fdc8a0af90035e89c3fcb754a0eb189b8951a2bc","modified":1762781823389},{"_id":"node_modules/hexo-theme-next/scripts/helpers/engine.js","hash":"83235f2879567eb8686431c9554a4b99f14ab665","modified":1762781823248},{"_id":"node_modules/hexo-theme-next/scripts/helpers/navigation.js","hash":"78107021101553c3d23e89290f7530b60cf4aa86","modified":1762781823376},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-config.js","hash":"4bc2eb87f3fa26981652f517d1ab3f81de2ab89d","modified":1762781823378},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-paginator.js","hash":"e86c764b546e4fbb87970cabc4135a56f9ef9fe1","modified":1762781823380},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-url.js","hash":"6281d47c1de98eb38f3aa0f6df29bbb19d412173","modified":1762781823381},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-vendors.js","hash":"af3946a595f997eb43d9af87428e4898c9acbc82","modified":1762781823382},{"_id":"node_modules/hexo-theme-next/scripts/tags/button.js","hash":"c6ad2ed544fbb25ecb5d820c36e76302504271b7","modified":1762781823225},{"_id":"node_modules/hexo-theme-next/scripts/tags/caniuse.js","hash":"935a311142a409c1896b3ae3f01fe7a9e2db1134","modified":1762781823226},{"_id":"node_modules/hexo-theme-next/scripts/tags/center-quote.js","hash":"92c19d796bdb3320df9caea59bf52df7a95d9da9","modified":1762781823227},{"_id":"node_modules/hexo-theme-next/scripts/tags/group-pictures.js","hash":"f57f7e09eb6220f681fa8385082b0960502ce5c4","modified":1762781823271},{"_id":"node_modules/hexo-theme-next/scripts/tags/index.js","hash":"1f6aba7820f1fb58b61969485148db21846e1aa9","modified":1762781823277},{"_id":"node_modules/hexo-theme-next/scripts/tags/label.js","hash":"8a73348186113bae0a51ea2f891c1bb882fab05a","modified":1762781823288},{"_id":"node_modules/hexo-theme-next/scripts/tags/mermaid.js","hash":"7d7bbc4a9970bd4c5449bc71b94364a8ec61e5d2","modified":1762781823370},{"_id":"node_modules/hexo-theme-next/scripts/tags/link-grid.js","hash":"18a483c2d5afd701f6080ffdddf2d1321370336c","modified":1762781823361},{"_id":"node_modules/hexo-theme-next/scripts/tags/note.js","hash":"7b94ddb46b7d4b0fe815f2fbe4bd375f07f55363","modified":1762781823383},{"_id":"node_modules/hexo-theme-next/scripts/tags/pdf.js","hash":"344636b6fd7e27e8831c1e194039afc0d61931cd","modified":1762781823386},{"_id":"node_modules/hexo-theme-next/scripts/tags/video.js","hash":"2ee926448583be8f95af1f2884ae2c9c4830151d","modified":1762781823405},{"_id":"node_modules/hexo-theme-next/scripts/tags/tabs.js","hash":"0eabe51da40b4b13e16419c8fe02452d9a4fef73","modified":1762781823394},{"_id":"node_modules/hexo-theme-next/scripts/tags/wavedrom.js","hash":"b44dfeeb58b41945d469141787f3dbce4b117d08","modified":1762781823405},{"_id":"node_modules/hexo-theme-next/source/css/_mixins.styl","hash":"2424dd832db15a563c6c9dd10605b762392ba9de","modified":1762781823686},{"_id":"node_modules/hexo-theme-next/source/css/_colors.styl","hash":"26b7ee70a35327fc12a22dc7e67a73181dc94878","modified":1762781823670},{"_id":"node_modules/hexo-theme-next/source/css/noscript.styl","hash":"dadc81256afb127b77eac6763d5ee0ec9c77f0a3","modified":1762781823777},{"_id":"node_modules/hexo-theme-next/source/css/main.styl","hash":"921a58577f411cf4eb5cfd66db0a241f8f88578c","modified":1762781823762},{"_id":"node_modules/hexo-theme-next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1762781823664},{"_id":"node_modules/hexo-theme-next/source/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1762781823217},{"_id":"node_modules/hexo-theme-next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1762781823667},{"_id":"node_modules/hexo-theme-next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1762781823668},{"_id":"node_modules/hexo-theme-next/source/images/logo-algolia-nebula-blue-full.svg","hash":"a38c6d92b368bfc42c72ad799ad03f3274957065","modified":1762781823850},{"_id":"node_modules/hexo-theme-next/source/images/logo.svg","hash":"099e11ab995a2c8981427a85476d082609848c77","modified":1762781823851},{"_id":"node_modules/hexo-theme-next/source/js/bookmark.js","hash":"9ba4cceafd12c6d5ba8a6b986a046ef8319a7811","modified":1762781823224},{"_id":"node_modules/hexo-theme-next/source/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1762781823233},{"_id":"node_modules/hexo-theme-next/source/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1762781823234},{"_id":"node_modules/hexo-theme-next/source/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1762781823238},{"_id":"node_modules/hexo-theme-next/source/js/motion.js","hash":"6f751f5c9499a39d7c5e1d323db3260342dd9431","modified":1762781823374},{"_id":"node_modules/hexo-theme-next/source/js/next-boot.js","hash":"d434a2a8543fb09245eaf2bc6ca123435bfa4dbb","modified":1762781823377},{"_id":"node_modules/hexo-theme-next/source/js/pjax.js","hash":"694b271819aab37ce473b15db9e6aded971d82e5","modified":1762781823388},{"_id":"node_modules/hexo-theme-next/source/js/schedule.js","hash":"9c41a73ed3e8db8ca4cb53633b6f616279a5a7bd","modified":1762781823392},{"_id":"node_modules/hexo-theme-next/source/js/utils.js","hash":"6734719bb74e4d9818992b0e4a745c2a1aefd5e2","modified":1762781823400},{"_id":"node_modules/hexo-theme-next/source/js/sidebar.js","hash":"2ee359ae48273b01ba1e0768704524e08702c7eb","modified":1762781823393},{"_id":"node_modules/hexo-theme-next/layout/_partials/head/head-unique.njk","hash":"93c1d103d9d16581c944c51f3d0638f57c80ee41","modified":1762781823593},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/brand.njk","hash":"dd9c4c03e99dfde0dfb8edefcb2c933f2f560efc","modified":1762781823556},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/index.njk","hash":"650de421a8ce4cf685428ffbe0087ff84cbd1356","modified":1762781823597},{"_id":"node_modules/hexo-theme-next/layout/_partials/head/head.njk","hash":"5388b157bba4a40b9312f4a45c6678974ccf0837","modified":1762781823595},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/menu.njk","hash":"ee6fc2f111572d3eeab0a2fecbb2d6b3e37ab26b","modified":1762781823623},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/menu-item.njk","hash":"41a8b0cc16f60fa085cb719d07216d86b6bc4bf8","modified":1762781823622},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/sub-menu.njk","hash":"06480d8ec5f0b87eafd47f082f07968d7282dd5c","modified":1762781823653},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/breadcrumb.njk","hash":"89825e75cc45e9709fa6ba89883669eedaff6f46","modified":1762781823559},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/page-header.njk","hash":"7ed4f102a1825195cff8d7995bf9219f323a9034","modified":1762781823628},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/tags.njk","hash":"a18d1598e36cc72f2b0b24c3cc3c5990dfaa3254","modified":1762781823656},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/schedule.njk","hash":"0f4bc8e257da60f77c0c1738607b2bde55810684","modified":1762781823649},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-copyright.njk","hash":"bfff923526d6800218f08dba6ce0bbf5c17755fd","modified":1762781823636},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-followme.njk","hash":"c1e33b4889f75acc490af3c8bde0ec56c518ff41","modified":1762781823638},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-meta.njk","hash":"9fa47e4fb342811da590ee4adc91cf81118c0a39","modified":1762781823639},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/categories.njk","hash":"17156d99941f28a225951ffdcfa9a115e20dc2d2","modified":1762781823563},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-related.njk","hash":"e0986db00a0201dd3c60570f964829c84ba5bc68","modified":1762781823641},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-reward.njk","hash":"e8b8a7c41e9ec612d0c0c73419529d55d1c16256","modified":1762781823643},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-share.njk","hash":"16696990e4ce65fc8db18c4635082a5d5d06ff07","modified":1762781823644},{"_id":"node_modules/hexo-theme-next/layout/_partials/sidebar/site-overview.njk","hash":"bc5708e38b6070dff0cab6bf9480971017ce4dda","modified":1762781823652},{"_id":"node_modules/hexo-theme-next/layout/_partials/search/index.njk","hash":"6ad43135bd3aecf933ffdd750763e27ade36f97c","modified":1762781823599},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/baidu-analytics.njk","hash":"6215309aee028dcb734452beec448c5afb6c63fc","modified":1762781823553},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/cloudflare.njk","hash":"a5b8297c2c383124dd6a56e256ecc0c0dcf489be","modified":1762781823571},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/google-analytics.njk","hash":"d89066ff53879693f023e540d59c86137172c529","modified":1762781823589},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/growingio.njk","hash":"8afaa772c390bd9d53a5cff9645ac3168334eb98","modified":1762781823591},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/index.njk","hash":"f900306497b133e8b098bd9f4b96b93d1d96c185","modified":1762781823603},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/matomo.njk","hash":"4e89648a8ec8194c5823064cbca39c938a799006","modified":1762781823620},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/microsoft-clarity.njk","hash":"1efeeda00db08a3c033798228dd0092ee532cc36","modified":1762781823625},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/plausible.njk","hash":"ef9f2bb7110507f1c4336800af9157d5fa9765bd","modified":1762781823633},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/umami.njk","hash":"3343750682fbd8535e50f8129be3003ad26015b4","modified":1762781823658},{"_id":"node_modules/hexo-theme-next/layout/_third-party/chat/chatra.njk","hash":"d7263fca16d0278ccf1f6aa1c6df6902a6344a09","modified":1762781823569},{"_id":"node_modules/hexo-theme-next/layout/_third-party/chat/tidio.njk","hash":"02aab857c27fc103216029be991688b12a73a525","modified":1762781823657},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/changyan.njk","hash":"d1c950f8fbdf85e7a3eae5463767a89e858e8220","modified":1762781823567},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/disqus.njk","hash":"9375b19a89b7fa9474e558d085af5448d4c5c50c","modified":1762781823578},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/disqusjs.njk","hash":"0749cb6902baecdfd01f779a2a2513f6d2f6a823","modified":1762781823578},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/gitalk.njk","hash":"b63b7e2ede0d3e66e732fa1a06bda9b19e1e85d4","modified":1762781823588},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/isso.njk","hash":"64cc3bdaf644fd32c0d0a247f29f5b6904da9af3","modified":1762781823610},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/livere.njk","hash":"3b13b09fba84ec6000886890a6710736a2b8fafe","modified":1762781823616},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/utterances.njk","hash":"5a94032bc3512a10ad4328fc19ec07b819a1d687","modified":1762781823660},{"_id":"node_modules/hexo-theme-next/layout/_third-party/math/index.njk","hash":"abf37fc55aa86702118e8fdf5bf2d389dd589aa0","modified":1762781823605},{"_id":"node_modules/hexo-theme-next/layout/_third-party/math/katex.njk","hash":"1ebf658690468ea197bdd0416eb7cfa4bd0b083a","modified":1762781823612},{"_id":"node_modules/hexo-theme-next/layout/_third-party/math/mathjax.njk","hash":"3677017fd4572b158311f5f5d870590ab25184e0","modified":1762781823619},{"_id":"node_modules/hexo-theme-next/layout/_third-party/search/algolia-search.njk","hash":"41b28f05e6233fb37700f7151f55868be10a0965","modified":1762781823551},{"_id":"node_modules/hexo-theme-next/layout/_third-party/search/localsearch.njk","hash":"e45ea3542cdc9ed7ec8447b5e6f35df4c5e82758","modified":1762781823617},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/busuanzi-counter.njk","hash":"55c2468b2b7f035881d494085527d6554f37b556","modified":1762781823561},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/firestore.njk","hash":"d32ebe94560fa95824478ebbff531bffc47b194d","modified":1762781823585},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/index.njk","hash":"568ddf7955d11d93fb5e842b403a7ac8b1b7fdb1","modified":1762781823607},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/lean-analytics.njk","hash":"2446e748cdc102c78492216319ac02148db7daf6","modified":1762781823614},{"_id":"node_modules/hexo-theme-next/layout/_third-party/tags/mermaid.njk","hash":"099e031f52fb8e47b3af5b2684737efc9e643ee7","modified":1762781823624},{"_id":"node_modules/hexo-theme-next/layout/_third-party/tags/wavedrom.njk","hash":"02202bf563fb5eedde2ccad4d6c5b9109d30a703","modified":1762781823662},{"_id":"node_modules/hexo-theme-next/layout/_third-party/tags/pdf.njk","hash":"2c81984cc4f5123103460442f6e046f5b6c97127","modified":1762781823632},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/config.js","hash":"00af4f5f9a79eaccf051f9e372d233d65d44c8a5","modified":1762781823237},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/highlight.js","hash":"8a8f752260be5b8098393f9879b61ffe904465e8","modified":1762781823274},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/navigation.js","hash":"dd3562686d95a50375e6fd32e717ccb0d99c1e3d","modified":1762781823375},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/injects.js","hash":"d987709267a1bc6e5014411e9983d7c49c102c16","modified":1762781823278},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/vendors.js","hash":"e2b4a9d6b08155735ec336eedc506763d5671821","modified":1762781823404},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/utils.js","hash":"5942feb3f31ed3480bf50b0f5a4a305b5bdca3d6","modified":1762781823397},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/changyan.js","hash":"5dcaefacbcb9e99d87348d2f7158dbfb4d47b405","modified":1762781823228},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/common.js","hash":"19a402a225c31edffc50f202a14e0d582d3db23e","modified":1762781823236},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/default-config.js","hash":"93ee5f9109dad885dc38c49bcee630c10f9dce6e","modified":1762781823239},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/disqus.js","hash":"7f71d6b271ba65ff333d5682e7575711d368c0d2","modified":1762781823242},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/disqusjs.js","hash":"a600a98e7436edeb31e291abca359885567df3c9","modified":1762781823244},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/gitalk.js","hash":"7bb7dafdd7f6bca8464b54e17e552ce7f1714195","modified":1762781823257},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/isso.js","hash":"ff8b5b5145220a17d0ecd9508ba9bd2d3b2da47d","modified":1762781823280},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/livere.js","hash":"5a07d8bb52bc1d51a624ca8db54be144566c306b","modified":1762781823362},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/utterances.js","hash":"d3bded697bc32dace689d2a6dfb6eb7514169d15","modified":1762781823401},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Gemini.styl","hash":"96e0a7c2a65ce68215e17e369085b2ea2f1334f2","modified":1762781823713},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Mist.styl","hash":"2c800eaab6c613e5d091be2111aaa786641aa0c2","modified":1762781823771},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Muse.styl","hash":"879b49f693af0c04c285b2dd0c9cccaf77347b7c","modified":1762781823773},{"_id":"node_modules/hexo-theme-next/source/css/_variables/base.styl","hash":"b724edca546373d5eaf9b3602868f971c9094cf6","modified":1762781823699},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Pisces.styl","hash":"20d5c6aa136bbb55e03906d98ee90ad3fbaa80a7","modified":1762781823783},{"_id":"node_modules/hexo-theme-next/source/js/third-party/addtoany.js","hash":"a772605646dcfb67620a10ee8ef23c38a6d19d80","modified":1762781823219},{"_id":"node_modules/hexo-theme-next/source/js/third-party/fancybox.js","hash":"819f382c561fe5ec23c67cc5fabd63dd1cc22dc1","modified":1762781823251},{"_id":"node_modules/hexo-theme-next/source/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1762781823385},{"_id":"node_modules/hexo-theme-next/source/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1762781823391},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/back-to-top.styl","hash":"b8445c828d78a38e2de50bdc86b3bff66285ea0f","modified":1762781823695},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/index.styl","hash":"2298e521253b3bf376a2412271bc2a7d305051f3","modified":1762781823722},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/reading-progress.styl","hash":"90a86045a33c1bae49fc2f6fa1e1b53170c7f77b","modified":1762781823799},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/index.styl","hash":"8e34df131830d4fa3725e4590a672ba1cf1903e5","modified":1762781823739},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/mobile.styl","hash":"48b2dfc04df6409c6e0736ccc11462ad97d349b1","modified":1762781823772},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/base.styl","hash":"f316ba87f8d3299677fbf8345e1e993c35210e2e","modified":1762781823697},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/buttons.styl","hash":"a042571d85ff7265f799004239a45f36b716b8a6","modified":1762781823705},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/comments.styl","hash":"e4fecc889ba3317a64e9abba5842c79dff9b7827","modified":1762781823707},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/index.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1762781823747},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1762781823775},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/pagination.styl","hash":"f4228c759db4a650c8d38745c2edd1dc83c45687","modified":1762781823780},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tables.styl","hash":"e840b23d33023e6d45e018f6e84b683dd56efd8d","modified":1762781823827},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/toggles.styl","hash":"69c66aab4651e2e7ae9e65f08600144970648c60","modified":1762781823836},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_header.styl","hash":"dafc6d23c80d6fe3e55a7711e94210d2479b629a","modified":1762781823672},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_layout.styl","hash":"fa4fd8f76464e214fb7318f325b13c2b62f4b478","modified":1762781823677},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_menu.styl","hash":"f23c53e32d140091b819be2603d1afbbb5d66933","modified":1762781823682},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/index.styl","hash":"ab16a3dcdc0393b9b582ef59dcc13db9320e917c","modified":1762781823753},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_posts-expand.styl","hash":"485d23ccb42c0d0c8ead7ea8930dd3e06d79a285","modified":1762781823688},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_header.styl","hash":"3fbfab591f280e2e7f3b0265901c93bc4bd137ed","modified":1762781823673},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_layout.styl","hash":"6569a6640f79d247a8235b3914772c0e2f99ead2","modified":1762781823678},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_menu.styl","hash":"e31f6adbb22a451f07e4661cff9a2f12e4e99a36","modified":1762781823684},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_sidebar.styl","hash":"c29a827e82d2820ed8977c92994da73721200fac","modified":1762781823690},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1762781823754},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1762781823693},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Gemini/index.styl","hash":"bcbf498d8d3ecea84324f0a59b7f95f389a52b8d","modified":1762781823750},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_header.styl","hash":"dc03835e42d82eaf2633cf3b627990ad3e1f5967","modified":1762781823674},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_menu.styl","hash":"a03f16ffc7dfdbdc6053f9fd68d77257ba0c559e","modified":1762781823685},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_layout.styl","hash":"a92c4eb16bdb7806079467eb022ccf193bb0f794","modified":1762781823680},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_sidebar.styl","hash":"e792a6233e1d4dbc5fd2f10ae97b7a790b82568b","modified":1762781823691},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"778ed2ad5643b93970c95626b325defeb586733f","modified":1762781823694},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/index.styl","hash":"8000075b227749a7495eaf417cac6ccfbe441580","modified":1762781823756},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1762781823222},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/google-analytics.js","hash":"def07bcc7c17d8a0caad177fb1dd2f3a5e5b3536","modified":1762781823270},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/matomo.js","hash":"c6a25b26a1443caa70b47fd3dfa282271574deb5","modified":1762781823369},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1762781823273},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/changyan.js","hash":"6c65d5a585b7dd75e5f0fa6ef2dc85d0bcd1e58f","modified":1762781823231},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqus.js","hash":"3631db0315bdeaa420091a9febb6fa3421a2bdb4","modified":1762781823243},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqusjs.js","hash":"e01b42846ffcabc676c3bdd9d89e8cafc084e20b","modified":1762781823246},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/gitalk.js","hash":"03eb13679fc701c2ab91e502ccd26aacc37e7999","modified":1762781823268},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/isso.js","hash":"917d1a2bbae6cc8817ce37abc17800b1740b2517","modified":1762781823285},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/utterances.js","hash":"743f389fc5669e486c8804d7199a11542ff9bc11","modified":1762781823403},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/livere.js","hash":"e35e5a90a70a96117509368423726c6a56041ea2","modified":1762781823364},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1762781823232},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1762781823396},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1762781823287},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1762781823368},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/local-search.js","hash":"3968d972f47b79acc6c3fe44028bad77c9c5aab7","modified":1762781823365},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/algolia-search.js","hash":"6b3fa841e48d8637a33530dd48c8ab1ef317323c","modified":1762781823221},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/mermaid.js","hash":"ae1c0c6c079594936de1aea756eb58992f8fb0e0","modified":1762781823372},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/firestore.js","hash":"fec1c5c913237112b2cc6fb7d1e73b789bf508f8","modified":1762781823253},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/lean-analytics.js","hash":"171889aaab60704f87cfe9a05871f493ac292b47","modified":1762781823359},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/pdf.js","hash":"7e6ad201d2c9d682261209db5dba07e9608fb42a","modified":1762781823387},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/wavedrom.js","hash":"71efb52a4c44c64c2b17edd4638d54ec884bd4c7","modified":1762781823407},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/breadcrumb.styl","hash":"8afdc311c6b8db121758371f95cf1c5e77354f42","modified":1762781823704},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/categories.styl","hash":"51a97a33879289904cb523ddc2d88b5b0c60fa72","modified":1762781823706},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/tag-cloud.styl","hash":"6f8756d59b084316e82772d581fef713233a1605","modified":1762781823832},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/index.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1762781823727},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/schedule.styl","hash":"6b816c2511242ee503fb5f34cd3e4dcdafc06b85","modified":1762781823802},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/gitalk.styl","hash":"3f5d145613948dbe117f10a00a375b049470d361","modified":1762781823714},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/disqusjs.styl","hash":"6b934c14c9455f6d81219630d9b28d3d10c74ab7","modified":1762781823711},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/index.styl","hash":"54d12e2c5d9982f7b9e5b23be5133954a8514e9d","modified":1762781823731},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/search.styl","hash":"6083df88f6112fadcd038e85ce4d502a0ea1dfca","modified":1762781823804},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/math.styl","hash":"9d995eb4871a6c273d9d51558676a1fdabf69e72","modified":1762781823763},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/utterances.styl","hash":"56d90ae0559caa55b75f3c300ff2711f9ed65fc4","modified":1762781823837},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/index.styl","hash":"098d4bd034e986fcf7e443eac4fc2193935461b7","modified":1762781823729},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-body.styl","hash":"a2e977137892d4fa234ef5fdc6a92926d259b19d","modified":1762781823785},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-collapse.styl","hash":"809bab3414b1eb1ae44444eb821126868f764414","modified":1762781823786},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-footer.styl","hash":"bb089299f87793bd5eff80c6375d4e796367b67b","modified":1762781823789},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-gallery.styl","hash":"aa366d37389760c8595529b850f461569577a1c5","modified":1762781823791},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-followme.styl","hash":"026cd5735fd2a75bb60b7bf8bd09139583d602b9","modified":1762781823788},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-header.styl","hash":"424de4f64b12c521e8c6bfbc711d7961490ab36e","modified":1762781823792},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-reward.styl","hash":"b47fb36915962309553ff7fb1782341585ed2b76","modified":1762781823796},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-nav.styl","hash":"9ac6f477177264c26a46e8333b8456720a0444dc","modified":1762781823794},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-widgets.styl","hash":"ebfba158a0a4af3d1dabcacbc58986664de52140","modified":1762781823798},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/index.styl","hash":"21acb11e397526132605eef23bde7b307aa1eab5","modified":1762781823741},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/footer/index.styl","hash":"4e967702cf4c637132346bc74ec8854426f1a68c","modified":1762781823736},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/related-posts.styl","hash":"b05908f04ef95f2d91e6eba89b12411c378d050f","modified":1762781823800},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"0847400d8579b0a2dd1bf662c78954c10adf2680","modified":1762781823805},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"5b38ac4a0f1ade0e681aff0e3366c481d9cf3dcd","modified":1762781823806},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"ce36bf1602233298e0351b4babc592315529eb26","modified":1762781823807},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"46eece42510c2c89bb9209afb0262ad76a4b0b36","modified":1762781823809},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"24752d145c6fb8f5344dca9c7b9640839c02e009","modified":1762781823812},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-copyright.styl","hash":"56805b77fe236fac19e19c716a49363bcf986311","modified":1762781823811},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"c2e354a565c8c1b32bd0ceacc972b17982758b67","modified":1762781823815},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"741566d6ac5f852b5c8dee6a8996b65e48e7c97f","modified":1762781823816},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/site-state.styl","hash":"26dd0adfcb1db6df29c6090c8d7e9b5a43583fb0","modified":1762781823825},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/bookmark.styl","hash":"e74f4bb47a101b014ee2a1783c87f3b87323f9a0","modified":1762781823702},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/index.styl","hash":"6e0d0796ef7fbbb62ffdfb448753a850de82c74f","modified":1762781823737},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/menu.styl","hash":"a3dd3edea9c01b66b28a8367185269b9dcc3bdee","modified":1762781823767},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/site-meta.styl","hash":"a851e9d5aefcd027c95eeb323860b6da70f202d1","modified":1762781823821},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/site-nav.styl","hash":"bf3ad8b4268f763a1e26377681644887694bc009","modified":1762781823823},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/github-banner.styl","hash":"38c64c2d04e46848382bfa246a0e9c508294767b","modified":1762781823719},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/highlight/fold.styl","hash":"42a0b65491ad85438596b3fe0b7f23973e4cef34","modified":1762781823712},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"5c31f3a86e4e6fbf2f8419415620461fa8a63c56","modified":1762781823709},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/highlight/index.styl","hash":"cfc3485b3ec87c2a6618fc8a4819ba643e68c530","modified":1762781823744},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"393ff96234e4196b569d4b11496774eb78e147de","modified":1762781823720},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/index.styl","hash":"22cd37bd5df9972d5074710896aba4424ad5161c","modified":1762781823748},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"d6418fd2bbfba7b73ddf11ec62db9637fdf5d8af","modified":1762781823700},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/link-grid.styl","hash":"49329a7144f3413d1c832e52a1f4954171ef11e1","modified":1762781823760},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/label.styl","hash":"debee14539272fbe3835a7d3853af2230baa3501","modified":1762781823757},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/mermaid.styl","hash":"48d35dba575a7c9e8845b16652e76b7d4a4646de","modified":1762781823769},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/note.styl","hash":"c00b45fe426d9f494650c082c9022ba14a44e37f","modified":1762781823778},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/pdf.styl","hash":"b6654a1d7cf82577d8263faffee8af3ad4a5c0e8","modified":1762781823781},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/tabs.styl","hash":"c3be8b0738f693e750486bb71769c3dbbec174cc","modified":1762781823829},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/wavedrom.styl","hash":"af113411ad9cca7674177be36af8dd399680834d","modified":1762781823848}],"Category":[{"name":"算法笔记","_id":"cmfwpg9v10000ugtlbce15dne"},{"name":"编程语言","_id":"cmg22ta0b0001wotl6ge6ge9d"},{"name":"项目开发","_id":"cmg22ta0j0004wotlg4lnacog"}],"Data":[],"Page":[{"title":"我的朋友","layout":"friends","_content":"\n## 我的朋友\n","source":"friends.md","raw":"---\ntitle: 我的朋友\nlayout: friends\n---\n\n## 我的朋友\n","date":"2025-08-28T12:51:23.631Z","updated":"2025-08-28T12:51:23.631Z","path":"friends.html","comments":1,"_id":"cmewhimqd0000u4tla9s18h1z","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h2><span id=\"%E6%88%91%E7%9A%84%E6%9C%8B%E5%8F%8B\">我的朋友</span></h2></body></html>","excerpt":"","more":"<h2 id=\"我的朋友\"><a href=\"#我的朋友\" class=\"headerlink\" title=\"我的朋友\"></a>我的朋友</h2>"},{"title":"文章归档","layout":"archives","_content":"","source":"archive.md","raw":"---\ntitle: 文章归档\nlayout: archives\n---\n","date":"2025-08-28T12:51:23.628Z","updated":"2025-08-28T12:51:23.628Z","path":"archive.html","comments":1,"_id":"cmewhimqh0001u4tl112f0vou","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body></body></html>","excerpt":"","more":""},{"title":"关于本人","layout":"about","_content":"\n## 自我介绍\n我是***Kei***，软件工程大三在读\\~**喵**\n\n如果你问我现在在做什么，请调用`random(写程序，看动漫，打游戏)`\\~**喵**\n","source":"about.md","raw":"---\ntitle: 关于本人\nlayout: about\n---\n\n## 自我介绍\n我是***Kei***，软件工程大三在读\\~**喵**\n\n如果你问我现在在做什么，请调用`random(写程序，看动漫，打游戏)`\\~**喵**\n","date":"2025-11-07T09:16:30.241Z","updated":"2025-11-07T09:16:30.241Z","path":"about.html","_id":"cmewhimqi0003u4tl4atj5kog","comments":1,"content":"<h2 id=\"自我介绍\">自我介绍</h2>\n<p>我是<em><strong>Kei</strong></em>，软件工程大三在读~<strong>喵</strong></p>\n<p>如果你问我现在在做什么，请调用<code>random(写程序，看动漫，打游戏)</code>~<strong>喵</strong></p>\n","excerpt":"","more":"<h2 id=\"自我介绍\">自我介绍</h2>\n<p>我是<em><strong>Kei</strong></em>，软件工程大三在读~<strong>喵</strong></p>\n<p>如果你问我现在在做什么，请调用<code>random(写程序，看动漫，打游戏)</code>~<strong>喵</strong></p>\n"}],"Post":[{"title":"test","date":"2025-08-27T15:40:50.000Z","_content":"","source":"_posts/test.md","raw":"---\ntitle: test\ndate: 2025-08-27 23:40:50\ntags:\n---\n","slug":"test","published":1,"updated":"2025-10-22T05:43:50.241Z","_id":"cmeu56jwd00015ktlb5y9ei7b","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body></body></html>","excerpt":"","more":""},{"title":"About Kei","date":"2025-08-29T07:00:42.000Z","_content":"\n我是Kei，软件工程大三在读~喵\n你问我在干什么？\n当然是random(写代码，打游戏，看动漫)啦\n想躺平~喵","source":"_posts/aboutKei.md","raw":"---\ntitle: About Kei\ndate: 2025-08-29 15:00:42\ntags: txt\n---\n\n我是Kei，软件工程大三在读~喵\n你问我在干什么？\n当然是random(写代码，打游戏，看动漫)啦\n想躺平~喵","slug":"aboutKei","published":1,"updated":"2025-11-06T05:43:45.354Z","_id":"cmewhlst20000c0tl6a4l66i8","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><p>我是Kei，软件工程大三在读<del>喵<br>你问我在干什么？<br>当然是random(写代码，打游戏，看动漫)啦<br>想躺平</del>喵</p>\n</body></html>","excerpt":"","more":"<p>我是Kei，软件工程大三在读<del>喵<br>你问我在干什么？<br>当然是random(写代码，打游戏，看动漫)啦<br>想躺平</del>喵</p>\n"},{"title":"Java笔记(持续更新...)","date":"2025-09-03T13:45:00.000Z","cover":"https://kei-blog.oss-cn-beijing.aliyuncs.com/asset/115945063_p0-cut.jpg","_content":"\n\n# Java 笔记\n---\n## 目录\n\n> [静态变量、静态方法](#静态变量静态方法)\n> [继承](#继承)\n> [多态](#多态)\n> [final关键字](#final-关键字)\n> [设计模式](#设计模式)\n> [枚举类](#枚举类)\n> [抽象类](#抽象类)\n> [接口](#接口)\n> [代码块](#代码块)\n> [内部类](#内部类)\n> [函数式编程](#函数式编程)\n> [常用API](#常用api)\n> [GUI编程](#gui编程)\n\n\n---\n## 静态变量、静态方法\n\n[返回目录](#目录)\n\n### 定义\n1. **静态变量（类变量）**：属于类，只加载一份，可以被类和类的全部对象访问\n2. **实例变量（对象变量）**：属于对象，每个对象有自己一份\n3. **静态方法（类方法）**：属于类，只能访问静态变量，不能访问实例变量\n4. **实例方法（对象方法）**：属于对象\n\n### 应用\n1. **静态变量**的应用实例: 记录对象的创建数量\n2. **静态方法**应用实例：对于只需要完成某个功能，而不需要直接访问对象的数据的方法，可以使用静态方法\n~~~java\npublic class Student {\n    // 静态变量（类变量）：属于类，只加载一份，可以被类和类的全部对象访问\n    static String schoolName;\n    // 实例变量（对象变量）：属于对象，每个对象有自己一份\n    String name;\n    // 静态变量的应用实例: 记录对象的创建数量\n    static Integer count = 0 ;\n\n\n    public Student(String name){\n        this.name = name;\n        // 同一个类中，访问静态变量，类名可以不写\n        count++;\n    }\n\n    public Student(){\n        count++;\n    }\n\n    // 静态方法（类方法）：属于类，只能访问静态变量，不能访问实例变量\n    // 静态方法应用实例：对于只需要完成某个功能，而不需要直接访问对象的数据的方法，可以使用静态方法\n    public static void printHelloWorld(){\n        System.out.println(\"Hello World\");\n    }\n\n    // 实例方法（对象方法）：属于对象\n    public void printName(){\n        System.out.println(name);\n    }\n\n}\n~~~\n\n### 注意事项\n1. **静态方法**可以直接访问**静态变量**，不能直接访问**实例变量**\n2. **实例方法**既可以直接访问**静态变量**，也可以直接访问**实例变量**\n3. **静态方法**不能使用`this`关键字（不属于对象，自然不可以用`this`）\n\n### 访问方式\n1. **静态变量**访问方式：**类名**.静态成员变量名<font color=red>（推荐方式）</font>\n2. **静态变量**访问方式：**对象名**.静态成员变量名（不推荐）\n3. **静态方法**访问方式：**类名**.静态方法名\n\n## 继承\n\n[返回目录](#目录)\n\n### 子类构造器的特点\n1. 子类的全部构造器，都会先调用父类的构造器，再调用自己的构造器\n2. 默认情况下，子类构造器的第一行都是`super();`(**写不写都有**)调用父类构造器，可自行指定有参还是无参\n\n### 兄弟构造器\n1. 构造器中可以使用`this(参数);`调用兄弟构造器，可用于为某个参数赋予默认值\n2. `super();`和`this();`必须写在构造器的**第一行**，并且**不能同时使用**\n\n## 多态\n\n[返回目录](#目录)\n\n### 认识多态\n1. 多态是在**继承/实现**情况下的一种现象，表现为**对象多态、行为多态**\n```java\npublic class main {\n    public static void main(String[] args) {\n        // 对象多态\n        Animal wolf = new Wolf();\n        Animal dog = new Dog();\n\n        // 行为多态\n        wolf.run();\n        System.out.println(wolf.name);\n        dog.run();\n        System.out.println(dog.name);\n\n        // 多态的好处2：定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强\n        goRun(wolf);\n        goRun(dog);\n\n        // 强制类型转换，解决多态下无法调用子类独有方法的问题\n        // 注意：对象的真实类型与强制转换的类型不同，会导致ClassCastException异常\n        Wolf newWolf = (Wolf)wolf;\n        Dog newDog = (Dog)dog;\n        newWolf.howl();\n        newDog.bark();\n\n        // instanceof 判断对象是否是某个类的实例\n        if(wolf instanceof Dog){\n            Dog newNewDog = (Dog)wolf;\n        } else if(wolf instanceof Wolf){\n            Wolf newNewWolf = (Wolf)wolf;\n        }\n\n    }\n\n    // 多态的好处2：定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强\n    public static void goRun(Animal animal){\n        animal.run();\n    }\n}\n\npublic class Animal {\n    String name = \"animal\";\n    public void run(){\n        System.out.println(\"running\");\n    }\n}\n\npublic class Dog extends Animal{\n    String name = \"Dog\";\n    @Override\n    public void run()\n    {\n        System.out.println(\"Dog is running\");\n    }\n\n    // 多态无法调用子类独有的方法\n    public void bark()\n    {\n        System.out.println(\"Dog is barking\");\n    }\n}\n\npublic class Wolf extends Animal{\n    String name = \"Wolf\";\n    @Override\n    public void run()\n    {\n        System.out.println(\"Wolf is running\");\n    }\n\n    // 多态无法调用子类独有的方法\n    public void howl()\n    {\n        System.out.println(\"Wolf is howling\");\n    }\n}\n```\n2. `run()`方法：编译看左`Animal`，运行看右`Dog/Wolf`\n3. `name`属性：编译看左`Animal`，运行看也左`Animal`\n\n### 多态的特性\n1. 多态模式下，右边的对象是解耦合的，便于拓展和维护\n2. 定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强\n3. 多态模式下，无法调用子类独有的方法\n4. 多态模式下，强制类型转换成子类对象，此时可以调用子类独有的方法\n5. 对象的真实类型与强制转换的类型不同，会导致`ClassCastException`异常\n6. `instanceof` 判断对象是否是某个类的实例，强制类型转换之前可以检查是否是某个类的实例\n\n## final 关键字\n\n[返回目录](#目录)\n\n### 基本概念\n1. `final` 关键字修饰类：表示该类不能被继承，称为**最终类**\n2. `final` 关键字修饰方法：表示该方法不能被重写，称为**最终方法**\n3. `final` 关键字修饰变量：表示该变量有且仅能赋值一次\n\n### 使用场景\n1. 使用`final`修饰**静态变量**，可以声明一个**常量**，通常作为系统配置信息，不再修改(常量通常全大写，多个单词用下划线连接，如`MAX_SIZE`)\n2. 使用`final`修饰**基本变量**，变量储存的**数据**不能改变\n3. 使用`final`修饰**引用变量**(类对象、数组对象)，变量存储的**地址**不能改变，但对象内部数据可以改变\n\n## 设计模式\n\n[返回目录](#目录)\n\n### 单例设计模式\n#### 作用\n确保某个类只创建一个对象\n\n#### 实现方式\n##### 饿汉式单例--用对象之前已创建完毕\n1. 将类的构造器私有\n2. 定义一个类变量记住一个对象\n3. 定义一个类方法获取对象\n\n~~~java\n// 饿汉式单例\npublic class A {\n    // 1. 私有化构造器：确保单例类对外不能创建对象\n    private A(){\n    }\n\n    // 2. 创建静态成员变量记住唯一的一个实例\n    private static final A a = new A();\n\n    // 3. 创建静态方法，返回唯一实例\n    public static A getInstance(){\n        return a;\n    }\n}\n~~~\n\n##### 懒汉式单例--用对象时才创建对象\n\n~~~java\n// 懒汉式单例\npublic class B {\n    // 私有化构造器\n    private B(){}\n\n    // 静态变量记住唯一实例\n    private static B b;\n\n    // 静态方法获取唯一实例\n    public static B getInstance(){\n        if(b == null){\n            b = new B();\n        }\n        return b;\n    }\n}\n~~~\n\n---\n### 模板方法设计模式\n#### 基本概念\n提供一个方法作为完成某类功能的模板，模板方法封装了每个实现步骤，但允许子类提供特定步骤的实现\n#### 实现方式\n1. 定义模板方法，把共同实现步骤放进去\n2. 定义抽象方法，交给具体的子类完成\n3. 建议使用`final`修饰模板方法，防止被重写\n\n~~~java\npublic abstract class People {\n    // 模板方法设计模式\n    public final void write(){\n        System.out.println(\"重复部分代码\");\n        // 模板方法知道子类一定要重写的部分\n        // 使用抽象方法来实现重写部分\n        writeMain();\n\n        System.out.println(\"重复部分代码\");\n    }\n\n    // 定义一个抽象方法，子类必须实现\n    public abstract void writeMain();\n}\n\npublic class Student extends People{\n\n    @Override\n    public void writeMain() {\n        System.out.println(\"学生写代码\");\n    }\n}\n\npublic class Teacher extends People{\n    @Override\n    public void writeMain() {\n        System.out.println(\"老师写代码\");\n    }\n}\n~~~\n\n## 枚举类\n[返回目录](#目录)\n\n### 特点\n1. 枚举类都是最终类，不能被继承，都继承自`java.lang.Enum`\n2. 枚举类第一行只能罗列一些名称，这些名称是常量，每个常量会记住枚举类的一个对象\n3. 枚举类的构造器都是私有的，不能对外创建对象\n~~~java\n// 反编译后的枚举类结构\npublic final class com.kei.enumDemo.A extends java.lang.Enum<com.kei.enumDemo.A> {\n  public static final com.kei.enumDemo.A X;\n  public static final com.kei.enumDemo.A Y;\n  public static final com.kei.enumDemo.A Z;\n  public static com.kei.enumDemo.A[] values();\n  public static com.kei.enumDemo.A valueOf(java.lang.String);\n  static {};\n}\n~~~\n\n### Api\n1. `name()`：返回枚举常量的名称\n2. `ordinal()`：返回枚举常量的索引，索引从0开始\n\n### 使用场景\n1. 枚举类一般用于信息分类和标志\n2. 枚举类作为形参可以约束传入参数\n\n\n## 抽象类\n[返回目录](#目录)\n### 抽象类和抽象方法\n1. 抽象类：抽象类不能实例化对象，只能被继承\n2. 抽象方法：抽象方法没有方法体，方法体由子类实现\n\n## 接口\n[返回目录](#目录)\n### 基本概念\n`interface` 关键字定义接口\n1. 定义常量，接口中的常量public static final 可以不写，默认是public static final\n2. 定义抽象方法，接口中的抽象方法public abstract 可以不写，默认是public abstract\n3. 接口不能实例化对象\n4. 接口可以被实现类通过`implements`关键字**实现**，一个类只能**继承**一个父类，但可以**实现**多个接口\n5. 实现类必须实现所有接口中的抽象方法，否则必须声明抽象类\n\n### 接口的好处\n1. 解决了单继承的不足，使类的角色更多\n2. 面相接口编程，进一步解耦合\n\n### JDK8 新特性\n1. 默认方法：使用`default`关键字定义，默认被`public`修饰，只能由接口实现类对象调用，实际上是对象（实例）方法\n2. 私有方法：使用`private`关键字定义，只能由接口内部其他实例调用，不能被继承\n3. 静态方法：使用`static`关键字定义，默认被`public`修饰，只能由接口名称调用，实际上是类方法\n\n### 注意事项\n1. 多继承：**接口**可以继承多个**接口**\n2. 多实现：**接口**可以被多个**类**实现\n3. 一个接口继承多个接口时，若存在签名冲突，则不支持多继承和多实现\n4. 一个接口继承多个接口时，若存在同名默认方法，重写该方法可以不冲突\n5. 一个类继承了父类，同时实现了接口，若有同名方法，则父类方法优先\n6. 一个类继承了父类，同时实现了接口，若有同名方法，可通过`接口名.super.接口方法()`调用接口方法\n\n\n## 代码块\n\n[返回目录](#目录)\n\n### 静态代码块\n**格式**：`static{ }`\n**特点**：**类**加载时自动执行，只执行一次\n**作用**：完成**类**的初始化，静态变量的初始化赋值\n\n### 实例代码块\n**格式**：`{ }`\n**特点**：**对象**创建时自动执行，每次创建对象都会执行\n**作用**：完成**对象**的初始化，实例变量的初始化赋值\n\n## 内部类\n\n[返回目录](#目录)\n\n### 基本概念\n当一个类定义在另一个类的内部，这个类就是内部类\n当一个类的内部，包含一个完整的事物，且这个事物没必要单独设计，这个类可以被设计为内部类\n\n### 成员内部类\n1. 定义在外部类内，无`static`修饰，属于**外部类对象持有**的\n2. 创建内部类对象的语法：`外部类名.内部类名 对象名 = new 外部类对象().new 内部类名()`\n3. 成员内部类可以直接访问外部类**静态成员**，也可以访问外部类**实例成员**（成员内部类寄生于外部类对象）\n4. 成员内部类可以通过`外部类名.this`访问外部类对象\n\n### 静态内部类\n1. 定义在外部类内，有`static`修饰，属于**外部类持有**的\n2. 创建内部类对象的语法：`外部类名.内部类名 对象名 = new 外部类名.内部类名()`\n3. 静态内部类可以直接访问外部类**静态成员**，不能访问外部类**实例成员**\n\n### 匿名内部类\n1. 匿名内部类是一种特殊的局部内部类，不需要声明类名，默认有一个隐藏的名称\n2. 匿名内部类本质是一个子类，并且会立即创建一个子类对象，编译后会生成一个 `类名$编号.class` 文件\n~~~java\nnew 类或接口(参数){\n    类体（一般是方法重写）\n}\n~~~\n3. 用于更方便创建子类\n\n## 函数式编程\n\n[返回目录](#目录)\n\n### Lambda 表达式\n1. 语法：`(参数列表) -> {方法体}`\n2. 函数式接口：只有一个抽象方法的接口\n3. 可以简化函数式接口的匿名内部类\n\n### 静态方法引用\n1. 格式：`类名::静态方法名`\n2. 如果一个Lambda表达式里只调用一个静态方法，并且`->`前后的参数的形式一致，则可以使用静态方法引用\n\n### 实例方法引用\n1. 语法：`对象::实例方法名`\n2. 如果一个Lambda表达式里只调用一个实例方法，并且`->`前后的参数的形式一致，则可以使用实例方法引用\n\n### 特定类型方法引用\n1. 语法：`特定类名::实例方法名`\n2. 如果某个Lambda表达式里只是调用一个特定类型的实例方法，并且前面参数列表的第一个参数作为方法的主调，后面所有参数都是作为实例方法的入参，则可以使用特定类型方法引用\n\n~~~java\npublic class Main2 {\n    public static void main(String[] args) {\n        // 需求：一个英文人名数组，按字母升序排序\n        String[] names = {\"Tom\", \"Jerry\", \"Mike\", \"Mary\", \"Smith\", \"Kate\", \"tom\", \"jam\", \"milk\"};\n\n        // 排序\n        Arrays.sort(names);\n        // 忽略首字母大小写\n        Arrays.sort(names, new Comparator<String>() {\n            @Override\n            public int compare(String o1, String o2) {\n                // compareToIgnoreCase(): 忽略大小写\n                return o1.compareToIgnoreCase(o2);\n            }\n        });\n\n        // Lambda 表达式\n        Arrays.sort(names, (o1, o2) -> o1.compareToIgnoreCase(o2));\n\n        // 特定的方法引用：类名::方法名\n        Arrays.sort(names, String::compareToIgnoreCase);\n\n        System.out.println(Arrays.toString(names));\n\n    }\n}\n~~~\n\n### 构造器引用\n1. 语法：`类名::new`\n2. 如果某个Lambda表达式里只是在创建对象，并且`->`前后的参数形式一致，则可以使用构造器引用\n\n~~~java\npublic class Main3 {\n    public static void main(String[] args) {\n        CarFactory factory = new CarFactory() {\n            @Override\n            public Car create(String name) {\n                return new Car(name);\n            }\n        };\n        // Lambda 表达式\n        CarFactory factory2 = (name) -> new Car(name);\n\n        // 构造器引用\n        CarFactory factory3 = Car::new;\n    }\n\n}\n\n@FunctionalInterface\ninterface CarFactory {\n    Car create(String name);\n}\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\nclass Car{\n    private String name;\n}\n~~~\n\n## 常用API\n\n[返回目录](#目录)\n\n> [String](#string)\n> [ArrayList](#arraylist)\n\n### String\n#### 创建字符串\n1. **方式一**：`String str = \"hello world\";`\n2. 方式二：调用构造器创建字符串对象\n   1. `String str = new String();` 创建一个空字符串对象\n   2. `String str = new String(\"hello world\");` 创建一个字符串对象\n   3. `String str = new String(char[] value);` 根据字符数组创建一个字符串对象\n   4. `String str = new String(byte[] value);` 根据字节数组创建一个字符串对象\n3. 方式一存放在**常量池**中，且相同的字符串对象只创建一个\n4. 方式二存放在**堆**中，且相同内容可以创建多个对象\n\n#### 处理字符串\n| 方法 | 作用 |\n| --- | --- |\n|`int length()`|获取字符串长度|\n|`boolean equals(Object obj)`|字符串内容比较（`==`比较的是字符串地址！）|\n|`char charAt(int index)`|获取索引处的字符|\n|`char[] toCharArray()`|转换成字符数组|\n|`boolean equalsIgnoreCase(String str)`|判断字符串内容是否一致，忽略大小写|\n|`String substring(int beginIndex, int endIndex)`|根据索引截取字符串|\n|`String substring(int beginIndex)`|从索引处截取字符串|\n|`String replace(CharSequence oldChar, CharSequence newChar)`|新值替换旧值|\n|`boolean contains(CharSequence s)`|判断字符串中是否包含子串|\n|`boolean startsWith(String prefix)`|判断字符串是否以指定字符开头|\n|`String[] split(String regex)`|将字符串按某个字符分割为字符串数组|\n\n### ArrayList\n| 方法 | 作用 |\n| --- | --- |\n|`ArrayList<E>()`|创建一个空的集合对象，E为集合中元素的数据类型，可不指定|\n|`boolean add(E e)`|添加元素到集合末尾|\n|`void add(int index, E element)`|在指定索引处添加元素|\n|`E get(int index)`|获取指定索引处的元素|\n|`int size()`|获取集合大小|\n|`E remove(int index)`|删除指定索引处的元素，返回删除的元素|\n|`boolean remove(Object o)`|删除指定元素，返回是否删除成功|\n|`E set(int index, E element)`|修改指定索引处的元素，返回修改前的元素|\n\n\n\n## *GUI编程\n> 目前项目开发几乎不使用Java来开发GUI界面，仅了解\n\n[返回目录](#目录)\n\n### 常见的Swing组件\n|组件|作用|\n| --- | --- |\n|[JFrame](#jframe)|窗口|\n|[JPanel](#jpanel)|面板，用于组织其他组件的容器|\n|[JButton](#jbutton)|按钮|\n|JTextField|文本输入框|\n|JTable|表格|\n\n### JFrame\n|API|作用|value|\n| --- | --- | --- |\n|`void setSize(int width, int height)`|设置窗口大小|\n|`void setLocationRelativeTo(Component c)`|设置窗口位置|\n|`void setDefaultCloseOperation(int operation)`|设置关闭方式|`JFrame.EXIT_ON_CLOSE` 关闭窗口时退出程序|\n|`void setVisible(boolean b)`|设置窗口是否可见|\n|`void add(Component c)`|添加组件|\n\n### JPanel\n[back to GUI编程](#gui编程)\n|API|作用|value|\n| --- | --- | --- |\n|`void add(Component c)`|添加组件|\n\n### JButton\n[back to GUI编程](#gui编程)\n|API|作用|value|\n| --- | --- | --- |\n|`void setText(String text)`|设置按钮文本|\n\n### Layout Manager\n[back to GUI编程](#gui编程)\n|Layout Manager|作用|\n| --- | --- |\n|`BorderLayout`|边界布局，将容器分成5个区域，North、South、East、West、Center，每个区域只有一个组件|\n|`FlowLayout`|流式布局，组件排满一行自动换行|\n|`GridLayout`|网格布局，组件会自动填充|\n|`GridBagLayout`|网格布局，组件会自动填充|\n\n\n\n\n\n\n\n\n\n","source":"_posts/JavaTips.md","raw":"---\ntitle: Java笔记(持续更新...)\ndate: 2025-09-03 21:45:00\ntags: Java\ncover: https://kei-blog.oss-cn-beijing.aliyuncs.com/asset/115945063_p0-cut.jpg\ncategories: \n    - 编程语言\n---\n\n\n# Java 笔记\n---\n## 目录\n\n> [静态变量、静态方法](#静态变量静态方法)\n> [继承](#继承)\n> [多态](#多态)\n> [final关键字](#final-关键字)\n> [设计模式](#设计模式)\n> [枚举类](#枚举类)\n> [抽象类](#抽象类)\n> [接口](#接口)\n> [代码块](#代码块)\n> [内部类](#内部类)\n> [函数式编程](#函数式编程)\n> [常用API](#常用api)\n> [GUI编程](#gui编程)\n\n\n---\n## 静态变量、静态方法\n\n[返回目录](#目录)\n\n### 定义\n1. **静态变量（类变量）**：属于类，只加载一份，可以被类和类的全部对象访问\n2. **实例变量（对象变量）**：属于对象，每个对象有自己一份\n3. **静态方法（类方法）**：属于类，只能访问静态变量，不能访问实例变量\n4. **实例方法（对象方法）**：属于对象\n\n### 应用\n1. **静态变量**的应用实例: 记录对象的创建数量\n2. **静态方法**应用实例：对于只需要完成某个功能，而不需要直接访问对象的数据的方法，可以使用静态方法\n~~~java\npublic class Student {\n    // 静态变量（类变量）：属于类，只加载一份，可以被类和类的全部对象访问\n    static String schoolName;\n    // 实例变量（对象变量）：属于对象，每个对象有自己一份\n    String name;\n    // 静态变量的应用实例: 记录对象的创建数量\n    static Integer count = 0 ;\n\n\n    public Student(String name){\n        this.name = name;\n        // 同一个类中，访问静态变量，类名可以不写\n        count++;\n    }\n\n    public Student(){\n        count++;\n    }\n\n    // 静态方法（类方法）：属于类，只能访问静态变量，不能访问实例变量\n    // 静态方法应用实例：对于只需要完成某个功能，而不需要直接访问对象的数据的方法，可以使用静态方法\n    public static void printHelloWorld(){\n        System.out.println(\"Hello World\");\n    }\n\n    // 实例方法（对象方法）：属于对象\n    public void printName(){\n        System.out.println(name);\n    }\n\n}\n~~~\n\n### 注意事项\n1. **静态方法**可以直接访问**静态变量**，不能直接访问**实例变量**\n2. **实例方法**既可以直接访问**静态变量**，也可以直接访问**实例变量**\n3. **静态方法**不能使用`this`关键字（不属于对象，自然不可以用`this`）\n\n### 访问方式\n1. **静态变量**访问方式：**类名**.静态成员变量名<font color=red>（推荐方式）</font>\n2. **静态变量**访问方式：**对象名**.静态成员变量名（不推荐）\n3. **静态方法**访问方式：**类名**.静态方法名\n\n## 继承\n\n[返回目录](#目录)\n\n### 子类构造器的特点\n1. 子类的全部构造器，都会先调用父类的构造器，再调用自己的构造器\n2. 默认情况下，子类构造器的第一行都是`super();`(**写不写都有**)调用父类构造器，可自行指定有参还是无参\n\n### 兄弟构造器\n1. 构造器中可以使用`this(参数);`调用兄弟构造器，可用于为某个参数赋予默认值\n2. `super();`和`this();`必须写在构造器的**第一行**，并且**不能同时使用**\n\n## 多态\n\n[返回目录](#目录)\n\n### 认识多态\n1. 多态是在**继承/实现**情况下的一种现象，表现为**对象多态、行为多态**\n```java\npublic class main {\n    public static void main(String[] args) {\n        // 对象多态\n        Animal wolf = new Wolf();\n        Animal dog = new Dog();\n\n        // 行为多态\n        wolf.run();\n        System.out.println(wolf.name);\n        dog.run();\n        System.out.println(dog.name);\n\n        // 多态的好处2：定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强\n        goRun(wolf);\n        goRun(dog);\n\n        // 强制类型转换，解决多态下无法调用子类独有方法的问题\n        // 注意：对象的真实类型与强制转换的类型不同，会导致ClassCastException异常\n        Wolf newWolf = (Wolf)wolf;\n        Dog newDog = (Dog)dog;\n        newWolf.howl();\n        newDog.bark();\n\n        // instanceof 判断对象是否是某个类的实例\n        if(wolf instanceof Dog){\n            Dog newNewDog = (Dog)wolf;\n        } else if(wolf instanceof Wolf){\n            Wolf newNewWolf = (Wolf)wolf;\n        }\n\n    }\n\n    // 多态的好处2：定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强\n    public static void goRun(Animal animal){\n        animal.run();\n    }\n}\n\npublic class Animal {\n    String name = \"animal\";\n    public void run(){\n        System.out.println(\"running\");\n    }\n}\n\npublic class Dog extends Animal{\n    String name = \"Dog\";\n    @Override\n    public void run()\n    {\n        System.out.println(\"Dog is running\");\n    }\n\n    // 多态无法调用子类独有的方法\n    public void bark()\n    {\n        System.out.println(\"Dog is barking\");\n    }\n}\n\npublic class Wolf extends Animal{\n    String name = \"Wolf\";\n    @Override\n    public void run()\n    {\n        System.out.println(\"Wolf is running\");\n    }\n\n    // 多态无法调用子类独有的方法\n    public void howl()\n    {\n        System.out.println(\"Wolf is howling\");\n    }\n}\n```\n2. `run()`方法：编译看左`Animal`，运行看右`Dog/Wolf`\n3. `name`属性：编译看左`Animal`，运行看也左`Animal`\n\n### 多态的特性\n1. 多态模式下，右边的对象是解耦合的，便于拓展和维护\n2. 定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强\n3. 多态模式下，无法调用子类独有的方法\n4. 多态模式下，强制类型转换成子类对象，此时可以调用子类独有的方法\n5. 对象的真实类型与强制转换的类型不同，会导致`ClassCastException`异常\n6. `instanceof` 判断对象是否是某个类的实例，强制类型转换之前可以检查是否是某个类的实例\n\n## final 关键字\n\n[返回目录](#目录)\n\n### 基本概念\n1. `final` 关键字修饰类：表示该类不能被继承，称为**最终类**\n2. `final` 关键字修饰方法：表示该方法不能被重写，称为**最终方法**\n3. `final` 关键字修饰变量：表示该变量有且仅能赋值一次\n\n### 使用场景\n1. 使用`final`修饰**静态变量**，可以声明一个**常量**，通常作为系统配置信息，不再修改(常量通常全大写，多个单词用下划线连接，如`MAX_SIZE`)\n2. 使用`final`修饰**基本变量**，变量储存的**数据**不能改变\n3. 使用`final`修饰**引用变量**(类对象、数组对象)，变量存储的**地址**不能改变，但对象内部数据可以改变\n\n## 设计模式\n\n[返回目录](#目录)\n\n### 单例设计模式\n#### 作用\n确保某个类只创建一个对象\n\n#### 实现方式\n##### 饿汉式单例--用对象之前已创建完毕\n1. 将类的构造器私有\n2. 定义一个类变量记住一个对象\n3. 定义一个类方法获取对象\n\n~~~java\n// 饿汉式单例\npublic class A {\n    // 1. 私有化构造器：确保单例类对外不能创建对象\n    private A(){\n    }\n\n    // 2. 创建静态成员变量记住唯一的一个实例\n    private static final A a = new A();\n\n    // 3. 创建静态方法，返回唯一实例\n    public static A getInstance(){\n        return a;\n    }\n}\n~~~\n\n##### 懒汉式单例--用对象时才创建对象\n\n~~~java\n// 懒汉式单例\npublic class B {\n    // 私有化构造器\n    private B(){}\n\n    // 静态变量记住唯一实例\n    private static B b;\n\n    // 静态方法获取唯一实例\n    public static B getInstance(){\n        if(b == null){\n            b = new B();\n        }\n        return b;\n    }\n}\n~~~\n\n---\n### 模板方法设计模式\n#### 基本概念\n提供一个方法作为完成某类功能的模板，模板方法封装了每个实现步骤，但允许子类提供特定步骤的实现\n#### 实现方式\n1. 定义模板方法，把共同实现步骤放进去\n2. 定义抽象方法，交给具体的子类完成\n3. 建议使用`final`修饰模板方法，防止被重写\n\n~~~java\npublic abstract class People {\n    // 模板方法设计模式\n    public final void write(){\n        System.out.println(\"重复部分代码\");\n        // 模板方法知道子类一定要重写的部分\n        // 使用抽象方法来实现重写部分\n        writeMain();\n\n        System.out.println(\"重复部分代码\");\n    }\n\n    // 定义一个抽象方法，子类必须实现\n    public abstract void writeMain();\n}\n\npublic class Student extends People{\n\n    @Override\n    public void writeMain() {\n        System.out.println(\"学生写代码\");\n    }\n}\n\npublic class Teacher extends People{\n    @Override\n    public void writeMain() {\n        System.out.println(\"老师写代码\");\n    }\n}\n~~~\n\n## 枚举类\n[返回目录](#目录)\n\n### 特点\n1. 枚举类都是最终类，不能被继承，都继承自`java.lang.Enum`\n2. 枚举类第一行只能罗列一些名称，这些名称是常量，每个常量会记住枚举类的一个对象\n3. 枚举类的构造器都是私有的，不能对外创建对象\n~~~java\n// 反编译后的枚举类结构\npublic final class com.kei.enumDemo.A extends java.lang.Enum<com.kei.enumDemo.A> {\n  public static final com.kei.enumDemo.A X;\n  public static final com.kei.enumDemo.A Y;\n  public static final com.kei.enumDemo.A Z;\n  public static com.kei.enumDemo.A[] values();\n  public static com.kei.enumDemo.A valueOf(java.lang.String);\n  static {};\n}\n~~~\n\n### Api\n1. `name()`：返回枚举常量的名称\n2. `ordinal()`：返回枚举常量的索引，索引从0开始\n\n### 使用场景\n1. 枚举类一般用于信息分类和标志\n2. 枚举类作为形参可以约束传入参数\n\n\n## 抽象类\n[返回目录](#目录)\n### 抽象类和抽象方法\n1. 抽象类：抽象类不能实例化对象，只能被继承\n2. 抽象方法：抽象方法没有方法体，方法体由子类实现\n\n## 接口\n[返回目录](#目录)\n### 基本概念\n`interface` 关键字定义接口\n1. 定义常量，接口中的常量public static final 可以不写，默认是public static final\n2. 定义抽象方法，接口中的抽象方法public abstract 可以不写，默认是public abstract\n3. 接口不能实例化对象\n4. 接口可以被实现类通过`implements`关键字**实现**，一个类只能**继承**一个父类，但可以**实现**多个接口\n5. 实现类必须实现所有接口中的抽象方法，否则必须声明抽象类\n\n### 接口的好处\n1. 解决了单继承的不足，使类的角色更多\n2. 面相接口编程，进一步解耦合\n\n### JDK8 新特性\n1. 默认方法：使用`default`关键字定义，默认被`public`修饰，只能由接口实现类对象调用，实际上是对象（实例）方法\n2. 私有方法：使用`private`关键字定义，只能由接口内部其他实例调用，不能被继承\n3. 静态方法：使用`static`关键字定义，默认被`public`修饰，只能由接口名称调用，实际上是类方法\n\n### 注意事项\n1. 多继承：**接口**可以继承多个**接口**\n2. 多实现：**接口**可以被多个**类**实现\n3. 一个接口继承多个接口时，若存在签名冲突，则不支持多继承和多实现\n4. 一个接口继承多个接口时，若存在同名默认方法，重写该方法可以不冲突\n5. 一个类继承了父类，同时实现了接口，若有同名方法，则父类方法优先\n6. 一个类继承了父类，同时实现了接口，若有同名方法，可通过`接口名.super.接口方法()`调用接口方法\n\n\n## 代码块\n\n[返回目录](#目录)\n\n### 静态代码块\n**格式**：`static{ }`\n**特点**：**类**加载时自动执行，只执行一次\n**作用**：完成**类**的初始化，静态变量的初始化赋值\n\n### 实例代码块\n**格式**：`{ }`\n**特点**：**对象**创建时自动执行，每次创建对象都会执行\n**作用**：完成**对象**的初始化，实例变量的初始化赋值\n\n## 内部类\n\n[返回目录](#目录)\n\n### 基本概念\n当一个类定义在另一个类的内部，这个类就是内部类\n当一个类的内部，包含一个完整的事物，且这个事物没必要单独设计，这个类可以被设计为内部类\n\n### 成员内部类\n1. 定义在外部类内，无`static`修饰，属于**外部类对象持有**的\n2. 创建内部类对象的语法：`外部类名.内部类名 对象名 = new 外部类对象().new 内部类名()`\n3. 成员内部类可以直接访问外部类**静态成员**，也可以访问外部类**实例成员**（成员内部类寄生于外部类对象）\n4. 成员内部类可以通过`外部类名.this`访问外部类对象\n\n### 静态内部类\n1. 定义在外部类内，有`static`修饰，属于**外部类持有**的\n2. 创建内部类对象的语法：`外部类名.内部类名 对象名 = new 外部类名.内部类名()`\n3. 静态内部类可以直接访问外部类**静态成员**，不能访问外部类**实例成员**\n\n### 匿名内部类\n1. 匿名内部类是一种特殊的局部内部类，不需要声明类名，默认有一个隐藏的名称\n2. 匿名内部类本质是一个子类，并且会立即创建一个子类对象，编译后会生成一个 `类名$编号.class` 文件\n~~~java\nnew 类或接口(参数){\n    类体（一般是方法重写）\n}\n~~~\n3. 用于更方便创建子类\n\n## 函数式编程\n\n[返回目录](#目录)\n\n### Lambda 表达式\n1. 语法：`(参数列表) -> {方法体}`\n2. 函数式接口：只有一个抽象方法的接口\n3. 可以简化函数式接口的匿名内部类\n\n### 静态方法引用\n1. 格式：`类名::静态方法名`\n2. 如果一个Lambda表达式里只调用一个静态方法，并且`->`前后的参数的形式一致，则可以使用静态方法引用\n\n### 实例方法引用\n1. 语法：`对象::实例方法名`\n2. 如果一个Lambda表达式里只调用一个实例方法，并且`->`前后的参数的形式一致，则可以使用实例方法引用\n\n### 特定类型方法引用\n1. 语法：`特定类名::实例方法名`\n2. 如果某个Lambda表达式里只是调用一个特定类型的实例方法，并且前面参数列表的第一个参数作为方法的主调，后面所有参数都是作为实例方法的入参，则可以使用特定类型方法引用\n\n~~~java\npublic class Main2 {\n    public static void main(String[] args) {\n        // 需求：一个英文人名数组，按字母升序排序\n        String[] names = {\"Tom\", \"Jerry\", \"Mike\", \"Mary\", \"Smith\", \"Kate\", \"tom\", \"jam\", \"milk\"};\n\n        // 排序\n        Arrays.sort(names);\n        // 忽略首字母大小写\n        Arrays.sort(names, new Comparator<String>() {\n            @Override\n            public int compare(String o1, String o2) {\n                // compareToIgnoreCase(): 忽略大小写\n                return o1.compareToIgnoreCase(o2);\n            }\n        });\n\n        // Lambda 表达式\n        Arrays.sort(names, (o1, o2) -> o1.compareToIgnoreCase(o2));\n\n        // 特定的方法引用：类名::方法名\n        Arrays.sort(names, String::compareToIgnoreCase);\n\n        System.out.println(Arrays.toString(names));\n\n    }\n}\n~~~\n\n### 构造器引用\n1. 语法：`类名::new`\n2. 如果某个Lambda表达式里只是在创建对象，并且`->`前后的参数形式一致，则可以使用构造器引用\n\n~~~java\npublic class Main3 {\n    public static void main(String[] args) {\n        CarFactory factory = new CarFactory() {\n            @Override\n            public Car create(String name) {\n                return new Car(name);\n            }\n        };\n        // Lambda 表达式\n        CarFactory factory2 = (name) -> new Car(name);\n\n        // 构造器引用\n        CarFactory factory3 = Car::new;\n    }\n\n}\n\n@FunctionalInterface\ninterface CarFactory {\n    Car create(String name);\n}\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\nclass Car{\n    private String name;\n}\n~~~\n\n## 常用API\n\n[返回目录](#目录)\n\n> [String](#string)\n> [ArrayList](#arraylist)\n\n### String\n#### 创建字符串\n1. **方式一**：`String str = \"hello world\";`\n2. 方式二：调用构造器创建字符串对象\n   1. `String str = new String();` 创建一个空字符串对象\n   2. `String str = new String(\"hello world\");` 创建一个字符串对象\n   3. `String str = new String(char[] value);` 根据字符数组创建一个字符串对象\n   4. `String str = new String(byte[] value);` 根据字节数组创建一个字符串对象\n3. 方式一存放在**常量池**中，且相同的字符串对象只创建一个\n4. 方式二存放在**堆**中，且相同内容可以创建多个对象\n\n#### 处理字符串\n| 方法 | 作用 |\n| --- | --- |\n|`int length()`|获取字符串长度|\n|`boolean equals(Object obj)`|字符串内容比较（`==`比较的是字符串地址！）|\n|`char charAt(int index)`|获取索引处的字符|\n|`char[] toCharArray()`|转换成字符数组|\n|`boolean equalsIgnoreCase(String str)`|判断字符串内容是否一致，忽略大小写|\n|`String substring(int beginIndex, int endIndex)`|根据索引截取字符串|\n|`String substring(int beginIndex)`|从索引处截取字符串|\n|`String replace(CharSequence oldChar, CharSequence newChar)`|新值替换旧值|\n|`boolean contains(CharSequence s)`|判断字符串中是否包含子串|\n|`boolean startsWith(String prefix)`|判断字符串是否以指定字符开头|\n|`String[] split(String regex)`|将字符串按某个字符分割为字符串数组|\n\n### ArrayList\n| 方法 | 作用 |\n| --- | --- |\n|`ArrayList<E>()`|创建一个空的集合对象，E为集合中元素的数据类型，可不指定|\n|`boolean add(E e)`|添加元素到集合末尾|\n|`void add(int index, E element)`|在指定索引处添加元素|\n|`E get(int index)`|获取指定索引处的元素|\n|`int size()`|获取集合大小|\n|`E remove(int index)`|删除指定索引处的元素，返回删除的元素|\n|`boolean remove(Object o)`|删除指定元素，返回是否删除成功|\n|`E set(int index, E element)`|修改指定索引处的元素，返回修改前的元素|\n\n\n\n## *GUI编程\n> 目前项目开发几乎不使用Java来开发GUI界面，仅了解\n\n[返回目录](#目录)\n\n### 常见的Swing组件\n|组件|作用|\n| --- | --- |\n|[JFrame](#jframe)|窗口|\n|[JPanel](#jpanel)|面板，用于组织其他组件的容器|\n|[JButton](#jbutton)|按钮|\n|JTextField|文本输入框|\n|JTable|表格|\n\n### JFrame\n|API|作用|value|\n| --- | --- | --- |\n|`void setSize(int width, int height)`|设置窗口大小|\n|`void setLocationRelativeTo(Component c)`|设置窗口位置|\n|`void setDefaultCloseOperation(int operation)`|设置关闭方式|`JFrame.EXIT_ON_CLOSE` 关闭窗口时退出程序|\n|`void setVisible(boolean b)`|设置窗口是否可见|\n|`void add(Component c)`|添加组件|\n\n### JPanel\n[back to GUI编程](#gui编程)\n|API|作用|value|\n| --- | --- | --- |\n|`void add(Component c)`|添加组件|\n\n### JButton\n[back to GUI编程](#gui编程)\n|API|作用|value|\n| --- | --- | --- |\n|`void setText(String text)`|设置按钮文本|\n\n### Layout Manager\n[back to GUI编程](#gui编程)\n|Layout Manager|作用|\n| --- | --- |\n|`BorderLayout`|边界布局，将容器分成5个区域，North、South、East、West、Center，每个区域只有一个组件|\n|`FlowLayout`|流式布局，组件排满一行自动换行|\n|`GridLayout`|网格布局，组件会自动填充|\n|`GridBagLayout`|网格布局，组件会自动填充|\n\n\n\n\n\n\n\n\n\n","slug":"JavaTips","published":1,"updated":"2025-09-27T10:31:06.957Z","_id":"cmf88q0440000c4tlhzl9avjf","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h1><span id=\"java-%E7%AC%94%E8%AE%B0\">Java 笔记</span></h1><hr>\n<h2><span id=\"%E7%9B%AE%E5%BD%95\">目录</span></h2><blockquote>\n<p><a href=\"#%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95\">静态变量、静态方法</a><br><a href=\"#%E7%BB%A7%E6%89%BF\">继承</a><br><a href=\"#%E5%A4%9A%E6%80%81\">多态</a><br><a href=\"#final-%E5%85%B3%E9%94%AE%E5%AD%97\">final关键字</a><br><a href=\"#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F\">设计模式</a><br><a href=\"#%E6%9E%9A%E4%B8%BE%E7%B1%BB\">枚举类</a><br><a href=\"#%E6%8A%BD%E8%B1%A1%E7%B1%BB\">抽象类</a><br><a href=\"#%E6%8E%A5%E5%8F%A3\">接口</a><br><a href=\"#%E4%BB%A3%E7%A0%81%E5%9D%97\">代码块</a><br><a href=\"#%E5%86%85%E9%83%A8%E7%B1%BB\">内部类</a><br><a href=\"#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B\">函数式编程</a><br><a href=\"#%E5%B8%B8%E7%94%A8api\">常用API</a><br><a href=\"#gui%E7%BC%96%E7%A8%8B\">GUI编程</a></p>\n</blockquote>\n<hr>\n<h2><span id=\"%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95\">静态变量、静态方法</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%AE%9A%E4%B9%89\">定义</span></h3><ol>\n<li><strong>静态变量（类变量）</strong>：属于类，只加载一份，可以被类和类的全部对象访问</li>\n<li><strong>实例变量（对象变量）</strong>：属于对象，每个对象有自己一份</li>\n<li><strong>静态方法（类方法）</strong>：属于类，只能访问静态变量，不能访问实例变量</li>\n<li><strong>实例方法（对象方法）</strong>：属于对象</li>\n</ol>\n<h3><span id=\"%E5%BA%94%E7%94%A8\">应用</span></h3><ol>\n<li><strong>静态变量</strong>的应用实例: 记录对象的创建数量</li>\n<li><strong>静态方法</strong>应用实例：对于只需要完成某个功能，而不需要直接访问对象的数据的方法，可以使用静态方法<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span> {<br>    <span class=\"hljs-comment\">// 静态变量（类变量）：属于类，只加载一份，可以被类和类的全部对象访问</span><br>    <span class=\"hljs-keyword\">static</span> String schoolName;<br>    <span class=\"hljs-comment\">// 实例变量（对象变量）：属于对象，每个对象有自己一份</span><br>    String name;<br>    <span class=\"hljs-comment\">// 静态变量的应用实例: 记录对象的创建数量</span><br>    <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">Integer</span> <span class=\"hljs-variable\">count</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span> ;<br><br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Student</span><span class=\"hljs-params\">(String name)</span>{<br>        <span class=\"hljs-built_in\">this</span>.name = name;<br>        <span class=\"hljs-comment\">// 同一个类中，访问静态变量，类名可以不写</span><br>        count++;<br>    }<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Student</span><span class=\"hljs-params\">()</span>{<br>        count++;<br>    }<br><br>    <span class=\"hljs-comment\">// 静态方法（类方法）：属于类，只能访问静态变量，不能访问实例变量</span><br>    <span class=\"hljs-comment\">// 静态方法应用实例：对于只需要完成某个功能，而不需要直接访问对象的数据的方法，可以使用静态方法</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">printHelloWorld</span><span class=\"hljs-params\">()</span>{<br>        System.out.println(<span class=\"hljs-string\">\"Hello World\"</span>);<br>    }<br><br>    <span class=\"hljs-comment\">// 实例方法（对象方法）：属于对象</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">printName</span><span class=\"hljs-params\">()</span>{<br>        System.out.println(name);<br>    }<br><br>}<br></code></pre></td></tr></tbody></table></figure></li>\n</ol>\n<h3><span id=\"%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\">注意事项</span></h3><ol>\n<li><strong>静态方法</strong>可以直接访问<strong>静态变量</strong>，不能直接访问<strong>实例变量</strong></li>\n<li><strong>实例方法</strong>既可以直接访问<strong>静态变量</strong>，也可以直接访问<strong>实例变量</strong></li>\n<li><strong>静态方法</strong>不能使用<code>this</code>关键字（不属于对象，自然不可以用<code>this</code>）</li>\n</ol>\n<h3><span id=\"%E8%AE%BF%E9%97%AE%E6%96%B9%E5%BC%8F\">访问方式</span></h3><ol>\n<li><strong>静态变量</strong>访问方式：<strong>类名</strong>.静态成员变量名<font color=\"red\">（推荐方式）</font></li>\n<li><strong>静态变量</strong>访问方式：<strong>对象名</strong>.静态成员变量名（不推荐）</li>\n<li><strong>静态方法</strong>访问方式：<strong>类名</strong>.静态方法名</li>\n</ol>\n<h2><span id=\"%E7%BB%A7%E6%89%BF\">继承</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%AD%90%E7%B1%BB%E6%9E%84%E9%80%A0%E5%99%A8%E7%9A%84%E7%89%B9%E7%82%B9\">子类构造器的特点</span></h3><ol>\n<li>子类的全部构造器，都会先调用父类的构造器，再调用自己的构造器</li>\n<li>默认情况下，子类构造器的第一行都是<code>super();</code>(<strong>写不写都有</strong>)调用父类构造器，可自行指定有参还是无参</li>\n</ol>\n<h3><span id=\"%E5%85%84%E5%BC%9F%E6%9E%84%E9%80%A0%E5%99%A8\">兄弟构造器</span></h3><ol>\n<li>构造器中可以使用<code>this(参数);</code>调用兄弟构造器，可用于为某个参数赋予默认值</li>\n<li><code>super();</code>和<code>this();</code>必须写在构造器的<strong>第一行</strong>，并且<strong>不能同时使用</strong></li>\n</ol>\n<h2><span id=\"%E5%A4%9A%E6%80%81\">多态</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E8%AE%A4%E8%AF%86%E5%A4%9A%E6%80%81\">认识多态</span></h3><ol>\n<li>多态是在<strong>继承/实现</strong>情况下的一种现象，表现为<strong>对象多态、行为多态</strong><figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">main</span> {<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {<br>        <span class=\"hljs-comment\">// 对象多态</span><br>        <span class=\"hljs-type\">Animal</span> <span class=\"hljs-variable\">wolf</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Wolf</span>();<br>        <span class=\"hljs-type\">Animal</span> <span class=\"hljs-variable\">dog</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Dog</span>();<br><br>        <span class=\"hljs-comment\">// 行为多态</span><br>        wolf.run();<br>        System.out.println(wolf.name);<br>        dog.run();<br>        System.out.println(dog.name);<br><br>        <span class=\"hljs-comment\">// 多态的好处2：定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强</span><br>        goRun(wolf);<br>        goRun(dog);<br><br>        <span class=\"hljs-comment\">// 强制类型转换，解决多态下无法调用子类独有方法的问题</span><br>        <span class=\"hljs-comment\">// 注意：对象的真实类型与强制转换的类型不同，会导致ClassCastException异常</span><br>        <span class=\"hljs-type\">Wolf</span> <span class=\"hljs-variable\">newWolf</span> <span class=\"hljs-operator\">=</span> (Wolf)wolf;<br>        <span class=\"hljs-type\">Dog</span> <span class=\"hljs-variable\">newDog</span> <span class=\"hljs-operator\">=</span> (Dog)dog;<br>        newWolf.howl();<br>        newDog.bark();<br><br>        <span class=\"hljs-comment\">// instanceof 判断对象是否是某个类的实例</span><br>        <span class=\"hljs-keyword\">if</span>(wolf <span class=\"hljs-keyword\">instanceof</span> Dog){<br>            <span class=\"hljs-type\">Dog</span> <span class=\"hljs-variable\">newNewDog</span> <span class=\"hljs-operator\">=</span> (Dog)wolf;<br>        } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(wolf <span class=\"hljs-keyword\">instanceof</span> Wolf){<br>            <span class=\"hljs-type\">Wolf</span> <span class=\"hljs-variable\">newNewWolf</span> <span class=\"hljs-operator\">=</span> (Wolf)wolf;<br>        }<br><br>    }<br><br>    <span class=\"hljs-comment\">// 多态的好处2：定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">goRun</span><span class=\"hljs-params\">(Animal animal)</span>{<br>        animal.run();<br>    }<br>}<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Animal</span> {<br>    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">\"animal\"</span>;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span>{<br>        System.out.println(<span class=\"hljs-string\">\"running\"</span>);<br>    }<br>}<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Dog</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Animal</span>{<br>    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">\"Dog\"</span>;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span><br>    {<br>        System.out.println(<span class=\"hljs-string\">\"Dog is running\"</span>);<br>    }<br><br>    <span class=\"hljs-comment\">// 多态无法调用子类独有的方法</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">bark</span><span class=\"hljs-params\">()</span><br>    {<br>        System.out.println(<span class=\"hljs-string\">\"Dog is barking\"</span>);<br>    }<br>}<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Wolf</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Animal</span>{<br>    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">\"Wolf\"</span>;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span><br>    {<br>        System.out.println(<span class=\"hljs-string\">\"Wolf is running\"</span>);<br>    }<br><br>    <span class=\"hljs-comment\">// 多态无法调用子类独有的方法</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">howl</span><span class=\"hljs-params\">()</span><br>    {<br>        System.out.println(<span class=\"hljs-string\">\"Wolf is howling\"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure></li>\n<li><code>run()</code>方法：编译看左<code>Animal</code>，运行看右<code>Dog/Wolf</code></li>\n<li><code>name</code>属性：编译看左<code>Animal</code>，运行看也左<code>Animal</code></li>\n</ol>\n<h3><span id=\"%E5%A4%9A%E6%80%81%E7%9A%84%E7%89%B9%E6%80%A7\">多态的特性</span></h3><ol>\n<li>多态模式下，右边的对象是解耦合的，便于拓展和维护</li>\n<li>定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强</li>\n<li>多态模式下，无法调用子类独有的方法</li>\n<li>多态模式下，强制类型转换成子类对象，此时可以调用子类独有的方法</li>\n<li>对象的真实类型与强制转换的类型不同，会导致<code>ClassCastException</code>异常</li>\n<li><code>instanceof</code> 判断对象是否是某个类的实例，强制类型转换之前可以检查是否是某个类的实例</li>\n</ol>\n<h2><span id=\"final-%E5%85%B3%E9%94%AE%E5%AD%97\">final 关键字</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\">基本概念</span></h3><ol>\n<li><code>final</code> 关键字修饰类：表示该类不能被继承，称为<strong>最终类</strong></li>\n<li><code>final</code> 关键字修饰方法：表示该方法不能被重写，称为<strong>最终方法</strong></li>\n<li><code>final</code> 关键字修饰变量：表示该变量有且仅能赋值一次</li>\n</ol>\n<h3><span id=\"%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF\">使用场景</span></h3><ol>\n<li>使用<code>final</code>修饰<strong>静态变量</strong>，可以声明一个<strong>常量</strong>，通常作为系统配置信息，不再修改(常量通常全大写，多个单词用下划线连接，如<code>MAX_SIZE</code>)</li>\n<li>使用<code>final</code>修饰<strong>基本变量</strong>，变量储存的<strong>数据</strong>不能改变</li>\n<li>使用<code>final</code>修饰<strong>引用变量</strong>(类对象、数组对象)，变量存储的<strong>地址</strong>不能改变，但对象内部数据可以改变</li>\n</ol>\n<h2><span id=\"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F\">设计模式</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F\">单例设计模式</span></h3><h4><span id=\"%E4%BD%9C%E7%94%A8\">作用</span></h4><p>确保某个类只创建一个对象</p>\n<h4><span id=\"%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F\">实现方式</span></h4><h5><span id=\"%E9%A5%BF%E6%B1%89%E5%BC%8F%E5%8D%95%E4%BE%8B--%E7%94%A8%E5%AF%B9%E8%B1%A1%E4%B9%8B%E5%89%8D%E5%B7%B2%E5%88%9B%E5%BB%BA%E5%AE%8C%E6%AF%95\">饿汉式单例--用对象之前已创建完毕</span></h5><ol>\n<li>将类的构造器私有</li>\n<li>定义一个类变量记住一个对象</li>\n<li>定义一个类方法获取对象</li>\n</ol>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// 饿汉式单例</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">A</span> {<br>    <span class=\"hljs-comment\">// 1. 私有化构造器：确保单例类对外不能创建对象</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-title function_\">A</span><span class=\"hljs-params\">()</span>{<br>    }<br><br>    <span class=\"hljs-comment\">// 2. 创建静态成员变量记住唯一的一个实例</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">A</span> <span class=\"hljs-variable\">a</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">A</span>();<br><br>    <span class=\"hljs-comment\">// 3. 创建静态方法，返回唯一实例</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> A <span class=\"hljs-title function_\">getInstance</span><span class=\"hljs-params\">()</span>{<br>        <span class=\"hljs-keyword\">return</span> a;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h5><span id=\"%E6%87%92%E6%B1%89%E5%BC%8F%E5%8D%95%E4%BE%8B--%E7%94%A8%E5%AF%B9%E8%B1%A1%E6%97%B6%E6%89%8D%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1\">懒汉式单例--用对象时才创建对象</span></h5><figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// 懒汉式单例</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">B</span> {<br>    <span class=\"hljs-comment\">// 私有化构造器</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-title function_\">B</span><span class=\"hljs-params\">()</span>{}<br><br>    <span class=\"hljs-comment\">// 静态变量记住唯一实例</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> B b;<br><br>    <span class=\"hljs-comment\">// 静态方法获取唯一实例</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> B <span class=\"hljs-title function_\">getInstance</span><span class=\"hljs-params\">()</span>{<br>        <span class=\"hljs-keyword\">if</span>(b == <span class=\"hljs-literal\">null</span>){<br>            b = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">B</span>();<br>        }<br>        <span class=\"hljs-keyword\">return</span> b;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<hr>\n<h3><span id=\"%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F\">模板方法设计模式</span></h3><h4><span id=\"%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\">基本概念</span></h4><p>提供一个方法作为完成某类功能的模板，模板方法封装了每个实现步骤，但允许子类提供特定步骤的实现</p>\n<h4><span id=\"%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F\">实现方式</span></h4><ol>\n<li>定义模板方法，把共同实现步骤放进去</li>\n<li>定义抽象方法，交给具体的子类完成</li>\n<li>建议使用<code>final</code>修饰模板方法，防止被重写</li>\n</ol>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">People</span> {<br>    <span class=\"hljs-comment\">// 模板方法设计模式</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">write</span><span class=\"hljs-params\">()</span>{<br>        System.out.println(<span class=\"hljs-string\">\"重复部分代码\"</span>);<br>        <span class=\"hljs-comment\">// 模板方法知道子类一定要重写的部分</span><br>        <span class=\"hljs-comment\">// 使用抽象方法来实现重写部分</span><br>        writeMain();<br><br>        System.out.println(<span class=\"hljs-string\">\"重复部分代码\"</span>);<br>    }<br><br>    <span class=\"hljs-comment\">// 定义一个抽象方法，子类必须实现</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">writeMain</span><span class=\"hljs-params\">()</span>;<br>}<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">People</span>{<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">writeMain</span><span class=\"hljs-params\">()</span> {<br>        System.out.println(<span class=\"hljs-string\">\"学生写代码\"</span>);<br>    }<br>}<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Teacher</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">People</span>{<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">writeMain</span><span class=\"hljs-params\">()</span> {<br>        System.out.println(<span class=\"hljs-string\">\"老师写代码\"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h2><span id=\"%E6%9E%9A%E4%B8%BE%E7%B1%BB\">枚举类</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E7%89%B9%E7%82%B9\">特点</span></h3><ol>\n<li>枚举类都是最终类，不能被继承，都继承自<code>java.lang.Enum</code></li>\n<li>枚举类第一行只能罗列一些名称，这些名称是常量，每个常量会记住枚举类的一个对象</li>\n<li>枚举类的构造器都是私有的，不能对外创建对象<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// 反编译后的枚举类结构</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">com</span>.kei.enumDemo.A <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">java</span>.lang.Enum&lt;com.kei.enumDemo.A&gt; {<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> com.kei.enumDemo.A X;<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> com.kei.enumDemo.A Y;<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> com.kei.enumDemo.A Z;<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> com.kei.enumDemo.A[] values();<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> com.kei.enumDemo.A <span class=\"hljs-title function_\">valueOf</span><span class=\"hljs-params\">(java.lang.String)</span>;<br>  <span class=\"hljs-keyword\">static</span> {};<br>}<br></code></pre></td></tr></tbody></table></figure></li>\n</ol>\n<h3><span id=\"api\">Api</span></h3><ol>\n<li><code>name()</code>：返回枚举常量的名称</li>\n<li><code>ordinal()</code>：返回枚举常量的索引，索引从0开始</li>\n</ol>\n<h3><span id=\"%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF\">使用场景</span></h3><ol>\n<li>枚举类一般用于信息分类和标志</li>\n<li>枚举类作为形参可以约束传入参数</li>\n</ol>\n<h2><span id=\"%E6%8A%BD%E8%B1%A1%E7%B1%BB\">抽象类</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%92%8C%E6%8A%BD%E8%B1%A1%E6%96%B9%E6%B3%95\">抽象类和抽象方法</span></h3><ol>\n<li>抽象类：抽象类不能实例化对象，只能被继承</li>\n<li>抽象方法：抽象方法没有方法体，方法体由子类实现</li>\n</ol>\n<h2><span id=\"%E6%8E%A5%E5%8F%A3\">接口</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\">基本概念</span></h3><p><code>interface</code> 关键字定义接口</p>\n<ol>\n<li>定义常量，接口中的常量public static final 可以不写，默认是public static final</li>\n<li>定义抽象方法，接口中的抽象方法public abstract 可以不写，默认是public abstract</li>\n<li>接口不能实例化对象</li>\n<li>接口可以被实现类通过<code>implements</code>关键字<strong>实现</strong>，一个类只能<strong>继承</strong>一个父类，但可以<strong>实现</strong>多个接口</li>\n<li>实现类必须实现所有接口中的抽象方法，否则必须声明抽象类</li>\n</ol>\n<h3><span id=\"%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%A5%BD%E5%A4%84\">接口的好处</span></h3><ol>\n<li>解决了单继承的不足，使类的角色更多</li>\n<li>面相接口编程，进一步解耦合</li>\n</ol>\n<h3><span id=\"jdk8-%E6%96%B0%E7%89%B9%E6%80%A7\">JDK8 新特性</span></h3><ol>\n<li>默认方法：使用<code>default</code>关键字定义，默认被<code>public</code>修饰，只能由接口实现类对象调用，实际上是对象（实例）方法</li>\n<li>私有方法：使用<code>private</code>关键字定义，只能由接口内部其他实例调用，不能被继承</li>\n<li>静态方法：使用<code>static</code>关键字定义，默认被<code>public</code>修饰，只能由接口名称调用，实际上是类方法</li>\n</ol>\n<h3><span id=\"%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\">注意事项</span></h3><ol>\n<li>多继承：<strong>接口</strong>可以继承多个<strong>接口</strong></li>\n<li>多实现：<strong>接口</strong>可以被多个<strong>类</strong>实现</li>\n<li>一个接口继承多个接口时，若存在签名冲突，则不支持多继承和多实现</li>\n<li>一个接口继承多个接口时，若存在同名默认方法，重写该方法可以不冲突</li>\n<li>一个类继承了父类，同时实现了接口，若有同名方法，则父类方法优先</li>\n<li>一个类继承了父类，同时实现了接口，若有同名方法，可通过<code>接口名.super.接口方法()</code>调用接口方法</li>\n</ol>\n<h2><span id=\"%E4%BB%A3%E7%A0%81%E5%9D%97\">代码块</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E9%9D%99%E6%80%81%E4%BB%A3%E7%A0%81%E5%9D%97\">静态代码块</span></h3><p><strong>格式</strong>：<code>static{ }</code><br><strong>特点</strong>：<strong>类</strong>加载时自动执行，只执行一次<br><strong>作用</strong>：完成<strong>类</strong>的初始化，静态变量的初始化赋值</p>\n<h3><span id=\"%E5%AE%9E%E4%BE%8B%E4%BB%A3%E7%A0%81%E5%9D%97\">实例代码块</span></h3><p><strong>格式</strong>：<code>{ }</code><br><strong>特点</strong>：<strong>对象</strong>创建时自动执行，每次创建对象都会执行<br><strong>作用</strong>：完成<strong>对象</strong>的初始化，实例变量的初始化赋值</p>\n<h2><span id=\"%E5%86%85%E9%83%A8%E7%B1%BB\">内部类</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\">基本概念</span></h3><p>当一个类定义在另一个类的内部，这个类就是内部类<br>当一个类的内部，包含一个完整的事物，且这个事物没必要单独设计，这个类可以被设计为内部类</p>\n<h3><span id=\"%E6%88%90%E5%91%98%E5%86%85%E9%83%A8%E7%B1%BB\">成员内部类</span></h3><ol>\n<li>定义在外部类内，无<code>static</code>修饰，属于<strong>外部类对象持有</strong>的</li>\n<li>创建内部类对象的语法：<code>外部类名.内部类名 对象名 = new 外部类对象().new 内部类名()</code></li>\n<li>成员内部类可以直接访问外部类<strong>静态成员</strong>，也可以访问外部类<strong>实例成员</strong>（成员内部类寄生于外部类对象）</li>\n<li>成员内部类可以通过<code>外部类名.this</code>访问外部类对象</li>\n</ol>\n<h3><span id=\"%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB\">静态内部类</span></h3><ol>\n<li>定义在外部类内，有<code>static</code>修饰，属于<strong>外部类持有</strong>的</li>\n<li>创建内部类对象的语法：<code>外部类名.内部类名 对象名 = new 外部类名.内部类名()</code></li>\n<li>静态内部类可以直接访问外部类<strong>静态成员</strong>，不能访问外部类<strong>实例成员</strong></li>\n</ol>\n<h3><span id=\"%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB\">匿名内部类</span></h3><ol>\n<li>匿名内部类是一种特殊的局部内部类，不需要声明类名，默认有一个隐藏的名称</li>\n<li>匿名内部类本质是一个子类，并且会立即创建一个子类对象，编译后会生成一个 <code>类名$编号.class</code> 文件<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">new</span> 类或接口(参数){<br>    类体（一般是方法重写）<br>}<br></code></pre></td></tr></tbody></table></figure></li>\n<li>用于更方便创建子类</li>\n</ol>\n<h2><span id=\"%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B\">函数式编程</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F\">Lambda 表达式</span></h3><ol>\n<li>语法：<code>(参数列表) -&gt; {方法体}</code></li>\n<li>函数式接口：只有一个抽象方法的接口</li>\n<li>可以简化函数式接口的匿名内部类</li>\n</ol>\n<h3><span id=\"%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8\">静态方法引用</span></h3><ol>\n<li>格式：<code>类名::静态方法名</code></li>\n<li>如果一个Lambda表达式里只调用一个静态方法，并且<code>-&gt;</code>前后的参数的形式一致，则可以使用静态方法引用</li>\n</ol>\n<h3><span id=\"%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8\">实例方法引用</span></h3><ol>\n<li>语法：<code>对象::实例方法名</code></li>\n<li>如果一个Lambda表达式里只调用一个实例方法，并且<code>-&gt;</code>前后的参数的形式一致，则可以使用实例方法引用</li>\n</ol>\n<h3><span id=\"%E7%89%B9%E5%AE%9A%E7%B1%BB%E5%9E%8B%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8\">特定类型方法引用</span></h3><ol>\n<li>语法：<code>特定类名::实例方法名</code></li>\n<li>如果某个Lambda表达式里只是调用一个特定类型的实例方法，并且前面参数列表的第一个参数作为方法的主调，后面所有参数都是作为实例方法的入参，则可以使用特定类型方法引用</li>\n</ol>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main2</span> {<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {<br>        <span class=\"hljs-comment\">// 需求：一个英文人名数组，按字母升序排序</span><br>        String[] names = {<span class=\"hljs-string\">\"Tom\"</span>, <span class=\"hljs-string\">\"Jerry\"</span>, <span class=\"hljs-string\">\"Mike\"</span>, <span class=\"hljs-string\">\"Mary\"</span>, <span class=\"hljs-string\">\"Smith\"</span>, <span class=\"hljs-string\">\"Kate\"</span>, <span class=\"hljs-string\">\"tom\"</span>, <span class=\"hljs-string\">\"jam\"</span>, <span class=\"hljs-string\">\"milk\"</span>};<br><br>        <span class=\"hljs-comment\">// 排序</span><br>        Arrays.sort(names);<br>        <span class=\"hljs-comment\">// 忽略首字母大小写</span><br>        Arrays.sort(names, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>&lt;String&gt;() {<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(String o1, String o2)</span> {<br>                <span class=\"hljs-comment\">// compareToIgnoreCase(): 忽略大小写</span><br>                <span class=\"hljs-keyword\">return</span> o1.compareToIgnoreCase(o2);<br>            }<br>        });<br><br>        <span class=\"hljs-comment\">// Lambda 表达式</span><br>        Arrays.sort(names, (o1, o2) -&gt; o1.compareToIgnoreCase(o2));<br><br>        <span class=\"hljs-comment\">// 特定的方法引用：类名::方法名</span><br>        Arrays.sort(names, String::compareToIgnoreCase);<br><br>        System.out.println(Arrays.toString(names));<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E6%9E%84%E9%80%A0%E5%99%A8%E5%BC%95%E7%94%A8\">构造器引用</span></h3><ol>\n<li>语法：<code>类名::new</code></li>\n<li>如果某个Lambda表达式里只是在创建对象，并且<code>-&gt;</code>前后的参数形式一致，则可以使用构造器引用</li>\n</ol>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main3</span> {<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {<br>        <span class=\"hljs-type\">CarFactory</span> <span class=\"hljs-variable\">factory</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CarFactory</span>() {<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> Car <span class=\"hljs-title function_\">create</span><span class=\"hljs-params\">(String name)</span> {<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Car</span>(name);<br>            }<br>        };<br>        <span class=\"hljs-comment\">// Lambda 表达式</span><br>        <span class=\"hljs-type\">CarFactory</span> <span class=\"hljs-variable\">factory2</span> <span class=\"hljs-operator\">=</span> (name) -&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Car</span>(name);<br><br>        <span class=\"hljs-comment\">// 构造器引用</span><br>        <span class=\"hljs-type\">CarFactory</span> <span class=\"hljs-variable\">factory3</span> <span class=\"hljs-operator\">=</span> Car::<span class=\"hljs-keyword\">new</span>;<br>    }<br><br>}<br><br><span class=\"hljs-meta\">@FunctionalInterface</span><br><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">CarFactory</span> {<br>    Car <span class=\"hljs-title function_\">create</span><span class=\"hljs-params\">(String name)</span>;<br>}<br><br><span class=\"hljs-meta\">@Data</span><br><span class=\"hljs-meta\">@NoArgsConstructor</span><br><span class=\"hljs-meta\">@AllArgsConstructor</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Car</span>{<br>    <span class=\"hljs-keyword\">private</span> String name;<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h2><span id=\"%E5%B8%B8%E7%94%A8api\">常用API</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<blockquote>\n<p><a href=\"#string\">String</a><br><a href=\"#arraylist\">ArrayList</a></p>\n</blockquote>\n<h3><span id=\"string\">String</span></h3><h4><span id=\"%E5%88%9B%E5%BB%BA%E5%AD%97%E7%AC%A6%E4%B8%B2\">创建字符串</span></h4><ol>\n<li><strong>方式一</strong>：<code>String str = \"hello world\";</code></li>\n<li>方式二：调用构造器创建字符串对象<ol>\n<li><code>String str = new String();</code> 创建一个空字符串对象</li>\n<li><code>String str = new String(\"hello world\");</code> 创建一个字符串对象</li>\n<li><code>String str = new String(char[] value);</code> 根据字符数组创建一个字符串对象</li>\n<li><code>String str = new String(byte[] value);</code> 根据字节数组创建一个字符串对象</li>\n</ol>\n</li>\n<li>方式一存放在<strong>常量池</strong>中，且相同的字符串对象只创建一个</li>\n<li>方式二存放在<strong>堆</strong>中，且相同内容可以创建多个对象</li>\n</ol>\n<h4><span id=\"%E5%A4%84%E7%90%86%E5%AD%97%E7%AC%A6%E4%B8%B2\">处理字符串</span></h4><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>int length()</code></td>\n<td>获取字符串长度</td>\n</tr>\n<tr>\n<td><code>boolean equals(Object obj)</code></td>\n<td>字符串内容比较（<code>==</code>比较的是字符串地址！）</td>\n</tr>\n<tr>\n<td><code>char charAt(int index)</code></td>\n<td>获取索引处的字符</td>\n</tr>\n<tr>\n<td><code>char[] toCharArray()</code></td>\n<td>转换成字符数组</td>\n</tr>\n<tr>\n<td><code>boolean equalsIgnoreCase(String str)</code></td>\n<td>判断字符串内容是否一致，忽略大小写</td>\n</tr>\n<tr>\n<td><code>String substring(int beginIndex, int endIndex)</code></td>\n<td>根据索引截取字符串</td>\n</tr>\n<tr>\n<td><code>String substring(int beginIndex)</code></td>\n<td>从索引处截取字符串</td>\n</tr>\n<tr>\n<td><code>String replace(CharSequence oldChar, CharSequence newChar)</code></td>\n<td>新值替换旧值</td>\n</tr>\n<tr>\n<td><code>boolean contains(CharSequence s)</code></td>\n<td>判断字符串中是否包含子串</td>\n</tr>\n<tr>\n<td><code>boolean startsWith(String prefix)</code></td>\n<td>判断字符串是否以指定字符开头</td>\n</tr>\n<tr>\n<td><code>String[] split(String regex)</code></td>\n<td>将字符串按某个字符分割为字符串数组</td>\n</tr>\n</tbody></table>\n<h3><span id=\"arraylist\">ArrayList</span></h3><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>ArrayList&lt;E&gt;()</code></td>\n<td>创建一个空的集合对象，E为集合中元素的数据类型，可不指定</td>\n</tr>\n<tr>\n<td><code>boolean add(E e)</code></td>\n<td>添加元素到集合末尾</td>\n</tr>\n<tr>\n<td><code>void add(int index, E element)</code></td>\n<td>在指定索引处添加元素</td>\n</tr>\n<tr>\n<td><code>E get(int index)</code></td>\n<td>获取指定索引处的元素</td>\n</tr>\n<tr>\n<td><code>int size()</code></td>\n<td>获取集合大小</td>\n</tr>\n<tr>\n<td><code>E remove(int index)</code></td>\n<td>删除指定索引处的元素，返回删除的元素</td>\n</tr>\n<tr>\n<td><code>boolean remove(Object o)</code></td>\n<td>删除指定元素，返回是否删除成功</td>\n</tr>\n<tr>\n<td><code>E set(int index, E element)</code></td>\n<td>修改指定索引处的元素，返回修改前的元素</td>\n</tr>\n</tbody></table>\n<h2><span id=\"gui%E7%BC%96%E7%A8%8B\">*GUI编程</span></h2><blockquote>\n<p>目前项目开发几乎不使用Java来开发GUI界面，仅了解</p>\n</blockquote>\n<p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%B8%B8%E8%A7%81%E7%9A%84swing%E7%BB%84%E4%BB%B6\">常见的Swing组件</span></h3><table>\n<thead>\n<tr>\n<th>组件</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"#jframe\">JFrame</a></td>\n<td>窗口</td>\n</tr>\n<tr>\n<td><a href=\"#jpanel\">JPanel</a></td>\n<td>面板，用于组织其他组件的容器</td>\n</tr>\n<tr>\n<td><a href=\"#jbutton\">JButton</a></td>\n<td>按钮</td>\n</tr>\n<tr>\n<td>JTextField</td>\n<td>文本输入框</td>\n</tr>\n<tr>\n<td>JTable</td>\n<td>表格</td>\n</tr>\n</tbody></table>\n<h3><span id=\"jframe\">JFrame</span></h3><table>\n<thead>\n<tr>\n<th>API</th>\n<th>作用</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>void setSize(int width, int height)</code></td>\n<td>设置窗口大小</td>\n<td></td>\n</tr>\n<tr>\n<td><code>void setLocationRelativeTo(Component c)</code></td>\n<td>设置窗口位置</td>\n<td></td>\n</tr>\n<tr>\n<td><code>void setDefaultCloseOperation(int operation)</code></td>\n<td>设置关闭方式</td>\n<td><code>JFrame.EXIT_ON_CLOSE</code> 关闭窗口时退出程序</td>\n</tr>\n<tr>\n<td><code>void setVisible(boolean b)</code></td>\n<td>设置窗口是否可见</td>\n<td></td>\n</tr>\n<tr>\n<td><code>void add(Component c)</code></td>\n<td>添加组件</td>\n<td></td>\n</tr>\n</tbody></table>\n<h3><span id=\"jpanel\">JPanel</span></h3><p><a href=\"#gui%E7%BC%96%E7%A8%8B\">back to GUI编程</a></p>\n<table>\n<thead>\n<tr>\n<th>API</th>\n<th>作用</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>void add(Component c)</code></td>\n<td>添加组件</td>\n<td></td>\n</tr>\n</tbody></table>\n<h3><span id=\"jbutton\">JButton</span></h3><p><a href=\"#gui%E7%BC%96%E7%A8%8B\">back to GUI编程</a></p>\n<table>\n<thead>\n<tr>\n<th>API</th>\n<th>作用</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>void setText(String text)</code></td>\n<td>设置按钮文本</td>\n<td></td>\n</tr>\n</tbody></table>\n<h3><span id=\"layout-manager\">Layout Manager</span></h3><p><a href=\"#gui%E7%BC%96%E7%A8%8B\">back to GUI编程</a></p>\n<table>\n<thead>\n<tr>\n<th>Layout Manager</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>BorderLayout</code></td>\n<td>边界布局，将容器分成5个区域，North、South、East、West、Center，每个区域只有一个组件</td>\n</tr>\n<tr>\n<td><code>FlowLayout</code></td>\n<td>流式布局，组件排满一行自动换行</td>\n</tr>\n<tr>\n<td><code>GridLayout</code></td>\n<td>网格布局，组件会自动填充</td>\n</tr>\n<tr>\n<td><code>GridBagLayout</code></td>\n<td>网格布局，组件会自动填充</td>\n</tr>\n</tbody></table>\n</body></html>","excerpt":"","more":"<h1 id=\"Java-笔记\"><a href=\"#Java-笔记\" class=\"headerlink\" title=\"Java 笔记\"></a>Java 笔记</h1><hr>\n<h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><blockquote>\n<p><a href=\"#%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95\">静态变量、静态方法</a><br><a href=\"#%E7%BB%A7%E6%89%BF\">继承</a><br><a href=\"#%E5%A4%9A%E6%80%81\">多态</a><br><a href=\"#final-%E5%85%B3%E9%94%AE%E5%AD%97\">final关键字</a><br><a href=\"#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F\">设计模式</a><br><a href=\"#%E6%9E%9A%E4%B8%BE%E7%B1%BB\">枚举类</a><br><a href=\"#%E6%8A%BD%E8%B1%A1%E7%B1%BB\">抽象类</a><br><a href=\"#%E6%8E%A5%E5%8F%A3\">接口</a><br><a href=\"#%E4%BB%A3%E7%A0%81%E5%9D%97\">代码块</a><br><a href=\"#%E5%86%85%E9%83%A8%E7%B1%BB\">内部类</a><br><a href=\"#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B\">函数式编程</a><br><a href=\"#%E5%B8%B8%E7%94%A8api\">常用API</a><br><a href=\"#gui%E7%BC%96%E7%A8%8B\">GUI编程</a></p>\n</blockquote>\n<hr>\n<h2 id=\"静态变量、静态方法\"><a href=\"#静态变量、静态方法\" class=\"headerlink\" title=\"静态变量、静态方法\"></a>静态变量、静态方法</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h3><ol>\n<li><strong>静态变量（类变量）</strong>：属于类，只加载一份，可以被类和类的全部对象访问</li>\n<li><strong>实例变量（对象变量）</strong>：属于对象，每个对象有自己一份</li>\n<li><strong>静态方法（类方法）</strong>：属于类，只能访问静态变量，不能访问实例变量</li>\n<li><strong>实例方法（对象方法）</strong>：属于对象</li>\n</ol>\n<h3 id=\"应用\"><a href=\"#应用\" class=\"headerlink\" title=\"应用\"></a>应用</h3><ol>\n<li><strong>静态变量</strong>的应用实例: 记录对象的创建数量</li>\n<li><strong>静态方法</strong>应用实例：对于只需要完成某个功能，而不需要直接访问对象的数据的方法，可以使用静态方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span> &#123;<br>    <span class=\"hljs-comment\">// 静态变量（类变量）：属于类，只加载一份，可以被类和类的全部对象访问</span><br>    <span class=\"hljs-keyword\">static</span> String schoolName;<br>    <span class=\"hljs-comment\">// 实例变量（对象变量）：属于对象，每个对象有自己一份</span><br>    String name;<br>    <span class=\"hljs-comment\">// 静态变量的应用实例: 记录对象的创建数量</span><br>    <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">Integer</span> <span class=\"hljs-variable\">count</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span> ;<br><br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Student</span><span class=\"hljs-params\">(String name)</span>&#123;<br>        <span class=\"hljs-built_in\">this</span>.name = name;<br>        <span class=\"hljs-comment\">// 同一个类中，访问静态变量，类名可以不写</span><br>        count++;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Student</span><span class=\"hljs-params\">()</span>&#123;<br>        count++;<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 静态方法（类方法）：属于类，只能访问静态变量，不能访问实例变量</span><br>    <span class=\"hljs-comment\">// 静态方法应用实例：对于只需要完成某个功能，而不需要直接访问对象的数据的方法，可以使用静态方法</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">printHelloWorld</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;Hello World&quot;</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 实例方法（对象方法）：属于对象</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">printName</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(name);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ol>\n<li><strong>静态方法</strong>可以直接访问<strong>静态变量</strong>，不能直接访问<strong>实例变量</strong></li>\n<li><strong>实例方法</strong>既可以直接访问<strong>静态变量</strong>，也可以直接访问<strong>实例变量</strong></li>\n<li><strong>静态方法</strong>不能使用<code>this</code>关键字（不属于对象，自然不可以用<code>this</code>）</li>\n</ol>\n<h3 id=\"访问方式\"><a href=\"#访问方式\" class=\"headerlink\" title=\"访问方式\"></a>访问方式</h3><ol>\n<li><strong>静态变量</strong>访问方式：<strong>类名</strong>.静态成员变量名<font color=red>（推荐方式）</font></li>\n<li><strong>静态变量</strong>访问方式：<strong>对象名</strong>.静态成员变量名（不推荐）</li>\n<li><strong>静态方法</strong>访问方式：<strong>类名</strong>.静态方法名</li>\n</ol>\n<h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"子类构造器的特点\"><a href=\"#子类构造器的特点\" class=\"headerlink\" title=\"子类构造器的特点\"></a>子类构造器的特点</h3><ol>\n<li>子类的全部构造器，都会先调用父类的构造器，再调用自己的构造器</li>\n<li>默认情况下，子类构造器的第一行都是<code>super();</code>(<strong>写不写都有</strong>)调用父类构造器，可自行指定有参还是无参</li>\n</ol>\n<h3 id=\"兄弟构造器\"><a href=\"#兄弟构造器\" class=\"headerlink\" title=\"兄弟构造器\"></a>兄弟构造器</h3><ol>\n<li>构造器中可以使用<code>this(参数);</code>调用兄弟构造器，可用于为某个参数赋予默认值</li>\n<li><code>super();</code>和<code>this();</code>必须写在构造器的<strong>第一行</strong>，并且<strong>不能同时使用</strong></li>\n</ol>\n<h2 id=\"多态\"><a href=\"#多态\" class=\"headerlink\" title=\"多态\"></a>多态</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"认识多态\"><a href=\"#认识多态\" class=\"headerlink\" title=\"认识多态\"></a>认识多态</h3><ol>\n<li>多态是在<strong>继承&#x2F;实现</strong>情况下的一种现象，表现为<strong>对象多态、行为多态</strong><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">main</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-comment\">// 对象多态</span><br>        <span class=\"hljs-type\">Animal</span> <span class=\"hljs-variable\">wolf</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Wolf</span>();<br>        <span class=\"hljs-type\">Animal</span> <span class=\"hljs-variable\">dog</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Dog</span>();<br><br>        <span class=\"hljs-comment\">// 行为多态</span><br>        wolf.run();<br>        System.out.println(wolf.name);<br>        dog.run();<br>        System.out.println(dog.name);<br><br>        <span class=\"hljs-comment\">// 多态的好处2：定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强</span><br>        goRun(wolf);<br>        goRun(dog);<br><br>        <span class=\"hljs-comment\">// 强制类型转换，解决多态下无法调用子类独有方法的问题</span><br>        <span class=\"hljs-comment\">// 注意：对象的真实类型与强制转换的类型不同，会导致ClassCastException异常</span><br>        <span class=\"hljs-type\">Wolf</span> <span class=\"hljs-variable\">newWolf</span> <span class=\"hljs-operator\">=</span> (Wolf)wolf;<br>        <span class=\"hljs-type\">Dog</span> <span class=\"hljs-variable\">newDog</span> <span class=\"hljs-operator\">=</span> (Dog)dog;<br>        newWolf.howl();<br>        newDog.bark();<br><br>        <span class=\"hljs-comment\">// instanceof 判断对象是否是某个类的实例</span><br>        <span class=\"hljs-keyword\">if</span>(wolf <span class=\"hljs-keyword\">instanceof</span> Dog)&#123;<br>            <span class=\"hljs-type\">Dog</span> <span class=\"hljs-variable\">newNewDog</span> <span class=\"hljs-operator\">=</span> (Dog)wolf;<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(wolf <span class=\"hljs-keyword\">instanceof</span> Wolf)&#123;<br>            <span class=\"hljs-type\">Wolf</span> <span class=\"hljs-variable\">newNewWolf</span> <span class=\"hljs-operator\">=</span> (Wolf)wolf;<br>        &#125;<br><br>    &#125;<br><br>    <span class=\"hljs-comment\">// 多态的好处2：定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">goRun</span><span class=\"hljs-params\">(Animal animal)</span>&#123;<br>        animal.run();<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Animal</span> &#123;<br>    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;animal&quot;</span>;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;running&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Dog</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Animal</span>&#123;<br>    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;Dog&quot;</span>;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span><br>    &#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;Dog is running&quot;</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 多态无法调用子类独有的方法</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">bark</span><span class=\"hljs-params\">()</span><br>    &#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;Dog is barking&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Wolf</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Animal</span>&#123;<br>    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;Wolf&quot;</span>;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span><br>    &#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;Wolf is running&quot;</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 多态无法调用子类独有的方法</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">howl</span><span class=\"hljs-params\">()</span><br>    &#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;Wolf is howling&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li><code>run()</code>方法：编译看左<code>Animal</code>，运行看右<code>Dog/Wolf</code></li>\n<li><code>name</code>属性：编译看左<code>Animal</code>，运行看也左<code>Animal</code></li>\n</ol>\n<h3 id=\"多态的特性\"><a href=\"#多态的特性\" class=\"headerlink\" title=\"多态的特性\"></a>多态的特性</h3><ol>\n<li>多态模式下，右边的对象是解耦合的，便于拓展和维护</li>\n<li>定义方法时，使用父类的形参，可以接收一切子类对象，拓展性强</li>\n<li>多态模式下，无法调用子类独有的方法</li>\n<li>多态模式下，强制类型转换成子类对象，此时可以调用子类独有的方法</li>\n<li>对象的真实类型与强制转换的类型不同，会导致<code>ClassCastException</code>异常</li>\n<li><code>instanceof</code> 判断对象是否是某个类的实例，强制类型转换之前可以检查是否是某个类的实例</li>\n</ol>\n<h2 id=\"final-关键字\"><a href=\"#final-关键字\" class=\"headerlink\" title=\"final 关键字\"></a>final 关键字</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"基本概念\"><a href=\"#基本概念\" class=\"headerlink\" title=\"基本概念\"></a>基本概念</h3><ol>\n<li><code>final</code> 关键字修饰类：表示该类不能被继承，称为<strong>最终类</strong></li>\n<li><code>final</code> 关键字修饰方法：表示该方法不能被重写，称为<strong>最终方法</strong></li>\n<li><code>final</code> 关键字修饰变量：表示该变量有且仅能赋值一次</li>\n</ol>\n<h3 id=\"使用场景\"><a href=\"#使用场景\" class=\"headerlink\" title=\"使用场景\"></a>使用场景</h3><ol>\n<li>使用<code>final</code>修饰<strong>静态变量</strong>，可以声明一个<strong>常量</strong>，通常作为系统配置信息，不再修改(常量通常全大写，多个单词用下划线连接，如<code>MAX_SIZE</code>)</li>\n<li>使用<code>final</code>修饰<strong>基本变量</strong>，变量储存的<strong>数据</strong>不能改变</li>\n<li>使用<code>final</code>修饰<strong>引用变量</strong>(类对象、数组对象)，变量存储的<strong>地址</strong>不能改变，但对象内部数据可以改变</li>\n</ol>\n<h2 id=\"设计模式\"><a href=\"#设计模式\" class=\"headerlink\" title=\"设计模式\"></a>设计模式</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"单例设计模式\"><a href=\"#单例设计模式\" class=\"headerlink\" title=\"单例设计模式\"></a>单例设计模式</h3><h4 id=\"作用\"><a href=\"#作用\" class=\"headerlink\" title=\"作用\"></a>作用</h4><p>确保某个类只创建一个对象</p>\n<h4 id=\"实现方式\"><a href=\"#实现方式\" class=\"headerlink\" title=\"实现方式\"></a>实现方式</h4><h5 id=\"饿汉式单例-用对象之前已创建完毕\"><a href=\"#饿汉式单例-用对象之前已创建完毕\" class=\"headerlink\" title=\"饿汉式单例--用对象之前已创建完毕\"></a>饿汉式单例--用对象之前已创建完毕</h5><ol>\n<li>将类的构造器私有</li>\n<li>定义一个类变量记住一个对象</li>\n<li>定义一个类方法获取对象</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// 饿汉式单例</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">A</span> &#123;<br>    <span class=\"hljs-comment\">// 1. 私有化构造器：确保单例类对外不能创建对象</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-title function_\">A</span><span class=\"hljs-params\">()</span>&#123;<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 2. 创建静态成员变量记住唯一的一个实例</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">A</span> <span class=\"hljs-variable\">a</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">A</span>();<br><br>    <span class=\"hljs-comment\">// 3. 创建静态方法，返回唯一实例</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> A <span class=\"hljs-title function_\">getInstance</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-keyword\">return</span> a;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h5 id=\"懒汉式单例-用对象时才创建对象\"><a href=\"#懒汉式单例-用对象时才创建对象\" class=\"headerlink\" title=\"懒汉式单例--用对象时才创建对象\"></a>懒汉式单例--用对象时才创建对象</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// 懒汉式单例</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">B</span> &#123;<br>    <span class=\"hljs-comment\">// 私有化构造器</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-title function_\">B</span><span class=\"hljs-params\">()</span>&#123;&#125;<br><br>    <span class=\"hljs-comment\">// 静态变量记住唯一实例</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> B b;<br><br>    <span class=\"hljs-comment\">// 静态方法获取唯一实例</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> B <span class=\"hljs-title function_\">getInstance</span><span class=\"hljs-params\">()</span>&#123;<br>        <span class=\"hljs-keyword\">if</span>(b == <span class=\"hljs-literal\">null</span>)&#123;<br>            b = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">B</span>();<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> b;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"模板方法设计模式\"><a href=\"#模板方法设计模式\" class=\"headerlink\" title=\"模板方法设计模式\"></a>模板方法设计模式</h3><h4 id=\"基本概念-1\"><a href=\"#基本概念-1\" class=\"headerlink\" title=\"基本概念\"></a>基本概念</h4><p>提供一个方法作为完成某类功能的模板，模板方法封装了每个实现步骤，但允许子类提供特定步骤的实现</p>\n<h4 id=\"实现方式-1\"><a href=\"#实现方式-1\" class=\"headerlink\" title=\"实现方式\"></a>实现方式</h4><ol>\n<li>定义模板方法，把共同实现步骤放进去</li>\n<li>定义抽象方法，交给具体的子类完成</li>\n<li>建议使用<code>final</code>修饰模板方法，防止被重写</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">People</span> &#123;<br>    <span class=\"hljs-comment\">// 模板方法设计模式</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">write</span><span class=\"hljs-params\">()</span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;重复部分代码&quot;</span>);<br>        <span class=\"hljs-comment\">// 模板方法知道子类一定要重写的部分</span><br>        <span class=\"hljs-comment\">// 使用抽象方法来实现重写部分</span><br>        writeMain();<br><br>        System.out.println(<span class=\"hljs-string\">&quot;重复部分代码&quot;</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 定义一个抽象方法，子类必须实现</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">writeMain</span><span class=\"hljs-params\">()</span>;<br>&#125;<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">People</span>&#123;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">writeMain</span><span class=\"hljs-params\">()</span> &#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;学生写代码&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Teacher</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">People</span>&#123;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">writeMain</span><span class=\"hljs-params\">()</span> &#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;老师写代码&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"枚举类\"><a href=\"#枚举类\" class=\"headerlink\" title=\"枚举类\"></a>枚举类</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"特点\"><a href=\"#特点\" class=\"headerlink\" title=\"特点\"></a>特点</h3><ol>\n<li>枚举类都是最终类，不能被继承，都继承自<code>java.lang.Enum</code></li>\n<li>枚举类第一行只能罗列一些名称，这些名称是常量，每个常量会记住枚举类的一个对象</li>\n<li>枚举类的构造器都是私有的，不能对外创建对象<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// 反编译后的枚举类结构</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">com</span>.kei.enumDemo.A <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">java</span>.lang.Enum&lt;com.kei.enumDemo.A&gt; &#123;<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> com.kei.enumDemo.A X;<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> com.kei.enumDemo.A Y;<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> com.kei.enumDemo.A Z;<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> com.kei.enumDemo.A[] values();<br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> com.kei.enumDemo.A <span class=\"hljs-title function_\">valueOf</span><span class=\"hljs-params\">(java.lang.String)</span>;<br>  <span class=\"hljs-keyword\">static</span> &#123;&#125;;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"Api\"><a href=\"#Api\" class=\"headerlink\" title=\"Api\"></a>Api</h3><ol>\n<li><code>name()</code>：返回枚举常量的名称</li>\n<li><code>ordinal()</code>：返回枚举常量的索引，索引从0开始</li>\n</ol>\n<h3 id=\"使用场景-1\"><a href=\"#使用场景-1\" class=\"headerlink\" title=\"使用场景\"></a>使用场景</h3><ol>\n<li>枚举类一般用于信息分类和标志</li>\n<li>枚举类作为形参可以约束传入参数</li>\n</ol>\n<h2 id=\"抽象类\"><a href=\"#抽象类\" class=\"headerlink\" title=\"抽象类\"></a>抽象类</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"抽象类和抽象方法\"><a href=\"#抽象类和抽象方法\" class=\"headerlink\" title=\"抽象类和抽象方法\"></a>抽象类和抽象方法</h3><ol>\n<li>抽象类：抽象类不能实例化对象，只能被继承</li>\n<li>抽象方法：抽象方法没有方法体，方法体由子类实现</li>\n</ol>\n<h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"基本概念-2\"><a href=\"#基本概念-2\" class=\"headerlink\" title=\"基本概念\"></a>基本概念</h3><p><code>interface</code> 关键字定义接口</p>\n<ol>\n<li>定义常量，接口中的常量public static final 可以不写，默认是public static final</li>\n<li>定义抽象方法，接口中的抽象方法public abstract 可以不写，默认是public abstract</li>\n<li>接口不能实例化对象</li>\n<li>接口可以被实现类通过<code>implements</code>关键字<strong>实现</strong>，一个类只能<strong>继承</strong>一个父类，但可以<strong>实现</strong>多个接口</li>\n<li>实现类必须实现所有接口中的抽象方法，否则必须声明抽象类</li>\n</ol>\n<h3 id=\"接口的好处\"><a href=\"#接口的好处\" class=\"headerlink\" title=\"接口的好处\"></a>接口的好处</h3><ol>\n<li>解决了单继承的不足，使类的角色更多</li>\n<li>面相接口编程，进一步解耦合</li>\n</ol>\n<h3 id=\"JDK8-新特性\"><a href=\"#JDK8-新特性\" class=\"headerlink\" title=\"JDK8 新特性\"></a>JDK8 新特性</h3><ol>\n<li>默认方法：使用<code>default</code>关键字定义，默认被<code>public</code>修饰，只能由接口实现类对象调用，实际上是对象（实例）方法</li>\n<li>私有方法：使用<code>private</code>关键字定义，只能由接口内部其他实例调用，不能被继承</li>\n<li>静态方法：使用<code>static</code>关键字定义，默认被<code>public</code>修饰，只能由接口名称调用，实际上是类方法</li>\n</ol>\n<h3 id=\"注意事项-1\"><a href=\"#注意事项-1\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ol>\n<li>多继承：<strong>接口</strong>可以继承多个<strong>接口</strong></li>\n<li>多实现：<strong>接口</strong>可以被多个<strong>类</strong>实现</li>\n<li>一个接口继承多个接口时，若存在签名冲突，则不支持多继承和多实现</li>\n<li>一个接口继承多个接口时，若存在同名默认方法，重写该方法可以不冲突</li>\n<li>一个类继承了父类，同时实现了接口，若有同名方法，则父类方法优先</li>\n<li>一个类继承了父类，同时实现了接口，若有同名方法，可通过<code>接口名.super.接口方法()</code>调用接口方法</li>\n</ol>\n<h2 id=\"代码块\"><a href=\"#代码块\" class=\"headerlink\" title=\"代码块\"></a>代码块</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"静态代码块\"><a href=\"#静态代码块\" class=\"headerlink\" title=\"静态代码块\"></a>静态代码块</h3><p><strong>格式</strong>：<code>static&#123; &#125;</code><br><strong>特点</strong>：<strong>类</strong>加载时自动执行，只执行一次<br><strong>作用</strong>：完成<strong>类</strong>的初始化，静态变量的初始化赋值</p>\n<h3 id=\"实例代码块\"><a href=\"#实例代码块\" class=\"headerlink\" title=\"实例代码块\"></a>实例代码块</h3><p><strong>格式</strong>：<code>&#123; &#125;</code><br><strong>特点</strong>：<strong>对象</strong>创建时自动执行，每次创建对象都会执行<br><strong>作用</strong>：完成<strong>对象</strong>的初始化，实例变量的初始化赋值</p>\n<h2 id=\"内部类\"><a href=\"#内部类\" class=\"headerlink\" title=\"内部类\"></a>内部类</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"基本概念-3\"><a href=\"#基本概念-3\" class=\"headerlink\" title=\"基本概念\"></a>基本概念</h3><p>当一个类定义在另一个类的内部，这个类就是内部类<br>当一个类的内部，包含一个完整的事物，且这个事物没必要单独设计，这个类可以被设计为内部类</p>\n<h3 id=\"成员内部类\"><a href=\"#成员内部类\" class=\"headerlink\" title=\"成员内部类\"></a>成员内部类</h3><ol>\n<li>定义在外部类内，无<code>static</code>修饰，属于<strong>外部类对象持有</strong>的</li>\n<li>创建内部类对象的语法：<code>外部类名.内部类名 对象名 = new 外部类对象().new 内部类名()</code></li>\n<li>成员内部类可以直接访问外部类<strong>静态成员</strong>，也可以访问外部类<strong>实例成员</strong>（成员内部类寄生于外部类对象）</li>\n<li>成员内部类可以通过<code>外部类名.this</code>访问外部类对象</li>\n</ol>\n<h3 id=\"静态内部类\"><a href=\"#静态内部类\" class=\"headerlink\" title=\"静态内部类\"></a>静态内部类</h3><ol>\n<li>定义在外部类内，有<code>static</code>修饰，属于<strong>外部类持有</strong>的</li>\n<li>创建内部类对象的语法：<code>外部类名.内部类名 对象名 = new 外部类名.内部类名()</code></li>\n<li>静态内部类可以直接访问外部类<strong>静态成员</strong>，不能访问外部类<strong>实例成员</strong></li>\n</ol>\n<h3 id=\"匿名内部类\"><a href=\"#匿名内部类\" class=\"headerlink\" title=\"匿名内部类\"></a>匿名内部类</h3><ol>\n<li>匿名内部类是一种特殊的局部内部类，不需要声明类名，默认有一个隐藏的名称</li>\n<li>匿名内部类本质是一个子类，并且会立即创建一个子类对象，编译后会生成一个 <code>类名$编号.class</code> 文件<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">new</span> 类或接口(参数)&#123;<br>    类体（一般是方法重写）<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>用于更方便创建子类</li>\n</ol>\n<h2 id=\"函数式编程\"><a href=\"#函数式编程\" class=\"headerlink\" title=\"函数式编程\"></a>函数式编程</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"Lambda-表达式\"><a href=\"#Lambda-表达式\" class=\"headerlink\" title=\"Lambda 表达式\"></a>Lambda 表达式</h3><ol>\n<li>语法：<code>(参数列表) -&gt; &#123;方法体&#125;</code></li>\n<li>函数式接口：只有一个抽象方法的接口</li>\n<li>可以简化函数式接口的匿名内部类</li>\n</ol>\n<h3 id=\"静态方法引用\"><a href=\"#静态方法引用\" class=\"headerlink\" title=\"静态方法引用\"></a>静态方法引用</h3><ol>\n<li>格式：<code>类名::静态方法名</code></li>\n<li>如果一个Lambda表达式里只调用一个静态方法，并且<code>-&gt;</code>前后的参数的形式一致，则可以使用静态方法引用</li>\n</ol>\n<h3 id=\"实例方法引用\"><a href=\"#实例方法引用\" class=\"headerlink\" title=\"实例方法引用\"></a>实例方法引用</h3><ol>\n<li>语法：<code>对象::实例方法名</code></li>\n<li>如果一个Lambda表达式里只调用一个实例方法，并且<code>-&gt;</code>前后的参数的形式一致，则可以使用实例方法引用</li>\n</ol>\n<h3 id=\"特定类型方法引用\"><a href=\"#特定类型方法引用\" class=\"headerlink\" title=\"特定类型方法引用\"></a>特定类型方法引用</h3><ol>\n<li>语法：<code>特定类名::实例方法名</code></li>\n<li>如果某个Lambda表达式里只是调用一个特定类型的实例方法，并且前面参数列表的第一个参数作为方法的主调，后面所有参数都是作为实例方法的入参，则可以使用特定类型方法引用</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main2</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-comment\">// 需求：一个英文人名数组，按字母升序排序</span><br>        String[] names = &#123;<span class=\"hljs-string\">&quot;Tom&quot;</span>, <span class=\"hljs-string\">&quot;Jerry&quot;</span>, <span class=\"hljs-string\">&quot;Mike&quot;</span>, <span class=\"hljs-string\">&quot;Mary&quot;</span>, <span class=\"hljs-string\">&quot;Smith&quot;</span>, <span class=\"hljs-string\">&quot;Kate&quot;</span>, <span class=\"hljs-string\">&quot;tom&quot;</span>, <span class=\"hljs-string\">&quot;jam&quot;</span>, <span class=\"hljs-string\">&quot;milk&quot;</span>&#125;;<br><br>        <span class=\"hljs-comment\">// 排序</span><br>        Arrays.sort(names);<br>        <span class=\"hljs-comment\">// 忽略首字母大小写</span><br>        Arrays.sort(names, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>&lt;String&gt;() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compare</span><span class=\"hljs-params\">(String o1, String o2)</span> &#123;<br>                <span class=\"hljs-comment\">// compareToIgnoreCase(): 忽略大小写</span><br>                <span class=\"hljs-keyword\">return</span> o1.compareToIgnoreCase(o2);<br>            &#125;<br>        &#125;);<br><br>        <span class=\"hljs-comment\">// Lambda 表达式</span><br>        Arrays.sort(names, (o1, o2) -&gt; o1.compareToIgnoreCase(o2));<br><br>        <span class=\"hljs-comment\">// 特定的方法引用：类名::方法名</span><br>        Arrays.sort(names, String::compareToIgnoreCase);<br><br>        System.out.println(Arrays.toString(names));<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"构造器引用\"><a href=\"#构造器引用\" class=\"headerlink\" title=\"构造器引用\"></a>构造器引用</h3><ol>\n<li>语法：<code>类名::new</code></li>\n<li>如果某个Lambda表达式里只是在创建对象，并且<code>-&gt;</code>前后的参数形式一致，则可以使用构造器引用</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main3</span> &#123;<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        <span class=\"hljs-type\">CarFactory</span> <span class=\"hljs-variable\">factory</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CarFactory</span>() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-keyword\">public</span> Car <span class=\"hljs-title function_\">create</span><span class=\"hljs-params\">(String name)</span> &#123;<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Car</span>(name);<br>            &#125;<br>        &#125;;<br>        <span class=\"hljs-comment\">// Lambda 表达式</span><br>        <span class=\"hljs-type\">CarFactory</span> <span class=\"hljs-variable\">factory2</span> <span class=\"hljs-operator\">=</span> (name) -&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Car</span>(name);<br><br>        <span class=\"hljs-comment\">// 构造器引用</span><br>        <span class=\"hljs-type\">CarFactory</span> <span class=\"hljs-variable\">factory3</span> <span class=\"hljs-operator\">=</span> Car::<span class=\"hljs-keyword\">new</span>;<br>    &#125;<br><br>&#125;<br><br><span class=\"hljs-meta\">@FunctionalInterface</span><br><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">CarFactory</span> &#123;<br>    Car <span class=\"hljs-title function_\">create</span><span class=\"hljs-params\">(String name)</span>;<br>&#125;<br><br><span class=\"hljs-meta\">@Data</span><br><span class=\"hljs-meta\">@NoArgsConstructor</span><br><span class=\"hljs-meta\">@AllArgsConstructor</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Car</span>&#123;<br>    <span class=\"hljs-keyword\">private</span> String name;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"常用API\"><a href=\"#常用API\" class=\"headerlink\" title=\"常用API\"></a>常用API</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<blockquote>\n<p><a href=\"#string\">String</a><br><a href=\"#arraylist\">ArrayList</a></p>\n</blockquote>\n<h3 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h3><h4 id=\"创建字符串\"><a href=\"#创建字符串\" class=\"headerlink\" title=\"创建字符串\"></a>创建字符串</h4><ol>\n<li><strong>方式一</strong>：<code>String str = &quot;hello world&quot;;</code></li>\n<li>方式二：调用构造器创建字符串对象<ol>\n<li><code>String str = new String();</code> 创建一个空字符串对象</li>\n<li><code>String str = new String(&quot;hello world&quot;);</code> 创建一个字符串对象</li>\n<li><code>String str = new String(char[] value);</code> 根据字符数组创建一个字符串对象</li>\n<li><code>String str = new String(byte[] value);</code> 根据字节数组创建一个字符串对象</li>\n</ol>\n</li>\n<li>方式一存放在<strong>常量池</strong>中，且相同的字符串对象只创建一个</li>\n<li>方式二存放在<strong>堆</strong>中，且相同内容可以创建多个对象</li>\n</ol>\n<h4 id=\"处理字符串\"><a href=\"#处理字符串\" class=\"headerlink\" title=\"处理字符串\"></a>处理字符串</h4><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>int length()</code></td>\n<td>获取字符串长度</td>\n</tr>\n<tr>\n<td><code>boolean equals(Object obj)</code></td>\n<td>字符串内容比较（<code>==</code>比较的是字符串地址！）</td>\n</tr>\n<tr>\n<td><code>char charAt(int index)</code></td>\n<td>获取索引处的字符</td>\n</tr>\n<tr>\n<td><code>char[] toCharArray()</code></td>\n<td>转换成字符数组</td>\n</tr>\n<tr>\n<td><code>boolean equalsIgnoreCase(String str)</code></td>\n<td>判断字符串内容是否一致，忽略大小写</td>\n</tr>\n<tr>\n<td><code>String substring(int beginIndex, int endIndex)</code></td>\n<td>根据索引截取字符串</td>\n</tr>\n<tr>\n<td><code>String substring(int beginIndex)</code></td>\n<td>从索引处截取字符串</td>\n</tr>\n<tr>\n<td><code>String replace(CharSequence oldChar, CharSequence newChar)</code></td>\n<td>新值替换旧值</td>\n</tr>\n<tr>\n<td><code>boolean contains(CharSequence s)</code></td>\n<td>判断字符串中是否包含子串</td>\n</tr>\n<tr>\n<td><code>boolean startsWith(String prefix)</code></td>\n<td>判断字符串是否以指定字符开头</td>\n</tr>\n<tr>\n<td><code>String[] split(String regex)</code></td>\n<td>将字符串按某个字符分割为字符串数组</td>\n</tr>\n</tbody></table>\n<h3 id=\"ArrayList\"><a href=\"#ArrayList\" class=\"headerlink\" title=\"ArrayList\"></a>ArrayList</h3><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>ArrayList&lt;E&gt;()</code></td>\n<td>创建一个空的集合对象，E为集合中元素的数据类型，可不指定</td>\n</tr>\n<tr>\n<td><code>boolean add(E e)</code></td>\n<td>添加元素到集合末尾</td>\n</tr>\n<tr>\n<td><code>void add(int index, E element)</code></td>\n<td>在指定索引处添加元素</td>\n</tr>\n<tr>\n<td><code>E get(int index)</code></td>\n<td>获取指定索引处的元素</td>\n</tr>\n<tr>\n<td><code>int size()</code></td>\n<td>获取集合大小</td>\n</tr>\n<tr>\n<td><code>E remove(int index)</code></td>\n<td>删除指定索引处的元素，返回删除的元素</td>\n</tr>\n<tr>\n<td><code>boolean remove(Object o)</code></td>\n<td>删除指定元素，返回是否删除成功</td>\n</tr>\n<tr>\n<td><code>E set(int index, E element)</code></td>\n<td>修改指定索引处的元素，返回修改前的元素</td>\n</tr>\n</tbody></table>\n<h2 id=\"GUI编程\"><a href=\"#GUI编程\" class=\"headerlink\" title=\"*GUI编程\"></a>*GUI编程</h2><blockquote>\n<p>目前项目开发几乎不使用Java来开发GUI界面，仅了解</p>\n</blockquote>\n<p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"常见的Swing组件\"><a href=\"#常见的Swing组件\" class=\"headerlink\" title=\"常见的Swing组件\"></a>常见的Swing组件</h3><table>\n<thead>\n<tr>\n<th>组件</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"#jframe\">JFrame</a></td>\n<td>窗口</td>\n</tr>\n<tr>\n<td><a href=\"#jpanel\">JPanel</a></td>\n<td>面板，用于组织其他组件的容器</td>\n</tr>\n<tr>\n<td><a href=\"#jbutton\">JButton</a></td>\n<td>按钮</td>\n</tr>\n<tr>\n<td>JTextField</td>\n<td>文本输入框</td>\n</tr>\n<tr>\n<td>JTable</td>\n<td>表格</td>\n</tr>\n</tbody></table>\n<h3 id=\"JFrame\"><a href=\"#JFrame\" class=\"headerlink\" title=\"JFrame\"></a>JFrame</h3><table>\n<thead>\n<tr>\n<th>API</th>\n<th>作用</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>void setSize(int width, int height)</code></td>\n<td>设置窗口大小</td>\n<td></td>\n</tr>\n<tr>\n<td><code>void setLocationRelativeTo(Component c)</code></td>\n<td>设置窗口位置</td>\n<td></td>\n</tr>\n<tr>\n<td><code>void setDefaultCloseOperation(int operation)</code></td>\n<td>设置关闭方式</td>\n<td><code>JFrame.EXIT_ON_CLOSE</code> 关闭窗口时退出程序</td>\n</tr>\n<tr>\n<td><code>void setVisible(boolean b)</code></td>\n<td>设置窗口是否可见</td>\n<td></td>\n</tr>\n<tr>\n<td><code>void add(Component c)</code></td>\n<td>添加组件</td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"JPanel\"><a href=\"#JPanel\" class=\"headerlink\" title=\"JPanel\"></a>JPanel</h3><p><a href=\"#gui%E7%BC%96%E7%A8%8B\">back to GUI编程</a></p>\n<table>\n<thead>\n<tr>\n<th>API</th>\n<th>作用</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>void add(Component c)</code></td>\n<td>添加组件</td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"JButton\"><a href=\"#JButton\" class=\"headerlink\" title=\"JButton\"></a>JButton</h3><p><a href=\"#gui%E7%BC%96%E7%A8%8B\">back to GUI编程</a></p>\n<table>\n<thead>\n<tr>\n<th>API</th>\n<th>作用</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>void setText(String text)</code></td>\n<td>设置按钮文本</td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"Layout-Manager\"><a href=\"#Layout-Manager\" class=\"headerlink\" title=\"Layout Manager\"></a>Layout Manager</h3><p><a href=\"#gui%E7%BC%96%E7%A8%8B\">back to GUI编程</a></p>\n<table>\n<thead>\n<tr>\n<th>Layout Manager</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>BorderLayout</code></td>\n<td>边界布局，将容器分成5个区域，North、South、East、West、Center，每个区域只有一个组件</td>\n</tr>\n<tr>\n<td><code>FlowLayout</code></td>\n<td>流式布局，组件排满一行自动换行</td>\n</tr>\n<tr>\n<td><code>GridLayout</code></td>\n<td>网格布局，组件会自动填充</td>\n</tr>\n<tr>\n<td><code>GridBagLayout</code></td>\n<td>网格布局，组件会自动填充</td>\n</tr>\n</tbody></table>\n"},{"title":"Python笔记(持续更新中)","date":"2025-09-06T11:56:00.000Z","updated":"2025-09-26T03:34:36.105Z","cover":"https://kei-blog.oss-cn-beijing.aliyuncs.com/asset/130997637_p0-cut.jpg","_content":"\n<style>\n.table-container {\n  overflow-x: auto;\n  margin: 1em 0;\n}\n\ntable {\n  min-width: 100%;\n  display: block;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\nth, td {\n  padding: 8px 12px;\n  text-align: left;\n  white-space: nowrap;\n}\n</style>\n\n# Python 笔记\n\n## 目录\n> 1. [列表 list](#列表-list)\n> 2. [元组 tuple](#元组-tuple)\n> 3. [字符串 string](#字符串-string)\n> 4. [集合 set](#集合-set)\n> 5. [字典 dict](#字典-dict)\n> 6. [容器 container](#容器-container)\n> 7. [文件 file](#文件)\n> 8. [正则表达式](#正则表达式)\n> 9. [异常 Exception](#异常-exception)\n> 10. [模块 module](#模块-module)\n> 11. [json](#json)\n> 12. [pyecharts](#pyecharts)\n> 13. [面向对象 OOP](#面向对象)\n\n\n## 列表 list\n\n[返回目录](#目录)\n\n### 列表方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`index(item)`|返回列表中指定元素的索引|`索引`,item不存在返回`error`|\n|`insert(index,item)`|在列表指定位置插入元素，此位置后的元素右移|`None`|\n|`append(item)`|在列表末尾添加元素|`None`|\n|`extend(list)`|在列表末尾添加列表元素|`None`|\n|`del list[index]`|删除列表指定位置的元素|`None`|\n|`pop(index)`|删除列表指定位置的元素，并返回该元素|`元素`|\n|`remove(item)`|删除列表中指定元素的第一个匹配项|`None`|\n|`clear()`|清空列表|`None`|\n|`count(item)`|返回列表中指定元素的个数|`个数`|\n|`len(list)`|返回列表的长度|`长度`|\n|`reverse()`|列表倒序|`None`|\n|**`list[begin:end:step]`**|切片，返回列表指定范围的元素|`列表`|\n\n</div>\n\n\n## 元组 tuple\n\n[返回目录](#目录)\n\n### 元组方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`index(item)`|返回元组中指定元素的索引|`索引`,item不存在返回`error`|\n|`count(item)`|返回元组中指定元素的个数|`个数`|\n|`len(tuple)`|返回元组的长度|`长度`|\n|**`tuple[begin:end:step]`**|切片，返回元组指定范围的元素|`元组`|\n\n</div>\n\n\n### 注意事项\n1. 元组不可变，不能添加、删除、修改元素\n2. 元组中的列表仍然可变，原因在于元组中的列表属于引用类型，列表属于对象，对象都是引用类型\n\n\n## 字符串 string\n\n[返回目录](#目录)\n\n### 字符串方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`index(item)`|返回字符串中指定元素起始位置的索引|`索引`,item不存在返回`error`|\n|`replace(old,new)`|替换字符串中指定元素，原字符串不变|`替换后的字符串`|\n|`split(sep)`|将字符串按指定分隔符分隔，返回列表|`列表`|\n|`strip([chars])`|去除字符串头尾的指定字符，默认参数为`空格`|`字符串`|\n|`count(item)`|返回字符串中指定元素的个数|`个数`|\n|`len(string)`|返回字符串的长度|`长度`|\n|**`string[begin:end:step]`**|切片，返回字符串指定范围的元素|`字符串`|\n\n</div>\n\n\n### 注意事项\n1. 字符串不可变，不能添加、删除、修改元素\n\n## 集合 set\n\n[返回目录](#目录)\n\n### 集合方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`add(item)`|添加元素|`None`|\n|`remove(item)`|删除元素|`None`|\n|`pop()`|删除并返回集合中的第一个元素|`元素`|\n|`clear()`|清空集合|`None`|\n|`difference(set)`|返回两个集合的差集，即主类有而参数类没有的元素|`集合`|\n|`difference_update(set)`|删除两个集合的交集元素，主类改变而参数类不变|`None`|\n|`union(set)`|返回两个集合的并集，该并集是新集合，原集合不变|`集合`|\n|`len(set)`|返回集合的长度|`长度`|\n\n</div>\n\n### 注意事项\n1. 集合中的元素不能重复\n2. 集合是无序的，不能通过索引访问元素\n\n## 字典 dict\n\n[返回目录](#目录)\n\n### 字典方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`dict[key] = value`|添加元素，若key已存在，则更新value|`None`|\n|`pop(key)`|删除指定key的元素，并返回该元素|`元素`|\n|`clear()`|清空字典|`None`|\n|`keys()`|返回字典中所有key的列表|`列表`|\n|`len(dict)`|返回字典的长度|`长度`|\n\n</div>\n\n## 容器 container\n\n[返回目录](#目录)\n\nlist,tuple,string,set,dict都是容器\n\n### 容器通用方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`len(container)`|返回容器的长度|`长度`|\n|`max(container)`|返回容器中的最大值|`最大值`|\n|`min(container)`|返回容器中的最小值|`最小值`|\n|`sorted(container, [reverse=False])`|返回容器中的排序后的元素，reverse为True时，返回排序后的元素逆序|`排序后的元素list`|\n\n</div>\n\n### 容器类型转换\n1. 转`list`：字典中的**key值**转为list元素；字符串的每个**字符**转为list元素\n2. 转`tuple`：字典中的**key值**转为tuple元素；字符串的每个**字符**转为tuple元素\n3. 转`set`：字典中的**key值**转为set元素；字符串的每个**字符**转为set元素\n\n\n## 文件\n\n[返回目录](#目录)\n\n### 文件的读取\n|方法|描述|返回值|参数说明|\n|---|---|---|---|\n|`open(filename, mode='<r>', encoding='<utf-8>')`|打开文件|`文件对象`|filename: 文件名或文件路径 <br> mode: 文件打开模式 <br> encoding: 文件编码 <br> `r`: 只读模式 <br> `w`: 只写模式，同名文件存在则覆盖，不存在则创建 <br> `a`: 追加模式，同名文件存在则追加，不存在则创建|\n|`with open(filename, mode='<r>', encoding='<utf-8>') as f:`|打开文件，在运行完此语句块时自动关闭文件|`None`|f: `open()`返回的对象|\n|`file.read([size])`|读取文件内容|`文件内容`|size: 读取指定字节数，默认为-1，表示读取所有内容|\n|`file.readline()`|读取文件的一行内容|`行内容`|\n|`file.readlines()`|读取文件所有行内容|`行内容list`|\n|`for line in file:`|循环读取文件内容|`None`|\n|`file.close()`|关闭文件|`None`|\n\n### 文件的写入\n|方法|描述|返回值|参数说明|\n|---|---|---|---|\n|`file.write(string)`|写入文件内容，并不会立刻写入文件，而是先写入缓冲区|`None`|`string`: 要写入的内容|\n|`file.flush()`|将缓冲区中的内容写入文件，`close()`函数包含`flush()`功能|`None`|\n\n\n## 正则表达式\n\n[返回目录](#目录)\n\n### 常用元符号\n|正则表达式符号|含义|\n|---|---|\n|`.`|匹配任意字符，除了换行符|\n|`*`|匹配0个或多个前面的字符|\n|`+`|匹配1个或多个前面的字符|\n|`?`|匹配0个或1个前面的字符|\n|`^`|匹配字符串的开头|\n|`$`|匹配字符串的结尾|\n|`{n}`|匹配前一个字符n次|\n|`{n,m}`|匹配前一个字符n到m次|\n|`{n,}`|匹配前一个字符n次以上|\n\n### 字符类\n|字符类|含义|\n|---|---|\n|`[abc]`|匹配a或b或c|\n|`[^abc]`|匹配除了a或b或c之外的字符|\n|`[a-z]`|匹配a到z之间的任意字符|\n|`[A-Z]`|匹配A到Z之间的任意字符|\n|`[0-9]`|匹配0到9之间的任意字符|\n|`\\d`|匹配数字|\n|`\\w`|匹配字母、数字、下划线|\n|`\\s`|匹配空白字符|\n\n\n## 异常 Exception\n\n[返回目录](#目录)\n\n### 捕获异常\n~~~python\ntry:\n    # 有可能抛出异常的代码段\nexcept [(NameError, ZeroDivisionError, ...) as e]:\n    # 捕获对应类型的异常，默认所有异常\n    # 异常处理代码段\n[else:\n    \"\"\"\n    没有异常时执行代码段\n    \"\"\"\n]\n[finally:\n    \"\"\"\n     finally代码段，无论是否有异常，都会执行\n    \"\"\"\n]\n~~~\n\n### 异常的类型\n> 详细请查阅官方文档：[Python异常处理](https://docs.python.org/3/library/exceptions.html#Exception)\n\n\n|异常类型|描述|父类|\n|---|---|---|\n|`Exception`|所有异常的基类|`object`|\n|`ArithmeticError`|数学运算异常|`Exception`|\n|`OverflowError`|算术运算溢出异常|`ArithmeticError`|\n|`ZeroDivisionError`|除数为0异常|`ArithmeticError`|\n|`FloatingPointError`|浮点数异常|`ArithmeticError`|\n|`AssertionError`|断言异常|`Exception`|\n|`AttributeError`|属性异常|`Exception`|\n|`BufferError`|缓冲区异常|`Exception`|\n|`EOFError`|文件结束异常|`Exception`|\n|`ImportError`|导入异常|`Exception`|\n|`ModuleNotFoundError`|模块未找到异常|`ImportError`|\n|`IndexError`|索引异常，下标超出范围|`Exception`|\n|`KeyError`|键异常，键集中找不到映射|`Exception`|\n|`LookupError`|查找异常|`Exception`|\n|`MemoryError`|内存异常|`Exception`|\n|`NameError`|名称异常，变量未定义|`Exception`|\n|`NotImplementedError`|未实现异常|`Exception`|\n|`OSError`|操作系统异常|`Exception`|\n|`OverflowError`|算术运算溢出异常|`ArithmeticError`|\n\n\n## 模块 module\n\n[返回目录](#目录)\n\n模块是Python代码文件，模块名就是文件名，其中定义了模块的变量、函数、类等，也可以包含可执行的代码\n\n### 导入模块\n~~~python\n# from 模块名 import 变量名 后续可以直接使用变量名\n# import 模块名 后续必须使用模块名.变量名\n[from 模块名] import <模块变量|模块函数|模块类|*> [as 别名]\n~~~\n\n### 注意事项\n1. 不同模块的同名函数，后导入的会覆盖先导入的\n2. `__main__`变量在模块中可以直接运行，测试函数功能，但在导入模块中，`__main__`变量会失效\n3. `__all__`变量，在模块或**__init__.py**中定义，用于指定模块的成员，只有被指定成员导入时，才会被`*`导入，未被指定只能使用变量名导入\n~~~python\n# __all__变量指定的语法\n__all__ = ['变量名', '函数名', '类名']\n~~~\n\n### Python 包 package\n包是模块的集合，包名就是文件夹名，包中的模块名就是文件夹中的文件名\n#### 创建包\n1. 创建文件夹，文件夹名就是包名\n2. 在文件夹中创建**__init__.py__**文件\n\n### 第三方包\n|语法|描述|\n|---|---|\n|`pip install 包名`|安装包|\n\n\n## json\n[返回目录](#目录)\n\n本质上是能在不同编程语言中互操作的数据格式，在python中为字符串\n~~~python\nimport json\n~~~\n### json相关操作\n|方法|描述|返回值|参数说明|\n|---|---|---|---|\n|`json.dumps(obj, ensure_ascii=False, indent=4)`|将Python对象转换为json字符串|`json字符串`|obj: 要转换的Python对象，可以是**字典**和嵌套字典的**列表** <br> ensure_ascii: 是否转义非ASCII字符，中文显示需要设置False <br> indent: 缩进级别|\n|`json.loads(json_str)`|将json字符串转换为Python对象|`Python对象`|json_str: 要转换的json字符串|\n\n## pyecharts\n[返回目录](#目录)\n\n[官方文档](https://gallery.pyecharts.org/#/Line/README)\n\n~~~bash\npip install pyecharts\n~~~\n\n~~~python\nfrom pyecharts[.<选项>] import <包名> [as <别名>]\n~~~\n\n### 全局配置选项\n[官方文档](https://pyecharts.org/#/zh-cn/global_options)\n~~~python\nline.set_global_opts(\n  title_opts=opts.TitleOpts(title=\"GDP\"),\n  ...\n)\n~~~\n|参数|描述|构造参数|参数说明|\n|---|---|---|---|\n|`title_opts`|标题配置项|opts.TitleOpts(title=\"GDP\")|title: 标题名称|\n|`legend_opts`|图例配置项|opts.LegendOpts(is_show=False)|is_show: 是否显示图例|\n|`tooltip_opts`|提示框配置项|opts.TooltipOpts(is_show=True)|is_show: 是否显示提示框|\n|`toolbox_opts`|工具箱配置项|opts.ToolboxOpts(is_show=True)|is_show: 是否显示工具箱|\n|`visualmap_opts`|视觉映射配置项|opts.VisualMapOpts(is_show=True)|is_show: 是否显示视觉映射|\n\n\n\n### 基础折线图\n\n~~~python\n# 绘制基础折线图\n\n## 导包\nfrom pyecharts.charts import Line\n\n## 得到折线图对象\nline = Line()\n\n## 添加数据\n### x轴数据\nline.add_xaxis([\"中国\", \"美国\", \"日本\", \"印度\", \"法国\", \"英国\", \"俄罗斯\", \"意大利\", \"德国\", \"西班牙\"])\n### y轴数据\nline.add_yaxis(\"GDP\", [30, 25, 20, 15, 10, 5, 2, 1, 0.5, 0.1])\n\n## 设置全局配置选项\nline.set_global_opts(\n    title_opts=opts.TitleOpts(title=\"GDP\"),\n    tooltip_opts=opts.TooltipOpts(is_show=True),\n    legend_opts=opts.LegendOpts(is_show=True),\n    toolbox_opts=opts.ToolboxOpts(is_show=True),\n    visualmap_opts=opts.VisualMapOpts(is_show=True)\n)\n\n## 生成图表\nline.render()\n~~~\n\n\n## 面向对象\n[返回目录](#目录)\n\n### 类\n基本结构：\n~~~python\nclass Student:\n    # 成员变量\n    name = None\n    age = None\n    gender = None\n    \n    # 成员方法，必须有self参数，表示当前对象\n    def showname(self):\n        print(self.name)\n~~~\n构造方法：\n~~~python\n# 构造方法\n    def __init__(self, name, gender, age):\n        self.name = name\n        self.gender = gender\n        self.age = age\n        print(\"创建一个学生对象\")\n~~~\n魔术方法：\n|方法|描述|参数列表|返回值|\n|---|---|---|---|\n|`__init__(self, *args, **kwargs)`|构造方法|`self`: 当前对象 <br> `*args`: 可变参数 <br> `**kwargs`: 关键字参数|无|\n|`__str__(self)`|对象转字符串|`self`: 当前对象|字符串|\n|`__lt__(self, other)`|重写小于，用于对象某一规则的比较|`self`: 当前对象 <br> `other`: 其他对象|布尔值|\n|`__le__(self, other)`|重写小于等于，用于对象某一规则的比较|`self`: 当前对象 <br> `other`: 其他对象|布尔值|\n|`__eq__(self, other)`|重写等于，用于对象某一规则的比较|`self`: 当前对象 <br> `other`: 其他对象|布尔值|\n\n~~~python\n    # 魔术方法\n    ## __str__(): 返回对象的字符串表示\n    def __str__(self):\n        return \"name=%s,gender=%s,age=%s\" % (self.name, self.gender, self.age)\n    \n    ## __lt__(): 用于类对象的小于比较(less than)\n    def __lt__(self, other):\n        return self.age < other.age\n    \n    ## __le__(): 用于类对象的小于等于比较(less than or equal)\n    def __le__(self, other):\n        return self.age <= other.age\n    \n    ## __eq__(): 用于类对象的等于比较(equal)，默认\"==\"比较的是内存地址\n    def __eq__(self, other):\n        return self.age == other.age\n~~~\n\n### 类的封装\n**封装**：封装就是将**属性或方法私有化**，属性或方法私有化后，外部无法直接访问属性或方法，只能通过方法访问属性或方法\n\n语法：\n属性私有化：`__属性名`\n方法私有化：`__方法名()`\n受保护属性：`_属性名`\n受保护方法：`_方法名()`\n\n~~~python\nclass Student:\n    # 私有成员变量\n    __name = None\n    __age = None\n    __sex = None\n    \n    def __init__(self, name, age, sex):\n        self.__name = name\n        self.__age = age\n        self.__sex = sex\n    \n    def show(self):\n        print(\"姓名：%s, 年龄：%d, 性别：%s\" % (self.__name, self.__age, self.__sex))\n    \n    def getName(self):\n        return self.__name\n    \n    def getAge(self):\n        return self.__age\n    \n    def getSex(self):\n        return self.__sex\n    \n    # 私有成员方法\n    def __setName(self, name):\n        self.__name = name\n    \n    def __setAge(self, age):\n        self.__age = age\n        \n    def __setSex(self, sex):\n        self.__sex = sex\n~~~\n\n### 类的继承\n继承：子类继承父类的属性和方法，并添加新的属性和方法\n1. 不同于Java语言，Python语言支持多继承\n2. 多继承时，父类同名属性或方法，会按照从左到右的顺序进行覆盖，即左边优先级更大\n3. 子类只继承父类的**公有**或**受保护**属性和方法，不会继承父类的私有属性或方法\n4. 父类的私有属性或方法，子类无法直接访问，需通过父类方法进行访问\n5. 子类可以**重写**父类的同名方法\n\n语法：\n1. 继承：`class 子类名(父类名1[, 父类名2, ...]):`\n\n2. 调用：`super().[属性或方法名(参数)]`或`父类名.方法名(self, 参数)`\n\n### 类的多态\n* 子类继承父类，并重写父类的同名方法\n* 函数参数可以指定父类对象，调用时传入子类对象\n* 通过调用不同子类的同名方法，实现多态\n* 父类可以声明一个抽象方法，子类必须实现该抽象方法\n~~~python\n# 多态\nclass Animal:\n    def cry(self):\n        print(\"动物叫\")\n    \n    # 父类可以定义抽象方法 子类必须实现抽象方法\n    def eat(self):\n        pass\n        \nclass Dog(Animal):\n    # 重写父类的方法\n    def cry(self):\n        print(\"汪汪汪\")\n    \n    # 重写父类抽象方法\n    def eat(self):\n        print(\"大狗嚼嚼嚼\")\n        \nclass Cat(Animal):\n    # 重写父类方法\n    def cry(self):\n        print(\"喵喵喵\")\n        \n    # 重写父类抽象方法\n    def eat(self):\n        print(\"吃吃吃\")\n        \n# 定义一个方法 接收一个父类对象\ndef print_cry(animal: Animal):\n    animal.cry()\n    \ndef print_eat(animal: Animal):\n    animal.eat()\n        \n        \ndog = Dog()\ncat = Cat()\n\n# 传入不同子类 调用不同的方法\nprint_cry(dog)\nprint_cry(cat)\n\nprint_eat(dog)\nprint_eat(cat)\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/PythonTips.md","raw":"---\ntitle: \"Python笔记(持续更新中)\"\ndate: 2025/09/06 19:56:00\ntags: Python\nupdated:\ncover: https://kei-blog.oss-cn-beijing.aliyuncs.com/asset/130997637_p0-cut.jpg\ncategories:\n  - 编程语言\n---\n\n<style>\n.table-container {\n  overflow-x: auto;\n  margin: 1em 0;\n}\n\ntable {\n  min-width: 100%;\n  display: block;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\nth, td {\n  padding: 8px 12px;\n  text-align: left;\n  white-space: nowrap;\n}\n</style>\n\n# Python 笔记\n\n## 目录\n> 1. [列表 list](#列表-list)\n> 2. [元组 tuple](#元组-tuple)\n> 3. [字符串 string](#字符串-string)\n> 4. [集合 set](#集合-set)\n> 5. [字典 dict](#字典-dict)\n> 6. [容器 container](#容器-container)\n> 7. [文件 file](#文件)\n> 8. [正则表达式](#正则表达式)\n> 9. [异常 Exception](#异常-exception)\n> 10. [模块 module](#模块-module)\n> 11. [json](#json)\n> 12. [pyecharts](#pyecharts)\n> 13. [面向对象 OOP](#面向对象)\n\n\n## 列表 list\n\n[返回目录](#目录)\n\n### 列表方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`index(item)`|返回列表中指定元素的索引|`索引`,item不存在返回`error`|\n|`insert(index,item)`|在列表指定位置插入元素，此位置后的元素右移|`None`|\n|`append(item)`|在列表末尾添加元素|`None`|\n|`extend(list)`|在列表末尾添加列表元素|`None`|\n|`del list[index]`|删除列表指定位置的元素|`None`|\n|`pop(index)`|删除列表指定位置的元素，并返回该元素|`元素`|\n|`remove(item)`|删除列表中指定元素的第一个匹配项|`None`|\n|`clear()`|清空列表|`None`|\n|`count(item)`|返回列表中指定元素的个数|`个数`|\n|`len(list)`|返回列表的长度|`长度`|\n|`reverse()`|列表倒序|`None`|\n|**`list[begin:end:step]`**|切片，返回列表指定范围的元素|`列表`|\n\n</div>\n\n\n## 元组 tuple\n\n[返回目录](#目录)\n\n### 元组方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`index(item)`|返回元组中指定元素的索引|`索引`,item不存在返回`error`|\n|`count(item)`|返回元组中指定元素的个数|`个数`|\n|`len(tuple)`|返回元组的长度|`长度`|\n|**`tuple[begin:end:step]`**|切片，返回元组指定范围的元素|`元组`|\n\n</div>\n\n\n### 注意事项\n1. 元组不可变，不能添加、删除、修改元素\n2. 元组中的列表仍然可变，原因在于元组中的列表属于引用类型，列表属于对象，对象都是引用类型\n\n\n## 字符串 string\n\n[返回目录](#目录)\n\n### 字符串方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`index(item)`|返回字符串中指定元素起始位置的索引|`索引`,item不存在返回`error`|\n|`replace(old,new)`|替换字符串中指定元素，原字符串不变|`替换后的字符串`|\n|`split(sep)`|将字符串按指定分隔符分隔，返回列表|`列表`|\n|`strip([chars])`|去除字符串头尾的指定字符，默认参数为`空格`|`字符串`|\n|`count(item)`|返回字符串中指定元素的个数|`个数`|\n|`len(string)`|返回字符串的长度|`长度`|\n|**`string[begin:end:step]`**|切片，返回字符串指定范围的元素|`字符串`|\n\n</div>\n\n\n### 注意事项\n1. 字符串不可变，不能添加、删除、修改元素\n\n## 集合 set\n\n[返回目录](#目录)\n\n### 集合方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`add(item)`|添加元素|`None`|\n|`remove(item)`|删除元素|`None`|\n|`pop()`|删除并返回集合中的第一个元素|`元素`|\n|`clear()`|清空集合|`None`|\n|`difference(set)`|返回两个集合的差集，即主类有而参数类没有的元素|`集合`|\n|`difference_update(set)`|删除两个集合的交集元素，主类改变而参数类不变|`None`|\n|`union(set)`|返回两个集合的并集，该并集是新集合，原集合不变|`集合`|\n|`len(set)`|返回集合的长度|`长度`|\n\n</div>\n\n### 注意事项\n1. 集合中的元素不能重复\n2. 集合是无序的，不能通过索引访问元素\n\n## 字典 dict\n\n[返回目录](#目录)\n\n### 字典方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`dict[key] = value`|添加元素，若key已存在，则更新value|`None`|\n|`pop(key)`|删除指定key的元素，并返回该元素|`元素`|\n|`clear()`|清空字典|`None`|\n|`keys()`|返回字典中所有key的列表|`列表`|\n|`len(dict)`|返回字典的长度|`长度`|\n\n</div>\n\n## 容器 container\n\n[返回目录](#目录)\n\nlist,tuple,string,set,dict都是容器\n\n### 容器通用方法\n<div class=\"table-container\">\n\n|方法|描述|返回值|\n|---|---|---|\n|`len(container)`|返回容器的长度|`长度`|\n|`max(container)`|返回容器中的最大值|`最大值`|\n|`min(container)`|返回容器中的最小值|`最小值`|\n|`sorted(container, [reverse=False])`|返回容器中的排序后的元素，reverse为True时，返回排序后的元素逆序|`排序后的元素list`|\n\n</div>\n\n### 容器类型转换\n1. 转`list`：字典中的**key值**转为list元素；字符串的每个**字符**转为list元素\n2. 转`tuple`：字典中的**key值**转为tuple元素；字符串的每个**字符**转为tuple元素\n3. 转`set`：字典中的**key值**转为set元素；字符串的每个**字符**转为set元素\n\n\n## 文件\n\n[返回目录](#目录)\n\n### 文件的读取\n|方法|描述|返回值|参数说明|\n|---|---|---|---|\n|`open(filename, mode='<r>', encoding='<utf-8>')`|打开文件|`文件对象`|filename: 文件名或文件路径 <br> mode: 文件打开模式 <br> encoding: 文件编码 <br> `r`: 只读模式 <br> `w`: 只写模式，同名文件存在则覆盖，不存在则创建 <br> `a`: 追加模式，同名文件存在则追加，不存在则创建|\n|`with open(filename, mode='<r>', encoding='<utf-8>') as f:`|打开文件，在运行完此语句块时自动关闭文件|`None`|f: `open()`返回的对象|\n|`file.read([size])`|读取文件内容|`文件内容`|size: 读取指定字节数，默认为-1，表示读取所有内容|\n|`file.readline()`|读取文件的一行内容|`行内容`|\n|`file.readlines()`|读取文件所有行内容|`行内容list`|\n|`for line in file:`|循环读取文件内容|`None`|\n|`file.close()`|关闭文件|`None`|\n\n### 文件的写入\n|方法|描述|返回值|参数说明|\n|---|---|---|---|\n|`file.write(string)`|写入文件内容，并不会立刻写入文件，而是先写入缓冲区|`None`|`string`: 要写入的内容|\n|`file.flush()`|将缓冲区中的内容写入文件，`close()`函数包含`flush()`功能|`None`|\n\n\n## 正则表达式\n\n[返回目录](#目录)\n\n### 常用元符号\n|正则表达式符号|含义|\n|---|---|\n|`.`|匹配任意字符，除了换行符|\n|`*`|匹配0个或多个前面的字符|\n|`+`|匹配1个或多个前面的字符|\n|`?`|匹配0个或1个前面的字符|\n|`^`|匹配字符串的开头|\n|`$`|匹配字符串的结尾|\n|`{n}`|匹配前一个字符n次|\n|`{n,m}`|匹配前一个字符n到m次|\n|`{n,}`|匹配前一个字符n次以上|\n\n### 字符类\n|字符类|含义|\n|---|---|\n|`[abc]`|匹配a或b或c|\n|`[^abc]`|匹配除了a或b或c之外的字符|\n|`[a-z]`|匹配a到z之间的任意字符|\n|`[A-Z]`|匹配A到Z之间的任意字符|\n|`[0-9]`|匹配0到9之间的任意字符|\n|`\\d`|匹配数字|\n|`\\w`|匹配字母、数字、下划线|\n|`\\s`|匹配空白字符|\n\n\n## 异常 Exception\n\n[返回目录](#目录)\n\n### 捕获异常\n~~~python\ntry:\n    # 有可能抛出异常的代码段\nexcept [(NameError, ZeroDivisionError, ...) as e]:\n    # 捕获对应类型的异常，默认所有异常\n    # 异常处理代码段\n[else:\n    \"\"\"\n    没有异常时执行代码段\n    \"\"\"\n]\n[finally:\n    \"\"\"\n     finally代码段，无论是否有异常，都会执行\n    \"\"\"\n]\n~~~\n\n### 异常的类型\n> 详细请查阅官方文档：[Python异常处理](https://docs.python.org/3/library/exceptions.html#Exception)\n\n\n|异常类型|描述|父类|\n|---|---|---|\n|`Exception`|所有异常的基类|`object`|\n|`ArithmeticError`|数学运算异常|`Exception`|\n|`OverflowError`|算术运算溢出异常|`ArithmeticError`|\n|`ZeroDivisionError`|除数为0异常|`ArithmeticError`|\n|`FloatingPointError`|浮点数异常|`ArithmeticError`|\n|`AssertionError`|断言异常|`Exception`|\n|`AttributeError`|属性异常|`Exception`|\n|`BufferError`|缓冲区异常|`Exception`|\n|`EOFError`|文件结束异常|`Exception`|\n|`ImportError`|导入异常|`Exception`|\n|`ModuleNotFoundError`|模块未找到异常|`ImportError`|\n|`IndexError`|索引异常，下标超出范围|`Exception`|\n|`KeyError`|键异常，键集中找不到映射|`Exception`|\n|`LookupError`|查找异常|`Exception`|\n|`MemoryError`|内存异常|`Exception`|\n|`NameError`|名称异常，变量未定义|`Exception`|\n|`NotImplementedError`|未实现异常|`Exception`|\n|`OSError`|操作系统异常|`Exception`|\n|`OverflowError`|算术运算溢出异常|`ArithmeticError`|\n\n\n## 模块 module\n\n[返回目录](#目录)\n\n模块是Python代码文件，模块名就是文件名，其中定义了模块的变量、函数、类等，也可以包含可执行的代码\n\n### 导入模块\n~~~python\n# from 模块名 import 变量名 后续可以直接使用变量名\n# import 模块名 后续必须使用模块名.变量名\n[from 模块名] import <模块变量|模块函数|模块类|*> [as 别名]\n~~~\n\n### 注意事项\n1. 不同模块的同名函数，后导入的会覆盖先导入的\n2. `__main__`变量在模块中可以直接运行，测试函数功能，但在导入模块中，`__main__`变量会失效\n3. `__all__`变量，在模块或**__init__.py**中定义，用于指定模块的成员，只有被指定成员导入时，才会被`*`导入，未被指定只能使用变量名导入\n~~~python\n# __all__变量指定的语法\n__all__ = ['变量名', '函数名', '类名']\n~~~\n\n### Python 包 package\n包是模块的集合，包名就是文件夹名，包中的模块名就是文件夹中的文件名\n#### 创建包\n1. 创建文件夹，文件夹名就是包名\n2. 在文件夹中创建**__init__.py__**文件\n\n### 第三方包\n|语法|描述|\n|---|---|\n|`pip install 包名`|安装包|\n\n\n## json\n[返回目录](#目录)\n\n本质上是能在不同编程语言中互操作的数据格式，在python中为字符串\n~~~python\nimport json\n~~~\n### json相关操作\n|方法|描述|返回值|参数说明|\n|---|---|---|---|\n|`json.dumps(obj, ensure_ascii=False, indent=4)`|将Python对象转换为json字符串|`json字符串`|obj: 要转换的Python对象，可以是**字典**和嵌套字典的**列表** <br> ensure_ascii: 是否转义非ASCII字符，中文显示需要设置False <br> indent: 缩进级别|\n|`json.loads(json_str)`|将json字符串转换为Python对象|`Python对象`|json_str: 要转换的json字符串|\n\n## pyecharts\n[返回目录](#目录)\n\n[官方文档](https://gallery.pyecharts.org/#/Line/README)\n\n~~~bash\npip install pyecharts\n~~~\n\n~~~python\nfrom pyecharts[.<选项>] import <包名> [as <别名>]\n~~~\n\n### 全局配置选项\n[官方文档](https://pyecharts.org/#/zh-cn/global_options)\n~~~python\nline.set_global_opts(\n  title_opts=opts.TitleOpts(title=\"GDP\"),\n  ...\n)\n~~~\n|参数|描述|构造参数|参数说明|\n|---|---|---|---|\n|`title_opts`|标题配置项|opts.TitleOpts(title=\"GDP\")|title: 标题名称|\n|`legend_opts`|图例配置项|opts.LegendOpts(is_show=False)|is_show: 是否显示图例|\n|`tooltip_opts`|提示框配置项|opts.TooltipOpts(is_show=True)|is_show: 是否显示提示框|\n|`toolbox_opts`|工具箱配置项|opts.ToolboxOpts(is_show=True)|is_show: 是否显示工具箱|\n|`visualmap_opts`|视觉映射配置项|opts.VisualMapOpts(is_show=True)|is_show: 是否显示视觉映射|\n\n\n\n### 基础折线图\n\n~~~python\n# 绘制基础折线图\n\n## 导包\nfrom pyecharts.charts import Line\n\n## 得到折线图对象\nline = Line()\n\n## 添加数据\n### x轴数据\nline.add_xaxis([\"中国\", \"美国\", \"日本\", \"印度\", \"法国\", \"英国\", \"俄罗斯\", \"意大利\", \"德国\", \"西班牙\"])\n### y轴数据\nline.add_yaxis(\"GDP\", [30, 25, 20, 15, 10, 5, 2, 1, 0.5, 0.1])\n\n## 设置全局配置选项\nline.set_global_opts(\n    title_opts=opts.TitleOpts(title=\"GDP\"),\n    tooltip_opts=opts.TooltipOpts(is_show=True),\n    legend_opts=opts.LegendOpts(is_show=True),\n    toolbox_opts=opts.ToolboxOpts(is_show=True),\n    visualmap_opts=opts.VisualMapOpts(is_show=True)\n)\n\n## 生成图表\nline.render()\n~~~\n\n\n## 面向对象\n[返回目录](#目录)\n\n### 类\n基本结构：\n~~~python\nclass Student:\n    # 成员变量\n    name = None\n    age = None\n    gender = None\n    \n    # 成员方法，必须有self参数，表示当前对象\n    def showname(self):\n        print(self.name)\n~~~\n构造方法：\n~~~python\n# 构造方法\n    def __init__(self, name, gender, age):\n        self.name = name\n        self.gender = gender\n        self.age = age\n        print(\"创建一个学生对象\")\n~~~\n魔术方法：\n|方法|描述|参数列表|返回值|\n|---|---|---|---|\n|`__init__(self, *args, **kwargs)`|构造方法|`self`: 当前对象 <br> `*args`: 可变参数 <br> `**kwargs`: 关键字参数|无|\n|`__str__(self)`|对象转字符串|`self`: 当前对象|字符串|\n|`__lt__(self, other)`|重写小于，用于对象某一规则的比较|`self`: 当前对象 <br> `other`: 其他对象|布尔值|\n|`__le__(self, other)`|重写小于等于，用于对象某一规则的比较|`self`: 当前对象 <br> `other`: 其他对象|布尔值|\n|`__eq__(self, other)`|重写等于，用于对象某一规则的比较|`self`: 当前对象 <br> `other`: 其他对象|布尔值|\n\n~~~python\n    # 魔术方法\n    ## __str__(): 返回对象的字符串表示\n    def __str__(self):\n        return \"name=%s,gender=%s,age=%s\" % (self.name, self.gender, self.age)\n    \n    ## __lt__(): 用于类对象的小于比较(less than)\n    def __lt__(self, other):\n        return self.age < other.age\n    \n    ## __le__(): 用于类对象的小于等于比较(less than or equal)\n    def __le__(self, other):\n        return self.age <= other.age\n    \n    ## __eq__(): 用于类对象的等于比较(equal)，默认\"==\"比较的是内存地址\n    def __eq__(self, other):\n        return self.age == other.age\n~~~\n\n### 类的封装\n**封装**：封装就是将**属性或方法私有化**，属性或方法私有化后，外部无法直接访问属性或方法，只能通过方法访问属性或方法\n\n语法：\n属性私有化：`__属性名`\n方法私有化：`__方法名()`\n受保护属性：`_属性名`\n受保护方法：`_方法名()`\n\n~~~python\nclass Student:\n    # 私有成员变量\n    __name = None\n    __age = None\n    __sex = None\n    \n    def __init__(self, name, age, sex):\n        self.__name = name\n        self.__age = age\n        self.__sex = sex\n    \n    def show(self):\n        print(\"姓名：%s, 年龄：%d, 性别：%s\" % (self.__name, self.__age, self.__sex))\n    \n    def getName(self):\n        return self.__name\n    \n    def getAge(self):\n        return self.__age\n    \n    def getSex(self):\n        return self.__sex\n    \n    # 私有成员方法\n    def __setName(self, name):\n        self.__name = name\n    \n    def __setAge(self, age):\n        self.__age = age\n        \n    def __setSex(self, sex):\n        self.__sex = sex\n~~~\n\n### 类的继承\n继承：子类继承父类的属性和方法，并添加新的属性和方法\n1. 不同于Java语言，Python语言支持多继承\n2. 多继承时，父类同名属性或方法，会按照从左到右的顺序进行覆盖，即左边优先级更大\n3. 子类只继承父类的**公有**或**受保护**属性和方法，不会继承父类的私有属性或方法\n4. 父类的私有属性或方法，子类无法直接访问，需通过父类方法进行访问\n5. 子类可以**重写**父类的同名方法\n\n语法：\n1. 继承：`class 子类名(父类名1[, 父类名2, ...]):`\n\n2. 调用：`super().[属性或方法名(参数)]`或`父类名.方法名(self, 参数)`\n\n### 类的多态\n* 子类继承父类，并重写父类的同名方法\n* 函数参数可以指定父类对象，调用时传入子类对象\n* 通过调用不同子类的同名方法，实现多态\n* 父类可以声明一个抽象方法，子类必须实现该抽象方法\n~~~python\n# 多态\nclass Animal:\n    def cry(self):\n        print(\"动物叫\")\n    \n    # 父类可以定义抽象方法 子类必须实现抽象方法\n    def eat(self):\n        pass\n        \nclass Dog(Animal):\n    # 重写父类的方法\n    def cry(self):\n        print(\"汪汪汪\")\n    \n    # 重写父类抽象方法\n    def eat(self):\n        print(\"大狗嚼嚼嚼\")\n        \nclass Cat(Animal):\n    # 重写父类方法\n    def cry(self):\n        print(\"喵喵喵\")\n        \n    # 重写父类抽象方法\n    def eat(self):\n        print(\"吃吃吃\")\n        \n# 定义一个方法 接收一个父类对象\ndef print_cry(animal: Animal):\n    animal.cry()\n    \ndef print_eat(animal: Animal):\n    animal.eat()\n        \n        \ndog = Dog()\ncat = Cat()\n\n# 传入不同子类 调用不同的方法\nprint_cry(dog)\nprint_cry(cat)\n\nprint_eat(dog)\nprint_eat(cat)\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"PythonTips","published":1,"_id":"cmf88q04a0003c4tl7ruk57xr","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head><style>\n.table-container {\n  overflow-x: auto;\n  margin: 1em 0;\n}\n\ntable {\n  min-width: 100%;\n  display: block;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\nth, td {\n  padding: 8px 12px;\n  text-align: left;\n  white-space: nowrap;\n}\n</style>\n\n</head><body><h1><span id=\"python-%E7%AC%94%E8%AE%B0\">Python 笔记</span></h1><h2><span id=\"%E7%9B%AE%E5%BD%95\">目录</span></h2><blockquote>\n<ol>\n<li><a href=\"#%E5%88%97%E8%A1%A8-list\">列表 list</a></li>\n<li><a href=\"#%E5%85%83%E7%BB%84-tuple\">元组 tuple</a></li>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2-string\">字符串 string</a></li>\n<li><a href=\"#%E9%9B%86%E5%90%88-set\">集合 set</a></li>\n<li><a href=\"#%E5%AD%97%E5%85%B8-dict\">字典 dict</a></li>\n<li><a href=\"#%E5%AE%B9%E5%99%A8-container\">容器 container</a></li>\n<li><a href=\"#%E6%96%87%E4%BB%B6\">文件 file</a></li>\n<li><a href=\"#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F\">正则表达式</a></li>\n<li><a href=\"#%E5%BC%82%E5%B8%B8-exception\">异常 Exception</a></li>\n<li><a href=\"#%E6%A8%A1%E5%9D%97-module\">模块 module</a></li>\n<li><a href=\"#json\">json</a></li>\n<li><a href=\"#pyecharts\">pyecharts</a></li>\n<li><a href=\"#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1\">面向对象 OOP</a></li>\n</ol>\n</blockquote>\n<h2><span id=\"%E5%88%97%E8%A1%A8-list\">列表 list</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%88%97%E8%A1%A8%E6%96%B9%E6%B3%95\">列表方法</span></h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>index(item)</code></td>\n<td>返回列表中指定元素的索引</td>\n<td><code>索引</code>,item不存在返回<code>error</code></td>\n</tr>\n<tr>\n<td><code>insert(index,item)</code></td>\n<td>在列表指定位置插入元素，此位置后的元素右移</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>append(item)</code></td>\n<td>在列表末尾添加元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>extend(list)</code></td>\n<td>在列表末尾添加列表元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>del list[index]</code></td>\n<td>删除列表指定位置的元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>pop(index)</code></td>\n<td>删除列表指定位置的元素，并返回该元素</td>\n<td><code>元素</code></td>\n</tr>\n<tr>\n<td><code>remove(item)</code></td>\n<td>删除列表中指定元素的第一个匹配项</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>clear()</code></td>\n<td>清空列表</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>count(item)</code></td>\n<td>返回列表中指定元素的个数</td>\n<td><code>个数</code></td>\n</tr>\n<tr>\n<td><code>len(list)</code></td>\n<td>返回列表的长度</td>\n<td><code>长度</code></td>\n</tr>\n<tr>\n<td><code>reverse()</code></td>\n<td>列表倒序</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><strong><code>list[begin:end:step]</code></strong></td>\n<td>切片，返回列表指定范围的元素</td>\n<td><code>列表</code></td>\n</tr>\n</tbody></table>\n</div>\n\n\n<h2><span id=\"%E5%85%83%E7%BB%84-tuple\">元组 tuple</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%85%83%E7%BB%84%E6%96%B9%E6%B3%95\">元组方法</span></h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>index(item)</code></td>\n<td>返回元组中指定元素的索引</td>\n<td><code>索引</code>,item不存在返回<code>error</code></td>\n</tr>\n<tr>\n<td><code>count(item)</code></td>\n<td>返回元组中指定元素的个数</td>\n<td><code>个数</code></td>\n</tr>\n<tr>\n<td><code>len(tuple)</code></td>\n<td>返回元组的长度</td>\n<td><code>长度</code></td>\n</tr>\n<tr>\n<td><strong><code>tuple[begin:end:step]</code></strong></td>\n<td>切片，返回元组指定范围的元素</td>\n<td><code>元组</code></td>\n</tr>\n</tbody></table>\n</div>\n\n\n<h3><span id=\"%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\">注意事项</span></h3><ol>\n<li>元组不可变，不能添加、删除、修改元素</li>\n<li>元组中的列表仍然可变，原因在于元组中的列表属于引用类型，列表属于对象，对象都是引用类型</li>\n</ol>\n<h2><span id=\"%E5%AD%97%E7%AC%A6%E4%B8%B2-string\">字符串 string</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95\">字符串方法</span></h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>index(item)</code></td>\n<td>返回字符串中指定元素起始位置的索引</td>\n<td><code>索引</code>,item不存在返回<code>error</code></td>\n</tr>\n<tr>\n<td><code>replace(old,new)</code></td>\n<td>替换字符串中指定元素，原字符串不变</td>\n<td><code>替换后的字符串</code></td>\n</tr>\n<tr>\n<td><code>split(sep)</code></td>\n<td>将字符串按指定分隔符分隔，返回列表</td>\n<td><code>列表</code></td>\n</tr>\n<tr>\n<td><code>strip([chars])</code></td>\n<td>去除字符串头尾的指定字符，默认参数为<code>空格</code></td>\n<td><code>字符串</code></td>\n</tr>\n<tr>\n<td><code>count(item)</code></td>\n<td>返回字符串中指定元素的个数</td>\n<td><code>个数</code></td>\n</tr>\n<tr>\n<td><code>len(string)</code></td>\n<td>返回字符串的长度</td>\n<td><code>长度</code></td>\n</tr>\n<tr>\n<td><strong><code>string[begin:end:step]</code></strong></td>\n<td>切片，返回字符串指定范围的元素</td>\n<td><code>字符串</code></td>\n</tr>\n</tbody></table>\n</div>\n\n\n<h3><span id=\"%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\">注意事项</span></h3><ol>\n<li>字符串不可变，不能添加、删除、修改元素</li>\n</ol>\n<h2><span id=\"%E9%9B%86%E5%90%88-set\">集合 set</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E9%9B%86%E5%90%88%E6%96%B9%E6%B3%95\">集合方法</span></h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>add(item)</code></td>\n<td>添加元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>remove(item)</code></td>\n<td>删除元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>pop()</code></td>\n<td>删除并返回集合中的第一个元素</td>\n<td><code>元素</code></td>\n</tr>\n<tr>\n<td><code>clear()</code></td>\n<td>清空集合</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>difference(set)</code></td>\n<td>返回两个集合的差集，即主类有而参数类没有的元素</td>\n<td><code>集合</code></td>\n</tr>\n<tr>\n<td><code>difference_update(set)</code></td>\n<td>删除两个集合的交集元素，主类改变而参数类不变</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>union(set)</code></td>\n<td>返回两个集合的并集，该并集是新集合，原集合不变</td>\n<td><code>集合</code></td>\n</tr>\n<tr>\n<td><code>len(set)</code></td>\n<td>返回集合的长度</td>\n<td><code>长度</code></td>\n</tr>\n</tbody></table>\n</div>\n\n<h3><span id=\"%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\">注意事项</span></h3><ol>\n<li>集合中的元素不能重复</li>\n<li>集合是无序的，不能通过索引访问元素</li>\n</ol>\n<h2><span id=\"%E5%AD%97%E5%85%B8-dict\">字典 dict</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%AD%97%E5%85%B8%E6%96%B9%E6%B3%95\">字典方法</span></h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>dict[key] = value</code></td>\n<td>添加元素，若key已存在，则更新value</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>pop(key)</code></td>\n<td>删除指定key的元素，并返回该元素</td>\n<td><code>元素</code></td>\n</tr>\n<tr>\n<td><code>clear()</code></td>\n<td>清空字典</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>keys()</code></td>\n<td>返回字典中所有key的列表</td>\n<td><code>列表</code></td>\n</tr>\n<tr>\n<td><code>len(dict)</code></td>\n<td>返回字典的长度</td>\n<td><code>长度</code></td>\n</tr>\n</tbody></table>\n</div>\n\n<h2><span id=\"%E5%AE%B9%E5%99%A8-container\">容器 container</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<p>list,tuple,string,set,dict都是容器</p>\n<h3><span id=\"%E5%AE%B9%E5%99%A8%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95\">容器通用方法</span></h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>len(container)</code></td>\n<td>返回容器的长度</td>\n<td><code>长度</code></td>\n</tr>\n<tr>\n<td><code>max(container)</code></td>\n<td>返回容器中的最大值</td>\n<td><code>最大值</code></td>\n</tr>\n<tr>\n<td><code>min(container)</code></td>\n<td>返回容器中的最小值</td>\n<td><code>最小值</code></td>\n</tr>\n<tr>\n<td><code>sorted(container, [reverse=False])</code></td>\n<td>返回容器中的排序后的元素，reverse为True时，返回排序后的元素逆序</td>\n<td><code>排序后的元素list</code></td>\n</tr>\n</tbody></table>\n</div>\n\n<h3><span id=\"%E5%AE%B9%E5%99%A8%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2\">容器类型转换</span></h3><ol>\n<li>转<code>list</code>：字典中的<strong>key值</strong>转为list元素；字符串的每个<strong>字符</strong>转为list元素</li>\n<li>转<code>tuple</code>：字典中的<strong>key值</strong>转为tuple元素；字符串的每个<strong>字符</strong>转为tuple元素</li>\n<li>转<code>set</code>：字典中的<strong>key值</strong>转为set元素；字符串的每个<strong>字符</strong>转为set元素</li>\n</ol>\n<h2><span id=\"%E6%96%87%E4%BB%B6\">文件</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E6%96%87%E4%BB%B6%E7%9A%84%E8%AF%BB%E5%8F%96\">文件的读取</span></h3><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>open(filename, mode='&lt;r&gt;', encoding='&lt;utf-8&gt;')</code></td>\n<td>打开文件</td>\n<td><code>文件对象</code></td>\n<td>filename: 文件名或文件路径 <br> mode: 文件打开模式 <br> encoding: 文件编码 <br> <code>r</code>: 只读模式 <br> <code>w</code>: 只写模式，同名文件存在则覆盖，不存在则创建 <br> <code>a</code>: 追加模式，同名文件存在则追加，不存在则创建</td>\n</tr>\n<tr>\n<td><code>with open(filename, mode='&lt;r&gt;', encoding='&lt;utf-8&gt;') as f:</code></td>\n<td>打开文件，在运行完此语句块时自动关闭文件</td>\n<td><code>None</code></td>\n<td>f: <code>open()</code>返回的对象</td>\n</tr>\n<tr>\n<td><code>file.read([size])</code></td>\n<td>读取文件内容</td>\n<td><code>文件内容</code></td>\n<td>size: 读取指定字节数，默认为-1，表示读取所有内容</td>\n</tr>\n<tr>\n<td><code>file.readline()</code></td>\n<td>读取文件的一行内容</td>\n<td><code>行内容</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code>file.readlines()</code></td>\n<td>读取文件所有行内容</td>\n<td><code>行内容list</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code>for line in file:</code></td>\n<td>循环读取文件内容</td>\n<td><code>None</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code>file.close()</code></td>\n<td>关闭文件</td>\n<td><code>None</code></td>\n<td></td>\n</tr>\n</tbody></table>\n<h3><span id=\"%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%99%E5%85%A5\">文件的写入</span></h3><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>file.write(string)</code></td>\n<td>写入文件内容，并不会立刻写入文件，而是先写入缓冲区</td>\n<td><code>None</code></td>\n<td><code>string</code>: 要写入的内容</td>\n</tr>\n<tr>\n<td><code>file.flush()</code></td>\n<td>将缓冲区中的内容写入文件，<code>close()</code>函数包含<code>flush()</code>功能</td>\n<td><code>None</code></td>\n<td></td>\n</tr>\n</tbody></table>\n<h2><span id=\"%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F\">正则表达式</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E5%B8%B8%E7%94%A8%E5%85%83%E7%AC%A6%E5%8F%B7\">常用元符号</span></h3><table>\n<thead>\n<tr>\n<th>正则表达式符号</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>.</code></td>\n<td>匹配任意字符，除了换行符</td>\n</tr>\n<tr>\n<td><code>*</code></td>\n<td>匹配0个或多个前面的字符</td>\n</tr>\n<tr>\n<td><code>+</code></td>\n<td>匹配1个或多个前面的字符</td>\n</tr>\n<tr>\n<td><code>?</code></td>\n<td>匹配0个或1个前面的字符</td>\n</tr>\n<tr>\n<td><code>^</code></td>\n<td>匹配字符串的开头</td>\n</tr>\n<tr>\n<td><code>$</code></td>\n<td>匹配字符串的结尾</td>\n</tr>\n<tr>\n<td><code>{n}</code></td>\n<td>匹配前一个字符n次</td>\n</tr>\n<tr>\n<td><code>{n,m}</code></td>\n<td>匹配前一个字符n到m次</td>\n</tr>\n<tr>\n<td><code>{n,}</code></td>\n<td>匹配前一个字符n次以上</td>\n</tr>\n</tbody></table>\n<h3><span id=\"%E5%AD%97%E7%AC%A6%E7%B1%BB\">字符类</span></h3><table>\n<thead>\n<tr>\n<th>字符类</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>[abc]</code></td>\n<td>匹配a或b或c</td>\n</tr>\n<tr>\n<td><code>[^abc]</code></td>\n<td>匹配除了a或b或c之外的字符</td>\n</tr>\n<tr>\n<td><code>[a-z]</code></td>\n<td>匹配a到z之间的任意字符</td>\n</tr>\n<tr>\n<td><code>[A-Z]</code></td>\n<td>匹配A到Z之间的任意字符</td>\n</tr>\n<tr>\n<td><code>[0-9]</code></td>\n<td>匹配0到9之间的任意字符</td>\n</tr>\n<tr>\n<td><code>\\d</code></td>\n<td>匹配数字</td>\n</tr>\n<tr>\n<td><code>\\w</code></td>\n<td>匹配字母、数字、下划线</td>\n</tr>\n<tr>\n<td><code>\\s</code></td>\n<td>匹配空白字符</td>\n</tr>\n</tbody></table>\n<h2><span id=\"%E5%BC%82%E5%B8%B8-exception\">异常 Exception</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8\">捕获异常</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">try</span>:<br>    <span class=\"hljs-comment\"># 有可能抛出异常的代码段</span><br><span class=\"hljs-keyword\">except</span> [(NameError, ZeroDivisionError, ...) <span class=\"hljs-keyword\">as</span> e]:<br>    <span class=\"hljs-comment\"># 捕获对应类型的异常，默认所有异常</span><br>    <span class=\"hljs-comment\"># 异常处理代码段</span><br>[<span class=\"hljs-keyword\">else</span>:<br>    <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">    没有异常时执行代码段</span><br><span class=\"hljs-string\">    \"\"\"</span><br>]<br>[<span class=\"hljs-keyword\">finally</span>:<br>    <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">     finally代码段，无论是否有异常，都会执行</span><br><span class=\"hljs-string\">    \"\"\"</span><br>]<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%BC%82%E5%B8%B8%E7%9A%84%E7%B1%BB%E5%9E%8B\">异常的类型</span></h3><blockquote>\n<p>详细请查阅官方文档：<a href=\"https://docs.python.org/3/library/exceptions.html#Exception\">Python异常处理</a></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>异常类型</th>\n<th>描述</th>\n<th>父类</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>Exception</code></td>\n<td>所有异常的基类</td>\n<td><code>object</code></td>\n</tr>\n<tr>\n<td><code>ArithmeticError</code></td>\n<td>数学运算异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>OverflowError</code></td>\n<td>算术运算溢出异常</td>\n<td><code>ArithmeticError</code></td>\n</tr>\n<tr>\n<td><code>ZeroDivisionError</code></td>\n<td>除数为0异常</td>\n<td><code>ArithmeticError</code></td>\n</tr>\n<tr>\n<td><code>FloatingPointError</code></td>\n<td>浮点数异常</td>\n<td><code>ArithmeticError</code></td>\n</tr>\n<tr>\n<td><code>AssertionError</code></td>\n<td>断言异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>AttributeError</code></td>\n<td>属性异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>BufferError</code></td>\n<td>缓冲区异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>EOFError</code></td>\n<td>文件结束异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>ImportError</code></td>\n<td>导入异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>ModuleNotFoundError</code></td>\n<td>模块未找到异常</td>\n<td><code>ImportError</code></td>\n</tr>\n<tr>\n<td><code>IndexError</code></td>\n<td>索引异常，下标超出范围</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>KeyError</code></td>\n<td>键异常，键集中找不到映射</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>LookupError</code></td>\n<td>查找异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>MemoryError</code></td>\n<td>内存异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>NameError</code></td>\n<td>名称异常，变量未定义</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>NotImplementedError</code></td>\n<td>未实现异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>OSError</code></td>\n<td>操作系统异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>OverflowError</code></td>\n<td>算术运算溢出异常</td>\n<td><code>ArithmeticError</code></td>\n</tr>\n</tbody></table>\n<h2><span id=\"%E6%A8%A1%E5%9D%97-module\">模块 module</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<p>模块是Python代码文件，模块名就是文件名，其中定义了模块的变量、函数、类等，也可以包含可执行的代码</p>\n<h3><span id=\"%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97\">导入模块</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># from 模块名 import 变量名 后续可以直接使用变量名</span><br><span class=\"hljs-comment\"># import 模块名 后续必须使用模块名.变量名</span><br>[<span class=\"hljs-keyword\">from</span> 模块名] <span class=\"hljs-keyword\">import</span> &lt;模块变量|模块函数|模块类|*&gt; [<span class=\"hljs-keyword\">as</span> 别名]<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\">注意事项</span></h3><ol>\n<li>不同模块的同名函数，后导入的会覆盖先导入的</li>\n<li><code>__main__</code>变量在模块中可以直接运行，测试函数功能，但在导入模块中，<code>__main__</code>变量会失效</li>\n<li><code>__all__</code>变量，在模块或**<strong>init</strong>.py**中定义，用于指定模块的成员，只有被指定成员导入时，才会被<code>*</code>导入，未被指定只能使用变量名导入<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># __all__变量指定的语法</span><br>__all__ = [<span class=\"hljs-string\">'变量名'</span>, <span class=\"hljs-string\">'函数名'</span>, <span class=\"hljs-string\">'类名'</span>]<br></code></pre></td></tr></tbody></table></figure></li>\n</ol>\n<h3><span id=\"python-%E5%8C%85-package\">Python 包 package</span></h3><p>包是模块的集合，包名就是文件夹名，包中的模块名就是文件夹中的文件名</p>\n<h4><span id=\"%E5%88%9B%E5%BB%BA%E5%8C%85\">创建包</span></h4><ol>\n<li>创建文件夹，文件夹名就是包名</li>\n<li>在文件夹中创建**<strong>init</strong>.py__**文件</li>\n</ol>\n<h3><span id=\"%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85\">第三方包</span></h3><table>\n<thead>\n<tr>\n<th>语法</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>pip install 包名</code></td>\n<td>安装包</td>\n</tr>\n</tbody></table>\n<h2><span id=\"json\">json</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<p>本质上是能在不同编程语言中互操作的数据格式，在python中为字符串</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> json<br></code></pre></td></tr></tbody></table></figure>\n<h3><span id=\"json%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C\">json相关操作</span></h3><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>json.dumps(obj, ensure_ascii=False, indent=4)</code></td>\n<td>将Python对象转换为json字符串</td>\n<td><code>json字符串</code></td>\n<td>obj: 要转换的Python对象，可以是<strong>字典</strong>和嵌套字典的<strong>列表</strong> <br> ensure_ascii: 是否转义非ASCII字符，中文显示需要设置False <br> indent: 缩进级别</td>\n</tr>\n<tr>\n<td><code>json.loads(json_str)</code></td>\n<td>将json字符串转换为Python对象</td>\n<td><code>Python对象</code></td>\n<td>json_str: 要转换的json字符串</td>\n</tr>\n</tbody></table>\n<h2><span id=\"pyecharts\">pyecharts</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<p><a href=\"https://gallery.pyecharts.org/#/Line/README\">官方文档</a></p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">pip install pyecharts<br></code></pre></td></tr></tbody></table></figure>\n\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">from</span> pyecharts[.&lt;选项&gt;] <span class=\"hljs-keyword\">import</span> &lt;包名&gt; [<span class=\"hljs-keyword\">as</span> &lt;别名&gt;]<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9\">全局配置选项</span></h3><p><a href=\"https://pyecharts.org/#/zh-cn/global_options\">官方文档</a></p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\">line.set_global_opts(<br>  title_opts=opts.TitleOpts(title=<span class=\"hljs-string\">\"GDP\"</span>),<br>  ...<br>)<br></code></pre></td></tr></tbody></table></figure>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n<th>构造参数</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>title_opts</code></td>\n<td>标题配置项</td>\n<td>opts.TitleOpts(title=\"GDP\")</td>\n<td>title: 标题名称</td>\n</tr>\n<tr>\n<td><code>legend_opts</code></td>\n<td>图例配置项</td>\n<td>opts.LegendOpts(is_show=False)</td>\n<td>is_show: 是否显示图例</td>\n</tr>\n<tr>\n<td><code>tooltip_opts</code></td>\n<td>提示框配置项</td>\n<td>opts.TooltipOpts(is_show=True)</td>\n<td>is_show: 是否显示提示框</td>\n</tr>\n<tr>\n<td><code>toolbox_opts</code></td>\n<td>工具箱配置项</td>\n<td>opts.ToolboxOpts(is_show=True)</td>\n<td>is_show: 是否显示工具箱</td>\n</tr>\n<tr>\n<td><code>visualmap_opts</code></td>\n<td>视觉映射配置项</td>\n<td>opts.VisualMapOpts(is_show=True)</td>\n<td>is_show: 是否显示视觉映射</td>\n</tr>\n</tbody></table>\n<h3><span id=\"%E5%9F%BA%E7%A1%80%E6%8A%98%E7%BA%BF%E5%9B%BE\">基础折线图</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 绘制基础折线图</span><br><br><span class=\"hljs-comment\">## 导包</span><br><span class=\"hljs-keyword\">from</span> pyecharts.charts <span class=\"hljs-keyword\">import</span> Line<br><br><span class=\"hljs-comment\">## 得到折线图对象</span><br>line = Line()<br><br><span class=\"hljs-comment\">## 添加数据</span><br><span class=\"hljs-comment\">### x轴数据</span><br>line.add_xaxis([<span class=\"hljs-string\">\"中国\"</span>, <span class=\"hljs-string\">\"美国\"</span>, <span class=\"hljs-string\">\"日本\"</span>, <span class=\"hljs-string\">\"印度\"</span>, <span class=\"hljs-string\">\"法国\"</span>, <span class=\"hljs-string\">\"英国\"</span>, <span class=\"hljs-string\">\"俄罗斯\"</span>, <span class=\"hljs-string\">\"意大利\"</span>, <span class=\"hljs-string\">\"德国\"</span>, <span class=\"hljs-string\">\"西班牙\"</span>])<br><span class=\"hljs-comment\">### y轴数据</span><br>line.add_yaxis(<span class=\"hljs-string\">\"GDP\"</span>, [<span class=\"hljs-number\">30</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0.5</span>, <span class=\"hljs-number\">0.1</span>])<br><br><span class=\"hljs-comment\">## 设置全局配置选项</span><br>line.set_global_opts(<br>    title_opts=opts.TitleOpts(title=<span class=\"hljs-string\">\"GDP\"</span>),<br>    tooltip_opts=opts.TooltipOpts(is_show=<span class=\"hljs-literal\">True</span>),<br>    legend_opts=opts.LegendOpts(is_show=<span class=\"hljs-literal\">True</span>),<br>    toolbox_opts=opts.ToolboxOpts(is_show=<span class=\"hljs-literal\">True</span>),<br>    visualmap_opts=opts.VisualMapOpts(is_show=<span class=\"hljs-literal\">True</span>)<br>)<br><br><span class=\"hljs-comment\">## 生成图表</span><br>line.render()<br></code></pre></td></tr></tbody></table></figure>\n\n\n<h2><span id=\"%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1\">面向对象</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E7%B1%BB\">类</span></h3><p>基本结构：</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span>:<br>    <span class=\"hljs-comment\"># 成员变量</span><br>    name = <span class=\"hljs-literal\">None</span><br>    age = <span class=\"hljs-literal\">None</span><br>    gender = <span class=\"hljs-literal\">None</span><br>    <br>    <span class=\"hljs-comment\"># 成员方法，必须有self参数，表示当前对象</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">showname</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-variable language_\">self</span>.name)<br></code></pre></td></tr></tbody></table></figure>\n<p>构造方法：</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 构造方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, name, gender, age</span>):<br>        <span class=\"hljs-variable language_\">self</span>.name = name<br>        <span class=\"hljs-variable language_\">self</span>.gender = gender<br>        <span class=\"hljs-variable language_\">self</span>.age = age<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"创建一个学生对象\"</span>)<br></code></pre></td></tr></tbody></table></figure>\n<p>魔术方法：</p>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>参数列表</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>__init__(self, *args, **kwargs)</code></td>\n<td>构造方法</td>\n<td><code>self</code>: 当前对象 <br> <code>*args</code>: 可变参数 <br> <code>**kwargs</code>: 关键字参数</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>__str__(self)</code></td>\n<td>对象转字符串</td>\n<td><code>self</code>: 当前对象</td>\n<td>字符串</td>\n</tr>\n<tr>\n<td><code>__lt__(self, other)</code></td>\n<td>重写小于，用于对象某一规则的比较</td>\n<td><code>self</code>: 当前对象 <br> <code>other</code>: 其他对象</td>\n<td>布尔值</td>\n</tr>\n<tr>\n<td><code>__le__(self, other)</code></td>\n<td>重写小于等于，用于对象某一规则的比较</td>\n<td><code>self</code>: 当前对象 <br> <code>other</code>: 其他对象</td>\n<td>布尔值</td>\n</tr>\n<tr>\n<td><code>__eq__(self, other)</code></td>\n<td>重写等于，用于对象某一规则的比较</td>\n<td><code>self</code>: 当前对象 <br> <code>other</code>: 其他对象</td>\n<td>布尔值</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 魔术方法</span><br><span class=\"hljs-comment\">## __str__(): 返回对象的字符串表示</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__str__</span>(<span class=\"hljs-params\">self</span>):<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">\"name=%s,gender=%s,age=%s\"</span> % (<span class=\"hljs-variable language_\">self</span>.name, <span class=\"hljs-variable language_\">self</span>.gender, <span class=\"hljs-variable language_\">self</span>.age)<br><br><span class=\"hljs-comment\">## __lt__(): 用于类对象的小于比较(less than)</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__lt__</span>(<span class=\"hljs-params\">self, other</span>):<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.age &lt; other.age<br><br><span class=\"hljs-comment\">## __le__(): 用于类对象的小于等于比较(less than or equal)</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__le__</span>(<span class=\"hljs-params\">self, other</span>):<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.age &lt;= other.age<br><br><span class=\"hljs-comment\">## __eq__(): 用于类对象的等于比较(equal)，默认\"==\"比较的是内存地址</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__eq__</span>(<span class=\"hljs-params\">self, other</span>):<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.age == other.age<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E7%B1%BB%E7%9A%84%E5%B0%81%E8%A3%85\">类的封装</span></h3><p><strong>封装</strong>：封装就是将<strong>属性或方法私有化</strong>，属性或方法私有化后，外部无法直接访问属性或方法，只能通过方法访问属性或方法</p>\n<p>语法：<br>属性私有化：<code>__属性名</code><br>方法私有化：<code>__方法名()</code><br>受保护属性：<code>_属性名</code><br>受保护方法：<code>_方法名()</code></p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span>:<br>    <span class=\"hljs-comment\"># 私有成员变量</span><br>    __name = <span class=\"hljs-literal\">None</span><br>    __age = <span class=\"hljs-literal\">None</span><br>    __sex = <span class=\"hljs-literal\">None</span><br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, name, age, sex</span>):<br>        <span class=\"hljs-variable language_\">self</span>.__name = name<br>        <span class=\"hljs-variable language_\">self</span>.__age = age<br>        <span class=\"hljs-variable language_\">self</span>.__sex = sex<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">show</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"姓名：%s, 年龄：%d, 性别：%s\"</span> % (<span class=\"hljs-variable language_\">self</span>.__name, <span class=\"hljs-variable language_\">self</span>.__age, <span class=\"hljs-variable language_\">self</span>.__sex))<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">getName</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.__name<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">getAge</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.__age<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">getSex</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.__sex<br>    <br>    <span class=\"hljs-comment\"># 私有成员方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__setName</span>(<span class=\"hljs-params\">self, name</span>):<br>        <span class=\"hljs-variable language_\">self</span>.__name = name<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__setAge</span>(<span class=\"hljs-params\">self, age</span>):<br>        <span class=\"hljs-variable language_\">self</span>.__age = age<br>        <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__setSex</span>(<span class=\"hljs-params\">self, sex</span>):<br>        <span class=\"hljs-variable language_\">self</span>.__sex = sex<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF\">类的继承</span></h3><p>继承：子类继承父类的属性和方法，并添加新的属性和方法</p>\n<ol>\n<li>不同于Java语言，Python语言支持多继承</li>\n<li>多继承时，父类同名属性或方法，会按照从左到右的顺序进行覆盖，即左边优先级更大</li>\n<li>子类只继承父类的<strong>公有</strong>或<strong>受保护</strong>属性和方法，不会继承父类的私有属性或方法</li>\n<li>父类的私有属性或方法，子类无法直接访问，需通过父类方法进行访问</li>\n<li>子类可以<strong>重写</strong>父类的同名方法</li>\n</ol>\n<p>语法：</p>\n<ol>\n<li><p>继承：<code>class 子类名(父类名1[, 父类名2, ...]):</code></p>\n</li>\n<li><p>调用：<code>super().[属性或方法名(参数)]</code>或<code>父类名.方法名(self, 参数)</code></p>\n</li>\n</ol>\n<h3><span id=\"%E7%B1%BB%E7%9A%84%E5%A4%9A%E6%80%81\">类的多态</span></h3><ul>\n<li>子类继承父类，并重写父类的同名方法</li>\n<li>函数参数可以指定父类对象，调用时传入子类对象</li>\n<li>通过调用不同子类的同名方法，实现多态</li>\n<li>父类可以声明一个抽象方法，子类必须实现该抽象方法<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 多态</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Animal</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">cry</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"动物叫\"</span>)<br>    <br>    <span class=\"hljs-comment\"># 父类可以定义抽象方法 子类必须实现抽象方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">eat</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-keyword\">pass</span><br>        <br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Dog</span>(<span class=\"hljs-title class_ inherited__\">Animal</span>):<br>    <span class=\"hljs-comment\"># 重写父类的方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">cry</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"汪汪汪\"</span>)<br>    <br>    <span class=\"hljs-comment\"># 重写父类抽象方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">eat</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"大狗嚼嚼嚼\"</span>)<br>        <br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Cat</span>(<span class=\"hljs-title class_ inherited__\">Animal</span>):<br>    <span class=\"hljs-comment\"># 重写父类方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">cry</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"喵喵喵\"</span>)<br>        <br>    <span class=\"hljs-comment\"># 重写父类抽象方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">eat</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"吃吃吃\"</span>)<br>        <br><span class=\"hljs-comment\"># 定义一个方法 接收一个父类对象</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">print_cry</span>(<span class=\"hljs-params\">animal: Animal</span>):<br>    animal.cry()<br>    <br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">print_eat</span>(<span class=\"hljs-params\">animal: Animal</span>):<br>    animal.eat()<br>        <br>        <br>dog = Dog()<br>cat = Cat()<br><br><span class=\"hljs-comment\"># 传入不同子类 调用不同的方法</span><br>print_cry(dog)<br>print_cry(cat)<br><br>print_eat(dog)<br>print_eat(cat)<br></code></pre></td></tr></tbody></table></figure></li>\n</ul>\n</body></html>","excerpt":"","more":"<style>\n.table-container {\n  overflow-x: auto;\n  margin: 1em 0;\n}\n\ntable {\n  min-width: 100%;\n  display: block;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\nth, td {\n  padding: 8px 12px;\n  text-align: left;\n  white-space: nowrap;\n}\n</style>\n\n<h1 id=\"Python-笔记\"><a href=\"#Python-笔记\" class=\"headerlink\" title=\"Python 笔记\"></a>Python 笔记</h1><h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><blockquote>\n<ol>\n<li><a href=\"#%E5%88%97%E8%A1%A8-list\">列表 list</a></li>\n<li><a href=\"#%E5%85%83%E7%BB%84-tuple\">元组 tuple</a></li>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2-string\">字符串 string</a></li>\n<li><a href=\"#%E9%9B%86%E5%90%88-set\">集合 set</a></li>\n<li><a href=\"#%E5%AD%97%E5%85%B8-dict\">字典 dict</a></li>\n<li><a href=\"#%E5%AE%B9%E5%99%A8-container\">容器 container</a></li>\n<li><a href=\"#%E6%96%87%E4%BB%B6\">文件 file</a></li>\n<li><a href=\"#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F\">正则表达式</a></li>\n<li><a href=\"#%E5%BC%82%E5%B8%B8-exception\">异常 Exception</a></li>\n<li><a href=\"#%E6%A8%A1%E5%9D%97-module\">模块 module</a></li>\n<li><a href=\"#json\">json</a></li>\n<li><a href=\"#pyecharts\">pyecharts</a></li>\n<li><a href=\"#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1\">面向对象 OOP</a></li>\n</ol>\n</blockquote>\n<h2 id=\"列表-list\"><a href=\"#列表-list\" class=\"headerlink\" title=\"列表 list\"></a>列表 list</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"列表方法\"><a href=\"#列表方法\" class=\"headerlink\" title=\"列表方法\"></a>列表方法</h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>index(item)</code></td>\n<td>返回列表中指定元素的索引</td>\n<td><code>索引</code>,item不存在返回<code>error</code></td>\n</tr>\n<tr>\n<td><code>insert(index,item)</code></td>\n<td>在列表指定位置插入元素，此位置后的元素右移</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>append(item)</code></td>\n<td>在列表末尾添加元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>extend(list)</code></td>\n<td>在列表末尾添加列表元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>del list[index]</code></td>\n<td>删除列表指定位置的元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>pop(index)</code></td>\n<td>删除列表指定位置的元素，并返回该元素</td>\n<td><code>元素</code></td>\n</tr>\n<tr>\n<td><code>remove(item)</code></td>\n<td>删除列表中指定元素的第一个匹配项</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>clear()</code></td>\n<td>清空列表</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>count(item)</code></td>\n<td>返回列表中指定元素的个数</td>\n<td><code>个数</code></td>\n</tr>\n<tr>\n<td><code>len(list)</code></td>\n<td>返回列表的长度</td>\n<td><code>长度</code></td>\n</tr>\n<tr>\n<td><code>reverse()</code></td>\n<td>列表倒序</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><strong><code>list[begin:end:step]</code></strong></td>\n<td>切片，返回列表指定范围的元素</td>\n<td><code>列表</code></td>\n</tr>\n</tbody></table>\n</div>\n\n\n<h2 id=\"元组-tuple\"><a href=\"#元组-tuple\" class=\"headerlink\" title=\"元组 tuple\"></a>元组 tuple</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"元组方法\"><a href=\"#元组方法\" class=\"headerlink\" title=\"元组方法\"></a>元组方法</h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>index(item)</code></td>\n<td>返回元组中指定元素的索引</td>\n<td><code>索引</code>,item不存在返回<code>error</code></td>\n</tr>\n<tr>\n<td><code>count(item)</code></td>\n<td>返回元组中指定元素的个数</td>\n<td><code>个数</code></td>\n</tr>\n<tr>\n<td><code>len(tuple)</code></td>\n<td>返回元组的长度</td>\n<td><code>长度</code></td>\n</tr>\n<tr>\n<td><strong><code>tuple[begin:end:step]</code></strong></td>\n<td>切片，返回元组指定范围的元素</td>\n<td><code>元组</code></td>\n</tr>\n</tbody></table>\n</div>\n\n\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ol>\n<li>元组不可变，不能添加、删除、修改元素</li>\n<li>元组中的列表仍然可变，原因在于元组中的列表属于引用类型，列表属于对象，对象都是引用类型</li>\n</ol>\n<h2 id=\"字符串-string\"><a href=\"#字符串-string\" class=\"headerlink\" title=\"字符串 string\"></a>字符串 string</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"字符串方法\"><a href=\"#字符串方法\" class=\"headerlink\" title=\"字符串方法\"></a>字符串方法</h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>index(item)</code></td>\n<td>返回字符串中指定元素起始位置的索引</td>\n<td><code>索引</code>,item不存在返回<code>error</code></td>\n</tr>\n<tr>\n<td><code>replace(old,new)</code></td>\n<td>替换字符串中指定元素，原字符串不变</td>\n<td><code>替换后的字符串</code></td>\n</tr>\n<tr>\n<td><code>split(sep)</code></td>\n<td>将字符串按指定分隔符分隔，返回列表</td>\n<td><code>列表</code></td>\n</tr>\n<tr>\n<td><code>strip([chars])</code></td>\n<td>去除字符串头尾的指定字符，默认参数为<code>空格</code></td>\n<td><code>字符串</code></td>\n</tr>\n<tr>\n<td><code>count(item)</code></td>\n<td>返回字符串中指定元素的个数</td>\n<td><code>个数</code></td>\n</tr>\n<tr>\n<td><code>len(string)</code></td>\n<td>返回字符串的长度</td>\n<td><code>长度</code></td>\n</tr>\n<tr>\n<td><strong><code>string[begin:end:step]</code></strong></td>\n<td>切片，返回字符串指定范围的元素</td>\n<td><code>字符串</code></td>\n</tr>\n</tbody></table>\n</div>\n\n\n<h3 id=\"注意事项-1\"><a href=\"#注意事项-1\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ol>\n<li>字符串不可变，不能添加、删除、修改元素</li>\n</ol>\n<h2 id=\"集合-set\"><a href=\"#集合-set\" class=\"headerlink\" title=\"集合 set\"></a>集合 set</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"集合方法\"><a href=\"#集合方法\" class=\"headerlink\" title=\"集合方法\"></a>集合方法</h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>add(item)</code></td>\n<td>添加元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>remove(item)</code></td>\n<td>删除元素</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>pop()</code></td>\n<td>删除并返回集合中的第一个元素</td>\n<td><code>元素</code></td>\n</tr>\n<tr>\n<td><code>clear()</code></td>\n<td>清空集合</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>difference(set)</code></td>\n<td>返回两个集合的差集，即主类有而参数类没有的元素</td>\n<td><code>集合</code></td>\n</tr>\n<tr>\n<td><code>difference_update(set)</code></td>\n<td>删除两个集合的交集元素，主类改变而参数类不变</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>union(set)</code></td>\n<td>返回两个集合的并集，该并集是新集合，原集合不变</td>\n<td><code>集合</code></td>\n</tr>\n<tr>\n<td><code>len(set)</code></td>\n<td>返回集合的长度</td>\n<td><code>长度</code></td>\n</tr>\n</tbody></table>\n</div>\n\n<h3 id=\"注意事项-2\"><a href=\"#注意事项-2\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ol>\n<li>集合中的元素不能重复</li>\n<li>集合是无序的，不能通过索引访问元素</li>\n</ol>\n<h2 id=\"字典-dict\"><a href=\"#字典-dict\" class=\"headerlink\" title=\"字典 dict\"></a>字典 dict</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"字典方法\"><a href=\"#字典方法\" class=\"headerlink\" title=\"字典方法\"></a>字典方法</h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>dict[key] = value</code></td>\n<td>添加元素，若key已存在，则更新value</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>pop(key)</code></td>\n<td>删除指定key的元素，并返回该元素</td>\n<td><code>元素</code></td>\n</tr>\n<tr>\n<td><code>clear()</code></td>\n<td>清空字典</td>\n<td><code>None</code></td>\n</tr>\n<tr>\n<td><code>keys()</code></td>\n<td>返回字典中所有key的列表</td>\n<td><code>列表</code></td>\n</tr>\n<tr>\n<td><code>len(dict)</code></td>\n<td>返回字典的长度</td>\n<td><code>长度</code></td>\n</tr>\n</tbody></table>\n</div>\n\n<h2 id=\"容器-container\"><a href=\"#容器-container\" class=\"headerlink\" title=\"容器 container\"></a>容器 container</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<p>list,tuple,string,set,dict都是容器</p>\n<h3 id=\"容器通用方法\"><a href=\"#容器通用方法\" class=\"headerlink\" title=\"容器通用方法\"></a>容器通用方法</h3><div class=\"table-container\">\n\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>len(container)</code></td>\n<td>返回容器的长度</td>\n<td><code>长度</code></td>\n</tr>\n<tr>\n<td><code>max(container)</code></td>\n<td>返回容器中的最大值</td>\n<td><code>最大值</code></td>\n</tr>\n<tr>\n<td><code>min(container)</code></td>\n<td>返回容器中的最小值</td>\n<td><code>最小值</code></td>\n</tr>\n<tr>\n<td><code>sorted(container, [reverse=False])</code></td>\n<td>返回容器中的排序后的元素，reverse为True时，返回排序后的元素逆序</td>\n<td><code>排序后的元素list</code></td>\n</tr>\n</tbody></table>\n</div>\n\n<h3 id=\"容器类型转换\"><a href=\"#容器类型转换\" class=\"headerlink\" title=\"容器类型转换\"></a>容器类型转换</h3><ol>\n<li>转<code>list</code>：字典中的<strong>key值</strong>转为list元素；字符串的每个<strong>字符</strong>转为list元素</li>\n<li>转<code>tuple</code>：字典中的<strong>key值</strong>转为tuple元素；字符串的每个<strong>字符</strong>转为tuple元素</li>\n<li>转<code>set</code>：字典中的<strong>key值</strong>转为set元素；字符串的每个<strong>字符</strong>转为set元素</li>\n</ol>\n<h2 id=\"文件\"><a href=\"#文件\" class=\"headerlink\" title=\"文件\"></a>文件</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"文件的读取\"><a href=\"#文件的读取\" class=\"headerlink\" title=\"文件的读取\"></a>文件的读取</h3><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>open(filename, mode=&#39;&lt;r&gt;&#39;, encoding=&#39;&lt;utf-8&gt;&#39;)</code></td>\n<td>打开文件</td>\n<td><code>文件对象</code></td>\n<td>filename: 文件名或文件路径 <br> mode: 文件打开模式 <br> encoding: 文件编码 <br> <code>r</code>: 只读模式 <br> <code>w</code>: 只写模式，同名文件存在则覆盖，不存在则创建 <br> <code>a</code>: 追加模式，同名文件存在则追加，不存在则创建</td>\n</tr>\n<tr>\n<td><code>with open(filename, mode=&#39;&lt;r&gt;&#39;, encoding=&#39;&lt;utf-8&gt;&#39;) as f:</code></td>\n<td>打开文件，在运行完此语句块时自动关闭文件</td>\n<td><code>None</code></td>\n<td>f: <code>open()</code>返回的对象</td>\n</tr>\n<tr>\n<td><code>file.read([size])</code></td>\n<td>读取文件内容</td>\n<td><code>文件内容</code></td>\n<td>size: 读取指定字节数，默认为-1，表示读取所有内容</td>\n</tr>\n<tr>\n<td><code>file.readline()</code></td>\n<td>读取文件的一行内容</td>\n<td><code>行内容</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code>file.readlines()</code></td>\n<td>读取文件所有行内容</td>\n<td><code>行内容list</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code>for line in file:</code></td>\n<td>循环读取文件内容</td>\n<td><code>None</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code>file.close()</code></td>\n<td>关闭文件</td>\n<td><code>None</code></td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"文件的写入\"><a href=\"#文件的写入\" class=\"headerlink\" title=\"文件的写入\"></a>文件的写入</h3><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>file.write(string)</code></td>\n<td>写入文件内容，并不会立刻写入文件，而是先写入缓冲区</td>\n<td><code>None</code></td>\n<td><code>string</code>: 要写入的内容</td>\n</tr>\n<tr>\n<td><code>file.flush()</code></td>\n<td>将缓冲区中的内容写入文件，<code>close()</code>函数包含<code>flush()</code>功能</td>\n<td><code>None</code></td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"正则表达式\"><a href=\"#正则表达式\" class=\"headerlink\" title=\"正则表达式\"></a>正则表达式</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"常用元符号\"><a href=\"#常用元符号\" class=\"headerlink\" title=\"常用元符号\"></a>常用元符号</h3><table>\n<thead>\n<tr>\n<th>正则表达式符号</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>.</code></td>\n<td>匹配任意字符，除了换行符</td>\n</tr>\n<tr>\n<td><code>*</code></td>\n<td>匹配0个或多个前面的字符</td>\n</tr>\n<tr>\n<td><code>+</code></td>\n<td>匹配1个或多个前面的字符</td>\n</tr>\n<tr>\n<td><code>?</code></td>\n<td>匹配0个或1个前面的字符</td>\n</tr>\n<tr>\n<td><code>^</code></td>\n<td>匹配字符串的开头</td>\n</tr>\n<tr>\n<td><code>$</code></td>\n<td>匹配字符串的结尾</td>\n</tr>\n<tr>\n<td><code>&#123;n&#125;</code></td>\n<td>匹配前一个字符n次</td>\n</tr>\n<tr>\n<td><code>&#123;n,m&#125;</code></td>\n<td>匹配前一个字符n到m次</td>\n</tr>\n<tr>\n<td><code>&#123;n,&#125;</code></td>\n<td>匹配前一个字符n次以上</td>\n</tr>\n</tbody></table>\n<h3 id=\"字符类\"><a href=\"#字符类\" class=\"headerlink\" title=\"字符类\"></a>字符类</h3><table>\n<thead>\n<tr>\n<th>字符类</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>[abc]</code></td>\n<td>匹配a或b或c</td>\n</tr>\n<tr>\n<td><code>[^abc]</code></td>\n<td>匹配除了a或b或c之外的字符</td>\n</tr>\n<tr>\n<td><code>[a-z]</code></td>\n<td>匹配a到z之间的任意字符</td>\n</tr>\n<tr>\n<td><code>[A-Z]</code></td>\n<td>匹配A到Z之间的任意字符</td>\n</tr>\n<tr>\n<td><code>[0-9]</code></td>\n<td>匹配0到9之间的任意字符</td>\n</tr>\n<tr>\n<td><code>\\d</code></td>\n<td>匹配数字</td>\n</tr>\n<tr>\n<td><code>\\w</code></td>\n<td>匹配字母、数字、下划线</td>\n</tr>\n<tr>\n<td><code>\\s</code></td>\n<td>匹配空白字符</td>\n</tr>\n</tbody></table>\n<h2 id=\"异常-Exception\"><a href=\"#异常-Exception\" class=\"headerlink\" title=\"异常 Exception\"></a>异常 Exception</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"捕获异常\"><a href=\"#捕获异常\" class=\"headerlink\" title=\"捕获异常\"></a>捕获异常</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">try</span>:<br>    <span class=\"hljs-comment\"># 有可能抛出异常的代码段</span><br><span class=\"hljs-keyword\">except</span> [(NameError, ZeroDivisionError, ...) <span class=\"hljs-keyword\">as</span> e]:<br>    <span class=\"hljs-comment\"># 捕获对应类型的异常，默认所有异常</span><br>    <span class=\"hljs-comment\"># 异常处理代码段</span><br>[<span class=\"hljs-keyword\">else</span>:<br>    <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">    没有异常时执行代码段</span><br><span class=\"hljs-string\">    &quot;&quot;&quot;</span><br>]<br>[<span class=\"hljs-keyword\">finally</span>:<br>    <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">     finally代码段，无论是否有异常，都会执行</span><br><span class=\"hljs-string\">    &quot;&quot;&quot;</span><br>]<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"异常的类型\"><a href=\"#异常的类型\" class=\"headerlink\" title=\"异常的类型\"></a>异常的类型</h3><blockquote>\n<p>详细请查阅官方文档：<a href=\"https://docs.python.org/3/library/exceptions.html#Exception\">Python异常处理</a></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>异常类型</th>\n<th>描述</th>\n<th>父类</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>Exception</code></td>\n<td>所有异常的基类</td>\n<td><code>object</code></td>\n</tr>\n<tr>\n<td><code>ArithmeticError</code></td>\n<td>数学运算异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>OverflowError</code></td>\n<td>算术运算溢出异常</td>\n<td><code>ArithmeticError</code></td>\n</tr>\n<tr>\n<td><code>ZeroDivisionError</code></td>\n<td>除数为0异常</td>\n<td><code>ArithmeticError</code></td>\n</tr>\n<tr>\n<td><code>FloatingPointError</code></td>\n<td>浮点数异常</td>\n<td><code>ArithmeticError</code></td>\n</tr>\n<tr>\n<td><code>AssertionError</code></td>\n<td>断言异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>AttributeError</code></td>\n<td>属性异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>BufferError</code></td>\n<td>缓冲区异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>EOFError</code></td>\n<td>文件结束异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>ImportError</code></td>\n<td>导入异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>ModuleNotFoundError</code></td>\n<td>模块未找到异常</td>\n<td><code>ImportError</code></td>\n</tr>\n<tr>\n<td><code>IndexError</code></td>\n<td>索引异常，下标超出范围</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>KeyError</code></td>\n<td>键异常，键集中找不到映射</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>LookupError</code></td>\n<td>查找异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>MemoryError</code></td>\n<td>内存异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>NameError</code></td>\n<td>名称异常，变量未定义</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>NotImplementedError</code></td>\n<td>未实现异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>OSError</code></td>\n<td>操作系统异常</td>\n<td><code>Exception</code></td>\n</tr>\n<tr>\n<td><code>OverflowError</code></td>\n<td>算术运算溢出异常</td>\n<td><code>ArithmeticError</code></td>\n</tr>\n</tbody></table>\n<h2 id=\"模块-module\"><a href=\"#模块-module\" class=\"headerlink\" title=\"模块 module\"></a>模块 module</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<p>模块是Python代码文件，模块名就是文件名，其中定义了模块的变量、函数、类等，也可以包含可执行的代码</p>\n<h3 id=\"导入模块\"><a href=\"#导入模块\" class=\"headerlink\" title=\"导入模块\"></a>导入模块</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># from 模块名 import 变量名 后续可以直接使用变量名</span><br><span class=\"hljs-comment\"># import 模块名 后续必须使用模块名.变量名</span><br>[<span class=\"hljs-keyword\">from</span> 模块名] <span class=\"hljs-keyword\">import</span> &lt;模块变量|模块函数|模块类|*&gt; [<span class=\"hljs-keyword\">as</span> 别名]<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"注意事项-3\"><a href=\"#注意事项-3\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ol>\n<li>不同模块的同名函数，后导入的会覆盖先导入的</li>\n<li><code>__main__</code>变量在模块中可以直接运行，测试函数功能，但在导入模块中，<code>__main__</code>变量会失效</li>\n<li><code>__all__</code>变量，在模块或**<strong>init</strong>.py**中定义，用于指定模块的成员，只有被指定成员导入时，才会被<code>*</code>导入，未被指定只能使用变量名导入<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># __all__变量指定的语法</span><br>__all__ = [<span class=\"hljs-string\">&#x27;变量名&#x27;</span>, <span class=\"hljs-string\">&#x27;函数名&#x27;</span>, <span class=\"hljs-string\">&#x27;类名&#x27;</span>]<br></code></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"Python-包-package\"><a href=\"#Python-包-package\" class=\"headerlink\" title=\"Python 包 package\"></a>Python 包 package</h3><p>包是模块的集合，包名就是文件夹名，包中的模块名就是文件夹中的文件名</p>\n<h4 id=\"创建包\"><a href=\"#创建包\" class=\"headerlink\" title=\"创建包\"></a>创建包</h4><ol>\n<li>创建文件夹，文件夹名就是包名</li>\n<li>在文件夹中创建**<strong>init</strong>.py__**文件</li>\n</ol>\n<h3 id=\"第三方包\"><a href=\"#第三方包\" class=\"headerlink\" title=\"第三方包\"></a>第三方包</h3><table>\n<thead>\n<tr>\n<th>语法</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>pip install 包名</code></td>\n<td>安装包</td>\n</tr>\n</tbody></table>\n<h2 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json\"></a>json</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<p>本质上是能在不同编程语言中互操作的数据格式，在python中为字符串</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> json<br></code></pre></td></tr></table></figure>\n<h3 id=\"json相关操作\"><a href=\"#json相关操作\" class=\"headerlink\" title=\"json相关操作\"></a>json相关操作</h3><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>返回值</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>json.dumps(obj, ensure_ascii=False, indent=4)</code></td>\n<td>将Python对象转换为json字符串</td>\n<td><code>json字符串</code></td>\n<td>obj: 要转换的Python对象，可以是<strong>字典</strong>和嵌套字典的<strong>列表</strong> <br> ensure_ascii: 是否转义非ASCII字符，中文显示需要设置False <br> indent: 缩进级别</td>\n</tr>\n<tr>\n<td><code>json.loads(json_str)</code></td>\n<td>将json字符串转换为Python对象</td>\n<td><code>Python对象</code></td>\n<td>json_str: 要转换的json字符串</td>\n</tr>\n</tbody></table>\n<h2 id=\"pyecharts\"><a href=\"#pyecharts\" class=\"headerlink\" title=\"pyecharts\"></a>pyecharts</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<p><a href=\"https://gallery.pyecharts.org/#/Line/README\">官方文档</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">pip install pyecharts<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">from</span> pyecharts[.&lt;选项&gt;] <span class=\"hljs-keyword\">import</span> &lt;包名&gt; [<span class=\"hljs-keyword\">as</span> &lt;别名&gt;]<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"全局配置选项\"><a href=\"#全局配置选项\" class=\"headerlink\" title=\"全局配置选项\"></a>全局配置选项</h3><p><a href=\"https://pyecharts.org/#/zh-cn/global_options\">官方文档</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\">line.set_global_opts(<br>  title_opts=opts.TitleOpts(title=<span class=\"hljs-string\">&quot;GDP&quot;</span>),<br>  ...<br>)<br></code></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n<th>构造参数</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>title_opts</code></td>\n<td>标题配置项</td>\n<td>opts.TitleOpts(title&#x3D;&quot;GDP&quot;)</td>\n<td>title: 标题名称</td>\n</tr>\n<tr>\n<td><code>legend_opts</code></td>\n<td>图例配置项</td>\n<td>opts.LegendOpts(is_show&#x3D;False)</td>\n<td>is_show: 是否显示图例</td>\n</tr>\n<tr>\n<td><code>tooltip_opts</code></td>\n<td>提示框配置项</td>\n<td>opts.TooltipOpts(is_show&#x3D;True)</td>\n<td>is_show: 是否显示提示框</td>\n</tr>\n<tr>\n<td><code>toolbox_opts</code></td>\n<td>工具箱配置项</td>\n<td>opts.ToolboxOpts(is_show&#x3D;True)</td>\n<td>is_show: 是否显示工具箱</td>\n</tr>\n<tr>\n<td><code>visualmap_opts</code></td>\n<td>视觉映射配置项</td>\n<td>opts.VisualMapOpts(is_show&#x3D;True)</td>\n<td>is_show: 是否显示视觉映射</td>\n</tr>\n</tbody></table>\n<h3 id=\"基础折线图\"><a href=\"#基础折线图\" class=\"headerlink\" title=\"基础折线图\"></a>基础折线图</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 绘制基础折线图</span><br><br><span class=\"hljs-comment\">## 导包</span><br><span class=\"hljs-keyword\">from</span> pyecharts.charts <span class=\"hljs-keyword\">import</span> Line<br><br><span class=\"hljs-comment\">## 得到折线图对象</span><br>line = Line()<br><br><span class=\"hljs-comment\">## 添加数据</span><br><span class=\"hljs-comment\">### x轴数据</span><br>line.add_xaxis([<span class=\"hljs-string\">&quot;中国&quot;</span>, <span class=\"hljs-string\">&quot;美国&quot;</span>, <span class=\"hljs-string\">&quot;日本&quot;</span>, <span class=\"hljs-string\">&quot;印度&quot;</span>, <span class=\"hljs-string\">&quot;法国&quot;</span>, <span class=\"hljs-string\">&quot;英国&quot;</span>, <span class=\"hljs-string\">&quot;俄罗斯&quot;</span>, <span class=\"hljs-string\">&quot;意大利&quot;</span>, <span class=\"hljs-string\">&quot;德国&quot;</span>, <span class=\"hljs-string\">&quot;西班牙&quot;</span>])<br><span class=\"hljs-comment\">### y轴数据</span><br>line.add_yaxis(<span class=\"hljs-string\">&quot;GDP&quot;</span>, [<span class=\"hljs-number\">30</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0.5</span>, <span class=\"hljs-number\">0.1</span>])<br><br><span class=\"hljs-comment\">## 设置全局配置选项</span><br>line.set_global_opts(<br>    title_opts=opts.TitleOpts(title=<span class=\"hljs-string\">&quot;GDP&quot;</span>),<br>    tooltip_opts=opts.TooltipOpts(is_show=<span class=\"hljs-literal\">True</span>),<br>    legend_opts=opts.LegendOpts(is_show=<span class=\"hljs-literal\">True</span>),<br>    toolbox_opts=opts.ToolboxOpts(is_show=<span class=\"hljs-literal\">True</span>),<br>    visualmap_opts=opts.VisualMapOpts(is_show=<span class=\"hljs-literal\">True</span>)<br>)<br><br><span class=\"hljs-comment\">## 生成图表</span><br>line.render()<br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"面向对象\"><a href=\"#面向对象\" class=\"headerlink\" title=\"面向对象\"></a>面向对象</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"类\"><a href=\"#类\" class=\"headerlink\" title=\"类\"></a>类</h3><p>基本结构：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span>:<br>    <span class=\"hljs-comment\"># 成员变量</span><br>    name = <span class=\"hljs-literal\">None</span><br>    age = <span class=\"hljs-literal\">None</span><br>    gender = <span class=\"hljs-literal\">None</span><br>    <br>    <span class=\"hljs-comment\"># 成员方法，必须有self参数，表示当前对象</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">showname</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-variable language_\">self</span>.name)<br></code></pre></td></tr></table></figure>\n<p>构造方法：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 构造方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, name, gender, age</span>):<br>        <span class=\"hljs-variable language_\">self</span>.name = name<br>        <span class=\"hljs-variable language_\">self</span>.gender = gender<br>        <span class=\"hljs-variable language_\">self</span>.age = age<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;创建一个学生对象&quot;</span>)<br></code></pre></td></tr></table></figure>\n<p>魔术方法：</p>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>参数列表</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>__init__(self, *args, **kwargs)</code></td>\n<td>构造方法</td>\n<td><code>self</code>: 当前对象 <br> <code>*args</code>: 可变参数 <br> <code>**kwargs</code>: 关键字参数</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>__str__(self)</code></td>\n<td>对象转字符串</td>\n<td><code>self</code>: 当前对象</td>\n<td>字符串</td>\n</tr>\n<tr>\n<td><code>__lt__(self, other)</code></td>\n<td>重写小于，用于对象某一规则的比较</td>\n<td><code>self</code>: 当前对象 <br> <code>other</code>: 其他对象</td>\n<td>布尔值</td>\n</tr>\n<tr>\n<td><code>__le__(self, other)</code></td>\n<td>重写小于等于，用于对象某一规则的比较</td>\n<td><code>self</code>: 当前对象 <br> <code>other</code>: 其他对象</td>\n<td>布尔值</td>\n</tr>\n<tr>\n<td><code>__eq__(self, other)</code></td>\n<td>重写等于，用于对象某一规则的比较</td>\n<td><code>self</code>: 当前对象 <br> <code>other</code>: 其他对象</td>\n<td>布尔值</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 魔术方法</span><br><span class=\"hljs-comment\">## __str__(): 返回对象的字符串表示</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__str__</span>(<span class=\"hljs-params\">self</span>):<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;name=%s,gender=%s,age=%s&quot;</span> % (<span class=\"hljs-variable language_\">self</span>.name, <span class=\"hljs-variable language_\">self</span>.gender, <span class=\"hljs-variable language_\">self</span>.age)<br><br><span class=\"hljs-comment\">## __lt__(): 用于类对象的小于比较(less than)</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__lt__</span>(<span class=\"hljs-params\">self, other</span>):<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.age &lt; other.age<br><br><span class=\"hljs-comment\">## __le__(): 用于类对象的小于等于比较(less than or equal)</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__le__</span>(<span class=\"hljs-params\">self, other</span>):<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.age &lt;= other.age<br><br><span class=\"hljs-comment\">## __eq__(): 用于类对象的等于比较(equal)，默认&quot;==&quot;比较的是内存地址</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__eq__</span>(<span class=\"hljs-params\">self, other</span>):<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.age == other.age<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"类的封装\"><a href=\"#类的封装\" class=\"headerlink\" title=\"类的封装\"></a>类的封装</h3><p><strong>封装</strong>：封装就是将<strong>属性或方法私有化</strong>，属性或方法私有化后，外部无法直接访问属性或方法，只能通过方法访问属性或方法</p>\n<p>语法：<br>属性私有化：<code>__属性名</code><br>方法私有化：<code>__方法名()</code><br>受保护属性：<code>_属性名</code><br>受保护方法：<code>_方法名()</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Student</span>:<br>    <span class=\"hljs-comment\"># 私有成员变量</span><br>    __name = <span class=\"hljs-literal\">None</span><br>    __age = <span class=\"hljs-literal\">None</span><br>    __sex = <span class=\"hljs-literal\">None</span><br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, name, age, sex</span>):<br>        <span class=\"hljs-variable language_\">self</span>.__name = name<br>        <span class=\"hljs-variable language_\">self</span>.__age = age<br>        <span class=\"hljs-variable language_\">self</span>.__sex = sex<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">show</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;姓名：%s, 年龄：%d, 性别：%s&quot;</span> % (<span class=\"hljs-variable language_\">self</span>.__name, <span class=\"hljs-variable language_\">self</span>.__age, <span class=\"hljs-variable language_\">self</span>.__sex))<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">getName</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.__name<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">getAge</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.__age<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">getSex</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">self</span>.__sex<br>    <br>    <span class=\"hljs-comment\"># 私有成员方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__setName</span>(<span class=\"hljs-params\">self, name</span>):<br>        <span class=\"hljs-variable language_\">self</span>.__name = name<br>    <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__setAge</span>(<span class=\"hljs-params\">self, age</span>):<br>        <span class=\"hljs-variable language_\">self</span>.__age = age<br>        <br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__setSex</span>(<span class=\"hljs-params\">self, sex</span>):<br>        <span class=\"hljs-variable language_\">self</span>.__sex = sex<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"类的继承\"><a href=\"#类的继承\" class=\"headerlink\" title=\"类的继承\"></a>类的继承</h3><p>继承：子类继承父类的属性和方法，并添加新的属性和方法</p>\n<ol>\n<li>不同于Java语言，Python语言支持多继承</li>\n<li>多继承时，父类同名属性或方法，会按照从左到右的顺序进行覆盖，即左边优先级更大</li>\n<li>子类只继承父类的<strong>公有</strong>或<strong>受保护</strong>属性和方法，不会继承父类的私有属性或方法</li>\n<li>父类的私有属性或方法，子类无法直接访问，需通过父类方法进行访问</li>\n<li>子类可以<strong>重写</strong>父类的同名方法</li>\n</ol>\n<p>语法：</p>\n<ol>\n<li><p>继承：<code>class 子类名(父类名1[, 父类名2, ...]):</code></p>\n</li>\n<li><p>调用：<code>super().[属性或方法名(参数)]</code>或<code>父类名.方法名(self, 参数)</code></p>\n</li>\n</ol>\n<h3 id=\"类的多态\"><a href=\"#类的多态\" class=\"headerlink\" title=\"类的多态\"></a>类的多态</h3><ul>\n<li>子类继承父类，并重写父类的同名方法</li>\n<li>函数参数可以指定父类对象，调用时传入子类对象</li>\n<li>通过调用不同子类的同名方法，实现多态</li>\n<li>父类可以声明一个抽象方法，子类必须实现该抽象方法<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 多态</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Animal</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">cry</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;动物叫&quot;</span>)<br>    <br>    <span class=\"hljs-comment\"># 父类可以定义抽象方法 子类必须实现抽象方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">eat</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-keyword\">pass</span><br>        <br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Dog</span>(<span class=\"hljs-title class_ inherited__\">Animal</span>):<br>    <span class=\"hljs-comment\"># 重写父类的方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">cry</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;汪汪汪&quot;</span>)<br>    <br>    <span class=\"hljs-comment\"># 重写父类抽象方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">eat</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;大狗嚼嚼嚼&quot;</span>)<br>        <br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Cat</span>(<span class=\"hljs-title class_ inherited__\">Animal</span>):<br>    <span class=\"hljs-comment\"># 重写父类方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">cry</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;喵喵喵&quot;</span>)<br>        <br>    <span class=\"hljs-comment\"># 重写父类抽象方法</span><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">eat</span>(<span class=\"hljs-params\">self</span>):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;吃吃吃&quot;</span>)<br>        <br><span class=\"hljs-comment\"># 定义一个方法 接收一个父类对象</span><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">print_cry</span>(<span class=\"hljs-params\">animal: Animal</span>):<br>    animal.cry()<br>    <br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">print_eat</span>(<span class=\"hljs-params\">animal: Animal</span>):<br>    animal.eat()<br>        <br>        <br>dog = Dog()<br>cat = Cat()<br><br><span class=\"hljs-comment\"># 传入不同子类 调用不同的方法</span><br>print_cry(dog)<br>print_cry(cat)<br><br>print_eat(dog)<br>print_eat(cat)<br></code></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"爬楼梯问题","date":"2025-09-14T08:32:00.000Z","_content":"\n# 爬楼梯问题\n\n## 问题描述\n假设你正在爬楼梯。需要 n 阶你才能到达楼顶。\n\n每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？\n\n \n\n示例 1：\n\n输入：n = 2\n输出：2\n解释：有两种方法可以爬到楼顶。\n1. 1 阶 + 1 阶\n2. 2 阶\n\n示例 2：\n\n输入：n = 3\n输出：3\n解释：有三种方法可以爬到楼顶。\n1. 1 阶 + 1 阶 + 1 阶\n2. 1 阶 + 2 阶\n3. 2 阶 + 1 阶\n\n## 递归解法\n> 思路：\n> n = 1 时，只有一种方法，即爬 1 阶；\n> n = 2 时，有两种方法，即爬 1 阶 + 1 阶和 2 阶；\n> n = 3 时，若在n=1，则有两种方法，即爬 1 阶 + 1 阶和 2 阶；若在n=2，则只有一种方法，即爬一阶；\n> 而n = 1和n = 2结果已知，由此，可以退出递推公式\n> 即递推公式为：f(n) = f(n-1) + f(n-2)\n\n### 代码实现\n~~~python\ndef climbStairs(n):\n    # 处理边界条件\n    if n == 1:\n        return 1\n    if n == 2:\n        return 2\n    # 递归调用\n    return climbStairs(n-1) + climbStairs(n-2)\n~~~\n### 复杂度分析\n从递归树中可以看出，调用的次数为**2^n^**\n所以：时间复杂度：**O(2^n^)** 空间复杂度：**O(n)**\n![递归树](../assert/微信图片_20250914151010_28_9.png \"递归树\")\n这种方法存在重复计算，递归树中，节点2就被计算了两次，导致效率较低\n我们可以引入一个数组，保存计算结果，当遇到相同的参数时，直接返回结果，避免重复计算，于是得到**记忆化递归解法**\n\n## 记忆化递归解法\n> 思路：\n> 在原有的递归解法中，添加一个数组，保存计算结果，当遇到相同的参数时，直接返回结果，避免重复计算\n\n### 代码实现\n~~~python\ndef climb(n):\n    memo = []\n    # 初始化数组\n    for i in range(n + 1):\n        memo.append(0)\n    return climbStairsMemo(n, memo)\n\ndef climbStairsMemo(n, memo):\n    # 计算过的直接返回\n    if memo[n] > 0:\n        return memo[n]\n    \n    # 处理边界条件\n    if n == 1:\n        memo[n] = 1\n    elif n == 2:\n        memo[n] = 2\n    else:\n        memo[n] = climbStairsMemo(n-1, memo) + climbStairsMemo(n-2, memo)\n    return memo[n]\n~~~\n\n### 复杂度分析\n由于每个节点只被计算一次，所以共n个节点，计算n次\n时间复杂度：**O(n)** 空间复杂度：**O(n)**\n\n## 动态规划解法\n> 思路：\n> 与递归类似，通过状态转移方程即递推式，计算出结果\n> 状态转移方程：f(n) = f(n-1) + f(n-2)\n\n### 代码实现\n~~~python\nclass Solution(object):\n    def climbStairs(self, n):\n        \"\"\"\n        :type n: int\n        :rtype: int\n        \"\"\"\n        if n == 1:\n            return 1\n        # 初始化数组\n        dp = []\n        for i in range(0, n + 1):\n            dp.append(0)\n        dp[1] = 1\n        dp[2] = 2\n\n        # 状态转移方程递推\n        for i in range(3,n + 1):\n            dp[i] = dp[i - 1] + dp[i - 2]\n        return dp[n]\n~~~\n\n### 复杂度分析\n时间复杂度：**O(n)** 空间复杂度：**O(n)**\n我们可以将数组优化成三个状态量，将空间复杂度降低到常数级别\n\n## 优化动态规划算法\n\n### 代码实现\n~~~python\nclass Solution(object):\n    def climbStairs(self, n):\n        \"\"\"\n        :type n: int\n        :rtype: int\n        \"\"\"\n        if n == 1:\n            return 1\n\n        # 初始化三个变量\n        num1 = 1\n        num2 = 2\n\n        # 状态转移方程递推\n        for i in range(3,n + 1):\n            num3 = num1 + num2\n            num1 = num2\n            num2 = num3\n        \n        # num2 为最终状态\n        return num2\n~~~\n\n### 复杂度分析\n时间复杂度：**O(n)** 空间复杂度：**O(1)**\n\n","source":"_posts/climb_stairs.md","raw":"---\ntitle: \"爬楼梯问题\"\ndate: 2025/09/14 16:32:00\ntags: \n    - \"算法\"\n    - \"动态规划\"\n    - \"递归\"\ncategories:\n    - \"算法笔记\"\n---\n\n# 爬楼梯问题\n\n## 问题描述\n假设你正在爬楼梯。需要 n 阶你才能到达楼顶。\n\n每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？\n\n \n\n示例 1：\n\n输入：n = 2\n输出：2\n解释：有两种方法可以爬到楼顶。\n1. 1 阶 + 1 阶\n2. 2 阶\n\n示例 2：\n\n输入：n = 3\n输出：3\n解释：有三种方法可以爬到楼顶。\n1. 1 阶 + 1 阶 + 1 阶\n2. 1 阶 + 2 阶\n3. 2 阶 + 1 阶\n\n## 递归解法\n> 思路：\n> n = 1 时，只有一种方法，即爬 1 阶；\n> n = 2 时，有两种方法，即爬 1 阶 + 1 阶和 2 阶；\n> n = 3 时，若在n=1，则有两种方法，即爬 1 阶 + 1 阶和 2 阶；若在n=2，则只有一种方法，即爬一阶；\n> 而n = 1和n = 2结果已知，由此，可以退出递推公式\n> 即递推公式为：f(n) = f(n-1) + f(n-2)\n\n### 代码实现\n~~~python\ndef climbStairs(n):\n    # 处理边界条件\n    if n == 1:\n        return 1\n    if n == 2:\n        return 2\n    # 递归调用\n    return climbStairs(n-1) + climbStairs(n-2)\n~~~\n### 复杂度分析\n从递归树中可以看出，调用的次数为**2^n^**\n所以：时间复杂度：**O(2^n^)** 空间复杂度：**O(n)**\n![递归树](../assert/微信图片_20250914151010_28_9.png \"递归树\")\n这种方法存在重复计算，递归树中，节点2就被计算了两次，导致效率较低\n我们可以引入一个数组，保存计算结果，当遇到相同的参数时，直接返回结果，避免重复计算，于是得到**记忆化递归解法**\n\n## 记忆化递归解法\n> 思路：\n> 在原有的递归解法中，添加一个数组，保存计算结果，当遇到相同的参数时，直接返回结果，避免重复计算\n\n### 代码实现\n~~~python\ndef climb(n):\n    memo = []\n    # 初始化数组\n    for i in range(n + 1):\n        memo.append(0)\n    return climbStairsMemo(n, memo)\n\ndef climbStairsMemo(n, memo):\n    # 计算过的直接返回\n    if memo[n] > 0:\n        return memo[n]\n    \n    # 处理边界条件\n    if n == 1:\n        memo[n] = 1\n    elif n == 2:\n        memo[n] = 2\n    else:\n        memo[n] = climbStairsMemo(n-1, memo) + climbStairsMemo(n-2, memo)\n    return memo[n]\n~~~\n\n### 复杂度分析\n由于每个节点只被计算一次，所以共n个节点，计算n次\n时间复杂度：**O(n)** 空间复杂度：**O(n)**\n\n## 动态规划解法\n> 思路：\n> 与递归类似，通过状态转移方程即递推式，计算出结果\n> 状态转移方程：f(n) = f(n-1) + f(n-2)\n\n### 代码实现\n~~~python\nclass Solution(object):\n    def climbStairs(self, n):\n        \"\"\"\n        :type n: int\n        :rtype: int\n        \"\"\"\n        if n == 1:\n            return 1\n        # 初始化数组\n        dp = []\n        for i in range(0, n + 1):\n            dp.append(0)\n        dp[1] = 1\n        dp[2] = 2\n\n        # 状态转移方程递推\n        for i in range(3,n + 1):\n            dp[i] = dp[i - 1] + dp[i - 2]\n        return dp[n]\n~~~\n\n### 复杂度分析\n时间复杂度：**O(n)** 空间复杂度：**O(n)**\n我们可以将数组优化成三个状态量，将空间复杂度降低到常数级别\n\n## 优化动态规划算法\n\n### 代码实现\n~~~python\nclass Solution(object):\n    def climbStairs(self, n):\n        \"\"\"\n        :type n: int\n        :rtype: int\n        \"\"\"\n        if n == 1:\n            return 1\n\n        # 初始化三个变量\n        num1 = 1\n        num2 = 2\n\n        # 状态转移方程递推\n        for i in range(3,n + 1):\n            num3 = num1 + num2\n            num1 = num2\n            num2 = num3\n        \n        # num2 为最终状态\n        return num2\n~~~\n\n### 复杂度分析\n时间复杂度：**O(n)** 空间复杂度：**O(1)**\n\n","slug":"climb_stairs","published":1,"updated":"2025-09-23T15:25:25.829Z","_id":"cmfs3zg9r0000gwtl2q1j32rk","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h1><span id=\"%E7%88%AC%E6%A5%BC%E6%A2%AF%E9%97%AE%E9%A2%98\">爬楼梯问题</span></h1><h2><span id=\"%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0\">问题描述</span></h2><p>假设你正在爬楼梯。需要 n 阶你才能到达楼顶。</p>\n<p>每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？</p>\n<p>示例 1：</p>\n<p>输入：n = 2<br>输出：2<br>解释：有两种方法可以爬到楼顶。</p>\n<ol>\n<li>1 阶 + 1 阶</li>\n<li>2 阶</li>\n</ol>\n<p>示例 2：</p>\n<p>输入：n = 3<br>输出：3<br>解释：有三种方法可以爬到楼顶。</p>\n<ol>\n<li>1 阶 + 1 阶 + 1 阶</li>\n<li>1 阶 + 2 阶</li>\n<li>2 阶 + 1 阶</li>\n</ol>\n<h2><span id=\"%E9%80%92%E5%BD%92%E8%A7%A3%E6%B3%95\">递归解法</span></h2><blockquote>\n<p>思路：<br>n = 1 时，只有一种方法，即爬 1 阶；<br>n = 2 时，有两种方法，即爬 1 阶 + 1 阶和 2 阶；<br>n = 3 时，若在n=1，则有两种方法，即爬 1 阶 + 1 阶和 2 阶；若在n=2，则只有一种方法，即爬一阶；<br>而n = 1和n = 2结果已知，由此，可以退出递推公式<br>即递推公式为：f(n) = f(n-1) + f(n-2)</p>\n</blockquote>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climbStairs</span>(<span class=\"hljs-params\">n</span>):<br>    <span class=\"hljs-comment\"># 处理边界条件</span><br>    <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">1</span>:<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span><br>    <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">2</span>:<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">2</span><br>    <span class=\"hljs-comment\"># 递归调用</span><br>    <span class=\"hljs-keyword\">return</span> climbStairs(n-<span class=\"hljs-number\">1</span>) + climbStairs(n-<span class=\"hljs-number\">2</span>)<br></code></pre></td></tr></tbody></table></figure>\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><p>从递归树中可以看出，调用的次数为<strong>2^n^</strong><br>所以：时间复杂度：<strong>O(2^n^)</strong> 空间复杂度：<strong>O(n)</strong><br><img src=\"/../assert/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250914151010_28_9.png\" alt=\"递归树\" title=\"递归树\"><br>这种方法存在重复计算，递归树中，节点2就被计算了两次，导致效率较低<br>我们可以引入一个数组，保存计算结果，当遇到相同的参数时，直接返回结果，避免重复计算，于是得到<strong>记忆化递归解法</strong></p>\n<h2><span id=\"%E8%AE%B0%E5%BF%86%E5%8C%96%E9%80%92%E5%BD%92%E8%A7%A3%E6%B3%95\">记忆化递归解法</span></h2><blockquote>\n<p>思路：<br>在原有的递归解法中，添加一个数组，保存计算结果，当遇到相同的参数时，直接返回结果，避免重复计算</p>\n</blockquote>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climb</span>(<span class=\"hljs-params\">n</span>):<br>    memo = []<br>    <span class=\"hljs-comment\"># 初始化数组</span><br>    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(n + <span class=\"hljs-number\">1</span>):<br>        memo.append(<span class=\"hljs-number\">0</span>)<br>    <span class=\"hljs-keyword\">return</span> climbStairsMemo(n, memo)<br><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climbStairsMemo</span>(<span class=\"hljs-params\">n, memo</span>):<br>    <span class=\"hljs-comment\"># 计算过的直接返回</span><br>    <span class=\"hljs-keyword\">if</span> memo[n] &gt; <span class=\"hljs-number\">0</span>:<br>        <span class=\"hljs-keyword\">return</span> memo[n]<br>    <br>    <span class=\"hljs-comment\"># 处理边界条件</span><br>    <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">1</span>:<br>        memo[n] = <span class=\"hljs-number\">1</span><br>    <span class=\"hljs-keyword\">elif</span> n == <span class=\"hljs-number\">2</span>:<br>        memo[n] = <span class=\"hljs-number\">2</span><br>    <span class=\"hljs-keyword\">else</span>:<br>        memo[n] = climbStairsMemo(n-<span class=\"hljs-number\">1</span>, memo) + climbStairsMemo(n-<span class=\"hljs-number\">2</span>, memo)<br>    <span class=\"hljs-keyword\">return</span> memo[n]<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><p>由于每个节点只被计算一次，所以共n个节点，计算n次<br>时间复杂度：<strong>O(n)</strong> 空间复杂度：<strong>O(n)</strong></p>\n<h2><span id=\"%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E8%A7%A3%E6%B3%95\">动态规划解法</span></h2><blockquote>\n<p>思路：<br>与递归类似，通过状态转移方程即递推式，计算出结果<br>状态转移方程：f(n) = f(n-1) + f(n-2)</p>\n</blockquote>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>(<span class=\"hljs-title class_ inherited__\">object</span>):<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climbStairs</span>(<span class=\"hljs-params\">self, n</span>):<br>        <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">        :type n: int</span><br><span class=\"hljs-string\">        :rtype: int</span><br><span class=\"hljs-string\">        \"\"\"</span><br>        <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">1</span>:<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-comment\"># 初始化数组</span><br>        dp = []<br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">0</span>, n + <span class=\"hljs-number\">1</span>):<br>            dp.append(<span class=\"hljs-number\">0</span>)<br>        dp[<span class=\"hljs-number\">1</span>] = <span class=\"hljs-number\">1</span><br>        dp[<span class=\"hljs-number\">2</span>] = <span class=\"hljs-number\">2</span><br><br>        <span class=\"hljs-comment\"># 状态转移方程递推</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">3</span>,n + <span class=\"hljs-number\">1</span>):<br>            dp[i] = dp[i - <span class=\"hljs-number\">1</span>] + dp[i - <span class=\"hljs-number\">2</span>]<br>        <span class=\"hljs-keyword\">return</span> dp[n]<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><p>时间复杂度：<strong>O(n)</strong> 空间复杂度：<strong>O(n)</strong><br>我们可以将数组优化成三个状态量，将空间复杂度降低到常数级别</p>\n<h2><span id=\"%E4%BC%98%E5%8C%96%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95\">优化动态规划算法</span></h2><h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>(<span class=\"hljs-title class_ inherited__\">object</span>):<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climbStairs</span>(<span class=\"hljs-params\">self, n</span>):<br>        <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">        :type n: int</span><br><span class=\"hljs-string\">        :rtype: int</span><br><span class=\"hljs-string\">        \"\"\"</span><br>        <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">1</span>:<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span><br><br>        <span class=\"hljs-comment\"># 初始化三个变量</span><br>        num1 = <span class=\"hljs-number\">1</span><br>        num2 = <span class=\"hljs-number\">2</span><br><br>        <span class=\"hljs-comment\"># 状态转移方程递推</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">3</span>,n + <span class=\"hljs-number\">1</span>):<br>            num3 = num1 + num2<br>            num1 = num2<br>            num2 = num3<br>        <br>        <span class=\"hljs-comment\"># num2 为最终状态</span><br>        <span class=\"hljs-keyword\">return</span> num2<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><p>时间复杂度：<strong>O(n)</strong> 空间复杂度：<strong>O(1)</strong></p>\n</body></html>","excerpt":"","more":"<h1 id=\"爬楼梯问题\"><a href=\"#爬楼梯问题\" class=\"headerlink\" title=\"爬楼梯问题\"></a>爬楼梯问题</h1><h2 id=\"问题描述\"><a href=\"#问题描述\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h2><p>假设你正在爬楼梯。需要 n 阶你才能到达楼顶。</p>\n<p>每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？</p>\n<p>示例 1：</p>\n<p>输入：n &#x3D; 2<br>输出：2<br>解释：有两种方法可以爬到楼顶。</p>\n<ol>\n<li>1 阶 + 1 阶</li>\n<li>2 阶</li>\n</ol>\n<p>示例 2：</p>\n<p>输入：n &#x3D; 3<br>输出：3<br>解释：有三种方法可以爬到楼顶。</p>\n<ol>\n<li>1 阶 + 1 阶 + 1 阶</li>\n<li>1 阶 + 2 阶</li>\n<li>2 阶 + 1 阶</li>\n</ol>\n<h2 id=\"递归解法\"><a href=\"#递归解法\" class=\"headerlink\" title=\"递归解法\"></a>递归解法</h2><blockquote>\n<p>思路：<br>n &#x3D; 1 时，只有一种方法，即爬 1 阶；<br>n &#x3D; 2 时，有两种方法，即爬 1 阶 + 1 阶和 2 阶；<br>n &#x3D; 3 时，若在n&#x3D;1，则有两种方法，即爬 1 阶 + 1 阶和 2 阶；若在n&#x3D;2，则只有一种方法，即爬一阶；<br>而n &#x3D; 1和n &#x3D; 2结果已知，由此，可以退出递推公式<br>即递推公式为：f(n) &#x3D; f(n-1) + f(n-2)</p>\n</blockquote>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climbStairs</span>(<span class=\"hljs-params\">n</span>):<br>    <span class=\"hljs-comment\"># 处理边界条件</span><br>    <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">1</span>:<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span><br>    <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">2</span>:<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">2</span><br>    <span class=\"hljs-comment\"># 递归调用</span><br>    <span class=\"hljs-keyword\">return</span> climbStairs(n-<span class=\"hljs-number\">1</span>) + climbStairs(n-<span class=\"hljs-number\">2</span>)<br></code></pre></td></tr></table></figure>\n<h3 id=\"复杂度分析\"><a href=\"#复杂度分析\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>从递归树中可以看出，调用的次数为<strong>2^n^</strong><br>所以：时间复杂度：<strong>O(2^n^)</strong> 空间复杂度：<strong>O(n)</strong><br><img src=\"/../assert/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250914151010_28_9.png\" alt=\"递归树\" title=\"递归树\"><br>这种方法存在重复计算，递归树中，节点2就被计算了两次，导致效率较低<br>我们可以引入一个数组，保存计算结果，当遇到相同的参数时，直接返回结果，避免重复计算，于是得到<strong>记忆化递归解法</strong></p>\n<h2 id=\"记忆化递归解法\"><a href=\"#记忆化递归解法\" class=\"headerlink\" title=\"记忆化递归解法\"></a>记忆化递归解法</h2><blockquote>\n<p>思路：<br>在原有的递归解法中，添加一个数组，保存计算结果，当遇到相同的参数时，直接返回结果，避免重复计算</p>\n</blockquote>\n<h3 id=\"代码实现-1\"><a href=\"#代码实现-1\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climb</span>(<span class=\"hljs-params\">n</span>):<br>    memo = []<br>    <span class=\"hljs-comment\"># 初始化数组</span><br>    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(n + <span class=\"hljs-number\">1</span>):<br>        memo.append(<span class=\"hljs-number\">0</span>)<br>    <span class=\"hljs-keyword\">return</span> climbStairsMemo(n, memo)<br><br><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climbStairsMemo</span>(<span class=\"hljs-params\">n, memo</span>):<br>    <span class=\"hljs-comment\"># 计算过的直接返回</span><br>    <span class=\"hljs-keyword\">if</span> memo[n] &gt; <span class=\"hljs-number\">0</span>:<br>        <span class=\"hljs-keyword\">return</span> memo[n]<br>    <br>    <span class=\"hljs-comment\"># 处理边界条件</span><br>    <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">1</span>:<br>        memo[n] = <span class=\"hljs-number\">1</span><br>    <span class=\"hljs-keyword\">elif</span> n == <span class=\"hljs-number\">2</span>:<br>        memo[n] = <span class=\"hljs-number\">2</span><br>    <span class=\"hljs-keyword\">else</span>:<br>        memo[n] = climbStairsMemo(n-<span class=\"hljs-number\">1</span>, memo) + climbStairsMemo(n-<span class=\"hljs-number\">2</span>, memo)<br>    <span class=\"hljs-keyword\">return</span> memo[n]<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-1\"><a href=\"#复杂度分析-1\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>由于每个节点只被计算一次，所以共n个节点，计算n次<br>时间复杂度：<strong>O(n)</strong> 空间复杂度：<strong>O(n)</strong></p>\n<h2 id=\"动态规划解法\"><a href=\"#动态规划解法\" class=\"headerlink\" title=\"动态规划解法\"></a>动态规划解法</h2><blockquote>\n<p>思路：<br>与递归类似，通过状态转移方程即递推式，计算出结果<br>状态转移方程：f(n) &#x3D; f(n-1) + f(n-2)</p>\n</blockquote>\n<h3 id=\"代码实现-2\"><a href=\"#代码实现-2\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>(<span class=\"hljs-title class_ inherited__\">object</span>):<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climbStairs</span>(<span class=\"hljs-params\">self, n</span>):<br>        <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">        :type n: int</span><br><span class=\"hljs-string\">        :rtype: int</span><br><span class=\"hljs-string\">        &quot;&quot;&quot;</span><br>        <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">1</span>:<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-comment\"># 初始化数组</span><br>        dp = []<br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">0</span>, n + <span class=\"hljs-number\">1</span>):<br>            dp.append(<span class=\"hljs-number\">0</span>)<br>        dp[<span class=\"hljs-number\">1</span>] = <span class=\"hljs-number\">1</span><br>        dp[<span class=\"hljs-number\">2</span>] = <span class=\"hljs-number\">2</span><br><br>        <span class=\"hljs-comment\"># 状态转移方程递推</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">3</span>,n + <span class=\"hljs-number\">1</span>):<br>            dp[i] = dp[i - <span class=\"hljs-number\">1</span>] + dp[i - <span class=\"hljs-number\">2</span>]<br>        <span class=\"hljs-keyword\">return</span> dp[n]<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-2\"><a href=\"#复杂度分析-2\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>时间复杂度：<strong>O(n)</strong> 空间复杂度：<strong>O(n)</strong><br>我们可以将数组优化成三个状态量，将空间复杂度降低到常数级别</p>\n<h2 id=\"优化动态规划算法\"><a href=\"#优化动态规划算法\" class=\"headerlink\" title=\"优化动态规划算法\"></a>优化动态规划算法</h2><h3 id=\"代码实现-3\"><a href=\"#代码实现-3\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>(<span class=\"hljs-title class_ inherited__\">object</span>):<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">climbStairs</span>(<span class=\"hljs-params\">self, n</span>):<br>        <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">        :type n: int</span><br><span class=\"hljs-string\">        :rtype: int</span><br><span class=\"hljs-string\">        &quot;&quot;&quot;</span><br>        <span class=\"hljs-keyword\">if</span> n == <span class=\"hljs-number\">1</span>:<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span><br><br>        <span class=\"hljs-comment\"># 初始化三个变量</span><br>        num1 = <span class=\"hljs-number\">1</span><br>        num2 = <span class=\"hljs-number\">2</span><br><br>        <span class=\"hljs-comment\"># 状态转移方程递推</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">3</span>,n + <span class=\"hljs-number\">1</span>):<br>            num3 = num1 + num2<br>            num1 = num2<br>            num2 = num3<br>        <br>        <span class=\"hljs-comment\"># num2 为最终状态</span><br>        <span class=\"hljs-keyword\">return</span> num2<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-3\"><a href=\"#复杂度分析-3\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>时间复杂度：<strong>O(n)</strong> 空间复杂度：<strong>O(1)</strong></p>\n"},{"title":"组合总和问题","_content":"\n# 组合总和问题\n\n## 问题描述\n给你一个由 不同 整数组成的数组 nums ，和一个目标整数 target 。请你从 nums 中找出并返回总和为 target 的元素组合的个数。\n\n题目数据保证答案符合 32 位整数范围。\n\n \n\n示例 1：\n\n输入：nums = [1,2,3], target = 4\n输出：7\n解释：\n所有可能的组合为：\n(1, 1, 1, 1)\n(1, 1, 2)\n(1, 2, 1)\n(1, 3)\n(2, 1, 1)\n(2, 2)\n(3, 1)\n请注意，顺序不同的序列被视作不同的组合。\n\n示例 2：\n\n输入：nums = [9], target = 3\n输出：0\n\n \n\n提示：\n1 <= nums.length <= 200\n1 <= nums[i] <= 1000\nnums 中的所有元素 互不相同\n1 <= target <= 1000\n\n## 思路\n1. 我们可以将此问题看作爬楼梯问题，如果可以到达某一个target，则最后加的一个数必在nums中\n2. 于是，我们可以定义一个数组dp来记录到达每一个小于等于target的数的方法数\n3. 将当前状态记为`dp[i]`，即到达i的方法数，而`dp[0] = 1`，因为只有什么都不选一种方法\n4. `1 <= i <= target`，只有 `num <= i`，才能判定为可达\n5. 因此我们可以递推从 `1 ~ target`，遍历nums判断nums中是否有可达的数，如果有则加上`dp[i - num]`\n6. 到此我们可以得到状态转移方程：`dp[i] += dp[i - num]`(每当有num<=i时)，其中num为nums中的数\n\n## 代码实现\n根据上述思路，我们可以得到如下代码：\n~~~python\nclass Solution(object):\n    def combinationSum4(self, nums, target):\n        \"\"\"\n        :type nums: List[int]\n        :type target: int\n        :rtype: int\n        \"\"\"\n        # 定义数组，记录可达的方法数，初始化\n        dp = [1] + [0] * target\n        # 从1开始递推\n        for i in range(1, target + 1):\n            # 遍历nums\n            for num in nums:\n                # 若num可达\n                if num <= i:\n                    # 累加方法数\n                    dp[i] += dp[i - num]\n\n        # 返回可达target的方法数\n        return dp[target]\n~~~\n","source":"_posts/combined_sum.md","raw":"---\ntitle: \"组合总和问题\"\ntags:\n    - \"算法\"\n    - \"动态规划\"\ncategories:\n    - \"算法笔记\"\n---\n\n# 组合总和问题\n\n## 问题描述\n给你一个由 不同 整数组成的数组 nums ，和一个目标整数 target 。请你从 nums 中找出并返回总和为 target 的元素组合的个数。\n\n题目数据保证答案符合 32 位整数范围。\n\n \n\n示例 1：\n\n输入：nums = [1,2,3], target = 4\n输出：7\n解释：\n所有可能的组合为：\n(1, 1, 1, 1)\n(1, 1, 2)\n(1, 2, 1)\n(1, 3)\n(2, 1, 1)\n(2, 2)\n(3, 1)\n请注意，顺序不同的序列被视作不同的组合。\n\n示例 2：\n\n输入：nums = [9], target = 3\n输出：0\n\n \n\n提示：\n1 <= nums.length <= 200\n1 <= nums[i] <= 1000\nnums 中的所有元素 互不相同\n1 <= target <= 1000\n\n## 思路\n1. 我们可以将此问题看作爬楼梯问题，如果可以到达某一个target，则最后加的一个数必在nums中\n2. 于是，我们可以定义一个数组dp来记录到达每一个小于等于target的数的方法数\n3. 将当前状态记为`dp[i]`，即到达i的方法数，而`dp[0] = 1`，因为只有什么都不选一种方法\n4. `1 <= i <= target`，只有 `num <= i`，才能判定为可达\n5. 因此我们可以递推从 `1 ~ target`，遍历nums判断nums中是否有可达的数，如果有则加上`dp[i - num]`\n6. 到此我们可以得到状态转移方程：`dp[i] += dp[i - num]`(每当有num<=i时)，其中num为nums中的数\n\n## 代码实现\n根据上述思路，我们可以得到如下代码：\n~~~python\nclass Solution(object):\n    def combinationSum4(self, nums, target):\n        \"\"\"\n        :type nums: List[int]\n        :type target: int\n        :rtype: int\n        \"\"\"\n        # 定义数组，记录可达的方法数，初始化\n        dp = [1] + [0] * target\n        # 从1开始递推\n        for i in range(1, target + 1):\n            # 遍历nums\n            for num in nums:\n                # 若num可达\n                if num <= i:\n                    # 累加方法数\n                    dp[i] += dp[i - num]\n\n        # 返回可达target的方法数\n        return dp[target]\n~~~\n","slug":"combined_sum","published":1,"date":"2025-09-16T15:04:20.939Z","updated":"2025-09-24T02:48:25.105Z","_id":"cmfs3zg9u0002gwtlhb459op3","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h1><span id=\"%E7%BB%84%E5%90%88%E6%80%BB%E5%92%8C%E9%97%AE%E9%A2%98\">组合总和问题</span></h1><h2><span id=\"%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0\">问题描述</span></h2><p>给你一个由 不同 整数组成的数组 nums ，和一个目标整数 target 。请你从 nums 中找出并返回总和为 target 的元素组合的个数。</p>\n<p>题目数据保证答案符合 32 位整数范围。</p>\n<p>示例 1：</p>\n<p>输入：nums = [1,2,3], target = 4<br>输出：7<br>解释：<br>所有可能的组合为：<br>(1, 1, 1, 1)<br>(1, 1, 2)<br>(1, 2, 1)<br>(1, 3)<br>(2, 1, 1)<br>(2, 2)<br>(3, 1)<br>请注意，顺序不同的序列被视作不同的组合。</p>\n<p>示例 2：</p>\n<p>输入：nums = [9], target = 3<br>输出：0</p>\n<p>提示：<br>1 &lt;= nums.length &lt;= 200<br>1 &lt;= nums[i] &lt;= 1000<br>nums 中的所有元素 互不相同<br>1 &lt;= target &lt;= 1000</p>\n<h2><span id=\"%E6%80%9D%E8%B7%AF\">思路</span></h2><ol>\n<li>我们可以将此问题看作爬楼梯问题，如果可以到达某一个target，则最后加的一个数必在nums中</li>\n<li>于是，我们可以定义一个数组dp来记录到达每一个小于等于target的数的方法数</li>\n<li>将当前状态记为<code>dp[i]</code>，即到达i的方法数，而<code>dp[0] = 1</code>，因为只有什么都不选一种方法</li>\n<li><code>1 &lt;= i &lt;= target</code>，只有 <code>num &lt;= i</code>，才能判定为可达</li>\n<li>因此我们可以递推从 <code>1 ~ target</code>，遍历nums判断nums中是否有可达的数，如果有则加上<code>dp[i - num]</code></li>\n<li>到此我们可以得到状态转移方程：<code>dp[i] += dp[i - num]</code>(每当有num&lt;=i时)，其中num为nums中的数</li>\n</ol>\n<h2><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h2><p>根据上述思路，我们可以得到如下代码：</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>(<span class=\"hljs-title class_ inherited__\">object</span>):<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">combinationSum4</span>(<span class=\"hljs-params\">self, nums, target</span>):<br>        <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">        :type nums: List[int]</span><br><span class=\"hljs-string\">        :type target: int</span><br><span class=\"hljs-string\">        :rtype: int</span><br><span class=\"hljs-string\">        \"\"\"</span><br>        <span class=\"hljs-comment\"># 定义数组，记录可达的方法数，初始化</span><br>        dp = [<span class=\"hljs-number\">1</span>] + [<span class=\"hljs-number\">0</span>] * target<br>        <span class=\"hljs-comment\"># 从1开始递推</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, target + <span class=\"hljs-number\">1</span>):<br>            <span class=\"hljs-comment\"># 遍历nums</span><br>            <span class=\"hljs-keyword\">for</span> num <span class=\"hljs-keyword\">in</span> nums:<br>                <span class=\"hljs-comment\"># 若num可达</span><br>                <span class=\"hljs-keyword\">if</span> num &lt;= i:<br>                    <span class=\"hljs-comment\"># 累加方法数</span><br>                    dp[i] += dp[i - num]<br><br>        <span class=\"hljs-comment\"># 返回可达target的方法数</span><br>        <span class=\"hljs-keyword\">return</span> dp[target]<br></code></pre></td></tr></tbody></table></figure>\n</body></html>","excerpt":"","more":"<h1 id=\"组合总和问题\"><a href=\"#组合总和问题\" class=\"headerlink\" title=\"组合总和问题\"></a>组合总和问题</h1><h2 id=\"问题描述\"><a href=\"#问题描述\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h2><p>给你一个由 不同 整数组成的数组 nums ，和一个目标整数 target 。请你从 nums 中找出并返回总和为 target 的元素组合的个数。</p>\n<p>题目数据保证答案符合 32 位整数范围。</p>\n<p>示例 1：</p>\n<p>输入：nums &#x3D; [1,2,3], target &#x3D; 4<br>输出：7<br>解释：<br>所有可能的组合为：<br>(1, 1, 1, 1)<br>(1, 1, 2)<br>(1, 2, 1)<br>(1, 3)<br>(2, 1, 1)<br>(2, 2)<br>(3, 1)<br>请注意，顺序不同的序列被视作不同的组合。</p>\n<p>示例 2：</p>\n<p>输入：nums &#x3D; [9], target &#x3D; 3<br>输出：0</p>\n<p>提示：<br>1 &lt;&#x3D; nums.length &lt;&#x3D; 200<br>1 &lt;&#x3D; nums[i] &lt;&#x3D; 1000<br>nums 中的所有元素 互不相同<br>1 &lt;&#x3D; target &lt;&#x3D; 1000</p>\n<h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><ol>\n<li>我们可以将此问题看作爬楼梯问题，如果可以到达某一个target，则最后加的一个数必在nums中</li>\n<li>于是，我们可以定义一个数组dp来记录到达每一个小于等于target的数的方法数</li>\n<li>将当前状态记为<code>dp[i]</code>，即到达i的方法数，而<code>dp[0] = 1</code>，因为只有什么都不选一种方法</li>\n<li><code>1 &lt;= i &lt;= target</code>，只有 <code>num &lt;= i</code>，才能判定为可达</li>\n<li>因此我们可以递推从 <code>1 ~ target</code>，遍历nums判断nums中是否有可达的数，如果有则加上<code>dp[i - num]</code></li>\n<li>到此我们可以得到状态转移方程：<code>dp[i] += dp[i - num]</code>(每当有num&lt;&#x3D;i时)，其中num为nums中的数</li>\n</ol>\n<h2 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h2><p>根据上述思路，我们可以得到如下代码：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>(<span class=\"hljs-title class_ inherited__\">object</span>):<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">combinationSum4</span>(<span class=\"hljs-params\">self, nums, target</span>):<br>        <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">        :type nums: List[int]</span><br><span class=\"hljs-string\">        :type target: int</span><br><span class=\"hljs-string\">        :rtype: int</span><br><span class=\"hljs-string\">        &quot;&quot;&quot;</span><br>        <span class=\"hljs-comment\"># 定义数组，记录可达的方法数，初始化</span><br>        dp = [<span class=\"hljs-number\">1</span>] + [<span class=\"hljs-number\">0</span>] * target<br>        <span class=\"hljs-comment\"># 从1开始递推</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, target + <span class=\"hljs-number\">1</span>):<br>            <span class=\"hljs-comment\"># 遍历nums</span><br>            <span class=\"hljs-keyword\">for</span> num <span class=\"hljs-keyword\">in</span> nums:<br>                <span class=\"hljs-comment\"># 若num可达</span><br>                <span class=\"hljs-keyword\">if</span> num &lt;= i:<br>                    <span class=\"hljs-comment\"># 累加方法数</span><br>                    dp[i] += dp[i - num]<br><br>        <span class=\"hljs-comment\"># 返回可达target的方法数</span><br>        <span class=\"hljs-keyword\">return</span> dp[target]<br></code></pre></td></tr></table></figure>\n"},{"title":"定长滑窗问题","date":"2025-09-18T12:18:52.685Z","_content":"\n# 定长滑窗问题\n\n## 定长子串中元音的最大数目\n\n### 题目描述\n给你字符串 s 和整数 k 。\n\n请返回字符串 s 中长度为 k 的单个子字符串中可能包含的最大元音字母数。\n\n英文中的 元音字母 为（a, e, i, o, u）。\n\n \n\n示例 1：\n\n输入：s = \"abciiidef\", k = 3\n输出：3\n解释：子字符串 \"iii\" 包含 3 个元音字母。\n\n示例 2：\n\n输入：s = \"aeiou\", k = 2\n输出：2\n解释：任意长度为 2 的子字符串都包含 2 个元音字母。\n\n示例 3：\n\n输入：s = \"leetcode\", k = 3\n输出：2\n解释：\"lee\"、\"eet\" 和 \"ode\" 都包含 2 个元音字母。\n\n示例 4：\n\n输入：s = \"rhythms\", k = 4\n输出：0\n解释：字符串 s 中不含任何元音字母。\n\n示例 5：\n\n输入：s = \"tryhard\", k = 4\n输出：1\n\n### 思路\n1. 我们假定一个长度为k的窗口\n2. 若窗口右端为i，则窗口左端为 **i-k+1**，如[2,3,4,5]长度为4，左端即5 - 4 + 1 = 2\n3. 窗口向右滑动，若右边为元音字母，则统计数加1，若左边为元音字母，则统计数减1\n4. 每次移动窗口更新最大值\n5. 循环结束后，返回最大值，即为所求\n\n### 代码实现\n~~~python\n# @灵茶山艾府\nclass Solution:\n    def maxVowels(self, s: str, k: int) -> int:\n        ans = vowel = 0\n        for i, c in enumerate(s):  # 枚举窗口右端点 i\n            # 1. 右端点进入窗口\n            if c in \"aeiou\":\n                vowel += 1\n\n            left = i - k + 1  # 窗口左端点\n            # 窗口大小不足 k，尚未形成第一个窗口\n            if left < 0:  \n                continue\n\n            # 2. 更新答案\n            ans = max(ans, vowel)\n\n            # 3. 左端点离开窗口，为下一个循环做准备\n            if s[left] in \"aeiou\":\n                vowel -= 1\n        return ans\n~~~\n\n### 复杂度分析\n时间复杂度：**O(n)** ，其中 n 为字符串的长度\n空间复杂度：**O(1)**\n\n## 半径为 k 的子数组平均值\n\n### 题目描述\n给你一个下标从 0 开始的数组 nums ，数组中有 n 个整数，另给你一个整数 k 。\n\n半径为 k 的子数组平均值 是指：nums 中一个以下标 i 为 中心 且 半径 为 k 的子数组中所有元素的平均值，即下标在 i - k 和 i + k 范围（含 i - k 和 i + k）内所有元素的平均值。如果在下标 i 前或后不足 k 个元素，那么 半径为 k 的子数组平均值 是 -1 。\n\n构建并返回一个长度为 n 的数组 avgs ，其中 avgs[i] 是以下标 i 为中心的子数组的 半径为 k 的子数组平均值 。\n\nx 个元素的 平均值 是 x 个元素相加之和除以 x ，此时使用截断式 整数除法 ，即需要去掉结果的小数部分。\n\n例如，四个元素 2、3、1 和 5 的平均值是 (2 + 3 + 1 + 5) / 4 = 11 / 4 = 2.75，截断后得到 2 。\n\n示例 1：\n![示例](../assert/eg1.png)\n\n输入：nums = [7,4,3,9,1,8,5,2,6], k = 3\n输出：[-1,-1,-1,5,4,4,-1,-1,-1]\n解释：\n- avg[0]、avg[1] 和 avg[2] 是 -1 ，因为在这几个下标前的元素数量都不足 k 个。\n- 中心为下标 3 且半径为 3 的子数组的元素总和是：7 + 4 + 3 + 9 + 1 + 8 + 5 = 37 。\n  使用截断式 整数除法，avg[3] = 37 / 7 = 5 。\n- 中心为下标 4 的子数组，avg[4] = (4 + 3 + 9 + 1 + 8 + 5 + 2) / 7 = 4 。\n- 中心为下标 5 的子数组，avg[5] = (3 + 9 + 1 + 8 + 5 + 2 + 6) / 7 = 4 。\n- avg[6]、avg[7] 和 avg[8] 是 -1 ，因为在这几个下标后的元素数量都不足 k 个。\n\n示例 2：\n\n输入：nums = [100000], k = 0\n输出：[100000]\n解释：\n- 中心为下标 0 且半径 0 的子数组的元素总和是：100000 。\n  avg[0] = 100000 / 1 = 100000 。\n\n示例 3：\n\n输入：nums = [8], k = 100000\n输出：[-1]\n解释：\n- avg[0] 是 -1 ，因为在下标 0 前后的元素数量均不足 k 。\n\n### 思路\n1. 与上一题类似，但窗口长度更改为2k+1\n2. 假设窗口右端为i，则窗口左端变为 **(i-2k-1)+1** 即 **i-2k**\n3. 观察可得，中点位置为 **i-k** ，在中点位置即是需要算平均值的元素\n4. 窗口向右移动，添加右侧，减去左侧，更新平均值\n\n### 代码实现\n~~~python\nclass Solution:\n\n    def getAverages(self, nums: List[int], k: int) -> List[int]:\n\n        avgs = [-1] * len(nums)\n\n        s = 0  # 维护窗口元素和\n\n        for i, x in enumerate(nums):\n\n            # 1. 进入窗口\n\n            s += x\n\n            if i < k * 2:  # 窗口大小不足 2k+1\n\n                continue\n\n            # 2. 记录答案\n\n            avgs[i - k] = s // (k * 2 + 1)\n\n            # 3. 离开窗口\n\n            s -= nums[i - k * 2]\n\n        return avgs\n\n# @灵茶山艾府\n~~~\n \n### 复杂度分析\n时间复杂度：**O(n)** ，其中 n 为数组的长度\n空间复杂度：**O(1)** ，返回值不计入\n","source":"_posts/fixed_length_slide_window_problem.md","raw":"---\ntitle: \"定长滑窗问题\"\ntags:\n  - 算法\ndate: \ncategories: \n    - 算法笔记\n---\n\n# 定长滑窗问题\n\n## 定长子串中元音的最大数目\n\n### 题目描述\n给你字符串 s 和整数 k 。\n\n请返回字符串 s 中长度为 k 的单个子字符串中可能包含的最大元音字母数。\n\n英文中的 元音字母 为（a, e, i, o, u）。\n\n \n\n示例 1：\n\n输入：s = \"abciiidef\", k = 3\n输出：3\n解释：子字符串 \"iii\" 包含 3 个元音字母。\n\n示例 2：\n\n输入：s = \"aeiou\", k = 2\n输出：2\n解释：任意长度为 2 的子字符串都包含 2 个元音字母。\n\n示例 3：\n\n输入：s = \"leetcode\", k = 3\n输出：2\n解释：\"lee\"、\"eet\" 和 \"ode\" 都包含 2 个元音字母。\n\n示例 4：\n\n输入：s = \"rhythms\", k = 4\n输出：0\n解释：字符串 s 中不含任何元音字母。\n\n示例 5：\n\n输入：s = \"tryhard\", k = 4\n输出：1\n\n### 思路\n1. 我们假定一个长度为k的窗口\n2. 若窗口右端为i，则窗口左端为 **i-k+1**，如[2,3,4,5]长度为4，左端即5 - 4 + 1 = 2\n3. 窗口向右滑动，若右边为元音字母，则统计数加1，若左边为元音字母，则统计数减1\n4. 每次移动窗口更新最大值\n5. 循环结束后，返回最大值，即为所求\n\n### 代码实现\n~~~python\n# @灵茶山艾府\nclass Solution:\n    def maxVowels(self, s: str, k: int) -> int:\n        ans = vowel = 0\n        for i, c in enumerate(s):  # 枚举窗口右端点 i\n            # 1. 右端点进入窗口\n            if c in \"aeiou\":\n                vowel += 1\n\n            left = i - k + 1  # 窗口左端点\n            # 窗口大小不足 k，尚未形成第一个窗口\n            if left < 0:  \n                continue\n\n            # 2. 更新答案\n            ans = max(ans, vowel)\n\n            # 3. 左端点离开窗口，为下一个循环做准备\n            if s[left] in \"aeiou\":\n                vowel -= 1\n        return ans\n~~~\n\n### 复杂度分析\n时间复杂度：**O(n)** ，其中 n 为字符串的长度\n空间复杂度：**O(1)**\n\n## 半径为 k 的子数组平均值\n\n### 题目描述\n给你一个下标从 0 开始的数组 nums ，数组中有 n 个整数，另给你一个整数 k 。\n\n半径为 k 的子数组平均值 是指：nums 中一个以下标 i 为 中心 且 半径 为 k 的子数组中所有元素的平均值，即下标在 i - k 和 i + k 范围（含 i - k 和 i + k）内所有元素的平均值。如果在下标 i 前或后不足 k 个元素，那么 半径为 k 的子数组平均值 是 -1 。\n\n构建并返回一个长度为 n 的数组 avgs ，其中 avgs[i] 是以下标 i 为中心的子数组的 半径为 k 的子数组平均值 。\n\nx 个元素的 平均值 是 x 个元素相加之和除以 x ，此时使用截断式 整数除法 ，即需要去掉结果的小数部分。\n\n例如，四个元素 2、3、1 和 5 的平均值是 (2 + 3 + 1 + 5) / 4 = 11 / 4 = 2.75，截断后得到 2 。\n\n示例 1：\n![示例](../assert/eg1.png)\n\n输入：nums = [7,4,3,9,1,8,5,2,6], k = 3\n输出：[-1,-1,-1,5,4,4,-1,-1,-1]\n解释：\n- avg[0]、avg[1] 和 avg[2] 是 -1 ，因为在这几个下标前的元素数量都不足 k 个。\n- 中心为下标 3 且半径为 3 的子数组的元素总和是：7 + 4 + 3 + 9 + 1 + 8 + 5 = 37 。\n  使用截断式 整数除法，avg[3] = 37 / 7 = 5 。\n- 中心为下标 4 的子数组，avg[4] = (4 + 3 + 9 + 1 + 8 + 5 + 2) / 7 = 4 。\n- 中心为下标 5 的子数组，avg[5] = (3 + 9 + 1 + 8 + 5 + 2 + 6) / 7 = 4 。\n- avg[6]、avg[7] 和 avg[8] 是 -1 ，因为在这几个下标后的元素数量都不足 k 个。\n\n示例 2：\n\n输入：nums = [100000], k = 0\n输出：[100000]\n解释：\n- 中心为下标 0 且半径 0 的子数组的元素总和是：100000 。\n  avg[0] = 100000 / 1 = 100000 。\n\n示例 3：\n\n输入：nums = [8], k = 100000\n输出：[-1]\n解释：\n- avg[0] 是 -1 ，因为在下标 0 前后的元素数量均不足 k 。\n\n### 思路\n1. 与上一题类似，但窗口长度更改为2k+1\n2. 假设窗口右端为i，则窗口左端变为 **(i-2k-1)+1** 即 **i-2k**\n3. 观察可得，中点位置为 **i-k** ，在中点位置即是需要算平均值的元素\n4. 窗口向右移动，添加右侧，减去左侧，更新平均值\n\n### 代码实现\n~~~python\nclass Solution:\n\n    def getAverages(self, nums: List[int], k: int) -> List[int]:\n\n        avgs = [-1] * len(nums)\n\n        s = 0  # 维护窗口元素和\n\n        for i, x in enumerate(nums):\n\n            # 1. 进入窗口\n\n            s += x\n\n            if i < k * 2:  # 窗口大小不足 2k+1\n\n                continue\n\n            # 2. 记录答案\n\n            avgs[i - k] = s // (k * 2 + 1)\n\n            # 3. 离开窗口\n\n            s -= nums[i - k * 2]\n\n        return avgs\n\n# @灵茶山艾府\n~~~\n \n### 复杂度分析\n时间复杂度：**O(n)** ，其中 n 为数组的长度\n空间复杂度：**O(1)** ，返回值不计入\n","slug":"fixed_length_slide_window_problem","published":1,"updated":"2025-09-23T15:26:10.714Z","_id":"cmfs3zg9x000cgwtl34b2ghyq","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h1><span id=\"%E5%AE%9A%E9%95%BF%E6%BB%91%E7%AA%97%E9%97%AE%E9%A2%98\">定长滑窗问题</span></h1><h2><span id=\"%E5%AE%9A%E9%95%BF%E5%AD%90%E4%B8%B2%E4%B8%AD%E5%85%83%E9%9F%B3%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E7%9B%AE\">定长子串中元音的最大数目</span></h2><h3><span id=\"%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0\">题目描述</span></h3><p>给你字符串 s 和整数 k 。</p>\n<p>请返回字符串 s 中长度为 k 的单个子字符串中可能包含的最大元音字母数。</p>\n<p>英文中的 元音字母 为（a, e, i, o, u）。</p>\n<p>示例 1：</p>\n<p>输入：s = \"abciiidef\", k = 3<br>输出：3<br>解释：子字符串 \"iii\" 包含 3 个元音字母。</p>\n<p>示例 2：</p>\n<p>输入：s = \"aeiou\", k = 2<br>输出：2<br>解释：任意长度为 2 的子字符串都包含 2 个元音字母。</p>\n<p>示例 3：</p>\n<p>输入：s = \"leetcode\", k = 3<br>输出：2<br>解释：\"lee\"、\"eet\" 和 \"ode\" 都包含 2 个元音字母。</p>\n<p>示例 4：</p>\n<p>输入：s = \"rhythms\", k = 4<br>输出：0<br>解释：字符串 s 中不含任何元音字母。</p>\n<p>示例 5：</p>\n<p>输入：s = \"tryhard\", k = 4<br>输出：1</p>\n<h3><span id=\"%E6%80%9D%E8%B7%AF\">思路</span></h3><ol>\n<li>我们假定一个长度为k的窗口</li>\n<li>若窗口右端为i，则窗口左端为 <strong>i-k+1</strong>，如[2,3,4,5]长度为4，左端即5 - 4 + 1 = 2</li>\n<li>窗口向右滑动，若右边为元音字母，则统计数加1，若左边为元音字母，则统计数减1</li>\n<li>每次移动窗口更新最大值</li>\n<li>循环结束后，返回最大值，即为所求</li>\n</ol>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># @灵茶山艾府</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">maxVowels</span>(<span class=\"hljs-params\">self, s: <span class=\"hljs-built_in\">str</span>, k: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        ans = vowel = <span class=\"hljs-number\">0</span><br>        <span class=\"hljs-keyword\">for</span> i, c <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(s):  <span class=\"hljs-comment\"># 枚举窗口右端点 i</span><br>            <span class=\"hljs-comment\"># 1. 右端点进入窗口</span><br>            <span class=\"hljs-keyword\">if</span> c <span class=\"hljs-keyword\">in</span> <span class=\"hljs-string\">\"aeiou\"</span>:<br>                vowel += <span class=\"hljs-number\">1</span><br><br>            left = i - k + <span class=\"hljs-number\">1</span>  <span class=\"hljs-comment\"># 窗口左端点</span><br>            <span class=\"hljs-comment\"># 窗口大小不足 k，尚未形成第一个窗口</span><br>            <span class=\"hljs-keyword\">if</span> left &lt; <span class=\"hljs-number\">0</span>:  <br>                <span class=\"hljs-keyword\">continue</span><br><br>            <span class=\"hljs-comment\"># 2. 更新答案</span><br>            ans = <span class=\"hljs-built_in\">max</span>(ans, vowel)<br><br>            <span class=\"hljs-comment\"># 3. 左端点离开窗口，为下一个循环做准备</span><br>            <span class=\"hljs-keyword\">if</span> s[left] <span class=\"hljs-keyword\">in</span> <span class=\"hljs-string\">\"aeiou\"</span>:<br>                vowel -= <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">return</span> ans<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><p>时间复杂度：<strong>O(n)</strong> ，其中 n 为字符串的长度<br>空间复杂度：<strong>O(1)</strong></p>\n<h2><span id=\"%E5%8D%8A%E5%BE%84%E4%B8%BA-k-%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84%E5%B9%B3%E5%9D%87%E5%80%BC\">半径为 k 的子数组平均值</span></h2><h3><span id=\"%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0\">题目描述</span></h3><p>给你一个下标从 0 开始的数组 nums ，数组中有 n 个整数，另给你一个整数 k 。</p>\n<p>半径为 k 的子数组平均值 是指：nums 中一个以下标 i 为 中心 且 半径 为 k 的子数组中所有元素的平均值，即下标在 i - k 和 i + k 范围（含 i - k 和 i + k）内所有元素的平均值。如果在下标 i 前或后不足 k 个元素，那么 半径为 k 的子数组平均值 是 -1 。</p>\n<p>构建并返回一个长度为 n 的数组 avgs ，其中 avgs[i] 是以下标 i 为中心的子数组的 半径为 k 的子数组平均值 。</p>\n<p>x 个元素的 平均值 是 x 个元素相加之和除以 x ，此时使用截断式 整数除法 ，即需要去掉结果的小数部分。</p>\n<p>例如，四个元素 2、3、1 和 5 的平均值是 (2 + 3 + 1 + 5) / 4 = 11 / 4 = 2.75，截断后得到 2 。</p>\n<p>示例 1：<br><img src=\"/../assert/eg1.png\" alt=\"示例\"></p>\n<p>输入：nums = [7,4,3,9,1,8,5,2,6], k = 3<br>输出：[-1,-1,-1,5,4,4,-1,-1,-1]<br>解释：</p>\n<ul>\n<li>avg[0]、avg[1] 和 avg[2] 是 -1 ，因为在这几个下标前的元素数量都不足 k 个。</li>\n<li>中心为下标 3 且半径为 3 的子数组的元素总和是：7 + 4 + 3 + 9 + 1 + 8 + 5 = 37 。<br>使用截断式 整数除法，avg[3] = 37 / 7 = 5 。</li>\n<li>中心为下标 4 的子数组，avg[4] = (4 + 3 + 9 + 1 + 8 + 5 + 2) / 7 = 4 。</li>\n<li>中心为下标 5 的子数组，avg[5] = (3 + 9 + 1 + 8 + 5 + 2 + 6) / 7 = 4 。</li>\n<li>avg[6]、avg[7] 和 avg[8] 是 -1 ，因为在这几个下标后的元素数量都不足 k 个。</li>\n</ul>\n<p>示例 2：</p>\n<p>输入：nums = [100000], k = 0<br>输出：[100000]<br>解释：</p>\n<ul>\n<li>中心为下标 0 且半径 0 的子数组的元素总和是：100000 。<br>avg[0] = 100000 / 1 = 100000 。</li>\n</ul>\n<p>示例 3：</p>\n<p>输入：nums = [8], k = 100000<br>输出：[-1]<br>解释：</p>\n<ul>\n<li>avg[0] 是 -1 ，因为在下标 0 前后的元素数量均不足 k 。</li>\n</ul>\n<h3><span id=\"%E6%80%9D%E8%B7%AF\">思路</span></h3><ol>\n<li>与上一题类似，但窗口长度更改为2k+1</li>\n<li>假设窗口右端为i，则窗口左端变为 <strong>(i-2k-1)+1</strong> 即 <strong>i-2k</strong></li>\n<li>观察可得，中点位置为 <strong>i-k</strong> ，在中点位置即是需要算平均值的元素</li>\n<li>窗口向右移动，添加右侧，减去左侧，更新平均值</li>\n</ol>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">getAverages</span>(<span class=\"hljs-params\">self, nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], k: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]:<br><br>        avgs = [-<span class=\"hljs-number\">1</span>] * <span class=\"hljs-built_in\">len</span>(nums)<br><br>        s = <span class=\"hljs-number\">0</span>  <span class=\"hljs-comment\"># 维护窗口元素和</span><br><br>        <span class=\"hljs-keyword\">for</span> i, x <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(nums):<br><br>            <span class=\"hljs-comment\"># 1. 进入窗口</span><br><br>            s += x<br><br>            <span class=\"hljs-keyword\">if</span> i &lt; k * <span class=\"hljs-number\">2</span>:  <span class=\"hljs-comment\"># 窗口大小不足 2k+1</span><br><br>                <span class=\"hljs-keyword\">continue</span><br><br>            <span class=\"hljs-comment\"># 2. 记录答案</span><br><br>            avgs[i - k] = s // (k * <span class=\"hljs-number\">2</span> + <span class=\"hljs-number\">1</span>)<br><br>            <span class=\"hljs-comment\"># 3. 离开窗口</span><br><br>            s -= nums[i - k * <span class=\"hljs-number\">2</span>]<br><br>        <span class=\"hljs-keyword\">return</span> avgs<br><br><span class=\"hljs-comment\"># @灵茶山艾府</span><br></code></pre></td></tr></tbody></table></figure>\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><p>时间复杂度：<strong>O(n)</strong> ，其中 n 为数组的长度<br>空间复杂度：<strong>O(1)</strong> ，返回值不计入</p>\n</body></html>","excerpt":"","more":"<h1 id=\"定长滑窗问题\"><a href=\"#定长滑窗问题\" class=\"headerlink\" title=\"定长滑窗问题\"></a>定长滑窗问题</h1><h2 id=\"定长子串中元音的最大数目\"><a href=\"#定长子串中元音的最大数目\" class=\"headerlink\" title=\"定长子串中元音的最大数目\"></a>定长子串中元音的最大数目</h2><h3 id=\"题目描述\"><a href=\"#题目描述\" class=\"headerlink\" title=\"题目描述\"></a>题目描述</h3><p>给你字符串 s 和整数 k 。</p>\n<p>请返回字符串 s 中长度为 k 的单个子字符串中可能包含的最大元音字母数。</p>\n<p>英文中的 元音字母 为（a, e, i, o, u）。</p>\n<p>示例 1：</p>\n<p>输入：s &#x3D; &quot;abciiidef&quot;, k &#x3D; 3<br>输出：3<br>解释：子字符串 &quot;iii&quot; 包含 3 个元音字母。</p>\n<p>示例 2：</p>\n<p>输入：s &#x3D; &quot;aeiou&quot;, k &#x3D; 2<br>输出：2<br>解释：任意长度为 2 的子字符串都包含 2 个元音字母。</p>\n<p>示例 3：</p>\n<p>输入：s &#x3D; &quot;leetcode&quot;, k &#x3D; 3<br>输出：2<br>解释：&quot;lee&quot;、&quot;eet&quot; 和 &quot;ode&quot; 都包含 2 个元音字母。</p>\n<p>示例 4：</p>\n<p>输入：s &#x3D; &quot;rhythms&quot;, k &#x3D; 4<br>输出：0<br>解释：字符串 s 中不含任何元音字母。</p>\n<p>示例 5：</p>\n<p>输入：s &#x3D; &quot;tryhard&quot;, k &#x3D; 4<br>输出：1</p>\n<h3 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h3><ol>\n<li>我们假定一个长度为k的窗口</li>\n<li>若窗口右端为i，则窗口左端为 <strong>i-k+1</strong>，如[2,3,4,5]长度为4，左端即5 - 4 + 1 &#x3D; 2</li>\n<li>窗口向右滑动，若右边为元音字母，则统计数加1，若左边为元音字母，则统计数减1</li>\n<li>每次移动窗口更新最大值</li>\n<li>循环结束后，返回最大值，即为所求</li>\n</ol>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># @灵茶山艾府</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">maxVowels</span>(<span class=\"hljs-params\">self, s: <span class=\"hljs-built_in\">str</span>, k: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        ans = vowel = <span class=\"hljs-number\">0</span><br>        <span class=\"hljs-keyword\">for</span> i, c <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(s):  <span class=\"hljs-comment\"># 枚举窗口右端点 i</span><br>            <span class=\"hljs-comment\"># 1. 右端点进入窗口</span><br>            <span class=\"hljs-keyword\">if</span> c <span class=\"hljs-keyword\">in</span> <span class=\"hljs-string\">&quot;aeiou&quot;</span>:<br>                vowel += <span class=\"hljs-number\">1</span><br><br>            left = i - k + <span class=\"hljs-number\">1</span>  <span class=\"hljs-comment\"># 窗口左端点</span><br>            <span class=\"hljs-comment\"># 窗口大小不足 k，尚未形成第一个窗口</span><br>            <span class=\"hljs-keyword\">if</span> left &lt; <span class=\"hljs-number\">0</span>:  <br>                <span class=\"hljs-keyword\">continue</span><br><br>            <span class=\"hljs-comment\"># 2. 更新答案</span><br>            ans = <span class=\"hljs-built_in\">max</span>(ans, vowel)<br><br>            <span class=\"hljs-comment\"># 3. 左端点离开窗口，为下一个循环做准备</span><br>            <span class=\"hljs-keyword\">if</span> s[left] <span class=\"hljs-keyword\">in</span> <span class=\"hljs-string\">&quot;aeiou&quot;</span>:<br>                vowel -= <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">return</span> ans<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析\"><a href=\"#复杂度分析\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>时间复杂度：<strong>O(n)</strong> ，其中 n 为字符串的长度<br>空间复杂度：<strong>O(1)</strong></p>\n<h2 id=\"半径为-k-的子数组平均值\"><a href=\"#半径为-k-的子数组平均值\" class=\"headerlink\" title=\"半径为 k 的子数组平均值\"></a>半径为 k 的子数组平均值</h2><h3 id=\"题目描述-1\"><a href=\"#题目描述-1\" class=\"headerlink\" title=\"题目描述\"></a>题目描述</h3><p>给你一个下标从 0 开始的数组 nums ，数组中有 n 个整数，另给你一个整数 k 。</p>\n<p>半径为 k 的子数组平均值 是指：nums 中一个以下标 i 为 中心 且 半径 为 k 的子数组中所有元素的平均值，即下标在 i - k 和 i + k 范围（含 i - k 和 i + k）内所有元素的平均值。如果在下标 i 前或后不足 k 个元素，那么 半径为 k 的子数组平均值 是 -1 。</p>\n<p>构建并返回一个长度为 n 的数组 avgs ，其中 avgs[i] 是以下标 i 为中心的子数组的 半径为 k 的子数组平均值 。</p>\n<p>x 个元素的 平均值 是 x 个元素相加之和除以 x ，此时使用截断式 整数除法 ，即需要去掉结果的小数部分。</p>\n<p>例如，四个元素 2、3、1 和 5 的平均值是 (2 + 3 + 1 + 5) &#x2F; 4 &#x3D; 11 &#x2F; 4 &#x3D; 2.75，截断后得到 2 。</p>\n<p>示例 1：<br><img src=\"/../assert/eg1.png\" alt=\"示例\"></p>\n<p>输入：nums &#x3D; [7,4,3,9,1,8,5,2,6], k &#x3D; 3<br>输出：[-1,-1,-1,5,4,4,-1,-1,-1]<br>解释：</p>\n<ul>\n<li>avg[0]、avg[1] 和 avg[2] 是 -1 ，因为在这几个下标前的元素数量都不足 k 个。</li>\n<li>中心为下标 3 且半径为 3 的子数组的元素总和是：7 + 4 + 3 + 9 + 1 + 8 + 5 &#x3D; 37 。<br>使用截断式 整数除法，avg[3] &#x3D; 37 &#x2F; 7 &#x3D; 5 。</li>\n<li>中心为下标 4 的子数组，avg[4] &#x3D; (4 + 3 + 9 + 1 + 8 + 5 + 2) &#x2F; 7 &#x3D; 4 。</li>\n<li>中心为下标 5 的子数组，avg[5] &#x3D; (3 + 9 + 1 + 8 + 5 + 2 + 6) &#x2F; 7 &#x3D; 4 。</li>\n<li>avg[6]、avg[7] 和 avg[8] 是 -1 ，因为在这几个下标后的元素数量都不足 k 个。</li>\n</ul>\n<p>示例 2：</p>\n<p>输入：nums &#x3D; [100000], k &#x3D; 0<br>输出：[100000]<br>解释：</p>\n<ul>\n<li>中心为下标 0 且半径 0 的子数组的元素总和是：100000 。<br>avg[0] &#x3D; 100000 &#x2F; 1 &#x3D; 100000 。</li>\n</ul>\n<p>示例 3：</p>\n<p>输入：nums &#x3D; [8], k &#x3D; 100000<br>输出：[-1]<br>解释：</p>\n<ul>\n<li>avg[0] 是 -1 ，因为在下标 0 前后的元素数量均不足 k 。</li>\n</ul>\n<h3 id=\"思路-1\"><a href=\"#思路-1\" class=\"headerlink\" title=\"思路\"></a>思路</h3><ol>\n<li>与上一题类似，但窗口长度更改为2k+1</li>\n<li>假设窗口右端为i，则窗口左端变为 <strong>(i-2k-1)+1</strong> 即 <strong>i-2k</strong></li>\n<li>观察可得，中点位置为 <strong>i-k</strong> ，在中点位置即是需要算平均值的元素</li>\n<li>窗口向右移动，添加右侧，减去左侧，更新平均值</li>\n</ol>\n<h3 id=\"代码实现-1\"><a href=\"#代码实现-1\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br><br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">getAverages</span>(<span class=\"hljs-params\">self, nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], k: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]:<br><br>        avgs = [-<span class=\"hljs-number\">1</span>] * <span class=\"hljs-built_in\">len</span>(nums)<br><br>        s = <span class=\"hljs-number\">0</span>  <span class=\"hljs-comment\"># 维护窗口元素和</span><br><br>        <span class=\"hljs-keyword\">for</span> i, x <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(nums):<br><br>            <span class=\"hljs-comment\"># 1. 进入窗口</span><br><br>            s += x<br><br>            <span class=\"hljs-keyword\">if</span> i &lt; k * <span class=\"hljs-number\">2</span>:  <span class=\"hljs-comment\"># 窗口大小不足 2k+1</span><br><br>                <span class=\"hljs-keyword\">continue</span><br><br>            <span class=\"hljs-comment\"># 2. 记录答案</span><br><br>            avgs[i - k] = s // (k * <span class=\"hljs-number\">2</span> + <span class=\"hljs-number\">1</span>)<br><br>            <span class=\"hljs-comment\"># 3. 离开窗口</span><br><br>            s -= nums[i - k * <span class=\"hljs-number\">2</span>]<br><br>        <span class=\"hljs-keyword\">return</span> avgs<br><br><span class=\"hljs-comment\"># @灵茶山艾府</span><br></code></pre></td></tr></table></figure>\n<h3 id=\"复杂度分析-1\"><a href=\"#复杂度分析-1\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>时间复杂度：<strong>O(n)</strong> ，其中 n 为数组的长度<br>空间复杂度：<strong>O(1)</strong> ，返回值不计入</p>\n"},{"title":"机器学习笔记","date":"2025-10-22T05:43:50.241Z","_content":"  \n  \n  \n  \n  \n  \n  \n  \n# 机器学习\n  \n## 目录\n- [机器学习](#机器学习)\n  - [目录](#目录)\n  - [线性回归](#线性回归)\n    - [一元线性回归](#一元线性回归)\n      - [算法思想](#算法思想)\n      - [评价指标](#评价指标)\n      - [python中的实现](#python中的实现)\n      - [输出结果解读](#输出结果解读)\n    - [多项式回归](#多项式回归)\n      - [算法思想](#算法思想-1)\n      - [代码实现](#代码实现)\n    - [多元线性回归](#多元线性回归)\n      - [算法思想](#算法思想-2)\n      - [模型选择](#模型选择)\n      - [代码实现](#代码实现-1)\n  - [逻辑回归](#逻辑回归)\n    - [算法思想](#算法思想-3)\n    - [代码实现](#代码实现-2)\n  \n  \n  \n## 线性回归\n  \n[返回目录](#目录 )\n  \n### 一元线性回归\n  \n#### 算法思想\n1. 找到一条曲线 **y = wx + b** ，使得能够根据自变量x 尽可能准确地预测因变量y\n2. 模型最优解为\n<br>\n<p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?(w^*,%20b^*)%20=%20arg\\min_{i=0}^m%20(y_i%20-%20\\hat{y}_i)^2\"/></p>  \n  \n即调整w和b使得预测误差平方和最小\n  \n#### 评价指标\n1. 均方误差：误差越小，模型预测效果越好\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?MSE%20=%20\\frac{1}{m}%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2\"/></p>  \n  \n2. 均方根误差：误差越小，模型预测效果越好\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?RMSE%20=%20\\sqrt{MSE}%20=%20\\sqrt{\\frac{1}{m}%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2}\"/></p>  \n  \n3. 回归平方和：衡量​​回归模型“解释”的因变量变异程度​​（即模型通过自变量预测后，预测值与均值的差异）\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SSR%20=%20\\sum_{i=1}^m%20(\\hat{y_i}%20-%20\\bar{y})^2\"/></p>  \n  \n4. 残差平方和：衡量​​回归模型“未解释”的因变量变异程度​​（即预测值与实际值的误差）\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SSE%20=%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2\"/></p>  \n  \n5. 总平方和：衡量​​因变量 y自身的总变异程度​​（即数据自然波动的大小）\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SST%20=%20\\sum_{i=1}^m%20(y_i%20-%20\\bar{y})^2%20=%20SSE%20+%20SSR\"/></p>  \n  \n6. 决定系数R^2^: 衡量​​回归模型对因变量变异的解释比例​​（取值范围 [0,1]）\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?R^2%20=%20\\frac{SSR}{SST}%20=%201%20-%20\\frac{SSE}{SST}\"/></p>  \n  \n实际中，R2越接近1，说明模型解释的变异越多，拟合效果越好\n<br>\n  \n7. 调整后的决定系数R^2^~d~：在 R2基础上，​​惩罚“无意义的自变量加入”​​，更适合比较不同复杂度的模型\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?R^2_d%20=%201%20-%20\\frac{m-1}{m-d-1}%20\\cdot%20\\frac{SSE}{SST}\"/></p>  \n  \n其中，m为样本量，d为自变量个数，本质是对自由度的惩罚\n  \n#### python中的实现\n\n[回到目录](#目录)\n\n1. 引入pandas模块，读取数据\n  \n~~~python\nimport pandas as pd\ndataframe = pd.read_csv('data.csv')\n~~~\n  \n| 方法 | 描述 | 参数说明 | 返回值 |\n| --- | --- | --- | --- |\n|`pandas.read_csv(filename)` | 读取csv文件 | 文件名或文件路径 | DataFrame |\n|`dataframe.iloc[行索引器，列索引器]` | 获取行和列 | 行索引器(切片)：表示为 `start:stop` 即行的选择范围，当都为空时，默认选择所有行 <br> 列索引器(切片)：表示为 `start:stop` 即列的选择范围，当都为空时，默认选择所有列 | DataFrame |\n|`dataframe.loc[行索引器，列索引器]`|获取行和列 | 行索引器(切片)：表示为 `start:stop` 即行的选择范围，当都为空时，默认选择所有行 <br> 列索引器(切片)：表示为 `start:stop` 即列的选择范围，当都为空时，默认选择所有列 | DataFrame |\n  \n2. 引入matplotlib模块，绘制图像，其中散点图为pyplot模块中的scatter()方法\n  \n~~~python\nimport matplotlib.pyplot as plt\n# 绘制散点图\nplt.scatter(dataframe['x'], dataframe['y'], color='red')\n# 显示图像\nplt.show()\n~~~\n  \n| 方法 | 描述 | 参数说明 | 返回值 |\n| --- | --- | --- | --- |\n|`matplotlib.pyplot.scatter()` | 绘制数据点 | x: 数据点的横坐标列表<br> y: 数据点的纵坐标列表<br> s: 数据点的大小列表<br> c: 数据点的颜色列表<br> marker: 数据点的标记列表<br> cmap: 颜色映射对象<br> norm: 颜色映射对象<br> vmin: 颜色映射对象<br> vmax: 颜色映射对象<br> alpha: 数据点的透明度列表<br> linewidths: 数据点的线宽列表<br> verts: 数据点的标记列表<br> edgecolors: 数据点的边框颜色列表<br> plotnon | 无 |\n|`matplotlib.pyplot.show()`|显示图|无|无|\n|`matplotlib.pyplot.figure()`|创建一个新图|无|无|\n  \n3. 引入statsmodels模块，增加截距项，进行数据预处理\n  \n~~~python\nimport statsmodels.api as sm\n# 增加截距项，即在原数据最右侧新增一列全为1的列'const'\ndf_const = sm.add_constant(dataframe)\n# 将数据集X和y分别提取出来\nX = df_const.iloc[:, :-1] # 选取除了截距项的所有列作为自变量矩阵\ny = df_const['y'] # 提取因变量列作为因变量向量\n~~~\n  \n|方法|描述|参数说明|返回值|\n|---|---|---|---|\n|`statsmodels.api.add_constant(dataframe)`|增加截距项，即在原数据最右侧新增一列全为1的列'const'|dataframe|增加截距项后的数据集dataframe|\n|`statsmodels.api.OLS(y, X)`|建立OLS模型|y: 因变量向量<br>X: 自变量矩阵|OLS模型对象|\n|`statsmodels.api.qqplot()`|绘制QQ图|data（必选参数）:待检验的样本数据（一维数据）<br> dist（可选参数）:检验分布，默认为正态分布 <br>line（可选参数）: 绘制的参考线，默认为45度线 's'：绘制标准化分位数的参考线（适用于非标准分布）'r--'：自定义直线样式（如红色虚线）<br> ax（可选参数）: 绘图对象 <br>kwargs（可选参数）:绘图参数|无|\n|`statsmodels.api.graphics.plot_regress_exog()`|绘制自变量和因变量的回归图|model: OLS模型对象<br>exog_idx: 自变量索引<br>fig（可选参数）: 绘图对象<br>ax（可选参数）: 绘图对象<br>kwargs（可选参数）:绘图参数|无|\n|`model.fit()`|训练模型|无|无|\n|`model.predict(X)`|预测|X: 自变量矩阵|预测结果向量|\n|`model.summary()`|查看模型报告|无|无|\n  \n4. 建立OLS模型，并训练模型，得到训练结果\n  \n~~~python\n# 建立OLS模型，并训练模型\nmodel = sm.OLS(y, X).fit()\n# 预测\ny_pred = model.predict(X)\n# 查看模型报告\nmodel.summary()\n~~~\nOLS即普通最小二乘法，即最小化残差平方和\n实现步骤：\n* RSS\n![RSS](../assert/machine_learining/1.png )\n* 对所有的参数β求偏导\n![偏导](../assert/machine_learining/2.png )\n* 令导数等于0，联立公式求解，得到所有的参数β\n![联立](../assert/machine_learining/3.png )\n* 解方程组，得到参数β\n![求解](../assert/machine_learining/4.png )\n  \n5. 绘制QQ图\n~~~python\n# 绘制QQ图，用于检验残差是否服从正态分布\nsm.qqplot(model.resid, line='r')\nplt.show()\n~~~\n* 理想情况（完全拟合）\n  \n数据点​​严格沿参考线（如45°线）分布​​，说明样本分位数与理论分位数几乎一致，数据完全服从理论分布。\n* 轻微偏离（可接受）\n  \n数据点整体沿参考线分布，但存在​​局部小幅偏离​​（如在尾部或中间位置有少量点偏离），可能是随机误差导致，通常认为数据近似服从理论分布。\n* 显著偏离（不拟合）\n  \n数据点明显偏离参考线，呈现以下模式时，提示数据与理论分布存在显著差异：\n  \n* 尾部偏离​​：数据点在两端（低分位数或高分位数）偏离参考线（如右偏数据的右尾上翘），说明数据存在厚尾或偏态；\n* ​整体偏移​​：数据点整体平行于参考线但不重合（如整体高于或低于参考线），说明数据分布的位置参数（如均值）与理论分布不同；\n* ​曲线偏离​​：数据点呈曲线形态偏离参考线，说明数据分布的形状参数（如方差、峰度）与理论分布不同。\n  \n6. 残差分析\n~~~python\n# 残差分析\nfig = plt.figure(figsize=(12, 8))\n# 绘制残差图\nfig = sm.graphics.plot_regress_exog(model, 'x', fig=fig)\n~~~\n\n#### 输出结果解读\n\n[回到目录](#目录)\n\n| 参数 | 描述 |\n| --- | --- |\n| Prob (F-statistic) | 模型F统计量的p值，用于判断整个回归模型是否显著。值越小（通常小于0.05），说明模型整体越显著，即至少有一个自变量对因变量有显著影响 |\n| R-squared | 决定系数，表示模型能够解释的因变量总变异的比例。值越接近1，说明模型拟合效果越好 |\n| Adj. R-squared | 调整后的决定系数，在R-squared基础上考虑了自变量个数的影响，惩罚了无意义的变量加入。值越接近1，模型越好，更适合用于比较不同复杂度的模型 |\n| Skew | 残差分布的偏度，衡量残差分布的对称性。值越接近0，说明残差分布越对称，越接近正态分布。正值表示右偏，负值表示左偏。 |\n| Kurtosis | 残差分布的峰度，衡量残差分布的尖锐程度。值越接近3（正态分布的峰度），说明残差分布越接近正态分布。大于3表示分布更尖锐，小于3表示分布更平坦 |\n| P > \\|t\\| | 每个回归系数的t检验p值，用于判断单个自变量是否对因变量有显著影响。值越小（通常小于0.05），说明该自变量对因变量的影响越显著 |\n| coef | 回归系数，表示自变量对因变量的影响程度和方向。系数的绝对值越大，影响越强；系数为正表示正相关，为负表示负相关。 |\n\n### 多项式回归\n\n[回到目录](#目录)\n\n#### 算法思想\n若有一条抛物线隐藏在数据集中，那么在模型中引入二次项或许会得到更好的拟合效果\n\n#### 代码实现\n在[第三步](#python中的实现)增加截距项那一步改进代码\n~~~python\nimport statsmodels.api as sm\n# 增加二次项\ndf_const = sm.add_constant(dataframe)\ndf_const['x_2'] = df_const['x'] ** 2\n# 将数据集X和y分别提取出来 \nX = df_const.loc[:, df_const.columns != 'y'] #自变量\ny = df_const.loc[:, df_const.columns == 'y'] #因变量\n~~~\n\n### 多元线性回归\n\n\n#### 算法思想\n对于p值小于0.05的变量，我们可以认为它对于因变量具有显著影响，但我们无法排除其他因变量也有预测能力的可能，因此需考虑多个变量的组合对因变量的贡献。\n\n#### 模型选择\n* AIC(Akaike Information Criterion,赤池信息准则)\n    * 定义: AIC是一种模型选择准则，用于在多个候选模型中选择最优模型\n    * 计算公式: AIC = 2k - 2ln(L) 其中k是模型参数个数，L是模型的最大似然值\n    * 特点:AIC在模型拟合度和复杂度之间寻求平衡值越小表示模型越好，相比于只考虑拟合优度的指标，AIC引入了对模型复杂度的惩罚项\n* BIC(Bayesian Information Criterion,贝叶斯信息准则)\n    * 定义: BIC是另一种模型选择准则，基于贝叶斯理论\n    * 计算公式: BIC = k×ln(n) - 2ln(L)其中k是模型参数个数，n是样本量，L是模型的最大似然值\n    * 特点:BIC对模型复杂度的惩罚比AIC更严格，当样本量较大时，BIC倾向于选择更简单的模型，值越小表示模型越好\n* 区别\n    * 惩罚程度: BIC对复杂模型的惩罚更重，特别是当样本量较大时\n    * 理论基础: AIC基于信息论，BIC基于贝叶斯理论\n    * 模型选择倾向: AIC可能选择较复杂的模型，BIC倾向于选择较简单的模型\n    * 一致性: BIC具有一致性，当样本量趋于无穷时能选出真实模型；AIC则不具备此性质\n#### 代码实现\n\n* 引入多元线性回归api\n~~~python\nfrom statsmodels.formula.api import ols\n~~~\n* 构建模型\n~~~python\nmodel = ols('y ~ x1 + x2 + x3 + ...', data=dataframe).fit()\n~~~\n* 模型输出\n~~~python\nmodel.summary()\n~~~\n* 注意事项：不同于前两种线性回归，多元线性回归无需在数据集中添加截距项\n* 交互项语法\n~~~python\n# 完整写法\nmodel = ols('y ~ x1 + x2 + x3 + x1:x2 + x1:x3 + x2:x3 + x1:x2:x3', data=dataframe).fit()\n# 等价简写形式\nmodel = ols('y ~ x1 * x2 * x3', data=dataframe).fit()\n~~~\n* 多重共线性可以根据相关系数矩阵和方差膨胀因子(VIF)判断\n~~~python\n# 相关系数矩阵\n\"\"\"corr()\n- args:\n  method: 计算方式\n    - 'pearson':皮尔逊相关系数(默认)\n    - 'kendall':肯德尔相关系数\n    - 'spearman':斯皮尔曼相关系数\n  min_periods: 最小样本数，默认为5\n- return:\n  返回一个DataFrame对象，包含相关系数矩阵\n    相关系数值范围为[-1, 1]\n      1: 完全正相关\n      0: 无线性相关\n      -1: 完全负相关\n\"\"\"\ncorr = dataframe.corr()\n# 方差膨胀因子\nimport statsmodels.stats.outliers_influence as oi\n\"\"\"variance_inflation_factor()\n- args:\n  exog: 输入矩阵\n  exog_idx: 输入矩阵的列索引\n- tips:\n  一般来说，VIF大于4，即认为存在多重共线性。\n\"\"\"\nvif = oi.variance_inflation_factor()\n~~~\n\n## 逻辑回归\n[回到目录](#目录)\n逻辑回归是一种二元分类模型，用于判断一个样本属于某一类别的概率。\n\n### 算法思想\n通过找到一条直线能够尽可能将不同类别分开\n* 线性回归预测函数\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?y = w^T x + b\"/></p><br> \n\n* 期望的逻辑回归预测函数 即y取值为1的概率\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?prob(y = 1) = w^T x + b\"/></p> <br>\n\n* 这个式子存在等式左侧值域为[0, 1] 而等式右侧的值域为(-∞, ∞)\n* 为了解决这个问题，我们可以将等式右侧的值域映射到[0, 1]，即**Sigmoid**函数\n  \n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\sigma(t) = \\frac{1}{1 + e^{-t}}\"/></p> <br>\n\n  或者，可以将等式左侧值域映射到(-∞, ∞)，即**Logit**函数\n  \n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?odds = \\frac{p}{1 - p}\"/></p> <br>\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?log(odds)\"/></p> <br>\n\n* 引入代价函数来量化预测值和真实值的差距，其中h(x)为预测值，y为真实值\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\text{Cost }(h(x),y) = \\begin{cases} -\\log(h(x)) & \\text{if } y = 1 \\\\ -\\log(1 - h(x)) & \\text{if } y = 0 \\end{cases}\"/></p> <br>\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?Cost(h(x), y)= -ylog(h(x)) - (1 - y)log(1 - h(x))\"/></p> <br>\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\begin{align}J(w) &= \\frac{1}{m} \\sum_{i=1}^{m} \\text{Cost}(h_w(x_i), y_i) \\\\ &= -\\frac{1}{m} \\left[ \\sum_{i=1}^{m} y_i \\log h_w(x_i) + (1 - y_i) \\log(1 - h_w(x_i)) \\right] \\end{align}\"/></p> <br>\n\n* 拟合参数\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\min_{w} J(w)\"/></p> <br>\n\n* 梯度下降法，不断重复以下步骤\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?w_{j}:=w_{j}-\\alpha\\frac{\\partial J(w)}{\\partial w_{j}}\"/></p> <br>\n\n  **w_j**：表示第 j 个模型参数（权重）\n  **α**：学习率（Learning Rate），控制每次更新的步长\n  **∂J(w)/∂w_j**：损失函数 J(w) 对参数 w_j 的偏导数，表示在当前点处损失函数的变化率\n\n  当梯度下降法收敛时，损失函数 J(w) 的值会最小化，即 J(w) 的导数等于 0\n  <br>\n\n* 预测新样本\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?h_w(x) = \\frac{1}{1 + e^{-w^Tx}}\"/></p>\n\n### 代码实现\n1. 读取数据\n  [banding_partial.csv数据集](../dataset/banking_partial.csv)\n  ~~~python\n  import pandas as pd\n\n  # 1. 读取数据\n  print(\"------读取数据------\")\n  data = pd.read_csv(\"./banking_partial.csv\", header=0)  # header=0表示第一行是列名\n  data.dropna()  # dropna() 方法删除数据中的空值\n  print(data.shape)  # 查看数据集的行数和列数 返回(行数,列数)\n  ~~~\n  \n2. 描述性分析与可视化分析\n~~~python\n# 2. 描述性分析与可视化分析\nprint(\"------描述性分析------\")\nprint(data.sample(5)) # 查看数据集的前5行\nprint(\"------数据基本信息------\")\nprint(data.info()) # 查看每个列的数据类型和缺失值个数\n\nprint(\"------数据可视化------\")\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\"\"\"figure() 方法设置绘图窗口\n- args: \n    figsize: 绘图窗口的尺寸，参数为宽和高，单位为英寸\n\"\"\"\nplt.figure(figsize=(32, 10)) # figure() 方法设置绘图窗口，并设置绘图窗口的尺寸，参数为宽和高，单位为英寸\n\"\"\"subplot() 方法创建子图，参数为行数，列数，子图编号\n- args: \n    nrows: 行数\n    ncols: 列数\n    index: 子图编号\n\"\"\"\nplt.subplot(241) # 创建子图 241\n\"\"\"countplot() 绘制分类变量的频数统计图\n- args: \n    data: DataFrame 数据集\n    x: 指定在 x 轴上显示的分类变量\n    y: 指定在 y 轴上显示的分类变量（可选，与 x 互斥）\n    hue: 分组变量，用不同颜色区分子组\n    palette: 调色板，控制颜色方案\n    order: 指定类别显示顺序\n\"\"\"\nsns.countplot(x = 'y', data = data, hue='y', palette='hls') # 绘制分类变量的频数统计图\n\nplt.subplot(242) # 创建子图 242\nsns.countplot(x = 'job', data = data)\n\nplt.subplot(243)\nsns.countplot(x = 'marital', data=data)\n\nplt.subplot(244)\nsns.countplot(x='default', data=data)\n\nplt.subplot(245)\nsns.countplot(x='housing', data=data)\n\nplt.subplot(246)\nsns.countplot(x='loan', data=data)\n\nplt.subplot(247)\nsns.countplot(x='poutcome', data=data)\n~~~\n3. 数据预处理\n  1. 注意将离散变量拆分成单独的特征，即转化为哑变量\n    ~~~python\n    # 3. 数据预处理\n    print(\"------数据预处理------\")\n    ## 1. 离散变量转换为哑变量\n    \"\"\"get_dummies() 方法将分类变量转换为哑变量\n    - args: \n        data: DataFrame 数据集\n        columns: 指定需要转换的列\n    \"\"\"\n    data_dummies = pd.get_dummies(data, columns=['job', 'marital', 'default',  'housing', 'loan',  'poutcome'])\n    print(data_dummies.columns) # 查看哑变量的列名\n\n    ## 2. 查看哑变量结构\n    \"\"\"sample() 方法从数据集随机抽取指定数量的样本\n    - args: \n        n: 指定要抽取的样本数量\n        random_state: 指定随机数种子，保证每次运行结果一致\n    \"\"\"\n    print(\"-----查看哑变量结构------\")\n    print(data_dummies[['loan_no','loan_unknown','loan_yes']].sample(5, random_state=42))\n    ~~~\n  2. 划分自变量和因变量\n  3. 划分训练集与测试集\n    ~~~python\n    ## 3. 划分自变量和因变量\n    X = data_dummies.iloc[: , 1: ] # 自变量，第二列到最后列\n    y = data_dummies.iloc[: , 1] # 因变量，第一列\n    ## 4. 划分训练集和测试集\n    from sklearn.model_selection import train_test_split as tts\n    \"\"\"train_test_split() 方法划分训练集和测试集\n    - args: \n        *arrays: 要分割的数据数组（通常是特征矩阵 X 和目标变量 y）\n        test_size: 测试集所占比例（0-1之间）或样本数量\n        train_size: 训练集所占比例（0-1之间）或样本数量\n        random_state: 随机种子，确保结果可重现\n        shuffle: 是否在分割前打乱数据（默认为 True）\n        stratify: 分层抽样，保持各类别在训练集和测试集中的比例一致\n    - return: \n        X_train: 训练集特征数据\n        X_test: 测试集特征数据\n        y_train: 训练集目标变量\n        y_test: 测试集目标变量\n    \"\"\"\n    X_tr, X_ts, y_tr, y_ts = tts(X, y, test_size=0.2) # X_tr为训练集自变量，X_ts为测试集自变量， y_tr为训练集因变量，y_ts为测试集因变量\n    print(\"------查看训练集和测试集的维度------\")\n    print(f\"训练集的维度：{X_tr.shape}，{y_tr.shape}\")\n    ~~~\n4. 建立模型\n  ~~~python\n  # 4. 建立模型\n  print(\"------建立模型------\")\n  from sklearn.linear_model import LogisticRegression\n  \"\"\"LogisticRegression() 方法创建逻辑回归模型\n  逻辑回归模型：\n      - 使用线性回归模型计算输入特征的线性组合：\n          y = w0 + w1*x1 + w2*x2 + ... + wn*xn\n      - 将线性组合结果通过Sigmoid函数（逻辑函数）转换为概率值：\n          y = 1 / (1 + e^(-y))\n      - 根据概率阈值（通常为0.5）进行分类决策\n      \n      y = 预测结果\n      w0, w1, w2, ..., wn = 模型参数\n      x1, x2, ..., xn = 特征变量\n      e = 2.71828\n      e^(-y) = 1 / (1 + e^())\n\n  \"\"\"\n  model = LogisticRegression()\n  \"\"\"fit() 方法训练模型\n  - args: \n      X: 特征矩阵\n      y: 目标变量\n  \"\"\"\n  model.fit(X_tr, y_tr)\n  ~~~\n5. 模型评估\n~~~python\n# 5. 模型评估\n\"\"\"predict() 方法对测试集进行预测\n- args: \n    X: 测试集特征数据\n- return: \n    y_pred: 预测结果\n\"\"\"\n\n## 1. 预测并统计结果\ny_pred = model.predict(X_ts)\nprint(\"------模型评估------\")\n\"\"\"value_counts() 方法统计变量的频数\n- return: \n    Series: 统计结果\n\"\"\"\nprint(pd.DataFrame(y_pred)[0].value_counts()) # 统计预测结果\n\n## 2. 查看混淆矩阵\nfrom sklearn.metrics import confusion_matrix\n\"\"\"confusion_matrix() 方法计算混淆矩阵\n- args: \n    y_true: 真实标签\n    y_pred: 预测标签\n- return: \n    array: 混淆矩阵\n\"\"\"\nprint(\"------查看混淆矩阵------\")\nprint(\"真负|假正\")\nprint(\"---------\")\nprint(\"假负|真正\")\nprint(confusion_matrix(y_ts, y_pred)) # 混淆矩阵\n\n## 3. 查看混淆矩阵相关评分\nfrom sklearn.metrics import classification_report\nprint(\"------查看混淆矩阵相关评分------\")\n\"\"\"classification_report() 方法查看混淆矩阵相关评分\n- args: \n    y_true: 真实标签\n    y_pred: 预测标签\n- return: \n    str: 评分结果\n- tip:\n    - precision: 精确度，预测为正的样本中，有多少是真正的正样本 Precision = TP / (TP + FP)\n    - recall: 召回率，有多少是真正的正样本被预测为正样本 Recall = TP / (TP + FN)\n    - f1-score: F1分数，取精确度和召回率的调和平均值\n    - support: 支持度，样本中正样本的个数\n    \n    - accuracy: 准确率，预测正确的样本个数占所有样本的百分比\n    - macro avg: 宏平均，对每个类别的评分求平均（Precision, Recall, F1-score）\n    - weighted avg: 微平均，对每个类别的评分求平均，并乘以支持度求和\n\"\"\"\nprint(classification_report(y_ts, y_pred))\n~~~\n6. 5折交叉验证\n~~~python\n## 4. 查看k折交叉验证计算准确率\n\"\"\"k折交叉验证：\n将数据集划分为K个大小相似的子集，\n轮流使用其中K-1个子集作为训练集，\n剩余1个子集作为验证集，\n重复K次训练和验证过程。\n\"\"\"\nfrom sklearn.model_selection import cross_val_score\n\"\"\"cross_val_score() 方法计算k折交叉验证的准确率\n\n- args: \n    estimator: 模型\n    X: 特征矩阵\n    y: 目标变量\n    cv: 交叉验证折数，通常为5或10\n    scoring: 评分标准\n- return: \n    array: 评分结果\n\"\"\"\nscores = cross_val_score(model, X, y, cv=10, scoring='accuracy')\n\"\"\"mean() 方法计算平均值\n\n- return: \n    float: 平均值\n\"\"\"\nprint(\"------查看k折交叉验证计算准确率------\")\nprint(scores.mean())\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/machine_learning_.md","raw":"---\ntitle: 机器学习笔记\ndate: null\ntags:\n  - 算法\n  - Python\n---  \n  \n  \n  \n  \n  \n  \n  \n# 机器学习\n  \n## 目录\n- [机器学习](#机器学习)\n  - [目录](#目录)\n  - [线性回归](#线性回归)\n    - [一元线性回归](#一元线性回归)\n      - [算法思想](#算法思想)\n      - [评价指标](#评价指标)\n      - [python中的实现](#python中的实现)\n      - [输出结果解读](#输出结果解读)\n    - [多项式回归](#多项式回归)\n      - [算法思想](#算法思想-1)\n      - [代码实现](#代码实现)\n    - [多元线性回归](#多元线性回归)\n      - [算法思想](#算法思想-2)\n      - [模型选择](#模型选择)\n      - [代码实现](#代码实现-1)\n  - [逻辑回归](#逻辑回归)\n    - [算法思想](#算法思想-3)\n    - [代码实现](#代码实现-2)\n  \n  \n  \n## 线性回归\n  \n[返回目录](#目录 )\n  \n### 一元线性回归\n  \n#### 算法思想\n1. 找到一条曲线 **y = wx + b** ，使得能够根据自变量x 尽可能准确地预测因变量y\n2. 模型最优解为\n<br>\n<p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?(w^*,%20b^*)%20=%20arg\\min_{i=0}^m%20(y_i%20-%20\\hat{y}_i)^2\"/></p>  \n  \n即调整w和b使得预测误差平方和最小\n  \n#### 评价指标\n1. 均方误差：误差越小，模型预测效果越好\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?MSE%20=%20\\frac{1}{m}%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2\"/></p>  \n  \n2. 均方根误差：误差越小，模型预测效果越好\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?RMSE%20=%20\\sqrt{MSE}%20=%20\\sqrt{\\frac{1}{m}%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2}\"/></p>  \n  \n3. 回归平方和：衡量​​回归模型“解释”的因变量变异程度​​（即模型通过自变量预测后，预测值与均值的差异）\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SSR%20=%20\\sum_{i=1}^m%20(\\hat{y_i}%20-%20\\bar{y})^2\"/></p>  \n  \n4. 残差平方和：衡量​​回归模型“未解释”的因变量变异程度​​（即预测值与实际值的误差）\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SSE%20=%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2\"/></p>  \n  \n5. 总平方和：衡量​​因变量 y自身的总变异程度​​（即数据自然波动的大小）\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SST%20=%20\\sum_{i=1}^m%20(y_i%20-%20\\bar{y})^2%20=%20SSE%20+%20SSR\"/></p>  \n  \n6. 决定系数R^2^: 衡量​​回归模型对因变量变异的解释比例​​（取值范围 [0,1]）\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?R^2%20=%20\\frac{SSR}{SST}%20=%201%20-%20\\frac{SSE}{SST}\"/></p>  \n  \n实际中，R2越接近1，说明模型解释的变异越多，拟合效果越好\n<br>\n  \n7. 调整后的决定系数R^2^~d~：在 R2基础上，​​惩罚“无意义的自变量加入”​​，更适合比较不同复杂度的模型\n<br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?R^2_d%20=%201%20-%20\\frac{m-1}{m-d-1}%20\\cdot%20\\frac{SSE}{SST}\"/></p>  \n  \n其中，m为样本量，d为自变量个数，本质是对自由度的惩罚\n  \n#### python中的实现\n\n[回到目录](#目录)\n\n1. 引入pandas模块，读取数据\n  \n~~~python\nimport pandas as pd\ndataframe = pd.read_csv('data.csv')\n~~~\n  \n| 方法 | 描述 | 参数说明 | 返回值 |\n| --- | --- | --- | --- |\n|`pandas.read_csv(filename)` | 读取csv文件 | 文件名或文件路径 | DataFrame |\n|`dataframe.iloc[行索引器，列索引器]` | 获取行和列 | 行索引器(切片)：表示为 `start:stop` 即行的选择范围，当都为空时，默认选择所有行 <br> 列索引器(切片)：表示为 `start:stop` 即列的选择范围，当都为空时，默认选择所有列 | DataFrame |\n|`dataframe.loc[行索引器，列索引器]`|获取行和列 | 行索引器(切片)：表示为 `start:stop` 即行的选择范围，当都为空时，默认选择所有行 <br> 列索引器(切片)：表示为 `start:stop` 即列的选择范围，当都为空时，默认选择所有列 | DataFrame |\n  \n2. 引入matplotlib模块，绘制图像，其中散点图为pyplot模块中的scatter()方法\n  \n~~~python\nimport matplotlib.pyplot as plt\n# 绘制散点图\nplt.scatter(dataframe['x'], dataframe['y'], color='red')\n# 显示图像\nplt.show()\n~~~\n  \n| 方法 | 描述 | 参数说明 | 返回值 |\n| --- | --- | --- | --- |\n|`matplotlib.pyplot.scatter()` | 绘制数据点 | x: 数据点的横坐标列表<br> y: 数据点的纵坐标列表<br> s: 数据点的大小列表<br> c: 数据点的颜色列表<br> marker: 数据点的标记列表<br> cmap: 颜色映射对象<br> norm: 颜色映射对象<br> vmin: 颜色映射对象<br> vmax: 颜色映射对象<br> alpha: 数据点的透明度列表<br> linewidths: 数据点的线宽列表<br> verts: 数据点的标记列表<br> edgecolors: 数据点的边框颜色列表<br> plotnon | 无 |\n|`matplotlib.pyplot.show()`|显示图|无|无|\n|`matplotlib.pyplot.figure()`|创建一个新图|无|无|\n  \n3. 引入statsmodels模块，增加截距项，进行数据预处理\n  \n~~~python\nimport statsmodels.api as sm\n# 增加截距项，即在原数据最右侧新增一列全为1的列'const'\ndf_const = sm.add_constant(dataframe)\n# 将数据集X和y分别提取出来\nX = df_const.iloc[:, :-1] # 选取除了截距项的所有列作为自变量矩阵\ny = df_const['y'] # 提取因变量列作为因变量向量\n~~~\n  \n|方法|描述|参数说明|返回值|\n|---|---|---|---|\n|`statsmodels.api.add_constant(dataframe)`|增加截距项，即在原数据最右侧新增一列全为1的列'const'|dataframe|增加截距项后的数据集dataframe|\n|`statsmodels.api.OLS(y, X)`|建立OLS模型|y: 因变量向量<br>X: 自变量矩阵|OLS模型对象|\n|`statsmodels.api.qqplot()`|绘制QQ图|data（必选参数）:待检验的样本数据（一维数据）<br> dist（可选参数）:检验分布，默认为正态分布 <br>line（可选参数）: 绘制的参考线，默认为45度线 's'：绘制标准化分位数的参考线（适用于非标准分布）'r--'：自定义直线样式（如红色虚线）<br> ax（可选参数）: 绘图对象 <br>kwargs（可选参数）:绘图参数|无|\n|`statsmodels.api.graphics.plot_regress_exog()`|绘制自变量和因变量的回归图|model: OLS模型对象<br>exog_idx: 自变量索引<br>fig（可选参数）: 绘图对象<br>ax（可选参数）: 绘图对象<br>kwargs（可选参数）:绘图参数|无|\n|`model.fit()`|训练模型|无|无|\n|`model.predict(X)`|预测|X: 自变量矩阵|预测结果向量|\n|`model.summary()`|查看模型报告|无|无|\n  \n4. 建立OLS模型，并训练模型，得到训练结果\n  \n~~~python\n# 建立OLS模型，并训练模型\nmodel = sm.OLS(y, X).fit()\n# 预测\ny_pred = model.predict(X)\n# 查看模型报告\nmodel.summary()\n~~~\nOLS即普通最小二乘法，即最小化残差平方和\n实现步骤：\n* RSS\n![RSS](../assert/machine_learining/1.png )\n* 对所有的参数β求偏导\n![偏导](../assert/machine_learining/2.png )\n* 令导数等于0，联立公式求解，得到所有的参数β\n![联立](../assert/machine_learining/3.png )\n* 解方程组，得到参数β\n![求解](../assert/machine_learining/4.png )\n  \n5. 绘制QQ图\n~~~python\n# 绘制QQ图，用于检验残差是否服从正态分布\nsm.qqplot(model.resid, line='r')\nplt.show()\n~~~\n* 理想情况（完全拟合）\n  \n数据点​​严格沿参考线（如45°线）分布​​，说明样本分位数与理论分位数几乎一致，数据完全服从理论分布。\n* 轻微偏离（可接受）\n  \n数据点整体沿参考线分布，但存在​​局部小幅偏离​​（如在尾部或中间位置有少量点偏离），可能是随机误差导致，通常认为数据近似服从理论分布。\n* 显著偏离（不拟合）\n  \n数据点明显偏离参考线，呈现以下模式时，提示数据与理论分布存在显著差异：\n  \n* 尾部偏离​​：数据点在两端（低分位数或高分位数）偏离参考线（如右偏数据的右尾上翘），说明数据存在厚尾或偏态；\n* ​整体偏移​​：数据点整体平行于参考线但不重合（如整体高于或低于参考线），说明数据分布的位置参数（如均值）与理论分布不同；\n* ​曲线偏离​​：数据点呈曲线形态偏离参考线，说明数据分布的形状参数（如方差、峰度）与理论分布不同。\n  \n6. 残差分析\n~~~python\n# 残差分析\nfig = plt.figure(figsize=(12, 8))\n# 绘制残差图\nfig = sm.graphics.plot_regress_exog(model, 'x', fig=fig)\n~~~\n\n#### 输出结果解读\n\n[回到目录](#目录)\n\n| 参数 | 描述 |\n| --- | --- |\n| Prob (F-statistic) | 模型F统计量的p值，用于判断整个回归模型是否显著。值越小（通常小于0.05），说明模型整体越显著，即至少有一个自变量对因变量有显著影响 |\n| R-squared | 决定系数，表示模型能够解释的因变量总变异的比例。值越接近1，说明模型拟合效果越好 |\n| Adj. R-squared | 调整后的决定系数，在R-squared基础上考虑了自变量个数的影响，惩罚了无意义的变量加入。值越接近1，模型越好，更适合用于比较不同复杂度的模型 |\n| Skew | 残差分布的偏度，衡量残差分布的对称性。值越接近0，说明残差分布越对称，越接近正态分布。正值表示右偏，负值表示左偏。 |\n| Kurtosis | 残差分布的峰度，衡量残差分布的尖锐程度。值越接近3（正态分布的峰度），说明残差分布越接近正态分布。大于3表示分布更尖锐，小于3表示分布更平坦 |\n| P > \\|t\\| | 每个回归系数的t检验p值，用于判断单个自变量是否对因变量有显著影响。值越小（通常小于0.05），说明该自变量对因变量的影响越显著 |\n| coef | 回归系数，表示自变量对因变量的影响程度和方向。系数的绝对值越大，影响越强；系数为正表示正相关，为负表示负相关。 |\n\n### 多项式回归\n\n[回到目录](#目录)\n\n#### 算法思想\n若有一条抛物线隐藏在数据集中，那么在模型中引入二次项或许会得到更好的拟合效果\n\n#### 代码实现\n在[第三步](#python中的实现)增加截距项那一步改进代码\n~~~python\nimport statsmodels.api as sm\n# 增加二次项\ndf_const = sm.add_constant(dataframe)\ndf_const['x_2'] = df_const['x'] ** 2\n# 将数据集X和y分别提取出来 \nX = df_const.loc[:, df_const.columns != 'y'] #自变量\ny = df_const.loc[:, df_const.columns == 'y'] #因变量\n~~~\n\n### 多元线性回归\n\n\n#### 算法思想\n对于p值小于0.05的变量，我们可以认为它对于因变量具有显著影响，但我们无法排除其他因变量也有预测能力的可能，因此需考虑多个变量的组合对因变量的贡献。\n\n#### 模型选择\n* AIC(Akaike Information Criterion,赤池信息准则)\n    * 定义: AIC是一种模型选择准则，用于在多个候选模型中选择最优模型\n    * 计算公式: AIC = 2k - 2ln(L) 其中k是模型参数个数，L是模型的最大似然值\n    * 特点:AIC在模型拟合度和复杂度之间寻求平衡值越小表示模型越好，相比于只考虑拟合优度的指标，AIC引入了对模型复杂度的惩罚项\n* BIC(Bayesian Information Criterion,贝叶斯信息准则)\n    * 定义: BIC是另一种模型选择准则，基于贝叶斯理论\n    * 计算公式: BIC = k×ln(n) - 2ln(L)其中k是模型参数个数，n是样本量，L是模型的最大似然值\n    * 特点:BIC对模型复杂度的惩罚比AIC更严格，当样本量较大时，BIC倾向于选择更简单的模型，值越小表示模型越好\n* 区别\n    * 惩罚程度: BIC对复杂模型的惩罚更重，特别是当样本量较大时\n    * 理论基础: AIC基于信息论，BIC基于贝叶斯理论\n    * 模型选择倾向: AIC可能选择较复杂的模型，BIC倾向于选择较简单的模型\n    * 一致性: BIC具有一致性，当样本量趋于无穷时能选出真实模型；AIC则不具备此性质\n#### 代码实现\n\n* 引入多元线性回归api\n~~~python\nfrom statsmodels.formula.api import ols\n~~~\n* 构建模型\n~~~python\nmodel = ols('y ~ x1 + x2 + x3 + ...', data=dataframe).fit()\n~~~\n* 模型输出\n~~~python\nmodel.summary()\n~~~\n* 注意事项：不同于前两种线性回归，多元线性回归无需在数据集中添加截距项\n* 交互项语法\n~~~python\n# 完整写法\nmodel = ols('y ~ x1 + x2 + x3 + x1:x2 + x1:x3 + x2:x3 + x1:x2:x3', data=dataframe).fit()\n# 等价简写形式\nmodel = ols('y ~ x1 * x2 * x3', data=dataframe).fit()\n~~~\n* 多重共线性可以根据相关系数矩阵和方差膨胀因子(VIF)判断\n~~~python\n# 相关系数矩阵\n\"\"\"corr()\n- args:\n  method: 计算方式\n    - 'pearson':皮尔逊相关系数(默认)\n    - 'kendall':肯德尔相关系数\n    - 'spearman':斯皮尔曼相关系数\n  min_periods: 最小样本数，默认为5\n- return:\n  返回一个DataFrame对象，包含相关系数矩阵\n    相关系数值范围为[-1, 1]\n      1: 完全正相关\n      0: 无线性相关\n      -1: 完全负相关\n\"\"\"\ncorr = dataframe.corr()\n# 方差膨胀因子\nimport statsmodels.stats.outliers_influence as oi\n\"\"\"variance_inflation_factor()\n- args:\n  exog: 输入矩阵\n  exog_idx: 输入矩阵的列索引\n- tips:\n  一般来说，VIF大于4，即认为存在多重共线性。\n\"\"\"\nvif = oi.variance_inflation_factor()\n~~~\n\n## 逻辑回归\n[回到目录](#目录)\n逻辑回归是一种二元分类模型，用于判断一个样本属于某一类别的概率。\n\n### 算法思想\n通过找到一条直线能够尽可能将不同类别分开\n* 线性回归预测函数\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?y = w^T x + b\"/></p><br> \n\n* 期望的逻辑回归预测函数 即y取值为1的概率\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?prob(y = 1) = w^T x + b\"/></p> <br>\n\n* 这个式子存在等式左侧值域为[0, 1] 而等式右侧的值域为(-∞, ∞)\n* 为了解决这个问题，我们可以将等式右侧的值域映射到[0, 1]，即**Sigmoid**函数\n  \n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\sigma(t) = \\frac{1}{1 + e^{-t}}\"/></p> <br>\n\n  或者，可以将等式左侧值域映射到(-∞, ∞)，即**Logit**函数\n  \n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?odds = \\frac{p}{1 - p}\"/></p> <br>\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?log(odds)\"/></p> <br>\n\n* 引入代价函数来量化预测值和真实值的差距，其中h(x)为预测值，y为真实值\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\text{Cost }(h(x),y) = \\begin{cases} -\\log(h(x)) & \\text{if } y = 1 \\\\ -\\log(1 - h(x)) & \\text{if } y = 0 \\end{cases}\"/></p> <br>\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?Cost(h(x), y)= -ylog(h(x)) - (1 - y)log(1 - h(x))\"/></p> <br>\n\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\begin{align}J(w) &= \\frac{1}{m} \\sum_{i=1}^{m} \\text{Cost}(h_w(x_i), y_i) \\\\ &= -\\frac{1}{m} \\left[ \\sum_{i=1}^{m} y_i \\log h_w(x_i) + (1 - y_i) \\log(1 - h_w(x_i)) \\right] \\end{align}\"/></p> <br>\n\n* 拟合参数\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\min_{w} J(w)\"/></p> <br>\n\n* 梯度下降法，不断重复以下步骤\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?w_{j}:=w_{j}-\\alpha\\frac{\\partial J(w)}{\\partial w_{j}}\"/></p> <br>\n\n  **w_j**：表示第 j 个模型参数（权重）\n  **α**：学习率（Learning Rate），控制每次更新的步长\n  **∂J(w)/∂w_j**：损失函数 J(w) 对参数 w_j 的偏导数，表示在当前点处损失函数的变化率\n\n  当梯度下降法收敛时，损失函数 J(w) 的值会最小化，即 J(w) 的导数等于 0\n  <br>\n\n* 预测新样本\n  <br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?h_w(x) = \\frac{1}{1 + e^{-w^Tx}}\"/></p>\n\n### 代码实现\n1. 读取数据\n  [banding_partial.csv数据集](../dataset/banking_partial.csv)\n  ~~~python\n  import pandas as pd\n\n  # 1. 读取数据\n  print(\"------读取数据------\")\n  data = pd.read_csv(\"./banking_partial.csv\", header=0)  # header=0表示第一行是列名\n  data.dropna()  # dropna() 方法删除数据中的空值\n  print(data.shape)  # 查看数据集的行数和列数 返回(行数,列数)\n  ~~~\n  \n2. 描述性分析与可视化分析\n~~~python\n# 2. 描述性分析与可视化分析\nprint(\"------描述性分析------\")\nprint(data.sample(5)) # 查看数据集的前5行\nprint(\"------数据基本信息------\")\nprint(data.info()) # 查看每个列的数据类型和缺失值个数\n\nprint(\"------数据可视化------\")\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\"\"\"figure() 方法设置绘图窗口\n- args: \n    figsize: 绘图窗口的尺寸，参数为宽和高，单位为英寸\n\"\"\"\nplt.figure(figsize=(32, 10)) # figure() 方法设置绘图窗口，并设置绘图窗口的尺寸，参数为宽和高，单位为英寸\n\"\"\"subplot() 方法创建子图，参数为行数，列数，子图编号\n- args: \n    nrows: 行数\n    ncols: 列数\n    index: 子图编号\n\"\"\"\nplt.subplot(241) # 创建子图 241\n\"\"\"countplot() 绘制分类变量的频数统计图\n- args: \n    data: DataFrame 数据集\n    x: 指定在 x 轴上显示的分类变量\n    y: 指定在 y 轴上显示的分类变量（可选，与 x 互斥）\n    hue: 分组变量，用不同颜色区分子组\n    palette: 调色板，控制颜色方案\n    order: 指定类别显示顺序\n\"\"\"\nsns.countplot(x = 'y', data = data, hue='y', palette='hls') # 绘制分类变量的频数统计图\n\nplt.subplot(242) # 创建子图 242\nsns.countplot(x = 'job', data = data)\n\nplt.subplot(243)\nsns.countplot(x = 'marital', data=data)\n\nplt.subplot(244)\nsns.countplot(x='default', data=data)\n\nplt.subplot(245)\nsns.countplot(x='housing', data=data)\n\nplt.subplot(246)\nsns.countplot(x='loan', data=data)\n\nplt.subplot(247)\nsns.countplot(x='poutcome', data=data)\n~~~\n3. 数据预处理\n  1. 注意将离散变量拆分成单独的特征，即转化为哑变量\n    ~~~python\n    # 3. 数据预处理\n    print(\"------数据预处理------\")\n    ## 1. 离散变量转换为哑变量\n    \"\"\"get_dummies() 方法将分类变量转换为哑变量\n    - args: \n        data: DataFrame 数据集\n        columns: 指定需要转换的列\n    \"\"\"\n    data_dummies = pd.get_dummies(data, columns=['job', 'marital', 'default',  'housing', 'loan',  'poutcome'])\n    print(data_dummies.columns) # 查看哑变量的列名\n\n    ## 2. 查看哑变量结构\n    \"\"\"sample() 方法从数据集随机抽取指定数量的样本\n    - args: \n        n: 指定要抽取的样本数量\n        random_state: 指定随机数种子，保证每次运行结果一致\n    \"\"\"\n    print(\"-----查看哑变量结构------\")\n    print(data_dummies[['loan_no','loan_unknown','loan_yes']].sample(5, random_state=42))\n    ~~~\n  2. 划分自变量和因变量\n  3. 划分训练集与测试集\n    ~~~python\n    ## 3. 划分自变量和因变量\n    X = data_dummies.iloc[: , 1: ] # 自变量，第二列到最后列\n    y = data_dummies.iloc[: , 1] # 因变量，第一列\n    ## 4. 划分训练集和测试集\n    from sklearn.model_selection import train_test_split as tts\n    \"\"\"train_test_split() 方法划分训练集和测试集\n    - args: \n        *arrays: 要分割的数据数组（通常是特征矩阵 X 和目标变量 y）\n        test_size: 测试集所占比例（0-1之间）或样本数量\n        train_size: 训练集所占比例（0-1之间）或样本数量\n        random_state: 随机种子，确保结果可重现\n        shuffle: 是否在分割前打乱数据（默认为 True）\n        stratify: 分层抽样，保持各类别在训练集和测试集中的比例一致\n    - return: \n        X_train: 训练集特征数据\n        X_test: 测试集特征数据\n        y_train: 训练集目标变量\n        y_test: 测试集目标变量\n    \"\"\"\n    X_tr, X_ts, y_tr, y_ts = tts(X, y, test_size=0.2) # X_tr为训练集自变量，X_ts为测试集自变量， y_tr为训练集因变量，y_ts为测试集因变量\n    print(\"------查看训练集和测试集的维度------\")\n    print(f\"训练集的维度：{X_tr.shape}，{y_tr.shape}\")\n    ~~~\n4. 建立模型\n  ~~~python\n  # 4. 建立模型\n  print(\"------建立模型------\")\n  from sklearn.linear_model import LogisticRegression\n  \"\"\"LogisticRegression() 方法创建逻辑回归模型\n  逻辑回归模型：\n      - 使用线性回归模型计算输入特征的线性组合：\n          y = w0 + w1*x1 + w2*x2 + ... + wn*xn\n      - 将线性组合结果通过Sigmoid函数（逻辑函数）转换为概率值：\n          y = 1 / (1 + e^(-y))\n      - 根据概率阈值（通常为0.5）进行分类决策\n      \n      y = 预测结果\n      w0, w1, w2, ..., wn = 模型参数\n      x1, x2, ..., xn = 特征变量\n      e = 2.71828\n      e^(-y) = 1 / (1 + e^())\n\n  \"\"\"\n  model = LogisticRegression()\n  \"\"\"fit() 方法训练模型\n  - args: \n      X: 特征矩阵\n      y: 目标变量\n  \"\"\"\n  model.fit(X_tr, y_tr)\n  ~~~\n5. 模型评估\n~~~python\n# 5. 模型评估\n\"\"\"predict() 方法对测试集进行预测\n- args: \n    X: 测试集特征数据\n- return: \n    y_pred: 预测结果\n\"\"\"\n\n## 1. 预测并统计结果\ny_pred = model.predict(X_ts)\nprint(\"------模型评估------\")\n\"\"\"value_counts() 方法统计变量的频数\n- return: \n    Series: 统计结果\n\"\"\"\nprint(pd.DataFrame(y_pred)[0].value_counts()) # 统计预测结果\n\n## 2. 查看混淆矩阵\nfrom sklearn.metrics import confusion_matrix\n\"\"\"confusion_matrix() 方法计算混淆矩阵\n- args: \n    y_true: 真实标签\n    y_pred: 预测标签\n- return: \n    array: 混淆矩阵\n\"\"\"\nprint(\"------查看混淆矩阵------\")\nprint(\"真负|假正\")\nprint(\"---------\")\nprint(\"假负|真正\")\nprint(confusion_matrix(y_ts, y_pred)) # 混淆矩阵\n\n## 3. 查看混淆矩阵相关评分\nfrom sklearn.metrics import classification_report\nprint(\"------查看混淆矩阵相关评分------\")\n\"\"\"classification_report() 方法查看混淆矩阵相关评分\n- args: \n    y_true: 真实标签\n    y_pred: 预测标签\n- return: \n    str: 评分结果\n- tip:\n    - precision: 精确度，预测为正的样本中，有多少是真正的正样本 Precision = TP / (TP + FP)\n    - recall: 召回率，有多少是真正的正样本被预测为正样本 Recall = TP / (TP + FN)\n    - f1-score: F1分数，取精确度和召回率的调和平均值\n    - support: 支持度，样本中正样本的个数\n    \n    - accuracy: 准确率，预测正确的样本个数占所有样本的百分比\n    - macro avg: 宏平均，对每个类别的评分求平均（Precision, Recall, F1-score）\n    - weighted avg: 微平均，对每个类别的评分求平均，并乘以支持度求和\n\"\"\"\nprint(classification_report(y_ts, y_pred))\n~~~\n6. 5折交叉验证\n~~~python\n## 4. 查看k折交叉验证计算准确率\n\"\"\"k折交叉验证：\n将数据集划分为K个大小相似的子集，\n轮流使用其中K-1个子集作为训练集，\n剩余1个子集作为验证集，\n重复K次训练和验证过程。\n\"\"\"\nfrom sklearn.model_selection import cross_val_score\n\"\"\"cross_val_score() 方法计算k折交叉验证的准确率\n\n- args: \n    estimator: 模型\n    X: 特征矩阵\n    y: 目标变量\n    cv: 交叉验证折数，通常为5或10\n    scoring: 评分标准\n- return: \n    array: 评分结果\n\"\"\"\nscores = cross_val_score(model, X, y, cv=10, scoring='accuracy')\n\"\"\"mean() 方法计算平均值\n\n- return: \n    float: 平均值\n\"\"\"\nprint(\"------查看k折交叉验证计算准确率------\")\nprint(scores.mean())\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"machine_learning_","published":1,"updated":"2025-10-22T05:43:50.241Z","_id":"cmfwpff3u0000t8tl9ypkdwm1","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h1><span id=\"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0\">机器学习</span></h1><h2><span id=\"%E7%9B%AE%E5%BD%95\">目录</span></h2><ul>\n<li><a href=\"#%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0\">机器学习</a><ul>\n<li><a href=\"#%E7%9B%AE%E5%BD%95\">目录</a></li>\n<li><a href=\"#%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92\">线性回归</a><ul>\n<li><a href=\"#%E4%B8%80%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92\">一元线性回归</a><ul>\n<li><a href=\"#%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3\">算法思想</a></li>\n<li><a href=\"#%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87\">评价指标</a></li>\n<li><a href=\"#python%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0\">python中的实现</a></li>\n<li><a href=\"#%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E8%A7%A3%E8%AF%BB\">输出结果解读</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%A4%9A%E9%A1%B9%E5%BC%8F%E5%9B%9E%E5%BD%92\">多项式回归</a><ul>\n<li><a href=\"#%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3-1\">算法思想</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%A4%9A%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92\">多元线性回归</a><ul>\n<li><a href=\"#%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3-2\">算法思想</a></li>\n<li><a href=\"#%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9\">模型选择</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1\">代码实现</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92\">逻辑回归</a><ul>\n<li><a href=\"#%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3-3\">算法思想</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2\">代码实现</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2><span id=\"%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92\">线性回归</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3><span id=\"%E4%B8%80%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92\">一元线性回归</span></h3><h4><span id=\"%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3\">算法思想</span></h4><ol>\n<li>找到一条曲线 <strong>y = wx + b</strong> ，使得能够根据自变量x 尽可能准确地预测因变量y</li>\n<li>模型最优解为<br>\n<p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?(w^*,%20b^*)%20=%20arg\\min_{i=0}^m%20(y_i%20-%20\\hat{y}_i)^2\"></p></li>\n</ol>\n<p>即调整w和b使得预测误差平方和最小</p>\n<h4><span id=\"%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87\">评价指标</span></h4><ol>\n<li><p>均方误差：误差越小，模型预测效果越好<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?MSE%20=%20\\frac{1}{m}%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2\"></p>  <p></p>\n</li>\n<li><p>均方根误差：误差越小，模型预测效果越好<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?RMSE%20=%20\\sqrt{MSE}%20=%20\\sqrt{\\frac{1}{m}%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2}\"></p>  <p></p>\n</li>\n<li><p>回归平方和：衡量​​回归模型“解释”的因变量变异程度​​（即模型通过自变量预测后，预测值与均值的差异）<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SSR%20=%20\\sum_{i=1}^m%20(\\hat{y_i}%20-%20\\bar{y})^2\"></p>  <p></p>\n</li>\n<li><p>残差平方和：衡量​​回归模型“未解释”的因变量变异程度​​（即预测值与实际值的误差）<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SSE%20=%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2\"></p>  <p></p>\n</li>\n<li><p>总平方和：衡量​​因变量 y自身的总变异程度​​（即数据自然波动的大小）<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SST%20=%20\\sum_{i=1}^m%20(y_i%20-%20\\bar{y})^2%20=%20SSE%20+%20SSR\"></p>  <p></p>\n</li>\n<li><p>决定系数R^2^: 衡量​​回归模型对因变量变异的解释比例​​（取值范围 [0,1]）<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?R^2%20=%20\\frac{SSR}{SST}%20=%201%20-%20\\frac{SSE}{SST}\"></p><p></p>\n</li>\n</ol>\n<p>实际中，R2越接近1，说明模型解释的变异越多，拟合效果越好<br><br></p>\n<ol start=\"7\">\n<li>调整后的决定系数R^2^<del>d</del>：在 R2基础上，​​惩罚“无意义的自变量加入”​​，更适合比较不同复杂度的模型<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?R^2_d%20=%201%20-%20\\frac{m-1}{m-d-1}%20\\cdot%20\\frac{SSE}{SST}\"></p></li>\n</ol>\n<p>其中，m为样本量，d为自变量个数，本质是对自由度的惩罚</p>\n<h4><span id=\"python%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0\">python中的实现</span></h4><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<ol>\n<li>引入pandas模块，读取数据</li>\n</ol>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> pandas <span class=\"hljs-keyword\">as</span> pd<br>dataframe = pd.read_csv(<span class=\"hljs-string\">'data.csv'</span>)<br></code></pre></td></tr></tbody></table></figure>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>参数说明</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>pandas.read_csv(filename)</code></td>\n<td>读取csv文件</td>\n<td>文件名或文件路径</td>\n<td>DataFrame</td>\n</tr>\n<tr>\n<td><code>dataframe.iloc[行索引器，列索引器]</code></td>\n<td>获取行和列</td>\n<td>行索引器(切片)：表示为 <code>start:stop</code> 即行的选择范围，当都为空时，默认选择所有行 <br> 列索引器(切片)：表示为 <code>start:stop</code> 即列的选择范围，当都为空时，默认选择所有列</td>\n<td>DataFrame</td>\n</tr>\n<tr>\n<td><code>dataframe.loc[行索引器，列索引器]</code></td>\n<td>获取行和列</td>\n<td>行索引器(切片)：表示为 <code>start:stop</code> 即行的选择范围，当都为空时，默认选择所有行 <br> 列索引器(切片)：表示为 <code>start:stop</code> 即列的选择范围，当都为空时，默认选择所有列</td>\n<td>DataFrame</td>\n</tr>\n</tbody></table>\n<ol start=\"2\">\n<li>引入matplotlib模块，绘制图像，其中散点图为pyplot模块中的scatter()方法</li>\n</ol>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> matplotlib.pyplot <span class=\"hljs-keyword\">as</span> plt<br><span class=\"hljs-comment\"># 绘制散点图</span><br>plt.scatter(dataframe[<span class=\"hljs-string\">'x'</span>], dataframe[<span class=\"hljs-string\">'y'</span>], color=<span class=\"hljs-string\">'red'</span>)<br><span class=\"hljs-comment\"># 显示图像</span><br>plt.show()<br></code></pre></td></tr></tbody></table></figure>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>参数说明</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>matplotlib.pyplot.scatter()</code></td>\n<td>绘制数据点</td>\n<td>x: 数据点的横坐标列表<br> y: 数据点的纵坐标列表<br> s: 数据点的大小列表<br> c: 数据点的颜色列表<br> marker: 数据点的标记列表<br> cmap: 颜色映射对象<br> norm: 颜色映射对象<br> vmin: 颜色映射对象<br> vmax: 颜色映射对象<br> alpha: 数据点的透明度列表<br> linewidths: 数据点的线宽列表<br> verts: 数据点的标记列表<br> edgecolors: 数据点的边框颜色列表<br> plotnon</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>matplotlib.pyplot.show()</code></td>\n<td>显示图</td>\n<td>无</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>matplotlib.pyplot.figure()</code></td>\n<td>创建一个新图</td>\n<td>无</td>\n<td>无</td>\n</tr>\n</tbody></table>\n<ol start=\"3\">\n<li>引入statsmodels模块，增加截距项，进行数据预处理</li>\n</ol>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> statsmodels.api <span class=\"hljs-keyword\">as</span> sm<br><span class=\"hljs-comment\"># 增加截距项，即在原数据最右侧新增一列全为1的列'const'</span><br>df_const = sm.add_constant(dataframe)<br><span class=\"hljs-comment\"># 将数据集X和y分别提取出来</span><br>X = df_const.iloc[:, :-<span class=\"hljs-number\">1</span>] <span class=\"hljs-comment\"># 选取除了截距项的所有列作为自变量矩阵</span><br>y = df_const[<span class=\"hljs-string\">'y'</span>] <span class=\"hljs-comment\"># 提取因变量列作为因变量向量</span><br></code></pre></td></tr></tbody></table></figure>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>参数说明</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>statsmodels.api.add_constant(dataframe)</code></td>\n<td>增加截距项，即在原数据最右侧新增一列全为1的列'const'</td>\n<td>dataframe</td>\n<td>增加截距项后的数据集dataframe</td>\n</tr>\n<tr>\n<td><code>statsmodels.api.OLS(y, X)</code></td>\n<td>建立OLS模型</td>\n<td>y: 因变量向量<br>X: 自变量矩阵</td>\n<td>OLS模型对象</td>\n</tr>\n<tr>\n<td><code>statsmodels.api.qqplot()</code></td>\n<td>绘制QQ图</td>\n<td>data（必选参数）:待检验的样本数据（一维数据）<br> dist（可选参数）:检验分布，默认为正态分布 <br>line（可选参数）: 绘制的参考线，默认为45度线 's'：绘制标准化分位数的参考线（适用于非标准分布）'r--'：自定义直线样式（如红色虚线）<br> ax（可选参数）: 绘图对象 <br>kwargs（可选参数）:绘图参数</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>statsmodels.api.graphics.plot_regress_exog()</code></td>\n<td>绘制自变量和因变量的回归图</td>\n<td>model: OLS模型对象<br>exog_idx: 自变量索引<br>fig（可选参数）: 绘图对象<br>ax（可选参数）: 绘图对象<br>kwargs（可选参数）:绘图参数</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>model.fit()</code></td>\n<td>训练模型</td>\n<td>无</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>model.predict(X)</code></td>\n<td>预测</td>\n<td>X: 自变量矩阵</td>\n<td>预测结果向量</td>\n</tr>\n<tr>\n<td><code>model.summary()</code></td>\n<td>查看模型报告</td>\n<td>无</td>\n<td>无</td>\n</tr>\n</tbody></table>\n<ol start=\"4\">\n<li>建立OLS模型，并训练模型，得到训练结果</li>\n</ol>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 建立OLS模型，并训练模型</span><br>model = sm.OLS(y, X).fit()<br><span class=\"hljs-comment\"># 预测</span><br>y_pred = model.predict(X)<br><span class=\"hljs-comment\"># 查看模型报告</span><br>model.summary()<br></code></pre></td></tr></tbody></table></figure>\n<p>OLS即普通最小二乘法，即最小化残差平方和<br>实现步骤：</p>\n<ul>\n<li>RSS<br><img src=\"/../assert/machine_learining/1.png\" alt=\"RSS\"></li>\n<li>对所有的参数β求偏导<br><img src=\"/../assert/machine_learining/2.png\" alt=\"偏导\"></li>\n<li>令导数等于0，联立公式求解，得到所有的参数β<br><img src=\"/../assert/machine_learining/3.png\" alt=\"联立\"></li>\n<li>解方程组，得到参数β<br><img src=\"/../assert/machine_learining/4.png\" alt=\"求解\"></li>\n</ul>\n<ol start=\"5\">\n<li>绘制QQ图<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 绘制QQ图，用于检验残差是否服从正态分布</span><br>sm.qqplot(model.resid, line=<span class=\"hljs-string\">'r'</span>)<br>plt.show()<br></code></pre></td></tr></tbody></table></figure></li>\n</ol>\n<ul>\n<li>理想情况（完全拟合）</li>\n</ul>\n<p>数据点​​严格沿参考线（如45°线）分布​​，说明样本分位数与理论分位数几乎一致，数据完全服从理论分布。</p>\n<ul>\n<li>轻微偏离（可接受）</li>\n</ul>\n<p>数据点整体沿参考线分布，但存在​​局部小幅偏离​​（如在尾部或中间位置有少量点偏离），可能是随机误差导致，通常认为数据近似服从理论分布。</p>\n<ul>\n<li>显著偏离（不拟合）</li>\n</ul>\n<p>数据点明显偏离参考线，呈现以下模式时，提示数据与理论分布存在显著差异：</p>\n<ul>\n<li>尾部偏离​​：数据点在两端（低分位数或高分位数）偏离参考线（如右偏数据的右尾上翘），说明数据存在厚尾或偏态；</li>\n<li>​整体偏移​​：数据点整体平行于参考线但不重合（如整体高于或低于参考线），说明数据分布的位置参数（如均值）与理论分布不同；</li>\n<li>​曲线偏离​​：数据点呈曲线形态偏离参考线，说明数据分布的形状参数（如方差、峰度）与理论分布不同。</li>\n</ul>\n<ol start=\"6\">\n<li>残差分析<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 残差分析</span><br>fig = plt.figure(figsize=(<span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">8</span>))<br><span class=\"hljs-comment\"># 绘制残差图</span><br>fig = sm.graphics.plot_regress_exog(model, <span class=\"hljs-string\">'x'</span>, fig=fig)<br></code></pre></td></tr></tbody></table></figure></li>\n</ol>\n<h4><span id=\"%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E8%A7%A3%E8%AF%BB\">输出结果解读</span></h4><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Prob (F-statistic)</td>\n<td>模型F统计量的p值，用于判断整个回归模型是否显著。值越小（通常小于0.05），说明模型整体越显著，即至少有一个自变量对因变量有显著影响</td>\n</tr>\n<tr>\n<td>R-squared</td>\n<td>决定系数，表示模型能够解释的因变量总变异的比例。值越接近1，说明模型拟合效果越好</td>\n</tr>\n<tr>\n<td>Adj. R-squared</td>\n<td>调整后的决定系数，在R-squared基础上考虑了自变量个数的影响，惩罚了无意义的变量加入。值越接近1，模型越好，更适合用于比较不同复杂度的模型</td>\n</tr>\n<tr>\n<td>Skew</td>\n<td>残差分布的偏度，衡量残差分布的对称性。值越接近0，说明残差分布越对称，越接近正态分布。正值表示右偏，负值表示左偏。</td>\n</tr>\n<tr>\n<td>Kurtosis</td>\n<td>残差分布的峰度，衡量残差分布的尖锐程度。值越接近3（正态分布的峰度），说明残差分布越接近正态分布。大于3表示分布更尖锐，小于3表示分布更平坦</td>\n</tr>\n<tr>\n<td>P &gt; |t|</td>\n<td>每个回归系数的t检验p值，用于判断单个自变量是否对因变量有显著影响。值越小（通常小于0.05），说明该自变量对因变量的影响越显著</td>\n</tr>\n<tr>\n<td>coef</td>\n<td>回归系数，表示自变量对因变量的影响程度和方向。系数的绝对值越大，影响越强；系数为正表示正相关，为负表示负相关。</td>\n</tr>\n</tbody></table>\n<h3><span id=\"%E5%A4%9A%E9%A1%B9%E5%BC%8F%E5%9B%9E%E5%BD%92\">多项式回归</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4><span id=\"%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3\">算法思想</span></h4><p>若有一条抛物线隐藏在数据集中，那么在模型中引入二次项或许会得到更好的拟合效果</p>\n<h4><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h4><p>在<a href=\"#python%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0\">第三步</a>增加截距项那一步改进代码</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> statsmodels.api <span class=\"hljs-keyword\">as</span> sm<br><span class=\"hljs-comment\"># 增加二次项</span><br>df_const = sm.add_constant(dataframe)<br>df_const[<span class=\"hljs-string\">'x_2'</span>] = df_const[<span class=\"hljs-string\">'x'</span>] ** <span class=\"hljs-number\">2</span><br><span class=\"hljs-comment\"># 将数据集X和y分别提取出来 </span><br>X = df_const.loc[:, df_const.columns != <span class=\"hljs-string\">'y'</span>] <span class=\"hljs-comment\">#自变量</span><br>y = df_const.loc[:, df_const.columns == <span class=\"hljs-string\">'y'</span>] <span class=\"hljs-comment\">#因变量</span><br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%A4%9A%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92\">多元线性回归</span></h3><h4><span id=\"%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3\">算法思想</span></h4><p>对于p值小于0.05的变量，我们可以认为它对于因变量具有显著影响，但我们无法排除其他因变量也有预测能力的可能，因此需考虑多个变量的组合对因变量的贡献。</p>\n<h4><span id=\"%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9\">模型选择</span></h4><ul>\n<li>AIC(Akaike Information Criterion,赤池信息准则)<ul>\n<li>定义: AIC是一种模型选择准则，用于在多个候选模型中选择最优模型</li>\n<li>计算公式: AIC = 2k - 2ln(L) 其中k是模型参数个数，L是模型的最大似然值</li>\n<li>特点:AIC在模型拟合度和复杂度之间寻求平衡值越小表示模型越好，相比于只考虑拟合优度的指标，AIC引入了对模型复杂度的惩罚项</li>\n</ul>\n</li>\n<li>BIC(Bayesian Information Criterion,贝叶斯信息准则)<ul>\n<li>定义: BIC是另一种模型选择准则，基于贝叶斯理论</li>\n<li>计算公式: BIC = k×ln(n) - 2ln(L)其中k是模型参数个数，n是样本量，L是模型的最大似然值</li>\n<li>特点:BIC对模型复杂度的惩罚比AIC更严格，当样本量较大时，BIC倾向于选择更简单的模型，值越小表示模型越好</li>\n</ul>\n</li>\n<li>区别<ul>\n<li>惩罚程度: BIC对复杂模型的惩罚更重，特别是当样本量较大时</li>\n<li>理论基础: AIC基于信息论，BIC基于贝叶斯理论</li>\n<li>模型选择倾向: AIC可能选择较复杂的模型，BIC倾向于选择较简单的模型</li>\n<li>一致性: BIC具有一致性，当样本量趋于无穷时能选出真实模型；AIC则不具备此性质</li>\n</ul>\n</li>\n</ul>\n<h4><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h4><ul>\n<li>引入多元线性回归api<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">from</span> statsmodels.formula.api <span class=\"hljs-keyword\">import</span> ols<br></code></pre></td></tr></tbody></table></figure></li>\n<li>构建模型<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\">model = ols(<span class=\"hljs-string\">'y ~ x1 + x2 + x3 + ...'</span>, data=dataframe).fit()<br></code></pre></td></tr></tbody></table></figure></li>\n<li>模型输出<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\">model.summary()<br></code></pre></td></tr></tbody></table></figure></li>\n<li>注意事项：不同于前两种线性回归，多元线性回归无需在数据集中添加截距项</li>\n<li>交互项语法<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 完整写法</span><br>model = ols(<span class=\"hljs-string\">'y ~ x1 + x2 + x3 + x1:x2 + x1:x3 + x2:x3 + x1:x2:x3'</span>, data=dataframe).fit()<br><span class=\"hljs-comment\"># 等价简写形式</span><br>model = ols(<span class=\"hljs-string\">'y ~ x1 * x2 * x3'</span>, data=dataframe).fit()<br></code></pre></td></tr></tbody></table></figure></li>\n<li>多重共线性可以根据相关系数矩阵和方差膨胀因子(VIF)判断<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 相关系数矩阵</span><br><span class=\"hljs-string\">\"\"\"corr()</span><br><span class=\"hljs-string\">- args:</span><br><span class=\"hljs-string\">  method: 计算方式</span><br><span class=\"hljs-string\">    - 'pearson':皮尔逊相关系数(默认)</span><br><span class=\"hljs-string\">    - 'kendall':肯德尔相关系数</span><br><span class=\"hljs-string\">    - 'spearman':斯皮尔曼相关系数</span><br><span class=\"hljs-string\">  min_periods: 最小样本数，默认为5</span><br><span class=\"hljs-string\">- return:</span><br><span class=\"hljs-string\">  返回一个DataFrame对象，包含相关系数矩阵</span><br><span class=\"hljs-string\">    相关系数值范围为[-1, 1]</span><br><span class=\"hljs-string\">      1: 完全正相关</span><br><span class=\"hljs-string\">      0: 无线性相关</span><br><span class=\"hljs-string\">      -1: 完全负相关</span><br><span class=\"hljs-string\">\"\"\"</span><br>corr = dataframe.corr()<br><span class=\"hljs-comment\"># 方差膨胀因子</span><br><span class=\"hljs-keyword\">import</span> statsmodels.stats.outliers_influence <span class=\"hljs-keyword\">as</span> oi<br><span class=\"hljs-string\">\"\"\"variance_inflation_factor()</span><br><span class=\"hljs-string\">- args:</span><br><span class=\"hljs-string\">  exog: 输入矩阵</span><br><span class=\"hljs-string\">  exog_idx: 输入矩阵的列索引</span><br><span class=\"hljs-string\">- tips:</span><br><span class=\"hljs-string\">  一般来说，VIF大于4，即认为存在多重共线性。</span><br><span class=\"hljs-string\">\"\"\"</span><br>vif = oi.variance_inflation_factor()<br></code></pre></td></tr></tbody></table></figure></li>\n</ul>\n<h2><span id=\"%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92\">逻辑回归</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a><br>逻辑回归是一种二元分类模型，用于判断一个样本属于某一类别的概率。</p>\n<h3><span id=\"%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3\">算法思想</span></h3><p>通过找到一条直线能够尽可能将不同类别分开</p>\n<ul>\n<li><p>线性回归预测函数</p>\n<p><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?y = w^T x + b\"></p><br> <p></p>\n</li>\n<li><p>期望的逻辑回归预测函数 即y取值为1的概率<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?prob(y = 1) = w^T x + b\"></p> <br><p></p>\n</li>\n<li><p>这个式子存在等式左侧值域为[0, 1] 而等式右侧的值域为(-∞, ∞)</p>\n</li>\n<li><p>为了解决这个问题，我们可以将等式右侧的值域映射到[0, 1]，即<strong>Sigmoid</strong>函数</p>\n<p><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\sigma(t) = \\frac{1}{1 + e^{-t}}\"></p> <br><p></p>\n<p>或者，可以将等式左侧值域映射到(-∞, ∞)，即<strong>Logit</strong>函数</p>\n<p><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?odds = \\frac{p}{1 - p}\"></p> <br><p></p>\n<p><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?log(odds)\"></p> <br><p></p>\n</li>\n<li><p>引入代价函数来量化预测值和真实值的差距，其中h(x)为预测值，y为真实值</p>\n<p><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\text{Cost }(h(x),y) = \\begin{cases} -\\log(h(x)) &amp; \\text{if } y = 1 \\\\ -\\log(1 - h(x)) &amp; \\text{if } y = 0 \\end{cases}\"></p> <br><p></p>\n<p><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?Cost(h(x), y)= -ylog(h(x)) - (1 - y)log(1 - h(x))\"></p> <br><p></p>\n<p><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\begin{align}J(w) &amp;= \\frac{1}{m} \\sum_{i=1}^{m} \\text{Cost}(h_w(x_i), y_i) \\\\ &amp;= -\\frac{1}{m} \\left[ \\sum_{i=1}^{m} y_i \\log h_w(x_i) + (1 - y_i) \\log(1 - h_w(x_i)) \\right] \\end{align}\"></p> <br><p></p>\n</li>\n<li><p>拟合参数<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\min_{w} J(w)\"></p> <br><p></p>\n</li>\n<li><p>梯度下降法，不断重复以下步骤<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?w_{j}:=w_{j}-\\alpha\\frac{\\partial J(w)}{\\partial w_{j}}\"></p> <br><p></p>\n<p><strong>w_j</strong>：表示第 j 个模型参数（权重）<br><strong>α</strong>：学习率（Learning Rate），控制每次更新的步长<br><strong>∂J(w)/∂w_j</strong>：损失函数 J(w) 对参数 w_j 的偏导数，表示在当前点处损失函数的变化率</p>\n<p>当梯度下降法收敛时，损失函数 J(w) 的值会最小化，即 J(w) 的导数等于 0</p>\n<br>\n</li>\n<li><p>预测新样本<br><br></p><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?h_w(x) = \\frac{1}{1 + e^{-w^Tx}}\"></p><p></p>\n</li>\n</ul>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><ol>\n<li><p>读取数据<br>  <a href=\"../dataset/banking_partial.csv\">banding_partial.csv数据集</a></p>\n  <figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> pandas <span class=\"hljs-keyword\">as</span> pd<br><br><span class=\"hljs-comment\"># 1. 读取数据</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------读取数据------\"</span>)<br>data = pd.read_csv(<span class=\"hljs-string\">\"./banking_partial.csv\"</span>, header=<span class=\"hljs-number\">0</span>)  <span class=\"hljs-comment\"># header=0表示第一行是列名</span><br>data.dropna()  <span class=\"hljs-comment\"># dropna() 方法删除数据中的空值</span><br><span class=\"hljs-built_in\">print</span>(data.shape)  <span class=\"hljs-comment\"># 查看数据集的行数和列数 返回(行数,列数)</span><br></code></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>描述性分析与可视化分析</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 2. 描述性分析与可视化分析</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------描述性分析------\"</span>)<br><span class=\"hljs-built_in\">print</span>(data.sample(<span class=\"hljs-number\">5</span>)) <span class=\"hljs-comment\"># 查看数据集的前5行</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------数据基本信息------\"</span>)<br><span class=\"hljs-built_in\">print</span>(data.info()) <span class=\"hljs-comment\"># 查看每个列的数据类型和缺失值个数</span><br><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------数据可视化------\"</span>)<br><span class=\"hljs-keyword\">import</span> seaborn <span class=\"hljs-keyword\">as</span> sns<br><span class=\"hljs-keyword\">import</span> matplotlib.pyplot <span class=\"hljs-keyword\">as</span> plt<br><span class=\"hljs-string\">\"\"\"figure() 方法设置绘图窗口</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    figsize: 绘图窗口的尺寸，参数为宽和高，单位为英寸</span><br><span class=\"hljs-string\">\"\"\"</span><br>plt.figure(figsize=(<span class=\"hljs-number\">32</span>, <span class=\"hljs-number\">10</span>)) <span class=\"hljs-comment\"># figure() 方法设置绘图窗口，并设置绘图窗口的尺寸，参数为宽和高，单位为英寸</span><br><span class=\"hljs-string\">\"\"\"subplot() 方法创建子图，参数为行数，列数，子图编号</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    nrows: 行数</span><br><span class=\"hljs-string\">    ncols: 列数</span><br><span class=\"hljs-string\">    index: 子图编号</span><br><span class=\"hljs-string\">\"\"\"</span><br>plt.subplot(<span class=\"hljs-number\">241</span>) <span class=\"hljs-comment\"># 创建子图 241</span><br><span class=\"hljs-string\">\"\"\"countplot() 绘制分类变量的频数统计图</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    data: DataFrame 数据集</span><br><span class=\"hljs-string\">    x: 指定在 x 轴上显示的分类变量</span><br><span class=\"hljs-string\">    y: 指定在 y 轴上显示的分类变量（可选，与 x 互斥）</span><br><span class=\"hljs-string\">    hue: 分组变量，用不同颜色区分子组</span><br><span class=\"hljs-string\">    palette: 调色板，控制颜色方案</span><br><span class=\"hljs-string\">    order: 指定类别显示顺序</span><br><span class=\"hljs-string\">\"\"\"</span><br>sns.countplot(x = <span class=\"hljs-string\">'y'</span>, data = data, hue=<span class=\"hljs-string\">'y'</span>, palette=<span class=\"hljs-string\">'hls'</span>) <span class=\"hljs-comment\"># 绘制分类变量的频数统计图</span><br><br>plt.subplot(<span class=\"hljs-number\">242</span>) <span class=\"hljs-comment\"># 创建子图 242</span><br>sns.countplot(x = <span class=\"hljs-string\">'job'</span>, data = data)<br><br>plt.subplot(<span class=\"hljs-number\">243</span>)<br>sns.countplot(x = <span class=\"hljs-string\">'marital'</span>, data=data)<br><br>plt.subplot(<span class=\"hljs-number\">244</span>)<br>sns.countplot(x=<span class=\"hljs-string\">'default'</span>, data=data)<br><br>plt.subplot(<span class=\"hljs-number\">245</span>)<br>sns.countplot(x=<span class=\"hljs-string\">'housing'</span>, data=data)<br><br>plt.subplot(<span class=\"hljs-number\">246</span>)<br>sns.countplot(x=<span class=\"hljs-string\">'loan'</span>, data=data)<br><br>plt.subplot(<span class=\"hljs-number\">247</span>)<br>sns.countplot(x=<span class=\"hljs-string\">'poutcome'</span>, data=data)<br></code></pre></td></tr></tbody></table></figure></li>\n<li><p>数据预处理</p>\n</li>\n<li><p>注意将离散变量拆分成单独的特征，即转化为哑变量<br></p><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 3. 数据预处理</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------数据预处理------\"</span>)<br><span class=\"hljs-comment\">## 1. 离散变量转换为哑变量</span><br><span class=\"hljs-string\">\"\"\"get_dummies() 方法将分类变量转换为哑变量</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    data: DataFrame 数据集</span><br><span class=\"hljs-string\">    columns: 指定需要转换的列</span><br><span class=\"hljs-string\">\"\"\"</span><br>data_dummies = pd.get_dummies(data, columns=[<span class=\"hljs-string\">'job'</span>, <span class=\"hljs-string\">'marital'</span>, <span class=\"hljs-string\">'default'</span>,  <span class=\"hljs-string\">'housing'</span>, <span class=\"hljs-string\">'loan'</span>,  <span class=\"hljs-string\">'poutcome'</span>])<br><span class=\"hljs-built_in\">print</span>(data_dummies.columns) <span class=\"hljs-comment\"># 查看哑变量的列名</span><br><br><span class=\"hljs-comment\">## 2. 查看哑变量结构</span><br><span class=\"hljs-string\">\"\"\"sample() 方法从数据集随机抽取指定数量的样本</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    n: 指定要抽取的样本数量</span><br><span class=\"hljs-string\">    random_state: 指定随机数种子，保证每次运行结果一致</span><br><span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"-----查看哑变量结构------\"</span>)<br><span class=\"hljs-built_in\">print</span>(data_dummies[[<span class=\"hljs-string\">'loan_no'</span>,<span class=\"hljs-string\">'loan_unknown'</span>,<span class=\"hljs-string\">'loan_yes'</span>]].sample(<span class=\"hljs-number\">5</span>, random_state=<span class=\"hljs-number\">42</span>))<br></code></pre></td></tr></tbody></table></figure><p></p>\n</li>\n<li><p>划分自变量和因变量</p>\n</li>\n<li><p>划分训练集与测试集<br></p><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\">## 3. 划分自变量和因变量</span><br>X = data_dummies.iloc[: , <span class=\"hljs-number\">1</span>: ] <span class=\"hljs-comment\"># 自变量，第二列到最后列</span><br>y = data_dummies.iloc[: , <span class=\"hljs-number\">1</span>] <span class=\"hljs-comment\"># 因变量，第一列</span><br><span class=\"hljs-comment\">## 4. 划分训练集和测试集</span><br><span class=\"hljs-keyword\">from</span> sklearn.model_selection <span class=\"hljs-keyword\">import</span> train_test_split <span class=\"hljs-keyword\">as</span> tts<br><span class=\"hljs-string\">\"\"\"train_test_split() 方法划分训练集和测试集</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    *arrays: 要分割的数据数组（通常是特征矩阵 X 和目标变量 y）</span><br><span class=\"hljs-string\">    test_size: 测试集所占比例（0-1之间）或样本数量</span><br><span class=\"hljs-string\">    train_size: 训练集所占比例（0-1之间）或样本数量</span><br><span class=\"hljs-string\">    random_state: 随机种子，确保结果可重现</span><br><span class=\"hljs-string\">    shuffle: 是否在分割前打乱数据（默认为 True）</span><br><span class=\"hljs-string\">    stratify: 分层抽样，保持各类别在训练集和测试集中的比例一致</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    X_train: 训练集特征数据</span><br><span class=\"hljs-string\">    X_test: 测试集特征数据</span><br><span class=\"hljs-string\">    y_train: 训练集目标变量</span><br><span class=\"hljs-string\">    y_test: 测试集目标变量</span><br><span class=\"hljs-string\">\"\"\"</span><br>X_tr, X_ts, y_tr, y_ts = tts(X, y, test_size=<span class=\"hljs-number\">0.2</span>) <span class=\"hljs-comment\"># X_tr为训练集自变量，X_ts为测试集自变量， y_tr为训练集因变量，y_ts为测试集因变量</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------查看训练集和测试集的维度------\"</span>)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f\"训练集的维度：<span class=\"hljs-subst\">{X_tr.shape}</span>，<span class=\"hljs-subst\">{y_tr.shape}</span>\"</span>)<br></code></pre></td></tr></tbody></table></figure><p></p>\n</li>\n<li><p>建立模型</p>\n  <figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 4. 建立模型</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------建立模型------\"</span>)<br><span class=\"hljs-keyword\">from</span> sklearn.linear_model <span class=\"hljs-keyword\">import</span> LogisticRegression<br><span class=\"hljs-string\">\"\"\"LogisticRegression() 方法创建逻辑回归模型</span><br><span class=\"hljs-string\">逻辑回归模型：</span><br><span class=\"hljs-string\">    - 使用线性回归模型计算输入特征的线性组合：</span><br><span class=\"hljs-string\">        y = w0 + w1*x1 + w2*x2 + ... + wn*xn</span><br><span class=\"hljs-string\">    - 将线性组合结果通过Sigmoid函数（逻辑函数）转换为概率值：</span><br><span class=\"hljs-string\">        y = 1 / (1 + e^(-y))</span><br><span class=\"hljs-string\">    - 根据概率阈值（通常为0.5）进行分类决策</span><br><span class=\"hljs-string\">    </span><br><span class=\"hljs-string\">    y = 预测结果</span><br><span class=\"hljs-string\">    w0, w1, w2, ..., wn = 模型参数</span><br><span class=\"hljs-string\">    x1, x2, ..., xn = 特征变量</span><br><span class=\"hljs-string\">    e = 2.71828</span><br><span class=\"hljs-string\">    e^(-y) = 1 / (1 + e^())</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">\"\"\"</span><br>model = LogisticRegression()<br><span class=\"hljs-string\">\"\"\"fit() 方法训练模型</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    X: 特征矩阵</span><br><span class=\"hljs-string\">    y: 目标变量</span><br><span class=\"hljs-string\">\"\"\"</span><br>model.fit(X_tr, y_tr)<br></code></pre></td></tr></tbody></table></figure></li>\n<li><p>模型评估</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 5. 模型评估</span><br><span class=\"hljs-string\">\"\"\"predict() 方法对测试集进行预测</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    X: 测试集特征数据</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    y_pred: 预测结果</span><br><span class=\"hljs-string\">\"\"\"</span><br><br><span class=\"hljs-comment\">## 1. 预测并统计结果</span><br>y_pred = model.predict(X_ts)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------模型评估------\"</span>)<br><span class=\"hljs-string\">\"\"\"value_counts() 方法统计变量的频数</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    Series: 统计结果</span><br><span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-built_in\">print</span>(pd.DataFrame(y_pred)[<span class=\"hljs-number\">0</span>].value_counts()) <span class=\"hljs-comment\"># 统计预测结果</span><br><br><span class=\"hljs-comment\">## 2. 查看混淆矩阵</span><br><span class=\"hljs-keyword\">from</span> sklearn.metrics <span class=\"hljs-keyword\">import</span> confusion_matrix<br><span class=\"hljs-string\">\"\"\"confusion_matrix() 方法计算混淆矩阵</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    y_true: 真实标签</span><br><span class=\"hljs-string\">    y_pred: 预测标签</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    array: 混淆矩阵</span><br><span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------查看混淆矩阵------\"</span>)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"真负|假正\"</span>)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"---------\"</span>)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"假负|真正\"</span>)<br><span class=\"hljs-built_in\">print</span>(confusion_matrix(y_ts, y_pred)) <span class=\"hljs-comment\"># 混淆矩阵</span><br><br><span class=\"hljs-comment\">## 3. 查看混淆矩阵相关评分</span><br><span class=\"hljs-keyword\">from</span> sklearn.metrics <span class=\"hljs-keyword\">import</span> classification_report<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------查看混淆矩阵相关评分------\"</span>)<br><span class=\"hljs-string\">\"\"\"classification_report() 方法查看混淆矩阵相关评分</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    y_true: 真实标签</span><br><span class=\"hljs-string\">    y_pred: 预测标签</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    str: 评分结果</span><br><span class=\"hljs-string\">- tip:</span><br><span class=\"hljs-string\">    - precision: 精确度，预测为正的样本中，有多少是真正的正样本 Precision = TP / (TP + FP)</span><br><span class=\"hljs-string\">    - recall: 召回率，有多少是真正的正样本被预测为正样本 Recall = TP / (TP + FN)</span><br><span class=\"hljs-string\">    - f1-score: F1分数，取精确度和召回率的调和平均值</span><br><span class=\"hljs-string\">    - support: 支持度，样本中正样本的个数</span><br><span class=\"hljs-string\">    </span><br><span class=\"hljs-string\">    - accuracy: 准确率，预测正确的样本个数占所有样本的百分比</span><br><span class=\"hljs-string\">    - macro avg: 宏平均，对每个类别的评分求平均（Precision, Recall, F1-score）</span><br><span class=\"hljs-string\">    - weighted avg: 微平均，对每个类别的评分求平均，并乘以支持度求和</span><br><span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-built_in\">print</span>(classification_report(y_ts, y_pred))<br></code></pre></td></tr></tbody></table></figure></li>\n<li><p>5折交叉验证</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\">## 4. 查看k折交叉验证计算准确率</span><br><span class=\"hljs-string\">\"\"\"k折交叉验证：</span><br><span class=\"hljs-string\">将数据集划分为K个大小相似的子集，</span><br><span class=\"hljs-string\">轮流使用其中K-1个子集作为训练集，</span><br><span class=\"hljs-string\">剩余1个子集作为验证集，</span><br><span class=\"hljs-string\">重复K次训练和验证过程。</span><br><span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-keyword\">from</span> sklearn.model_selection <span class=\"hljs-keyword\">import</span> cross_val_score<br><span class=\"hljs-string\">\"\"\"cross_val_score() 方法计算k折交叉验证的准确率</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    estimator: 模型</span><br><span class=\"hljs-string\">    X: 特征矩阵</span><br><span class=\"hljs-string\">    y: 目标变量</span><br><span class=\"hljs-string\">    cv: 交叉验证折数，通常为5或10</span><br><span class=\"hljs-string\">    scoring: 评分标准</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    array: 评分结果</span><br><span class=\"hljs-string\">\"\"\"</span><br>scores = cross_val_score(model, X, y, cv=<span class=\"hljs-number\">10</span>, scoring=<span class=\"hljs-string\">'accuracy'</span>)<br><span class=\"hljs-string\">\"\"\"mean() 方法计算平均值</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    float: 平均值</span><br><span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"------查看k折交叉验证计算准确率------\"</span>)<br><span class=\"hljs-built_in\">print</span>(scores.mean())<br></code></pre></td></tr></tbody></table></figure></li>\n</ol>\n</body></html>","excerpt":"","more":"<h1 id=\"机器学习\"><a href=\"#机器学习\" class=\"headerlink\" title=\"机器学习\"></a>机器学习</h1><h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><ul>\n<li><a href=\"#%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0\">机器学习</a><ul>\n<li><a href=\"#%E7%9B%AE%E5%BD%95\">目录</a></li>\n<li><a href=\"#%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92\">线性回归</a><ul>\n<li><a href=\"#%E4%B8%80%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92\">一元线性回归</a><ul>\n<li><a href=\"#%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3\">算法思想</a></li>\n<li><a href=\"#%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87\">评价指标</a></li>\n<li><a href=\"#python%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0\">python中的实现</a></li>\n<li><a href=\"#%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E8%A7%A3%E8%AF%BB\">输出结果解读</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%A4%9A%E9%A1%B9%E5%BC%8F%E5%9B%9E%E5%BD%92\">多项式回归</a><ul>\n<li><a href=\"#%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3-1\">算法思想</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%A4%9A%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92\">多元线性回归</a><ul>\n<li><a href=\"#%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3-2\">算法思想</a></li>\n<li><a href=\"#%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9\">模型选择</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1\">代码实现</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92\">逻辑回归</a><ul>\n<li><a href=\"#%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3-3\">算法思想</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2\">代码实现</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"线性回归\"><a href=\"#线性回归\" class=\"headerlink\" title=\"线性回归\"></a>线性回归</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<h3 id=\"一元线性回归\"><a href=\"#一元线性回归\" class=\"headerlink\" title=\"一元线性回归\"></a>一元线性回归</h3><h4 id=\"算法思想\"><a href=\"#算法思想\" class=\"headerlink\" title=\"算法思想\"></a>算法思想</h4><ol>\n<li>找到一条曲线 <strong>y &#x3D; wx + b</strong> ，使得能够根据自变量x 尽可能准确地预测因变量y</li>\n<li>模型最优解为<br>\n<p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?(w^*,%20b^*)%20=%20arg\\min_{i=0}^m%20(y_i%20-%20\\hat{y}_i)^2\"/></p></li>\n</ol>\n<p>即调整w和b使得预测误差平方和最小</p>\n<h4 id=\"评价指标\"><a href=\"#评价指标\" class=\"headerlink\" title=\"评价指标\"></a>评价指标</h4><ol>\n<li><p>均方误差：误差越小，模型预测效果越好<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?MSE%20=%20\\frac{1}{m}%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2\"/></p>  </p>\n</li>\n<li><p>均方根误差：误差越小，模型预测效果越好<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?RMSE%20=%20\\sqrt{MSE}%20=%20\\sqrt{\\frac{1}{m}%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2}\"/></p>  </p>\n</li>\n<li><p>回归平方和：衡量​​回归模型“解释”的因变量变异程度​​（即模型通过自变量预测后，预测值与均值的差异）<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SSR%20=%20\\sum_{i=1}^m%20(\\hat{y_i}%20-%20\\bar{y})^2\"/></p>  </p>\n</li>\n<li><p>残差平方和：衡量​​回归模型“未解释”的因变量变异程度​​（即预测值与实际值的误差）<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SSE%20=%20\\sum_{i=1}^m%20(y_i%20-%20\\hat{y}_i)^2\"/></p>  </p>\n</li>\n<li><p>总平方和：衡量​​因变量 y自身的总变异程度​​（即数据自然波动的大小）<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?SST%20=%20\\sum_{i=1}^m%20(y_i%20-%20\\bar{y})^2%20=%20SSE%20+%20SSR\"/></p>  </p>\n</li>\n<li><p>决定系数R^2^: 衡量​​回归模型对因变量变异的解释比例​​（取值范围 [0,1]）<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?R^2%20=%20\\frac{SSR}{SST}%20=%201%20-%20\\frac{SSE}{SST}\"/></p></p>\n</li>\n</ol>\n<p>实际中，R2越接近1，说明模型解释的变异越多，拟合效果越好<br><br></p>\n<ol start=\"7\">\n<li>调整后的决定系数R^2^<del>d</del>：在 R2基础上，​​惩罚“无意义的自变量加入”​​，更适合比较不同复杂度的模型<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?R^2_d%20=%201%20-%20\\frac{m-1}{m-d-1}%20\\cdot%20\\frac{SSE}{SST}\"/></p></li>\n</ol>\n<p>其中，m为样本量，d为自变量个数，本质是对自由度的惩罚</p>\n<h4 id=\"python中的实现\"><a href=\"#python中的实现\" class=\"headerlink\" title=\"python中的实现\"></a>python中的实现</h4><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<ol>\n<li>引入pandas模块，读取数据</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> pandas <span class=\"hljs-keyword\">as</span> pd<br>dataframe = pd.read_csv(<span class=\"hljs-string\">&#x27;data.csv&#x27;</span>)<br></code></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>参数说明</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>pandas.read_csv(filename)</code></td>\n<td>读取csv文件</td>\n<td>文件名或文件路径</td>\n<td>DataFrame</td>\n</tr>\n<tr>\n<td><code>dataframe.iloc[行索引器，列索引器]</code></td>\n<td>获取行和列</td>\n<td>行索引器(切片)：表示为 <code>start:stop</code> 即行的选择范围，当都为空时，默认选择所有行 <br> 列索引器(切片)：表示为 <code>start:stop</code> 即列的选择范围，当都为空时，默认选择所有列</td>\n<td>DataFrame</td>\n</tr>\n<tr>\n<td><code>dataframe.loc[行索引器，列索引器]</code></td>\n<td>获取行和列</td>\n<td>行索引器(切片)：表示为 <code>start:stop</code> 即行的选择范围，当都为空时，默认选择所有行 <br> 列索引器(切片)：表示为 <code>start:stop</code> 即列的选择范围，当都为空时，默认选择所有列</td>\n<td>DataFrame</td>\n</tr>\n</tbody></table>\n<ol start=\"2\">\n<li>引入matplotlib模块，绘制图像，其中散点图为pyplot模块中的scatter()方法</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> matplotlib.pyplot <span class=\"hljs-keyword\">as</span> plt<br><span class=\"hljs-comment\"># 绘制散点图</span><br>plt.scatter(dataframe[<span class=\"hljs-string\">&#x27;x&#x27;</span>], dataframe[<span class=\"hljs-string\">&#x27;y&#x27;</span>], color=<span class=\"hljs-string\">&#x27;red&#x27;</span>)<br><span class=\"hljs-comment\"># 显示图像</span><br>plt.show()<br></code></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>参数说明</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>matplotlib.pyplot.scatter()</code></td>\n<td>绘制数据点</td>\n<td>x: 数据点的横坐标列表<br> y: 数据点的纵坐标列表<br> s: 数据点的大小列表<br> c: 数据点的颜色列表<br> marker: 数据点的标记列表<br> cmap: 颜色映射对象<br> norm: 颜色映射对象<br> vmin: 颜色映射对象<br> vmax: 颜色映射对象<br> alpha: 数据点的透明度列表<br> linewidths: 数据点的线宽列表<br> verts: 数据点的标记列表<br> edgecolors: 数据点的边框颜色列表<br> plotnon</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>matplotlib.pyplot.show()</code></td>\n<td>显示图</td>\n<td>无</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>matplotlib.pyplot.figure()</code></td>\n<td>创建一个新图</td>\n<td>无</td>\n<td>无</td>\n</tr>\n</tbody></table>\n<ol start=\"3\">\n<li>引入statsmodels模块，增加截距项，进行数据预处理</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> statsmodels.api <span class=\"hljs-keyword\">as</span> sm<br><span class=\"hljs-comment\"># 增加截距项，即在原数据最右侧新增一列全为1的列&#x27;const&#x27;</span><br>df_const = sm.add_constant(dataframe)<br><span class=\"hljs-comment\"># 将数据集X和y分别提取出来</span><br>X = df_const.iloc[:, :-<span class=\"hljs-number\">1</span>] <span class=\"hljs-comment\"># 选取除了截距项的所有列作为自变量矩阵</span><br>y = df_const[<span class=\"hljs-string\">&#x27;y&#x27;</span>] <span class=\"hljs-comment\"># 提取因变量列作为因变量向量</span><br></code></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>描述</th>\n<th>参数说明</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>statsmodels.api.add_constant(dataframe)</code></td>\n<td>增加截距项，即在原数据最右侧新增一列全为1的列&#39;const&#39;</td>\n<td>dataframe</td>\n<td>增加截距项后的数据集dataframe</td>\n</tr>\n<tr>\n<td><code>statsmodels.api.OLS(y, X)</code></td>\n<td>建立OLS模型</td>\n<td>y: 因变量向量<br>X: 自变量矩阵</td>\n<td>OLS模型对象</td>\n</tr>\n<tr>\n<td><code>statsmodels.api.qqplot()</code></td>\n<td>绘制QQ图</td>\n<td>data（必选参数）:待检验的样本数据（一维数据）<br> dist（可选参数）:检验分布，默认为正态分布 <br>line（可选参数）: 绘制的参考线，默认为45度线 &#39;s&#39;：绘制标准化分位数的参考线（适用于非标准分布）&#39;r--&#39;：自定义直线样式（如红色虚线）<br> ax（可选参数）: 绘图对象 <br>kwargs（可选参数）:绘图参数</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>statsmodels.api.graphics.plot_regress_exog()</code></td>\n<td>绘制自变量和因变量的回归图</td>\n<td>model: OLS模型对象<br>exog_idx: 自变量索引<br>fig（可选参数）: 绘图对象<br>ax（可选参数）: 绘图对象<br>kwargs（可选参数）:绘图参数</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>model.fit()</code></td>\n<td>训练模型</td>\n<td>无</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>model.predict(X)</code></td>\n<td>预测</td>\n<td>X: 自变量矩阵</td>\n<td>预测结果向量</td>\n</tr>\n<tr>\n<td><code>model.summary()</code></td>\n<td>查看模型报告</td>\n<td>无</td>\n<td>无</td>\n</tr>\n</tbody></table>\n<ol start=\"4\">\n<li>建立OLS模型，并训练模型，得到训练结果</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 建立OLS模型，并训练模型</span><br>model = sm.OLS(y, X).fit()<br><span class=\"hljs-comment\"># 预测</span><br>y_pred = model.predict(X)<br><span class=\"hljs-comment\"># 查看模型报告</span><br>model.summary()<br></code></pre></td></tr></table></figure>\n<p>OLS即普通最小二乘法，即最小化残差平方和<br>实现步骤：</p>\n<ul>\n<li>RSS<br><img src=\"/../assert/machine_learining/1.png\" alt=\"RSS\"></li>\n<li>对所有的参数β求偏导<br><img src=\"/../assert/machine_learining/2.png\" alt=\"偏导\"></li>\n<li>令导数等于0，联立公式求解，得到所有的参数β<br><img src=\"/../assert/machine_learining/3.png\" alt=\"联立\"></li>\n<li>解方程组，得到参数β<br><img src=\"/../assert/machine_learining/4.png\" alt=\"求解\"></li>\n</ul>\n<ol start=\"5\">\n<li>绘制QQ图<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 绘制QQ图，用于检验残差是否服从正态分布</span><br>sm.qqplot(model.resid, line=<span class=\"hljs-string\">&#x27;r&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure></li>\n</ol>\n<ul>\n<li>理想情况（完全拟合）</li>\n</ul>\n<p>数据点​​严格沿参考线（如45°线）分布​​，说明样本分位数与理论分位数几乎一致，数据完全服从理论分布。</p>\n<ul>\n<li>轻微偏离（可接受）</li>\n</ul>\n<p>数据点整体沿参考线分布，但存在​​局部小幅偏离​​（如在尾部或中间位置有少量点偏离），可能是随机误差导致，通常认为数据近似服从理论分布。</p>\n<ul>\n<li>显著偏离（不拟合）</li>\n</ul>\n<p>数据点明显偏离参考线，呈现以下模式时，提示数据与理论分布存在显著差异：</p>\n<ul>\n<li>尾部偏离​​：数据点在两端（低分位数或高分位数）偏离参考线（如右偏数据的右尾上翘），说明数据存在厚尾或偏态；</li>\n<li>​整体偏移​​：数据点整体平行于参考线但不重合（如整体高于或低于参考线），说明数据分布的位置参数（如均值）与理论分布不同；</li>\n<li>​曲线偏离​​：数据点呈曲线形态偏离参考线，说明数据分布的形状参数（如方差、峰度）与理论分布不同。</li>\n</ul>\n<ol start=\"6\">\n<li>残差分析<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 残差分析</span><br>fig = plt.figure(figsize=(<span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">8</span>))<br><span class=\"hljs-comment\"># 绘制残差图</span><br>fig = sm.graphics.plot_regress_exog(model, <span class=\"hljs-string\">&#x27;x&#x27;</span>, fig=fig)<br></code></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"输出结果解读\"><a href=\"#输出结果解读\" class=\"headerlink\" title=\"输出结果解读\"></a>输出结果解读</h4><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Prob (F-statistic)</td>\n<td>模型F统计量的p值，用于判断整个回归模型是否显著。值越小（通常小于0.05），说明模型整体越显著，即至少有一个自变量对因变量有显著影响</td>\n</tr>\n<tr>\n<td>R-squared</td>\n<td>决定系数，表示模型能够解释的因变量总变异的比例。值越接近1，说明模型拟合效果越好</td>\n</tr>\n<tr>\n<td>Adj. R-squared</td>\n<td>调整后的决定系数，在R-squared基础上考虑了自变量个数的影响，惩罚了无意义的变量加入。值越接近1，模型越好，更适合用于比较不同复杂度的模型</td>\n</tr>\n<tr>\n<td>Skew</td>\n<td>残差分布的偏度，衡量残差分布的对称性。值越接近0，说明残差分布越对称，越接近正态分布。正值表示右偏，负值表示左偏。</td>\n</tr>\n<tr>\n<td>Kurtosis</td>\n<td>残差分布的峰度，衡量残差分布的尖锐程度。值越接近3（正态分布的峰度），说明残差分布越接近正态分布。大于3表示分布更尖锐，小于3表示分布更平坦</td>\n</tr>\n<tr>\n<td>P &gt; |t|</td>\n<td>每个回归系数的t检验p值，用于判断单个自变量是否对因变量有显著影响。值越小（通常小于0.05），说明该自变量对因变量的影响越显著</td>\n</tr>\n<tr>\n<td>coef</td>\n<td>回归系数，表示自变量对因变量的影响程度和方向。系数的绝对值越大，影响越强；系数为正表示正相关，为负表示负相关。</td>\n</tr>\n</tbody></table>\n<h3 id=\"多项式回归\"><a href=\"#多项式回归\" class=\"headerlink\" title=\"多项式回归\"></a>多项式回归</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4 id=\"算法思想-1\"><a href=\"#算法思想-1\" class=\"headerlink\" title=\"算法思想\"></a>算法思想</h4><p>若有一条抛物线隐藏在数据集中，那么在模型中引入二次项或许会得到更好的拟合效果</p>\n<h4 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h4><p>在<a href=\"#python%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0\">第三步</a>增加截距项那一步改进代码</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> statsmodels.api <span class=\"hljs-keyword\">as</span> sm<br><span class=\"hljs-comment\"># 增加二次项</span><br>df_const = sm.add_constant(dataframe)<br>df_const[<span class=\"hljs-string\">&#x27;x_2&#x27;</span>] = df_const[<span class=\"hljs-string\">&#x27;x&#x27;</span>] ** <span class=\"hljs-number\">2</span><br><span class=\"hljs-comment\"># 将数据集X和y分别提取出来 </span><br>X = df_const.loc[:, df_const.columns != <span class=\"hljs-string\">&#x27;y&#x27;</span>] <span class=\"hljs-comment\">#自变量</span><br>y = df_const.loc[:, df_const.columns == <span class=\"hljs-string\">&#x27;y&#x27;</span>] <span class=\"hljs-comment\">#因变量</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"多元线性回归\"><a href=\"#多元线性回归\" class=\"headerlink\" title=\"多元线性回归\"></a>多元线性回归</h3><h4 id=\"算法思想-2\"><a href=\"#算法思想-2\" class=\"headerlink\" title=\"算法思想\"></a>算法思想</h4><p>对于p值小于0.05的变量，我们可以认为它对于因变量具有显著影响，但我们无法排除其他因变量也有预测能力的可能，因此需考虑多个变量的组合对因变量的贡献。</p>\n<h4 id=\"模型选择\"><a href=\"#模型选择\" class=\"headerlink\" title=\"模型选择\"></a>模型选择</h4><ul>\n<li>AIC(Akaike Information Criterion,赤池信息准则)<ul>\n<li>定义: AIC是一种模型选择准则，用于在多个候选模型中选择最优模型</li>\n<li>计算公式: AIC &#x3D; 2k - 2ln(L) 其中k是模型参数个数，L是模型的最大似然值</li>\n<li>特点:AIC在模型拟合度和复杂度之间寻求平衡值越小表示模型越好，相比于只考虑拟合优度的指标，AIC引入了对模型复杂度的惩罚项</li>\n</ul>\n</li>\n<li>BIC(Bayesian Information Criterion,贝叶斯信息准则)<ul>\n<li>定义: BIC是另一种模型选择准则，基于贝叶斯理论</li>\n<li>计算公式: BIC &#x3D; k×ln(n) - 2ln(L)其中k是模型参数个数，n是样本量，L是模型的最大似然值</li>\n<li>特点:BIC对模型复杂度的惩罚比AIC更严格，当样本量较大时，BIC倾向于选择更简单的模型，值越小表示模型越好</li>\n</ul>\n</li>\n<li>区别<ul>\n<li>惩罚程度: BIC对复杂模型的惩罚更重，特别是当样本量较大时</li>\n<li>理论基础: AIC基于信息论，BIC基于贝叶斯理论</li>\n<li>模型选择倾向: AIC可能选择较复杂的模型，BIC倾向于选择较简单的模型</li>\n<li>一致性: BIC具有一致性，当样本量趋于无穷时能选出真实模型；AIC则不具备此性质</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"代码实现-1\"><a href=\"#代码实现-1\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h4><ul>\n<li>引入多元线性回归api<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">from</span> statsmodels.formula.api <span class=\"hljs-keyword\">import</span> ols<br></code></pre></td></tr></table></figure></li>\n<li>构建模型<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\">model = ols(<span class=\"hljs-string\">&#x27;y ~ x1 + x2 + x3 + ...&#x27;</span>, data=dataframe).fit()<br></code></pre></td></tr></table></figure></li>\n<li>模型输出<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\">model.summary()<br></code></pre></td></tr></table></figure></li>\n<li>注意事项：不同于前两种线性回归，多元线性回归无需在数据集中添加截距项</li>\n<li>交互项语法<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 完整写法</span><br>model = ols(<span class=\"hljs-string\">&#x27;y ~ x1 + x2 + x3 + x1:x2 + x1:x3 + x2:x3 + x1:x2:x3&#x27;</span>, data=dataframe).fit()<br><span class=\"hljs-comment\"># 等价简写形式</span><br>model = ols(<span class=\"hljs-string\">&#x27;y ~ x1 * x2 * x3&#x27;</span>, data=dataframe).fit()<br></code></pre></td></tr></table></figure></li>\n<li>多重共线性可以根据相关系数矩阵和方差膨胀因子(VIF)判断<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 相关系数矩阵</span><br><span class=\"hljs-string\">&quot;&quot;&quot;corr()</span><br><span class=\"hljs-string\">- args:</span><br><span class=\"hljs-string\">  method: 计算方式</span><br><span class=\"hljs-string\">    - &#x27;pearson&#x27;:皮尔逊相关系数(默认)</span><br><span class=\"hljs-string\">    - &#x27;kendall&#x27;:肯德尔相关系数</span><br><span class=\"hljs-string\">    - &#x27;spearman&#x27;:斯皮尔曼相关系数</span><br><span class=\"hljs-string\">  min_periods: 最小样本数，默认为5</span><br><span class=\"hljs-string\">- return:</span><br><span class=\"hljs-string\">  返回一个DataFrame对象，包含相关系数矩阵</span><br><span class=\"hljs-string\">    相关系数值范围为[-1, 1]</span><br><span class=\"hljs-string\">      1: 完全正相关</span><br><span class=\"hljs-string\">      0: 无线性相关</span><br><span class=\"hljs-string\">      -1: 完全负相关</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>corr = dataframe.corr()<br><span class=\"hljs-comment\"># 方差膨胀因子</span><br><span class=\"hljs-keyword\">import</span> statsmodels.stats.outliers_influence <span class=\"hljs-keyword\">as</span> oi<br><span class=\"hljs-string\">&quot;&quot;&quot;variance_inflation_factor()</span><br><span class=\"hljs-string\">- args:</span><br><span class=\"hljs-string\">  exog: 输入矩阵</span><br><span class=\"hljs-string\">  exog_idx: 输入矩阵的列索引</span><br><span class=\"hljs-string\">- tips:</span><br><span class=\"hljs-string\">  一般来说，VIF大于4，即认为存在多重共线性。</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>vif = oi.variance_inflation_factor()<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"逻辑回归\"><a href=\"#逻辑回归\" class=\"headerlink\" title=\"逻辑回归\"></a>逻辑回归</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a><br>逻辑回归是一种二元分类模型，用于判断一个样本属于某一类别的概率。</p>\n<h3 id=\"算法思想-3\"><a href=\"#算法思想-3\" class=\"headerlink\" title=\"算法思想\"></a>算法思想</h3><p>通过找到一条直线能够尽可能将不同类别分开</p>\n<ul>\n<li><p>线性回归预测函数</p>\n<p><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?y = w^T x + b\"/></p><br> </p>\n</li>\n<li><p>期望的逻辑回归预测函数 即y取值为1的概率<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?prob(y = 1) = w^T x + b\"/></p> <br></p>\n</li>\n<li><p>这个式子存在等式左侧值域为[0, 1] 而等式右侧的值域为(-∞, ∞)</p>\n</li>\n<li><p>为了解决这个问题，我们可以将等式右侧的值域映射到[0, 1]，即<strong>Sigmoid</strong>函数</p>\n<p><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\sigma(t) = \\frac{1}{1 + e^{-t}}\"/></p> <br></p>\n<p>或者，可以将等式左侧值域映射到(-∞, ∞)，即<strong>Logit</strong>函数</p>\n<p><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?odds = \\frac{p}{1 - p}\"/></p> <br></p>\n<p><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?log(odds)\"/></p> <br></p>\n</li>\n<li><p>引入代价函数来量化预测值和真实值的差距，其中h(x)为预测值，y为真实值</p>\n<p><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\text{Cost }(h(x),y) = \\begin{cases} -\\log(h(x)) & \\text{if } y = 1 \\\\ -\\log(1 - h(x)) & \\text{if } y = 0 \\end{cases}\"/></p> <br></p>\n<p><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?Cost(h(x), y)= -ylog(h(x)) - (1 - y)log(1 - h(x))\"/></p> <br></p>\n<p><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\begin{align}J(w) &= \\frac{1}{m} \\sum_{i=1}^{m} \\text{Cost}(h_w(x_i), y_i) \\\\ &= -\\frac{1}{m} \\left[ \\sum_{i=1}^{m} y_i \\log h_w(x_i) + (1 - y_i) \\log(1 - h_w(x_i)) \\right] \\end{align}\"/></p> <br></p>\n</li>\n<li><p>拟合参数<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?\\min_{w} J(w)\"/></p> <br></p>\n</li>\n<li><p>梯度下降法，不断重复以下步骤<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?w_{j}:=w_{j}-\\alpha\\frac{\\partial J(w)}{\\partial w_{j}}\"/></p> <br></p>\n<p><strong>w_j</strong>：表示第 j 个模型参数（权重）<br><strong>α</strong>：学习率（Learning Rate），控制每次更新的步长<br><strong>∂J(w)&#x2F;∂w_j</strong>：损失函数 J(w) 对参数 w_j 的偏导数，表示在当前点处损失函数的变化率</p>\n<p>当梯度下降法收敛时，损失函数 J(w) 的值会最小化，即 J(w) 的导数等于 0</p>\n<br>\n</li>\n<li><p>预测新样本<br><br><p align=\"center\"><img src=\"https://latex.codecogs.com/svg.latex?h_w(x) = \\frac{1}{1 + e^{-w^Tx}}\"/></p></p>\n</li>\n</ul>\n<h3 id=\"代码实现-2\"><a href=\"#代码实现-2\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><ol>\n<li><p>读取数据<br>  <a href=\"../dataset/banking_partial.csv\">banding_partial.csv数据集</a></p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> pandas <span class=\"hljs-keyword\">as</span> pd<br><br><span class=\"hljs-comment\"># 1. 读取数据</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------读取数据------&quot;</span>)<br>data = pd.read_csv(<span class=\"hljs-string\">&quot;./banking_partial.csv&quot;</span>, header=<span class=\"hljs-number\">0</span>)  <span class=\"hljs-comment\"># header=0表示第一行是列名</span><br>data.dropna()  <span class=\"hljs-comment\"># dropna() 方法删除数据中的空值</span><br><span class=\"hljs-built_in\">print</span>(data.shape)  <span class=\"hljs-comment\"># 查看数据集的行数和列数 返回(行数,列数)</span><br></code></pre></td></tr></table></figure>\n</li>\n<li><p>描述性分析与可视化分析</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 2. 描述性分析与可视化分析</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------描述性分析------&quot;</span>)<br><span class=\"hljs-built_in\">print</span>(data.sample(<span class=\"hljs-number\">5</span>)) <span class=\"hljs-comment\"># 查看数据集的前5行</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------数据基本信息------&quot;</span>)<br><span class=\"hljs-built_in\">print</span>(data.info()) <span class=\"hljs-comment\"># 查看每个列的数据类型和缺失值个数</span><br><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------数据可视化------&quot;</span>)<br><span class=\"hljs-keyword\">import</span> seaborn <span class=\"hljs-keyword\">as</span> sns<br><span class=\"hljs-keyword\">import</span> matplotlib.pyplot <span class=\"hljs-keyword\">as</span> plt<br><span class=\"hljs-string\">&quot;&quot;&quot;figure() 方法设置绘图窗口</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    figsize: 绘图窗口的尺寸，参数为宽和高，单位为英寸</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>plt.figure(figsize=(<span class=\"hljs-number\">32</span>, <span class=\"hljs-number\">10</span>)) <span class=\"hljs-comment\"># figure() 方法设置绘图窗口，并设置绘图窗口的尺寸，参数为宽和高，单位为英寸</span><br><span class=\"hljs-string\">&quot;&quot;&quot;subplot() 方法创建子图，参数为行数，列数，子图编号</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    nrows: 行数</span><br><span class=\"hljs-string\">    ncols: 列数</span><br><span class=\"hljs-string\">    index: 子图编号</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>plt.subplot(<span class=\"hljs-number\">241</span>) <span class=\"hljs-comment\"># 创建子图 241</span><br><span class=\"hljs-string\">&quot;&quot;&quot;countplot() 绘制分类变量的频数统计图</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    data: DataFrame 数据集</span><br><span class=\"hljs-string\">    x: 指定在 x 轴上显示的分类变量</span><br><span class=\"hljs-string\">    y: 指定在 y 轴上显示的分类变量（可选，与 x 互斥）</span><br><span class=\"hljs-string\">    hue: 分组变量，用不同颜色区分子组</span><br><span class=\"hljs-string\">    palette: 调色板，控制颜色方案</span><br><span class=\"hljs-string\">    order: 指定类别显示顺序</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>sns.countplot(x = <span class=\"hljs-string\">&#x27;y&#x27;</span>, data = data, hue=<span class=\"hljs-string\">&#x27;y&#x27;</span>, palette=<span class=\"hljs-string\">&#x27;hls&#x27;</span>) <span class=\"hljs-comment\"># 绘制分类变量的频数统计图</span><br><br>plt.subplot(<span class=\"hljs-number\">242</span>) <span class=\"hljs-comment\"># 创建子图 242</span><br>sns.countplot(x = <span class=\"hljs-string\">&#x27;job&#x27;</span>, data = data)<br><br>plt.subplot(<span class=\"hljs-number\">243</span>)<br>sns.countplot(x = <span class=\"hljs-string\">&#x27;marital&#x27;</span>, data=data)<br><br>plt.subplot(<span class=\"hljs-number\">244</span>)<br>sns.countplot(x=<span class=\"hljs-string\">&#x27;default&#x27;</span>, data=data)<br><br>plt.subplot(<span class=\"hljs-number\">245</span>)<br>sns.countplot(x=<span class=\"hljs-string\">&#x27;housing&#x27;</span>, data=data)<br><br>plt.subplot(<span class=\"hljs-number\">246</span>)<br>sns.countplot(x=<span class=\"hljs-string\">&#x27;loan&#x27;</span>, data=data)<br><br>plt.subplot(<span class=\"hljs-number\">247</span>)<br>sns.countplot(x=<span class=\"hljs-string\">&#x27;poutcome&#x27;</span>, data=data)<br></code></pre></td></tr></table></figure></li>\n<li><p>数据预处理</p>\n</li>\n<li><p>注意将离散变量拆分成单独的特征，即转化为哑变量<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 3. 数据预处理</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------数据预处理------&quot;</span>)<br><span class=\"hljs-comment\">## 1. 离散变量转换为哑变量</span><br><span class=\"hljs-string\">&quot;&quot;&quot;get_dummies() 方法将分类变量转换为哑变量</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    data: DataFrame 数据集</span><br><span class=\"hljs-string\">    columns: 指定需要转换的列</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>data_dummies = pd.get_dummies(data, columns=[<span class=\"hljs-string\">&#x27;job&#x27;</span>, <span class=\"hljs-string\">&#x27;marital&#x27;</span>, <span class=\"hljs-string\">&#x27;default&#x27;</span>,  <span class=\"hljs-string\">&#x27;housing&#x27;</span>, <span class=\"hljs-string\">&#x27;loan&#x27;</span>,  <span class=\"hljs-string\">&#x27;poutcome&#x27;</span>])<br><span class=\"hljs-built_in\">print</span>(data_dummies.columns) <span class=\"hljs-comment\"># 查看哑变量的列名</span><br><br><span class=\"hljs-comment\">## 2. 查看哑变量结构</span><br><span class=\"hljs-string\">&quot;&quot;&quot;sample() 方法从数据集随机抽取指定数量的样本</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    n: 指定要抽取的样本数量</span><br><span class=\"hljs-string\">    random_state: 指定随机数种子，保证每次运行结果一致</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;-----查看哑变量结构------&quot;</span>)<br><span class=\"hljs-built_in\">print</span>(data_dummies[[<span class=\"hljs-string\">&#x27;loan_no&#x27;</span>,<span class=\"hljs-string\">&#x27;loan_unknown&#x27;</span>,<span class=\"hljs-string\">&#x27;loan_yes&#x27;</span>]].sample(<span class=\"hljs-number\">5</span>, random_state=<span class=\"hljs-number\">42</span>))<br></code></pre></td></tr></table></figure></p>\n</li>\n<li><p>划分自变量和因变量</p>\n</li>\n<li><p>划分训练集与测试集<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\">## 3. 划分自变量和因变量</span><br>X = data_dummies.iloc[: , <span class=\"hljs-number\">1</span>: ] <span class=\"hljs-comment\"># 自变量，第二列到最后列</span><br>y = data_dummies.iloc[: , <span class=\"hljs-number\">1</span>] <span class=\"hljs-comment\"># 因变量，第一列</span><br><span class=\"hljs-comment\">## 4. 划分训练集和测试集</span><br><span class=\"hljs-keyword\">from</span> sklearn.model_selection <span class=\"hljs-keyword\">import</span> train_test_split <span class=\"hljs-keyword\">as</span> tts<br><span class=\"hljs-string\">&quot;&quot;&quot;train_test_split() 方法划分训练集和测试集</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    *arrays: 要分割的数据数组（通常是特征矩阵 X 和目标变量 y）</span><br><span class=\"hljs-string\">    test_size: 测试集所占比例（0-1之间）或样本数量</span><br><span class=\"hljs-string\">    train_size: 训练集所占比例（0-1之间）或样本数量</span><br><span class=\"hljs-string\">    random_state: 随机种子，确保结果可重现</span><br><span class=\"hljs-string\">    shuffle: 是否在分割前打乱数据（默认为 True）</span><br><span class=\"hljs-string\">    stratify: 分层抽样，保持各类别在训练集和测试集中的比例一致</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    X_train: 训练集特征数据</span><br><span class=\"hljs-string\">    X_test: 测试集特征数据</span><br><span class=\"hljs-string\">    y_train: 训练集目标变量</span><br><span class=\"hljs-string\">    y_test: 测试集目标变量</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>X_tr, X_ts, y_tr, y_ts = tts(X, y, test_size=<span class=\"hljs-number\">0.2</span>) <span class=\"hljs-comment\"># X_tr为训练集自变量，X_ts为测试集自变量， y_tr为训练集因变量，y_ts为测试集因变量</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------查看训练集和测试集的维度------&quot;</span>)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;训练集的维度：<span class=\"hljs-subst\">&#123;X_tr.shape&#125;</span>，<span class=\"hljs-subst\">&#123;y_tr.shape&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure></p>\n</li>\n<li><p>建立模型</p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 4. 建立模型</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------建立模型------&quot;</span>)<br><span class=\"hljs-keyword\">from</span> sklearn.linear_model <span class=\"hljs-keyword\">import</span> LogisticRegression<br><span class=\"hljs-string\">&quot;&quot;&quot;LogisticRegression() 方法创建逻辑回归模型</span><br><span class=\"hljs-string\">逻辑回归模型：</span><br><span class=\"hljs-string\">    - 使用线性回归模型计算输入特征的线性组合：</span><br><span class=\"hljs-string\">        y = w0 + w1*x1 + w2*x2 + ... + wn*xn</span><br><span class=\"hljs-string\">    - 将线性组合结果通过Sigmoid函数（逻辑函数）转换为概率值：</span><br><span class=\"hljs-string\">        y = 1 / (1 + e^(-y))</span><br><span class=\"hljs-string\">    - 根据概率阈值（通常为0.5）进行分类决策</span><br><span class=\"hljs-string\">    </span><br><span class=\"hljs-string\">    y = 预测结果</span><br><span class=\"hljs-string\">    w0, w1, w2, ..., wn = 模型参数</span><br><span class=\"hljs-string\">    x1, x2, ..., xn = 特征变量</span><br><span class=\"hljs-string\">    e = 2.71828</span><br><span class=\"hljs-string\">    e^(-y) = 1 / (1 + e^())</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>model = LogisticRegression()<br><span class=\"hljs-string\">&quot;&quot;&quot;fit() 方法训练模型</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    X: 特征矩阵</span><br><span class=\"hljs-string\">    y: 目标变量</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>model.fit(X_tr, y_tr)<br></code></pre></td></tr></table></figure></li>\n<li><p>模型评估</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 5. 模型评估</span><br><span class=\"hljs-string\">&quot;&quot;&quot;predict() 方法对测试集进行预测</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    X: 测试集特征数据</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    y_pred: 预测结果</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br><br><span class=\"hljs-comment\">## 1. 预测并统计结果</span><br>y_pred = model.predict(X_ts)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------模型评估------&quot;</span>)<br><span class=\"hljs-string\">&quot;&quot;&quot;value_counts() 方法统计变量的频数</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    Series: 统计结果</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-built_in\">print</span>(pd.DataFrame(y_pred)[<span class=\"hljs-number\">0</span>].value_counts()) <span class=\"hljs-comment\"># 统计预测结果</span><br><br><span class=\"hljs-comment\">## 2. 查看混淆矩阵</span><br><span class=\"hljs-keyword\">from</span> sklearn.metrics <span class=\"hljs-keyword\">import</span> confusion_matrix<br><span class=\"hljs-string\">&quot;&quot;&quot;confusion_matrix() 方法计算混淆矩阵</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    y_true: 真实标签</span><br><span class=\"hljs-string\">    y_pred: 预测标签</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    array: 混淆矩阵</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------查看混淆矩阵------&quot;</span>)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;真负|假正&quot;</span>)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;---------&quot;</span>)<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;假负|真正&quot;</span>)<br><span class=\"hljs-built_in\">print</span>(confusion_matrix(y_ts, y_pred)) <span class=\"hljs-comment\"># 混淆矩阵</span><br><br><span class=\"hljs-comment\">## 3. 查看混淆矩阵相关评分</span><br><span class=\"hljs-keyword\">from</span> sklearn.metrics <span class=\"hljs-keyword\">import</span> classification_report<br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------查看混淆矩阵相关评分------&quot;</span>)<br><span class=\"hljs-string\">&quot;&quot;&quot;classification_report() 方法查看混淆矩阵相关评分</span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    y_true: 真实标签</span><br><span class=\"hljs-string\">    y_pred: 预测标签</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    str: 评分结果</span><br><span class=\"hljs-string\">- tip:</span><br><span class=\"hljs-string\">    - precision: 精确度，预测为正的样本中，有多少是真正的正样本 Precision = TP / (TP + FP)</span><br><span class=\"hljs-string\">    - recall: 召回率，有多少是真正的正样本被预测为正样本 Recall = TP / (TP + FN)</span><br><span class=\"hljs-string\">    - f1-score: F1分数，取精确度和召回率的调和平均值</span><br><span class=\"hljs-string\">    - support: 支持度，样本中正样本的个数</span><br><span class=\"hljs-string\">    </span><br><span class=\"hljs-string\">    - accuracy: 准确率，预测正确的样本个数占所有样本的百分比</span><br><span class=\"hljs-string\">    - macro avg: 宏平均，对每个类别的评分求平均（Precision, Recall, F1-score）</span><br><span class=\"hljs-string\">    - weighted avg: 微平均，对每个类别的评分求平均，并乘以支持度求和</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-built_in\">print</span>(classification_report(y_ts, y_pred))<br></code></pre></td></tr></table></figure></li>\n<li><p>5折交叉验证</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\">## 4. 查看k折交叉验证计算准确率</span><br><span class=\"hljs-string\">&quot;&quot;&quot;k折交叉验证：</span><br><span class=\"hljs-string\">将数据集划分为K个大小相似的子集，</span><br><span class=\"hljs-string\">轮流使用其中K-1个子集作为训练集，</span><br><span class=\"hljs-string\">剩余1个子集作为验证集，</span><br><span class=\"hljs-string\">重复K次训练和验证过程。</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-keyword\">from</span> sklearn.model_selection <span class=\"hljs-keyword\">import</span> cross_val_score<br><span class=\"hljs-string\">&quot;&quot;&quot;cross_val_score() 方法计算k折交叉验证的准确率</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">- args: </span><br><span class=\"hljs-string\">    estimator: 模型</span><br><span class=\"hljs-string\">    X: 特征矩阵</span><br><span class=\"hljs-string\">    y: 目标变量</span><br><span class=\"hljs-string\">    cv: 交叉验证折数，通常为5或10</span><br><span class=\"hljs-string\">    scoring: 评分标准</span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    array: 评分结果</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br>scores = cross_val_score(model, X, y, cv=<span class=\"hljs-number\">10</span>, scoring=<span class=\"hljs-string\">&#x27;accuracy&#x27;</span>)<br><span class=\"hljs-string\">&quot;&quot;&quot;mean() 方法计算平均值</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">- return: </span><br><span class=\"hljs-string\">    float: 平均值</span><br><span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;------查看k折交叉验证计算准确率------&quot;</span>)<br><span class=\"hljs-built_in\">print</span>(scores.mean())<br></code></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"二分法查找","date":"2025-09-14T08:32:00.000Z","_content":"\n# 二分法查找\n\n## 题目描述\n在排序数组中查找元素的第一个和最后一个位置\n\n给你一个按照非递减顺序排列的整数数组 nums，和一个目标值 target。请你找出给定目标值在数组中的开始位置和结束位置。\n\n如果数组中不存在目标值 target，返回 [-1, -1]。\n\n你必须设计并实现时间复杂度为 O(log n) 的算法解决此问题。\n\n \n\n示例 1：\n\n输入：nums = [5,7,7,8,8,10], target = 8\n输出：[3,4]\n\n示例 2：\n\n输入：nums = [5,7,7,8,8,10], target = 6\n输出：[-1,-1]\n\n示例 3：\n\n输入：nums = [], target = 0\n输出：[-1,-1]\n\n### 思路\n1. 我们可以用二分法查找来降低时间复杂度\n2. 二分查找的三种思路：\n   1. 闭区间：[left, right]\n   初始值：\n       * left = 0, right = n - 1\n       * mid = (left + right) // 2\n   * 当 left <= right 时，循环执行\n   * 若 nums[mid] < target: left = mid + 1\n   否则 right = mid - 1\n   * 这样，循环结束后，若target在数组中，则left在right + 1的位置，当num[mid] == target时，执行 right = mid - 1,而target值索引即为left，故最开始出现的位置为left\n   * 因此返回值left\n    ~~~python\n    def lower_bound(nums: List[int], target: int) -> int:\n        \"\"\"\n        二分法查找某数字最早出现的位置\n        \"\"\"\n        l = 0\n        r = len(nums) - 1\n        while l <= r: # 闭区间[l, r]\n            m = (l + r) // 2\n            if nums[m] < target:\n                l = m + 1 # [m + 1, r]\n            else:\n                r = m - 1 # [l, m - 1]\n        return l # 若没有则会停在-1或len(nums)\n    ~~~\n   2. 左闭右开区间：[left, right)\n    初始值：\n      * left = 0, right = n\n      * mid = (left + right) // 2\n   * 当 left < right 时，循环执行\n   * 若 nums[mid] < target: left = mid + 1\n    否则 right = mid\n   * 这样，循环结束后，若target在数组中，则left在right的位置\n   * 因此返回值left和right都可以\n    ~~~python\n    def lower_bound(nums: List[int], target: int) -> int:\n        l = 0\n        r = len(nums)\n        while l < r: # 左闭右开区间[l, r)\n            m = (l + r) // 2\n            if nums[m] < target:\n                l = m + 1 # [m + 1, r)\n            else:\n                r = m # [l, m)\n        return l # r\n    ~~~\n   3. 开区间：(left, right)\n    初始值：\n      * left = -1, right = n\n      * mid = (left + right) // 2\n   * 当 left + 1 < right 时，循环执行\n   * 若 nums[mid] < target: left = mid\n   * 否则 right = mid\n   * 这样，循环结束后，若target在数组中，则left在right - 1的位置，当num[mid] == target时，执行 right = mid,而target值索引即为right，故最开始出现的位置为right\n   * 因此返回值right\n    ~~~python\n    def lower_bound(nums: List[int], target: int) -> int:\n        l = -1\n        r = len(nums)\n        while l + 1 < r: # 开区间(l, r)\n            m = (l + r) // 2\n            if nums[m] < target:\n                l = m # (m, r)\n            else:\n                r = m # (l, m)\n        return r\n    ~~~\n3. 通过这三种思路，我们可以得到target最开始的位置，我们只需要再调用一次函数，将target + 1作为参数，返回值-1即为target最后出现的位置\n \n ### 代码实现\n ~~~python\n class Solution:\n    # 调用上述任意一种算法\n    def searchRange(self, nums: List[int], target: int) -> List[int]:\n        start = lower_bound(nums, target)\n        if start == len(nums) or nums[start] != target:\n            return [-1,-1]\n        end = lower_bound(nums, target + 1) - 1\n        return [start,end]\n~~~\n\n### 复杂度分析\n时间复杂度：**O(log n)** 空间复杂度：**O(1)**\n  \n","source":"_posts/binarySearch.md","raw":"---\ntitle: \"二分法查找\"\ndate: 2025/09/14 16:32:00\ntags: \n    - 算法\n    - 二分法\ncategories:\n    - 算法笔记\n---\n\n# 二分法查找\n\n## 题目描述\n在排序数组中查找元素的第一个和最后一个位置\n\n给你一个按照非递减顺序排列的整数数组 nums，和一个目标值 target。请你找出给定目标值在数组中的开始位置和结束位置。\n\n如果数组中不存在目标值 target，返回 [-1, -1]。\n\n你必须设计并实现时间复杂度为 O(log n) 的算法解决此问题。\n\n \n\n示例 1：\n\n输入：nums = [5,7,7,8,8,10], target = 8\n输出：[3,4]\n\n示例 2：\n\n输入：nums = [5,7,7,8,8,10], target = 6\n输出：[-1,-1]\n\n示例 3：\n\n输入：nums = [], target = 0\n输出：[-1,-1]\n\n### 思路\n1. 我们可以用二分法查找来降低时间复杂度\n2. 二分查找的三种思路：\n   1. 闭区间：[left, right]\n   初始值：\n       * left = 0, right = n - 1\n       * mid = (left + right) // 2\n   * 当 left <= right 时，循环执行\n   * 若 nums[mid] < target: left = mid + 1\n   否则 right = mid - 1\n   * 这样，循环结束后，若target在数组中，则left在right + 1的位置，当num[mid] == target时，执行 right = mid - 1,而target值索引即为left，故最开始出现的位置为left\n   * 因此返回值left\n    ~~~python\n    def lower_bound(nums: List[int], target: int) -> int:\n        \"\"\"\n        二分法查找某数字最早出现的位置\n        \"\"\"\n        l = 0\n        r = len(nums) - 1\n        while l <= r: # 闭区间[l, r]\n            m = (l + r) // 2\n            if nums[m] < target:\n                l = m + 1 # [m + 1, r]\n            else:\n                r = m - 1 # [l, m - 1]\n        return l # 若没有则会停在-1或len(nums)\n    ~~~\n   2. 左闭右开区间：[left, right)\n    初始值：\n      * left = 0, right = n\n      * mid = (left + right) // 2\n   * 当 left < right 时，循环执行\n   * 若 nums[mid] < target: left = mid + 1\n    否则 right = mid\n   * 这样，循环结束后，若target在数组中，则left在right的位置\n   * 因此返回值left和right都可以\n    ~~~python\n    def lower_bound(nums: List[int], target: int) -> int:\n        l = 0\n        r = len(nums)\n        while l < r: # 左闭右开区间[l, r)\n            m = (l + r) // 2\n            if nums[m] < target:\n                l = m + 1 # [m + 1, r)\n            else:\n                r = m # [l, m)\n        return l # r\n    ~~~\n   3. 开区间：(left, right)\n    初始值：\n      * left = -1, right = n\n      * mid = (left + right) // 2\n   * 当 left + 1 < right 时，循环执行\n   * 若 nums[mid] < target: left = mid\n   * 否则 right = mid\n   * 这样，循环结束后，若target在数组中，则left在right - 1的位置，当num[mid] == target时，执行 right = mid,而target值索引即为right，故最开始出现的位置为right\n   * 因此返回值right\n    ~~~python\n    def lower_bound(nums: List[int], target: int) -> int:\n        l = -1\n        r = len(nums)\n        while l + 1 < r: # 开区间(l, r)\n            m = (l + r) // 2\n            if nums[m] < target:\n                l = m # (m, r)\n            else:\n                r = m # (l, m)\n        return r\n    ~~~\n3. 通过这三种思路，我们可以得到target最开始的位置，我们只需要再调用一次函数，将target + 1作为参数，返回值-1即为target最后出现的位置\n \n ### 代码实现\n ~~~python\n class Solution:\n    # 调用上述任意一种算法\n    def searchRange(self, nums: List[int], target: int) -> List[int]:\n        start = lower_bound(nums, target)\n        if start == len(nums) or nums[start] != target:\n            return [-1,-1]\n        end = lower_bound(nums, target + 1) - 1\n        return [start,end]\n~~~\n\n### 复杂度分析\n时间复杂度：**O(log n)** 空间复杂度：**O(1)**\n  \n","slug":"binarySearch","published":1,"updated":"2025-10-22T05:43:50.194Z","_id":"cmfwpff400002t8tl42079fks","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h1><span id=\"%E4%BA%8C%E5%88%86%E6%B3%95%E6%9F%A5%E6%89%BE\">二分法查找</span></h1><h2><span id=\"%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0\">题目描述</span></h2><p>在排序数组中查找元素的第一个和最后一个位置</p>\n<p>给你一个按照非递减顺序排列的整数数组 nums，和一个目标值 target。请你找出给定目标值在数组中的开始位置和结束位置。</p>\n<p>如果数组中不存在目标值 target，返回 [-1, -1]。</p>\n<p>你必须设计并实现时间复杂度为 O(log n) 的算法解决此问题。</p>\n<p>示例 1：</p>\n<p>输入：nums = [5,7,7,8,8,10], target = 8<br>输出：[3,4]</p>\n<p>示例 2：</p>\n<p>输入：nums = [5,7,7,8,8,10], target = 6<br>输出：[-1,-1]</p>\n<p>示例 3：</p>\n<p>输入：nums = [], target = 0<br>输出：[-1,-1]</p>\n<h3><span id=\"%E6%80%9D%E8%B7%AF\">思路</span></h3><ol>\n<li>我们可以用二分法查找来降低时间复杂度</li>\n<li>二分查找的三种思路：<ol>\n<li>闭区间：[left, right]<br>初始值：<ul>\n<li>left = 0, right = n - 1</li>\n<li>mid = (left + right) // 2</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>当 left &lt;= right 时，循环执行</li>\n<li>若 nums[mid] &lt; target: left = mid + 1<br>否则 right = mid - 1</li>\n<li>这样，循环结束后，若target在数组中，则left在right + 1的位置，当num[mid] == target时，执行 right = mid - 1,而target值索引即为left，故最开始出现的位置为left</li>\n<li>因此返回值left <figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">lower_bound</span>(<span class=\"hljs-params\">nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], target: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>    <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">    二分法查找某数字最早出现的位置</span><br><span class=\"hljs-string\">    \"\"\"</span><br>    l = <span class=\"hljs-number\">0</span><br>    r = <span class=\"hljs-built_in\">len</span>(nums) - <span class=\"hljs-number\">1</span><br>    <span class=\"hljs-keyword\">while</span> l &lt;= r: <span class=\"hljs-comment\"># 闭区间[l, r]</span><br>        m = (l + r) // <span class=\"hljs-number\">2</span><br>        <span class=\"hljs-keyword\">if</span> nums[m] &lt; target:<br>            l = m + <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\"># [m + 1, r]</span><br>        <span class=\"hljs-keyword\">else</span>:<br>            r = m - <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\"># [l, m - 1]</span><br>    <span class=\"hljs-keyword\">return</span> l <span class=\"hljs-comment\"># 若没有则会停在-1或len(nums)</span><br></code></pre></td></tr></tbody></table></figure></li>\n</ul>\n<ol start=\"2\">\n<li>左闭右开区间：[left, right)<br> 初始值：<ul>\n<li>left = 0, right = n</li>\n<li>mid = (left + right) // 2</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>当 left &lt; right 时，循环执行</li>\n<li>若 nums[mid] &lt; target: left = mid + 1<br> 否则 right = mid</li>\n<li>这样，循环结束后，若target在数组中，则left在right的位置</li>\n<li>因此返回值left和right都可以 <figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">lower_bound</span>(<span class=\"hljs-params\">nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], target: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>    l = <span class=\"hljs-number\">0</span><br>    r = <span class=\"hljs-built_in\">len</span>(nums)<br>    <span class=\"hljs-keyword\">while</span> l &lt; r: <span class=\"hljs-comment\"># 左闭右开区间[l, r)</span><br>        m = (l + r) // <span class=\"hljs-number\">2</span><br>        <span class=\"hljs-keyword\">if</span> nums[m] &lt; target:<br>            l = m + <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\"># [m + 1, r)</span><br>        <span class=\"hljs-keyword\">else</span>:<br>            r = m <span class=\"hljs-comment\"># [l, m)</span><br>    <span class=\"hljs-keyword\">return</span> l <span class=\"hljs-comment\"># r</span><br></code></pre></td></tr></tbody></table></figure></li>\n</ul>\n<ol start=\"3\">\n<li>开区间：(left, right)<br> 初始值：<ul>\n<li>left = -1, right = n</li>\n<li>mid = (left + right) // 2</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>当 left + 1 &lt; right 时，循环执行</li>\n<li>若 nums[mid] &lt; target: left = mid</li>\n<li>否则 right = mid</li>\n<li>这样，循环结束后，若target在数组中，则left在right - 1的位置，当num[mid] == target时，执行 right = mid,而target值索引即为right，故最开始出现的位置为right</li>\n<li>因此返回值right <figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">lower_bound</span>(<span class=\"hljs-params\">nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], target: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>    l = -<span class=\"hljs-number\">1</span><br>    r = <span class=\"hljs-built_in\">len</span>(nums)<br>    <span class=\"hljs-keyword\">while</span> l + <span class=\"hljs-number\">1</span> &lt; r: <span class=\"hljs-comment\"># 开区间(l, r)</span><br>        m = (l + r) // <span class=\"hljs-number\">2</span><br>        <span class=\"hljs-keyword\">if</span> nums[m] &lt; target:<br>            l = m <span class=\"hljs-comment\"># (m, r)</span><br>        <span class=\"hljs-keyword\">else</span>:<br>            r = m <span class=\"hljs-comment\"># (l, m)</span><br>    <span class=\"hljs-keyword\">return</span> r<br></code></pre></td></tr></tbody></table></figure></li>\n</ul>\n</li>\n<li>通过这三种思路，我们可以得到target最开始的位置，我们只需要再调用一次函数，将target + 1作为参数，返回值-1即为target最后出现的位置</li>\n</ol>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3> <figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>   <span class=\"hljs-comment\"># 调用上述任意一种算法</span><br>   <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">searchRange</span>(<span class=\"hljs-params\">self, nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], target: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]:<br>       start = lower_bound(nums, target)<br>       <span class=\"hljs-keyword\">if</span> start == <span class=\"hljs-built_in\">len</span>(nums) <span class=\"hljs-keyword\">or</span> nums[start] != target:<br>           <span class=\"hljs-keyword\">return</span> [-<span class=\"hljs-number\">1</span>,-<span class=\"hljs-number\">1</span>]<br>       end = lower_bound(nums, target + <span class=\"hljs-number\">1</span>) - <span class=\"hljs-number\">1</span><br>       <span class=\"hljs-keyword\">return</span> [start,end]<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><p>时间复杂度：<strong>O(log n)</strong> 空间复杂度：<strong>O(1)</strong></p>\n</body></html>","excerpt":"","more":"<h1 id=\"二分法查找\"><a href=\"#二分法查找\" class=\"headerlink\" title=\"二分法查找\"></a>二分法查找</h1><h2 id=\"题目描述\"><a href=\"#题目描述\" class=\"headerlink\" title=\"题目描述\"></a>题目描述</h2><p>在排序数组中查找元素的第一个和最后一个位置</p>\n<p>给你一个按照非递减顺序排列的整数数组 nums，和一个目标值 target。请你找出给定目标值在数组中的开始位置和结束位置。</p>\n<p>如果数组中不存在目标值 target，返回 [-1, -1]。</p>\n<p>你必须设计并实现时间复杂度为 O(log n) 的算法解决此问题。</p>\n<p>示例 1：</p>\n<p>输入：nums &#x3D; [5,7,7,8,8,10], target &#x3D; 8<br>输出：[3,4]</p>\n<p>示例 2：</p>\n<p>输入：nums &#x3D; [5,7,7,8,8,10], target &#x3D; 6<br>输出：[-1,-1]</p>\n<p>示例 3：</p>\n<p>输入：nums &#x3D; [], target &#x3D; 0<br>输出：[-1,-1]</p>\n<h3 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h3><ol>\n<li>我们可以用二分法查找来降低时间复杂度</li>\n<li>二分查找的三种思路：<ol>\n<li>闭区间：[left, right]<br>初始值：<ul>\n<li>left &#x3D; 0, right &#x3D; n - 1</li>\n<li>mid &#x3D; (left + right) &#x2F;&#x2F; 2</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>当 left &lt;&#x3D; right 时，循环执行</li>\n<li>若 nums[mid] &lt; target: left &#x3D; mid + 1<br>否则 right &#x3D; mid - 1</li>\n<li>这样，循环结束后，若target在数组中，则left在right + 1的位置，当num[mid] &#x3D;&#x3D; target时，执行 right &#x3D; mid - 1,而target值索引即为left，故最开始出现的位置为left</li>\n<li>因此返回值left <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">lower_bound</span>(<span class=\"hljs-params\">nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], target: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>    <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">    二分法查找某数字最早出现的位置</span><br><span class=\"hljs-string\">    &quot;&quot;&quot;</span><br>    l = <span class=\"hljs-number\">0</span><br>    r = <span class=\"hljs-built_in\">len</span>(nums) - <span class=\"hljs-number\">1</span><br>    <span class=\"hljs-keyword\">while</span> l &lt;= r: <span class=\"hljs-comment\"># 闭区间[l, r]</span><br>        m = (l + r) // <span class=\"hljs-number\">2</span><br>        <span class=\"hljs-keyword\">if</span> nums[m] &lt; target:<br>            l = m + <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\"># [m + 1, r]</span><br>        <span class=\"hljs-keyword\">else</span>:<br>            r = m - <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\"># [l, m - 1]</span><br>    <span class=\"hljs-keyword\">return</span> l <span class=\"hljs-comment\"># 若没有则会停在-1或len(nums)</span><br></code></pre></td></tr></table></figure></li>\n</ul>\n<ol start=\"2\">\n<li>左闭右开区间：[left, right)<br> 初始值：<ul>\n<li>left &#x3D; 0, right &#x3D; n</li>\n<li>mid &#x3D; (left + right) &#x2F;&#x2F; 2</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>当 left &lt; right 时，循环执行</li>\n<li>若 nums[mid] &lt; target: left &#x3D; mid + 1<br> 否则 right &#x3D; mid</li>\n<li>这样，循环结束后，若target在数组中，则left在right的位置</li>\n<li>因此返回值left和right都可以 <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">lower_bound</span>(<span class=\"hljs-params\">nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], target: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>    l = <span class=\"hljs-number\">0</span><br>    r = <span class=\"hljs-built_in\">len</span>(nums)<br>    <span class=\"hljs-keyword\">while</span> l &lt; r: <span class=\"hljs-comment\"># 左闭右开区间[l, r)</span><br>        m = (l + r) // <span class=\"hljs-number\">2</span><br>        <span class=\"hljs-keyword\">if</span> nums[m] &lt; target:<br>            l = m + <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\"># [m + 1, r)</span><br>        <span class=\"hljs-keyword\">else</span>:<br>            r = m <span class=\"hljs-comment\"># [l, m)</span><br>    <span class=\"hljs-keyword\">return</span> l <span class=\"hljs-comment\"># r</span><br></code></pre></td></tr></table></figure></li>\n</ul>\n<ol start=\"3\">\n<li>开区间：(left, right)<br> 初始值：<ul>\n<li>left &#x3D; -1, right &#x3D; n</li>\n<li>mid &#x3D; (left + right) &#x2F;&#x2F; 2</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>当 left + 1 &lt; right 时，循环执行</li>\n<li>若 nums[mid] &lt; target: left &#x3D; mid</li>\n<li>否则 right &#x3D; mid</li>\n<li>这样，循环结束后，若target在数组中，则left在right - 1的位置，当num[mid] &#x3D;&#x3D; target时，执行 right &#x3D; mid,而target值索引即为right，故最开始出现的位置为right</li>\n<li>因此返回值right <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">lower_bound</span>(<span class=\"hljs-params\">nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], target: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>    l = -<span class=\"hljs-number\">1</span><br>    r = <span class=\"hljs-built_in\">len</span>(nums)<br>    <span class=\"hljs-keyword\">while</span> l + <span class=\"hljs-number\">1</span> &lt; r: <span class=\"hljs-comment\"># 开区间(l, r)</span><br>        m = (l + r) // <span class=\"hljs-number\">2</span><br>        <span class=\"hljs-keyword\">if</span> nums[m] &lt; target:<br>            l = m <span class=\"hljs-comment\"># (m, r)</span><br>        <span class=\"hljs-keyword\">else</span>:<br>            r = m <span class=\"hljs-comment\"># (l, m)</span><br>    <span class=\"hljs-keyword\">return</span> r<br></code></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>通过这三种思路，我们可以得到target最开始的位置，我们只需要再调用一次函数，将target + 1作为参数，返回值-1即为target最后出现的位置</li>\n</ol>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3> <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>   <span class=\"hljs-comment\"># 调用上述任意一种算法</span><br>   <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">searchRange</span>(<span class=\"hljs-params\">self, nums: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>], target: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]:<br>       start = lower_bound(nums, target)<br>       <span class=\"hljs-keyword\">if</span> start == <span class=\"hljs-built_in\">len</span>(nums) <span class=\"hljs-keyword\">or</span> nums[start] != target:<br>           <span class=\"hljs-keyword\">return</span> [-<span class=\"hljs-number\">1</span>,-<span class=\"hljs-number\">1</span>]<br>       end = lower_bound(nums, target + <span class=\"hljs-number\">1</span>) - <span class=\"hljs-number\">1</span><br>       <span class=\"hljs-keyword\">return</span> [start,end]<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析\"><a href=\"#复杂度分析\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>时间复杂度：<strong>O(log n)</strong> 空间复杂度：<strong>O(1)</strong></p>\n"},{"title":"Android 开发","date":"2025-11-03T07:37:30.255Z","_content":"\n# Android 开发\n\n## 目录\n- [Android 开发](#android-开发)\n  - [目录](#目录)\n  - [前置条件](#前置条件)\n  - [四大组件](#四大组件)\n    - [入口文件](#入口文件)\n    - [Activity](#activity)\n      - [创建一个Activity](#创建一个activity)\n      - [Activity生命周期](#activity生命周期)\n      - [Activity保存和恢复](#activity保存和恢复)\n      - [Activity启动模式](#activity启动模式)\n      - [Fragment](#fragment)\n        - [创建Fragment](#创建fragment)\n        - [将Fragment添加到Activity中](#将fragment添加到activity中)\n        - [Fragment生命周期](#fragment生命周期)\n      - [Intent](#intent)\n        - [Intent Flag](#intent-flag)\n        - [IntentFilter 匹配规则](#intentfilter-匹配规则)\n    - [Service](#service)\n      - [Service的创建](#service的创建)\n      - [Service的启动方式](#service的启动方式)\n      - [Service的生命周期](#service的生命周期)\n    - [BroadcastReceiver](#broadcastreceiver)\n      - [创建BroadcastReceiver](#创建broadcastreceiver)\n      - [注册BroadcastReceiver](#注册broadcastreceiver)\n      - [Broadcast 分类](#broadcast-分类)\n    - [ContentProvider](#contentprovider)\n      - [创建ContentProvider](#创建contentprovider)\n      - [注册ContentProvider](#注册contentprovider)\n      - [ContentResolver](#contentresolver)\n      - [三个辅助类](#三个辅助类)\n  - [基本组件](#基本组件)\n    - [TextView 文本显示控件](#textview-文本显示控件)\n      - [布局属性](#布局属性)\n    - [Button 按钮](#button-按钮)\n      - [布局属性](#布局属性-1)\n      - [代码添加属性](#代码添加属性)\n    - [EditText 文本输入框](#edittext-文本输入框)\n      - [布局属性](#布局属性-2)\n      - [代码添加属性](#代码添加属性-1)\n    - [ImageView 图片](#imageview-图片)\n      - [布局属性](#布局属性-3)\n      - [代码添加属性](#代码添加属性-2)\n    - [ProgressBar 进度条](#progressbar-进度条)\n      - [布局属性](#布局属性-4)\n      - [代码添加属性](#代码添加属性-3)\n    - [ScrollView 滚动](#scrollview-滚动)\n      - [布局属性](#布局属性-5)\n      - [代码添加属性](#代码添加属性-4)\n    - [RecyclerView 容器](#recyclerview-容器)\n      - [核心组件](#核心组件)\n      - [引入依赖](#引入依赖)\n      - [布局属性](#布局属性-6)\n      - [RecyclerView的使用](#recyclerview的使用)\n  - [布局](#布局)\n    - [测量和布局](#测量和布局)\n    - [FrameLayout](#framelayout)\n      - [自身属性](#自身属性)\n      - [子视图属性](#子视图属性)\n    - [LinearLayout](#linearlayout)\n      - [自身属性](#自身属性-1)\n      - [子视图属性](#子视图属性-1)\n    - [RelativeLayout](#relativelayout)\n      - [子视图属性](#子视图属性-2)\n    - [ConstraintLayout](#constraintlayout)\n      - [子视图属性](#子视图属性-3)\n    - [总结](#总结)\n  - [创建自定义组件](#创建自定义组件)\n  - [属性动画](#属性动画)\n    - [动画框架](#动画框架)\n    - [常用API](#常用api)\n    - [ViewPropertyAnimator](#viewpropertyanimator)\n    - [ObjectAnimator](#objectanimator)\n      - [动画插值器](#动画插值器)\n    - [xmlAnimator](#xmlanimator)\n      - [动画属性资源的定义](#动画属性资源的定义)\n  - [数据储存](#数据储存)\n    - [SharedPreferences](#sharedpreferences)\n      - [简介](#简介)\n      - [存储数据](#存储数据)\n      - [读取数据](#读取数据)\n      - [删除数据](#删除数据)\n      - [完整代码实践](#完整代码实践)\n    - [SQLite数据库](#sqlite数据库)\n      - [SQLite数据库操作](#sqlite数据库操作)\n      - [SQLite使用步骤](#sqlite使用步骤)\n    - [文件存储](#文件存储)\n      - [内部存储](#内部存储)\n      - [序列化存储](#序列化存储)\n    - [ContentProvider](#contentprovider-1)\n      - [工作原理](#工作原理)\n      - [ContentProvider的使用](#contentprovider的使用)\n  - [异步交互](#异步交互)\n    - [handler](#handler)\n      - [核心组件和职责](#核心组件和职责)\n      - [使用步骤](#使用步骤)\n        - [使用 sendMessage](#使用-sendmessage)\n        - [使用 post](#使用-post)\n        - [安全的最佳实践](#安全的最佳实践)\n    - [Coroutines 协程](#coroutines-协程)\n      - [协程使用步骤](#协程使用步骤)\n  - [网络通信](#网络通信)\n    - [OkHttp](#okhttp)\n      - [OkHttp使用步骤](#okhttp使用步骤)\n  - [后台服务](#后台服务)\n    - [基本特征](#基本特征)\n    - [启动方式](#启动方式)\n      - [通过startService()启动](#通过startservice启动)\n      - [通过bindService()启动](#通过bindservice启动)\n      - [混合启动方式](#混合启动方式)\n    - [代码实现](#代码实现)\n      - [startService()启动方式示例](#startservice启动方式示例)\n\n## 前置条件\n* [安装Android Studio](https://developer.android.google.cn/studio/index.html?hl=ro)\n\n## 四大组件\n\n[回到目录](#目录)\n\n| 组件名称                                | 场景     | 用途                                                                                       |\n| --------------------------------------- | -------- | ------------------------------------------------------------------------------------------ |\n| [Activity](#activity)                   | 界面交互 | 是用户交互的入口点，代表一个界面，可以拉起其他的界面和组件                                 |\n| [Service](#service)                     | 后台服务 | 处理耗时任务(即使应用退出)，比如下载，网络请求，跨进程访问等                               |\n| [BroadcastReceiver](#broadcastreceiver) | 事件响应 | 捕获系统事件(时区变更，短信到达)或者用户发送到自定义事件，然后根据事件决定接下来的业务逻辑 |\n| [ContentProvider](#contentprovider)     | 数据共享 | 对外安全暴露私有数据，提供统一的api访问，内部可以是不同存储方式的实现                      |\n\n### 入口文件\nAndroidManifest.xml\n\n### Activity\n\n[回到目录](#目录)\n\n#### 创建一个Activity\n* 首先在layout目录下创建一个**xml文件**，并设置文件名，如activity_1.xml\n* 创建与**xml文件**对应的activity子类\n* 把声明的子类在AndroidManifest.xml中注入\n* **xml文件**可以添加组件\n* kt文件可以为组件添加事件监听\n\n#### Activity生命周期\n| 生命周期    | 说明                                                                                       |\n| ----------- | ------------------------------------------------------------------------------------------ |\n| onCreate()  | 首次创建Activity时调用，完成初始化工作，多用于创建视图、为列表绑定数据                     |\n| onStart()   | 当Activity可见时调用，多用于启动后台任务                                                   |\n| onResume()  | 当Activity开始与用户交互时调用，进入活跃状态，位于栈顶，可以接受用户输入                   |\n| onPause()   | 要启动另一个Activity时调用，暂停当前Activity，但保留状态，可以保存数据，最后一个可控的回调 |\n| onStop()    | 当Activity不可见时调用                                                                     |\n| onDestroy() | 当Activity销毁时调用，发生在finish()方法执行时，或由于系统内存不足而销毁                   |\n| onRestart() | 当Activity重新启动时调用，通常用于恢复数据                                                 |\n\n#### Activity保存和恢复\n| 方法                                              | 调用时机                                                         | 说明                                                                          | 使用场景                                                                                                      |\n| ------------------------------------------------- | ---------------------------------------------------------------- | ----------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |\n| onSaveInstanceState(outState:Bundle)              | 系统未经“你的许可”，可能销毁了你的activity，则会被调用           | 用户主动销毁不调用，可能销毁即调用                                            | 从一个Activity启动另一个Activity <br> 屏幕方向切换 <br> home键返回，切换别的应用 <br> 关闭屏幕显示            |\n| onRestoreInstanceState(savedInstanceState:Bundle) | 系统未经“你的许可”，确实销毁了你的activity，重新启动时则会被调用 | 用户主动销毁不调用，可能销毁即调用，与onSaveInstanceState()方法不一定成对调用 | 异常关闭了Activity，下次启动时则被调用 <br> onCreate() -> onStart() -> onRestoreInstanceState() -> onResume() |\n\n#### Activity启动模式\n在AndroidManifest.xml中,`<application>`标签下的`<activity>`中设置Activity的启动模式 `android:launchMode=\"启动模式`\n| 启动模式       | 说明                                                                                   |\n| -------------- | -------------------------------------------------------------------------------------- |\n| standard       | 默认启动模式，按Activity启动顺序压入Task Stack中                                       |\n| singleTop      | 栈顶复用模式，栈顶Activity实例已经存在，则不会创建新的实例，同一个Activity可以多次创建 |\n| singleTask     | 如果Activity存在于栈中，弹出其上所有Activity，目标Activity置于栈顶并获得焦点           |\n| singleInstance | 全局唯一模式，为目标Activity创建一个栈，栈顶Activity获得焦点，如果已经创建过则唤醒     |\n\n除了从AndroidManifest.xml中设置启动模式外，也可以在代码中设置启动模式，比如通过Intent的setFlags()方法设置\n~~~kotlin\nval intent = Intent(this, MainActivity::class.java)\nintent.setFlags(Intent.[Intent Flag])\n~~~\n\n| Intent Flag                    | 说明                                                                     |\n| ------------------------------ | ------------------------------------------------------------------------ |\n| FLAG_ACTIVITY_NEW_TASK         | 从后台服务中启动新的Activity；从通知栏点开新的任务                       |\n| FLAG_ACTIVITY_SINGLE_TOP       | 点击通知或状态栏，不希望重新创建已经存在的Activity，而是复用现有实例     |\n| FLAG_ACTIVITY_CLEAR_TOP        | 导航回已经存在的Activity，并清除其上的所有Activity，如从深层页面返回主页 |\n| FLAG_ACTIVITY_CLEAR_TASK       | 完全清空当前任务，并创建一个新任务，比如用户注销返回登录界面             |\n| FLAG_ACTIVITY_NO_HISTORY       | 启动一个页面时，不希望用户通过返回键回到该页面                           |\n| FLAG_ACTIVITY_REORDER_TO_FRONT | 需要将后台的Activity移到前台而不是重新创建，比如多个步骤的表格填写       |\n\n#### Fragment\nFragment表示应用界面中可重复使用的一部分，可以用于实现模块化的UI设计，在不同的Activity中重复使用\n\n##### 创建Fragment\n~~~kotlin\n/**\n * MyFragment 类继承自 Fragment，用于显示自定义的 fragment 界面\n */\nclass MyFragment : Fragment() { \n    /**\n     * 创建并返回 fragment 的视图层次结构\n     * \n     * @param inflater 用于将 XML 布局文件转换为 View 对象的布局加载器\n     * @param container 包含此 fragment 的父视图组，可能为 null\n     * @param savedInstanceState 包含 fragment 上次保存状态的 Bundle 对象，可能为 null\n     * @return 返回 inflate 后的 View 对象，作为 fragment 的根视图\n     */\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? { \n        // 使用 inflater 将指定的布局文件（.xml）加载为 View 并返回\n        return inflater.inflate(R.layout.fragment_my, container, false)\n    }\n}\n~~~\n\n##### 将Fragment添加到Activity中\n\nFragment拥有与Activity类似的栈(BACK stack，回退栈)，\n\n* 通过xml文件添加Fragment(静态添加，无法在运行时动态移除)\n    ~~~kotlin\n    <androidx.fragment.app.FragmentContainerView\n        android:id=\"@+id/fragment_container\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:name=\"com.example.myapplication.MyFragment\" />\n    ~~~\n\n* 通过代码添加Fragment\n    ~~~kotlin\n    /**\n    * 当Activity创建时调用此方法，用于初始化界面和添加Fragment\n    * \n    * @param savedInstanceState 保存的实例状态，用于恢复之前保存的Activity状态\n    */\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        // 创建MyFragment实例并添加到Activity中\n        val fragment = MyFragment()\n\n        // 获取Fragment管理器并开始一个事务\n        // 向指定容器添加Fragment，推荐使用FragmentContainerView容器\n        // 将该操作添加到返回栈\n        // 标记为\"MyFragment\"，提交事务使更改生效\n        supportFragmentManager.beginTransaction()\n        .add(R.id.fragment_container_view, fragment)\n        .addToBackStack(\"MyFragment\")\n        .commit()\n    }\n    ~~~\n\n##### Fragment生命周期\n| 回调方法            | 说明                                               |\n| ------------------- | -------------------------------------------------- |\n| onAttach()          | 当Fragment被附加到Activity时调用                   |\n| onCreate()          | 当Fragment创建时调用                               |\n| onCreateView()      | 当Fragment创建视图时调用                           |\n| onActivityCreated() | 当Fragment的Activity的onCreate()方法执行完毕时调用 |\n| onStart()           | 当Fragment可见时调用                               |\n| onResume()          | 当Fragment获得焦点时调用                           |\n| onPause()           | 当Fragment失去焦点时或被其他Fragment覆盖时调用     |\n| onStop()            | 当Fragment不可见时调用                             |\n| onDestroyView()     | 当Fragment销毁视图时调用                           |\n| onDestroy()         | 当Fragment销毁时调用                               |\n| onDetach()          | 当Fragment被分离时调用                             |\n\n\n#### Intent\nIntent是Android提供的用来协助组件间的交互和通信机制，描述一次操作的动作和数据\n\n* 显式Intent：指定目标组件，通过Intent对象启动目标组件\n* 隐式Intent：不指定目标组件，通过Intent对象启动匹配的组件\n\n##### Intent Flag\n| Intent Flag | 说明               |\n| ----------- | ------------------ |\n| Component   | 指定来源和目标     |\n| Action      | 指定动作行为       |\n| Category    | 指定哪种组件来处理 |\n| Data        | uri，指定数据源    |\n| Type        | 指定消息数据类型   |\n| Extras      | 拓展信息           |\n| Flags       | 指定运行模式       |\n\n##### IntentFilter 匹配规则\n\n| 条件         | 匹配规则                                                                                                                                                                                                                                                                                                                  | 使用                                                                       |\n| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |\n| Action       | 1. `<intent-filter>`中必须包含一个Action, Intent也必须指定一个Action<br>2. `<intent-filter>`中可以有一个或者多个Action, Intent匹配其中的一个Action即可                                                                                                                                                                    | `Intent(\"xxxAction\")`                                                      |\n| Data         | 1. `<intent-filter>`中描述了data, 必须在Intent中指定匹配的Data信息<br>2. `<intent-filter>`中没有描述data信息, Intent中可以不指定Data信息<br>3. `<intent-filter>`只指定了mimeType, 默认的URI的scheme是file或者content, 在Intent中必须同时设置mimeType和URI<br>4. `<intent-filter>`中有多个Data, Intent中只需要匹配一组即可 | `intent.setData()`                                                         |\n| Category     | 1. Intent中未指定Category, `<intent-filter>`中也可以不指定Category<br>2. 要隐式启动一个Activity是就必须指定android.intent.category.DEFAULT的Category<br>3. Intent中指定了一个Category时, 会在具有Category的`<intent-filter>`中去找匹配组件                                                                                | `intent.addCategory()`<br>`intent.removeCategory()`<br>`intent.categories` |\n| 整体匹配规则 | Action+Data+Category同时匹配, 才能启动Activity<br>Activity可以有多个intent-filter, Intent只需匹配任何一组`<intent-filter>`即可启动Activity                                                                                                                                                                                | -                                                                          |\n| 匹配过程     | 1. 加载`<intent-filter>`列表<br>2. 依次去掉action、Data、Category匹配失败的`<intent-filter>`<br>3. 剩余`<intent-filter>`按优先级排序                                                                                                                                                                                      | -                                                                          |\n\n\n### Service\n\n[回到目录](#目录)\n\n* 无ui，可后台长时间运行\n* 启动后，切换应用仍会运行一段时间\n* 可用于应用处理网络事务、音频播放、数据同步等\n* 默认在主线程[UI线程]运行，除单独指定线程，并且不会单独在进程中运行\n\n#### Service的创建\n* 在AndroidManifest.xml中注册Service\n\n| 属性             | 说明                  |\n| ---------------- | --------------------- |\n| android:name     | 指定Service的完整类名 |\n| android:enabled  | 能否被实例化          |\n| android:exported | 是否允许其他应用访问  |\n\n~~~xml\n<service\nandroid:name=\".MyService\"\nandroid:enabled=\"true\"\nandroid:exported=\"true\" />\n~~~\n\n* 在Kotlin中创建Service\n\n| 方法           | 说明                  |\n| -------------- | --------------------- |\n| onBind         | 当Service被绑定时调用 |\n| onCreate       | 当Service创建时调用   |\n| onStartCommand | 当Service启动时调用   |\n| onDestroy      | 当Service销毁时调用   |\n\n~~~kotlin\n/**\n * MyService类继承自Service，用于在后台执行长时间运行的操作\n * 该服务不提供绑定功能，仅支持启动和停止\n */\nclass MyService : Service() { \n    /**\n     * 当其他组件想要通过bindService()绑定到服务时调用\n     * @param intent 启动服务的Intent对象\n     * @return IBinder对象，用于与服务通信，此处返回null表示不支持绑定\n     */\n    override fun onBind(intent: Intent): IBinder? { \n        return null\n    }\n\n    /**\n     * 当服务首次创建时调用，用于执行一次性设置操作\n     * 该方法只在服务生命周期中调用一次\n     */\n    override fun onCreate() { \n        super.onCreate()\n        Log.d(TAG, \"onCreate\")\n    }\n\n    /**\n     * 当其他组件通过startService()启动服务时调用\n     * @param intent 启动服务时传递的Intent对象，可能为null\n     * @param flags 附加数据，用于描述如何启动服务\n     * @param startId 服务启动请求的唯一标识符\n     * @return 服务被杀死后的重启模式，返回super.onStartCommand()的默认值\n     */\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int { \n            Log.d(TAG, \"onStartCommand\")\n            return super.onStartCommand(intent, flags, startId)\n    }\n\n    /**\n     * 当服务被销毁时调用，用于清理资源和执行收尾工作\n     * 该方法在服务生命周期结束时调用\n     */\n    override fun onDestroy() { \n        super.onDestroy()\n        Log.d(TAG, \"onDestroy\")\n    }\n}\n~~~\n\n#### Service的启动方式\n| 启动方式       | 说明                                                                                                                       |\n| -------------- | -------------------------------------------------------------------------------------------------------------------------- |\n| startService() | 适用于独立与其他组件长期运行的服务，如播放音乐、下载文件等 需要自身stopService()来停止服务                                 |\n| bindService()  | 适用于需要与其他组件进行通信的服务，如获取传感器数据、访问数据库等 需要所有绑定的组件调用unbindService()解除绑定才停止服务 |\n\n#### Service的生命周期\n| 回调方法           | 说明                                                                                                                                                                                                                                                                   |\n| ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `onCreate()`       | 系统会在服务首次创建时（在 `onStartCommand()` 或 `onBind()` 之前）调用此方法来执行一次性设置过程。如果服务已在运行，不会调用此方法。                                                                                                                                   |\n| `onDestroy()`      | 当服务不再使用且被销毁时，系统会调用此方法。用于清理线程、已注册的监听器或接收器等资源。是服务接收的最后一个回调。                                                                                                                                                     |\n| `onStartCommand()` | 当其他组件（例如 Activity）请求启动服务时，系统会通过调用 `startService()` 来调用此方法。执行此方法时，系统会启动服务，该服务可以在后台无限期运行。如果实现了此功能，需要在服务完成工作后通过 `stopSelf()` 或 `stopService()` 来停止服务。如果只想提供绑定，无需实现。 |\n| `onBind()`         | 当其他组件想要与服务绑定（例如执行 RPC）时，系统会通过调用 `bindService()` 来调用此方法。在实现此方法必须提供一个接口，使客户端通过返回 `IBinder` 与服务进行通信。如果不允许绑定，则应返回 `null`。                                                                    |\n| `onUnbind()`       | 当所有绑定的客户端都解绑（通过 `unbindService()`）时，系统会调用此方法。                                                                                                                                                                                               |\n\n\n### BroadcastReceiver\n\n[回到目录](#目录)\n\nBroadcast 是一种用于应用程序之间或程序内部的一种通信机制\nBroadcastReceiver 捕获系统事件或用户的自定义事件，并根据事件执行对应的逻辑\n\n#### 创建BroadcastReceiver\n~~~kotlin\n/**\n * 广播接收器类，用于接收和处理广播消息\n * 继承自BroadcastReceiver，当接收到广播时会显示Toast提示\n */\nclass MyReceiver : BroadcastReceiver() { \n    /**\n     * 当接收到广播时调用此方法\n     * @param context 上下文对象，提供访问应用程序环境信息的接口\n     * @param intent 包含广播数据的Intent对象\n     */\n    override fun onReceive(context: Context, intent: Intent) { \n        // 显示广播接收成功的Toast消息提示\n        Toast.makeText(context, \"MyBroadcastReceiver: Broadcast Received\", Toast.LENGTH_SHORT).show()\n    }\n}\n~~~\n\n#### 注册BroadcastReceiver\n* 在AndroidManifest.xml中注册BroadcastReceiver[静态注册，程序未启动也能监听广播]\n~~~xml\n广播接收器声明块\n    \n    该代码块声明了一个Android广播接收器组件，用于接收和处理特定的广播消息。\n    \n    组件属性说明：\n    - android:name: 指定接收器的类名，\".MyReceiver\"表示该类在当前应用包名下\n    - android:enabled: 设置为true表示该接收器在应用安装后默认启用\n    - android:exported: 设置为true表示该接收器可以接收来自其他应用或系统的广播\n    \n    意图过滤器配置：\n    - android:priority: 设置广播接收优先级为100，数值越大优先级越高\n    - action: 声明该接收器可以处理的广播动作，此处为自定义广播动作\"com.example.myapplication.MY_BROADCAST\" \n<receiver\n    android:name=\".MyReceiver\"\n    android:enabled=\"true\"\n    android:exported=\"true\"> \n    <intent-filter android:priority=\"100\">\n        <action android:name=\"com.example.myapplication.MY_BROADCAST\" />\n    </intent-filter>\n</receiver>\n~~~ \n\n* 在代码中注册BroadcastReceiver[动态注册]\n~~~kotlin\n/**\n * 主活动类，负责发送广播和注册/注销广播接收器\n */\nclass MainActivity : AppCompatActivity() { \n    private var mBroadcastReceiver: MyReceiver? = null\n    private val broadcastAction = \"com.example.myapplication.MY_BROADCAST\"\n    \n    /**\n     * 活动创建时的回调方法\n     * @param savedInstanceState 保存的实例状态Bundle对象\n     */\n    override fun onCreate(savedInstanceState: Bundle?) { \n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        mBroadcastReceiver = MyReceiver()\n        // 设置按钮点击监听器，用于发送广播\n        findViewById<Button>(R.id.button).setOnClickListener(View.OnClickListener { \n            sendBroadcast(Intent(broadcastAction))\n        })\n    }\n}\n\n/**\n * 活动恢复时的回调方法，用于注册广播接收器\n */\noverride fun onResume() { \n    super.onResume()\n    // 注册广播接收器以接收指定action的广播\n    mBroadcastReceiver?.let { \n        registerReceiver(it, IntentFilter(broadcastAction), RECEIVER_EXPORTED)\n    }\n}\n\n/**\n * 活动销毁时的回调方法，用于注销广播接收器\n */\noverride fun onDestroy() { \n    super.onDestroy()\n    // 注销广播接收器以避免内存泄漏\n    mBroadcastReceiver?.let { \n        unregisterReceiver(it)\n    }\n}\n~~~\n\n#### Broadcast 分类\n| 广播类型 | 方法                                                                                                                                                                                                                    | 描述                                                                                   |\n| -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |\n| 标准广播 | sendBroadcast(Intent intent)                                                                                                                                                                                            | 异步广播，发送给所有注册的接收器，但无法将处理结果发送给下一个接收器，无法终止广播传播 |\n| 有序广播 | sendOrderedBroadcast(Intent intent, String receiverPermission)                                                                                                                                                          | 同步广播，同一时刻只有一个接收器收到，可以选择继续传播，拦截或修改广播                 |\n| 本地广播 | LocalBroadcastManager.registerReceiver(BroadcastReceiver receiver, IntentFilter filter) <br>LocalBroadcastManager.sendBroadcast(Intent intent) <br>LocalBroadcastManager.unregisterReceiver(BroadcastReceiver receiver) | exported=false，只能动态注册，只能发送给本应用，注册为本地广播的接收器无法接受标准广播 |\n\n~~~kotlin\n    // 隐式Intent\n    sendBroadcast(Intent(\"BROADCAST_ACTION\"))\n    // 显式Intent\n    val intent = Intent(this, MyReceiver::class.java)\n    intent.action = \"BROADCAST_ACTION\"\n    sendBroadcast(intent)\n~~~\n\n### ContentProvider\n\n[回到目录](#目录)\n\n以标准化的方式在Android应用间共享数据，以相对安全的方式封装数据存储以及增删改查，提供对外统一接口供其他程序调用\n\n* 通过 **uri**[universal resource identifier ，通用资源标识符]访问数据\n* content://authority/path/id\n    - content://：通用前缀\n    - authority：内容提供者的唯一标识符，通常为包名+内容提供者的类名\n    - path：内容提供者的数据路径，通常为数据表名\n    - id：内容提供者的数据项ID，通常为数据项的行号\n\n#### 创建ContentProvider\n~~~kotlin\n/**\n * MyContentProvider 是一个自定义的内容提供者类，用于管理应用程序数据的访问和操作。\n * 它继承自 Android 的 ContentProvider 类，提供了对结构化数据的标准化访问接口。\n */\nclass MyContentProvider : ContentProvider() { \n    /**\n     * 获取指定 URI 对应数据的 MIME 类型\n     * @param uri 指向所需数据的统一资源标识符\n     * @return 返回对应数据的 MIME 类型字符串，如果无法识别则返回 null\n     */\n    override fun getType(uri: Uri): String? { \n        TODO(\"Implement this to handle requests for the MIME type of the data at the given URI.\")\n    }\n\n    /**\n     * 初始化内容提供者，在系统启动时调用\n     * @return 初始化成功返回 true，失败返回 false\n     */\n    override fun onCreate(): Boolean { \n        TODO(\"Implement this to initialize your content provider on startup.\")\n    }\n\n    /**\n     * 向内容提供者中插入新的数据行\n     * @param uri 指定要插入数据的位置 URI\n     * @param values 包含要插入数据的键值对集合\n     * @return 返回新插入数据行的 URI，插入失败则返回 null\n     */\n    override fun insert(uri: Uri, values: ContentValues?): Uri? { \n        TODO(\"Implement this to handle requests to insert a new row.\")\n    }\n\n    /**\n     * 删除指定条件的数据行\n     * @param uri 指定要删除数据的位置 URI\n     * @param selection SQL WHERE 子句，用于指定删除条件，null 表示删除所有行\n     * @param selectionArgs WHERE 子句中占位符对应的参数值数组\n     * @return 返回实际删除的数据行数量\n     */\n    override fun delete(uri: Uri, selection: String?, selectionArgs: Array<String>?): Int { \n        TODO(\"Implement this to handle requests to delete one or more rows.\")\n    }\n\n    /**\n     * 查询满足条件的数据\n     * @param uri 指定要查询数据的位置 URI\n     * @param projection 要查询的列名数组，null 表示查询所有列\n     * @param selection SQL WHERE 子句，用于指定查询条件\n     * @param selectionArgs WHERE 子句中占位符对应的参数值数组\n     * @param sortOrder 查询结果的排序方式\n     * @return 返回包含查询结果的 Cursor 对象\n     */\n    override fun query(uri: Uri, projection: Array<String>?, selection: String?, selectionArgs: Array<String>?, sortOrder: String?){ \n        TODO(\"Implement this to handle query requests from clients.\")\n    }\n\n    /**\n     * 更新满足条件的数据行\n     * @param uri 指定要更新数据的位置 URI\n     * @param values 包含要更新数据的键值对集合\n     * @param selection SQL WHERE 子句，用于指定更新条件\n     * @param selectionArgs WHERE 子句中占位符对应的参数值数组\n     * @return 返回实际更新的数据行数量\n     */\n    override fun update(uri: Uri, values: ContentValues?, selection: String?, selectionArgs: Array<String>?): Int { \n        TODO(\"Implement this to handle requests to update one or more rows.\")\n    }\n}\n~~~\n#### 注册ContentProvider\n~~~xml\n<provider\n    android:name=\".MyContentProvider\"\n    android:authorities=\"com.example.myapplication.MyContentProvider\"\n    android:enabled=\"true\"\n    android:exported=\"false\" />\n\n~~~\n\n#### ContentResolver\n~~~kotlin\n/**\n * 测试ContentResolver的基本操作方法\n * \n * 该函数演示了如何使用ContentResolver进行数据的增删改查操作，\n * 包括插入、删除、更新和查询数据\n */\nfun testContentResolver() { \n    // 构造ContentProvider的URI地址\n    val uri = Uri.parse(\"content://com.example.myapplication.MyContentProvider/user\")\n    \n    // 创建要操作的数据内容值\n    val value = ContentValues().apply { \n        put(\"user_id\", 1)\n        put(\"user_name\", \"张三\")\n    }\n\n    // 向ContentProvider中插入一条用户数据\n    contentResolver.insert(uri, value)\n\n    // 删除user_id为1的用户数据\n    contentResolver.delete(uri, \"user_id=?\", arrayOf(\"1\"))\n\n    // 更新user_id为1的用户数据\n    contentResolver.update(uri, value, \"user_id=?\", arrayOf(\"1\"))\n\n    // 查询所有用户数据，按user_id升序排列\n    val cursor = contentResolver.query(uri, \n        null, \n        null, \n        null, \n        \"user_id ASC\")\n\n    // 遍历查询结果并处理每条数据\n    while (cursor?.moveToNext() == true) { \n        // 处理数据\n    }\n}\n~~~\n\n#### 三个辅助类\n* ContentUris\n* UriMatcher\n* ContentObserver\n\n~~~kotlin\n/**\n * 通过ContentUris.withAppendedId方法将指定的ID追加到URI路径末尾\n * @param uri 原始URI\n * @param id 要追加的ID值\n * @return 返回追加ID后的新URI\n */\nContentUris.withAppendedId(uri, id)\n\n/**\n * 从URI中解析出ID值\n * @param uri 包含ID的URI\n * @return 返回解析出的ID值\n */\nval id = ContentUris.parseId(uri)\n\n/**\n * 创建UriMatcher实例用于URI匹配\n * @param code 当URI不匹配任何模式时返回的默认代码\n */\nval uriMatcher = UriMatcher(UriMatcher.NO_MATCH)\n\n// 添加URI匹配模式：匹配\"user\"路径，匹配成功返回代码1\nuriMatcher.addURI(\"com.example.myapplication\", \"user\", 1)\n\n// 添加URI匹配模式：匹配\"user/#\"路径（#表示数字），匹配成功返回代码2\nuriMatcher.addURI(\"com.example.myapplication\", \"user/#\", 2)\n\n/**\n * 自定义ContentObserver类，用于监听ContentProvider数据变化\n */\nclass MyContentObserver : ContentObserver(null) { \n    /**\n     * 当被监听的URI对应的数据发生变化时调用\n     * @param selfChange 如果为true表示数据变化是由当前进程引起的\n     */\n    override fun onChange(selfChange: Boolean) { \n        super.onChange(selfChange)\n    }\n}\n~~~\n\n## 基本组件\n\n[回到目录](#目录)\n\n### TextView 文本显示控件\n[回到目录](#目录)\n\n#### 布局属性\n\n~~~xml\n<TextView\n        属性名=\"属性值\"\n        ....../>\n~~~\n\n\n| 属性               | 说明                       | 参数说明                                                                                                                                                   |\n| ------------------ | -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| id                 | 控件的id                   | @+id/textView: 创建一个id<br>@id/textView: 引用一个id                                                                                                      |\n| layout_width       | 控件的宽度                 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                   |\n| layout_height      | 控件的高度                 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                   |\n| layout_margin      | 控件的外边距               | 具体数值: 边距大小                                                                                                                                         |\n| text               | 显示的文本                 | 文本内容                                                                                                                                                   |\n| textAllCaps        | 是否将文本转换为大写       | true: 转换为大写<br>false: 不转换                                                                                                                          |\n| textSize           | 文本的大小                 | 具体数值: 尺寸大小                                                                                                                                         |\n| textColor          | 文本的颜色                 | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                   |\n| textStyle          | 文本的样式                 | normal: 正常样式<br>bold: 加粗样式<br>italic: 斜体样式<br>bold_italic: 加粗斜体样式                                                                        |\n| autoLink           | 是否自动链接文本           | web: 自动链接网址<br>email: 自动链接邮箱地址<br>phone: 自动链接电话号码                                                                                    |\n| textColorHighlight | 文本高亮颜色               | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                   |\n| drawableTop        | 文本顶部图标               | @drawable/icon: 图标资源                                                                                                                                   |\n| drawablePadding    | 图标和文本之间的间距       | 具体数值: 间距大小                                                                                                                                         |\n| gravity            | 文本的对齐方式             | center: 居中对齐<br>center_vertical: 垂直居中对齐<br>center_horizontal: 水平居中对齐<br>left: 左对齐<br>right: 右对齐<br>top: 顶部对齐<br>bottom: 底部对齐 |\n| letterSpacing      | 字符间距                   | 具体数值: 间距大小                                                                                                                                         |\n| lineSpacingExtra   | 行间距                     | 具体数值: 间距大小                                                                                                                                         |\n| maxLines           | 文本的最大行数             | 具体数值: 行数                                                                                                                                             |\n| ellipsize          | 文本超出显示范围时如何显示 | start: 显示开头省略号<br>middle: 显示中间省略号<br>end: 显示末尾省略号<br>marquee: 滚动显示                                                                |\n\n### Button 按钮\n[回到目录](#目录)\n#### 布局属性\n\n~~~xml\n<Button\n        属性名=\"属性值\"\n        ....../>\n<ImageButton\n        属性名=\"属性值\"\n        ....../>\n~~~\n\n| 属性               | 说明                    | 参数说明                                                                                                                                                   |\n| ------------------ | ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| id                 | 控件的id                | @+id/button: 创建一个id<br>@id/button: 引用一个id                                                                                                          |\n| layout_width       | 控件的宽度              | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                   |\n| layout_height      | 控件的高度              | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                   |\n| layout_margin      | 控件的外边距            | 具体数值: 边距大小                                                                                                                                         |\n| text               | 显示的文本              | 文本内容                                                                                                                                                   |\n| background         | 按钮的背景              | @drawable/button_background: 背景资源                                                                                                                      |\n| padding            | 按钮的内边距            | 具体数值: 内边距大小                                                                                                                                       |\n| gravity            | 按钮的文本对齐方式      | center: 居中对齐<br>center_vertical: 垂直居中对齐<br>center_horizontal: 水平居中对齐<br>left: 左对齐<br>right: 右对齐<br>top: 顶部对齐<br>bottom: 底部对齐 |\n| contentDescription | `ImageButton`按钮的描述 | 文本内容                                                                                                                                                   |\n| src                | `ImageButton`按钮的图标 | @drawable/icon: 图标资源                                                                                                                                   |\n| drawableStart      | 按钮的图标              | @drawable/icon: 图标资源                                                                                                                                   |\n| drawablePadding    | 图标和文本之间的间距    | 具体数值: 间距大小                                                                                                                                         |\n| enable             | 按钮是否可用            | true: 可用<br>false: 不可用                                                                                                                                |\n| clickable          | 按钮是否可点击          | true: 可点击<br>false: 不可点击                                                                                                                            |\n\n#### 代码添加属性\n\n~~~kotlin\n// 1、设置按钮点击Toast提示\nfindViewById<Button>(R.id.button_click).setOnClickListener{\n    // 显示Toast提示\n    Toast.makeText(this, \"点击了按钮\", Toast.LENGTH_SHORT).show()\n}\n\n// 2、设置按钮长按Toast提示\nfindViewById<Button>(R.id.button_long_click).setOnLongClickListener{\n    // 显示Toast提示\n    Toast.makeText(this, \"长按了按钮\", Toast.LENGTH_SHORT).show()\n}\n~~~\n\n### EditText 文本输入框\n[回到目录](#目录)\n#### 布局属性\n\n~~~xml\n<EditText\n        属性名=\"属性值\"\n        ....../>\n~~~\n\n| 属性               | 说明                       | 参数说明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| ------------------ | -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| id                 | 控件的id                   | @+id/editText: 创建一个id<br>@id/editText: 引用一个id                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n| layout_width       | 控件的宽度                 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| layout_height      | 控件的高度                 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| layout_margin      | 控件的外边距               | 具体数值: 边距大小                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| hint               | 输入框的提示文本           | 文本内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| inputType          | 输入框的类型               | text: 文本输入框<br>number: 数字输入框<br>phone: 电话输入框<br>datetime: 日期时间输入框<br>email: 邮箱输入框<br>textMultiLine: 多行文本输入框<br>textCapSentences: 首字母大写输入框<br>textCapWords: 单词首字母大写输入框<br>textCapCharacters: 全字母大写输入框<br>textNoSuggestions: 无建议输入框<br>textPassword: 密码输入框<br>textVisiblePassword: 可见密码输入框<br>textMultiLine: 多行文本输入框<br>textAutoCorrect: 自动修正输入框<br>textAutoComplete: 自动完成输入框<br>textWebEditText: 网页输入框<br>textUri: URI输入框<br>textEmailAddress: 邮箱地址输入框<br>textPostalAddress: 邮政编码输入框<br>textPersonName: 人名输入框<br>textShortMessage: 短消息输入框<br>textLongMessage: 长消息输入框<br>textFilter: 过滤输入框<br>textPhonetic: 音标输入框<br>textWebEmailAddress: 网页邮箱地址输入框<br>textWebPassword: 网页密码输入框 |\n| maxLenght          | 输入框的最大长度           | 具体数值: 最大长度                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| cursorVisible      | 输入框的游标是否可见       | true: 可见<br>false: 不可见                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| textColor          | 输入框的文本颜色           | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| textColorHint      | 输入框的提示文本颜色       | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| textColorHighlight | 输入框的文本高亮颜色       | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| digits             | 输入框只能输入的字符       | 具体数值: 输入内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| imeOptions         | 输入框的键盘(回车)完成按钮 | done: 完成按钮<br>go: 跳转按钮<br>next: 下一个按钮<br>search: 搜索按钮<br>send: 发送按钮                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n\n\n#### 代码添加属性\n~~~kotlin\n// 1、设置输入过滤器，仅允许英文字符和数字输入\nval filter =InputFilter{ source: CharSequence?, start: Int, end: Int, dest: Spanned?, dstart: Int, dend: Int ->\n                if(!source.toString()\n                        .matches(\"[A-Za-z0-9]+\".toRegex())\n                )return@InputFilter \"\"\n                null\n            }\n// 将过滤器应用到指定的EditText控件\nfindViewById<EditText>(R.id.set_filters).filters = arrayOf<InputFilter>(filter)\n\n// 2、设置文本检查器\nval et = findViewById<EditText>(R.id.add_text_changed_listener)\net.addTextChangedListener(object : TextWatcher {\n    /**\n     * 文本改变前的回调方法\n     * @param s 当前文本内容\n     * @param start 改变开始的位置\n     * @param count 被改变的字符数量\n     * @param after 改变后的字符数量\n     */\n    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {\n        // 可留空，如无逻辑需要\n    }\n\n    /**\n     * 文本改变时的回调方法\n     * @param s 当前文本内容\n     * @param start 改变开始的位置\n     * @param before 改变前的字符数量\n     * @param count 改变后的字符数量\n     */\n    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\n        // 可留空，如无逻辑需要\n    }\n\n    /**\n     * 文本改变后的回调方法，用于验证输入内容是否符合要求\n     * @param s 改变后的文本内容\n     */\n    override fun afterTextChanged(s: Editable?) {\n        // 验证输入内容是否只包含#$%字符\n        if (!s.toString().matches(\"[#$%]+\".toRegex())){\n            et.error = \"仅允许#$%\"\n        }\n    }\n})\n\n// 3、设置焦点监听\n/**\n * 设置EditText焦点变化监听器\n * 用于处理EditText获取焦点和失去焦点时的UI变化\n * 参数v: 发生焦点变化的View对象\n * 参数hasFocus: 表示View是否获得焦点的布尔值\n */\nval setOnFocusChangeListenerEt = findViewById<EditText>(R.id.set_on_focus_change_listener)\nsetOnFocusChangeListenerEt.setOnFocusChangeListener({ v, hasFocus ->\n    if(hasFocus){\n        // 获取焦点时清空提示\n        setOnFocusChangeListenerEt.setText(\"\")\n        setOnFocusChangeListenerEt.error = null\n    } else{\n        // 失去焦点时设置提示\n        setOnFocusChangeListenerEt.error = \"失去焦点了\"\n    }\n})\n~~~\n\n### ImageView 图片\n[回到目录](#目录)\n\n#### 布局属性\n\n~~~xml\n<ImageView\n        属性名=\"属性值\"\n        ....../>\n~~~\n\n| 属性               | 说明               | 参数说明                                                                                                                                                                       |\n| ------------------ | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| id                 | 控件的id           | @+id/imageView: 创建一个id<br>@id/imageView: 引用一个id                                                                                                                        |\n| layout_width       | 控件的宽度         | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                       |\n| layout_height      | 控件的高度         | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                       |\n| layout_margin      | 控件的外边距       | 具体数值: 边距大小                                                                                                                                                             |\n| adjustViewBounds   | 图片是否适应控件   | true: 适应<br>false: 不适应                                                                                                                                                    |\n| contentDescription | 图片的描述         | 文本内容                                                                                                                                                                       |\n| maxHeight          | 图片的最大高度     | 具体数值: 最大高度                                                                                                                                                             |\n| maxWidth           | 图片的最大宽度     | 具体数值: 最大宽度                                                                                                                                                             |\n| src                | 图片的资源         | @drawable/image: 图片资源<br>@mipmap/image: 图片资源                                                                                                                           |\n| background         | 图片的背景         | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                                       |\n| padding            | 图片的内边距       | 具体数值: 内边距大小                                                                                                                                                           |\n| cropToPadding      | 图片是否剪切内边距 | true: 剪切<br>false: 不剪切                                                                                                                                                    |\n| scaleType          | 图片的缩放类型     | fitXY: 填充父布局<br>fitStart: 适应内容并居左<br>fitCenter: 适应内容并居中<br>fitEnd: 适应内容并居右<br>center: 中心<br>centerCrop: 剪切并居中<br>centerInside: 适应内容并居中 |\n\n#### 代码添加属性\n\n~~~kotlin\n// 创建一个图形变换矩阵，用于对ImageView进行缩放变换\n// 设置X轴缩放比例为0.04，Y轴缩放比例为0.08\n// 将变换矩阵应用到ID为matrix的ImageView控件上\nval matrix = android.graphics.Matrix()\nmatrix.setScale(0.04f, 0.08f)\nfindViewById<ImageView>(R.id.matrix).imageMatrix = matrix\n~~~\n\n### ProgressBar 进度条\n[回到目录](#目录)\n\n#### 布局属性\n~~~xml\n<ProgressBar\n        属性名=\"属性值\"\n        ....../>\n~~~\n| 属性                  | 说明                     | 参数说明                                                                                                                                                                                                                                                                                                                                                 |\n| --------------------- | ------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| id                    | 控件的id                 | @+id/progressBar: 创建一个id<br>@id/progressBar: 引用一个id                                                                                                                                                                                                                                                                                              |\n| layout_width          | 控件的宽度               | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                                                                                                                                                                                                 |\n| layout_height         | 控件的高度               | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                                                                                                                                                                                                 |\n| layout_margin         | 控件的外边距             | 具体数值: 边距大小                                                                                                                                                                                                                                                                                                                                       |\n| style                 | 进度条样式               | ?android:attr/progressBarStyleHorizontal: 水平直条样式<br>？android:attr/progressBarStyleSmall: 小尺寸圆形样式<br>？android:attr/progressBarStyleLarge: 大尺寸圆形样式<br>？android:attr/progressBarStyleInverse: 反向样式<br>？android:attr/progressBarStyleSmallInverse: 小尺寸反向样式<br>？android:attr/progressBarStyleLargeInverse: 大尺寸反向样式 |\n| max                   | 进度条的最大值           | 具体数值: 最大值                                                                                                                                                                                                                                                                                                                                         |\n| progress              | 进度条的当前进度         | 具体数值: 当前进度                                                                                                                                                                                                                                                                                                                                       |\n| secondaryProgress     | 进度条的当前进度         | 具体数值: 当前进度                                                                                                                                                                                                                                                                                                                                       |\n| indeterminate         | 进度条是否为不确定状态   | true: 不确定<br>false: 确定                                                                                                                                                                                                                                                                                                                              |\n| indeterminateDrawable | 进度条的不确定状态的图片 | @drawable/image: 图片资源<br>@mipmap/image: 图片资源                                                                                                                                                                                                                                                                                                     |\n\n图片旋转样式\n~~~xml\n<!--\n    animated-rotate动画旋转组件\n\n    该组件用于创建一个旋转动画效果，将指定的drawable资源进行360度旋转\n\n    参数说明：\n    android:drawable - 指定要进行旋转动画的drawable资源引用\n    android:fromDegree - 动画开始时的旋转角度，单位为度\n    android:toDegree - 动画结束时的旋转角度，单位为度\n    android:pivotX - 旋转中心点的X轴坐标，50%表示在drawable宽度的中心位置\n    android:pivotY - 旋转中心点的Y轴坐标，50%表示在drawable高度的中心位置\n-->\n<animated-rotate xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:drawable=\"@drawable/p0\"\n    android:fromDegrees=\"0\"\n    android:pivotX=\"50%\"\n    android:pivotY=\"50%\"\n    android:toDegrees=\"360\" />\n~~~\n\n#### 代码添加属性\n~~~kotlin\nval progress = findViewById<ProgressBar>(R.id.progress)\n// 启动一个后台线程来模拟进度更新\nThread{\n    var p = 0\n    while (p < 100){\n        Thread.sleep(100) // 每100毫秒更新一次进度\n        p++\n        // 在主线程中更新进度条UI\n        runOnUiThread {\n            progress.progress = p\n            progress.secondaryProgress = (p + 5)\n        }\n    }\n}.start()\n~~~\n\n### ScrollView 滚动\n[回到目录](#目录)\n\n#### 布局属性\n\n~~~xml\n<ScrollView\n        属性名=\"属性值\"\n        ......>\n        <布局标签\n            属性名=\"属性值\"\n            ......>\n        </布局标签>\n</ScrollView>\n\n<HorizontalScrollView\n        属性名=\"属性值\"\n        ......>\n        <布局标签\n            属性名=\"属性值\"\n            ......>\n        </布局标签>\n</HorizontalScrollView>\n~~~\n\n| 属性                  | 说明                   | 参数说明                                                                                                               |\n| --------------------- | ---------------------- | ---------------------------------------------------------------------------------------------------------------------- |\n| id                    | 控件的id               | @+id/scrollView: 创建一个id<br>@id/scrollView: 引用一个id                                                              |\n| layout_width          | 控件的宽度             | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局                                             |\n| layout_height         | 控件的高度             | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局                                             |\n| fillViewport          | 滚动视图是否填充父布局 | true: 填充<br>false: 不填充                                                                                            |\n| scrollbars            | 滚动条样式             | none: 无<br>horizontal: 水平滚动条<br>vertical: 垂直滚动条                                                             |\n| scrollbarSize         | 滚动条大小             | 具体数值: 滚动条大小                                                                                                   |\n| scrollbarFadeDuration | 滚动条淡出时间         | 具体数值: 淡出时间                                                                                                     |\n| layout_weight         | 控件的权重             | 具体数值: 权重大小                                                                                                     |\n| scrollbarStyle        | 滚动条样式             | insideOverlay: 覆盖在内容上方<br>insideInset: 嵌入内容内<br>outsideOverlay: 覆盖在内容上方<br>outsideInset: 嵌入内容内 |\n| requiresFadingEdge    | 需要淡出边缘效果       | vertical: 垂直<br>horizontal: 水平                                                                                     |\n| fadingEdgeLength      | 淡出边缘长度           | 具体数值: 淡出边缘长度                                                                                                 |\n| overScrollMode        | 滚动模式               | never: 不允许滚动<br>always: 允许滚动<br>ifContentScrolls: 内容滚动时允许滚动                                          |\n\n#### 代码添加属性\n~~~kotlin\n// 在滚动视图中添加内容\n\n// 获取垂直线性布局容器\nval vsvc = findViewById<LinearLayout>(R.id.vsvc)\n\n// 循环创建50个TextView并添加到布局中\nfor (i in 1 .. 50){\n    // 创建并配置TextView样式\n    val textView = TextView(this).apply{\n        text = \"动态添加的 TextView $i\"\n        textSize = 16f\n        setTextColor(Color.BLACK)\n        setPadding(20, 10, 20, 10)\n    }\n\n    // 设置布局参数，配置上下边距\n    val params = LinearLayout.LayoutParams(\n        LinearLayout.LayoutParams.MATCH_PARENT,\n        LinearLayout.LayoutParams.WRAP_CONTENT\n    ).apply {\n        topMargin = 5\n    }\n    textView.layoutParams = params\n\n    // 将TextView添加到父布局中\n    vsvc.addView(textView)\n}\n\n\n// 获取水平滚动视图中的线性布局容器\nval hsvc = findViewById<LinearLayout>(R.id.hsvc)\n\n// 设置水平滚动视图的滚动监听器，用于监听滚动位置变化\nfindViewById<HorizontalScrollView>(R.id.hsv).setOnScrollChangeListener({v, scrollX, scrollY, oldScrollX, oldScrollY ->\n    Log.d(TAG, \"ScrollX: $scrollX, ScrollY: $scrollY, oldScrollX: $oldScrollX, oldScrollY: $oldScrollY\")\n})\n\n// 循环创建50个TextView并添加到水平滚动布局中\nfor(i in 1 .. 50){\n    val textView = TextView(this).apply {\n        text = \"第 $i 个\"\n        textSize = 16f\n        setTextColor(Color.BLACK)\n        setBackgroundColor(Color.WHITE)\n        setPadding(20, 10, 20, 10)\n    }\n\n    // 设置TextView的布局参数，包括上下边距和右边距\n    val params = LinearLayout.LayoutParams(\n        LinearLayout.LayoutParams.WRAP_CONTENT,\n        LinearLayout.LayoutParams.WRAP_CONTENT\n    ).apply {\n        topMargin = 100\n        rightMargin = 20\n    }\n    textView.layoutParams = params\n    hsvc.addView(textView)\n}\n~~~\n\n### RecyclerView 容器\n\n[回到目录](#目录)\n\n#### 核心组件\n| 组件           | 说明                                           |\n| -------------- | ---------------------------------------------- |\n| Adapter        | 数据与视图绑定，创建ViewHolder，绑定数据到视图 |\n| ViewHolder     | 缓存视图引用，存储item布局中的控件引用         |\n| LayoutManager  | 定义布局方式，如垂直或水平，以及如何排列item   |\n| ItemDecoration | 定义item的装饰，如分割线，边框，背景颜色等     |\n| ItemAnimator   | 定义item的动画，如插入，删除，移动，改变大小等 |\n\n#### 引入依赖\n1. 在模组的 build.gradle文件中添加以下依赖项：\n\n~~~gradle\n// 添加RecyclerView依赖\ndependencies {\n    implementation(libs.androidx.recyclerview)\n}\n// 若添加失败尝试添加以下依赖项\ndependencies {\n    implementation(\"androidx.recyclerview:recyclerview:1.3.2\")\n}\n~~~\n\n2. 在项目级gradle.properties文件中添加网络代理\n~~~properties\nandroid.useAndroidX=true\nandroid.enableJetifier=true\n\nsystemProp.http.proxyHost=http://127.0.0.1:端口号\n~~~\n3. sync now\n\n#### 布局属性\n\n~~~xml\n<androidx.recyclerview.widget.RecyclerView\n        属性名=\"属性值\"\n        ......>\n~~~\n\n| 属性          | 说明       | 参数说明                                                                   |\n| ------------- | ---------- | -------------------------------------------------------------------------- |\n| id            | 控件的id   | @+id/recyclerView: 创建一个id<br>@id/recyclerView: 引用一个id              |\n| layout_width  | 控件的宽度 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局 |\n| layout_height | 控件的高度 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局 |\n\n#### RecyclerView的使用\n1. 添加依赖\n2. 布局Activity\n3. 创建Item布局\n    1. recycler_img_item.xml\n    ~~~xml\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n    <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\">\n\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n\n    </LinearLayout>\n    ~~~\n    2. recycler_text_item.xml\n    ~~~xml\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n    <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\">\n\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n        <LinearLayout\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:orientation=\"vertical\"\n            android:layout_marginLeft=\"20dp\">\n            <TextView\n                android:id=\"@+id/item_title\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"我是标题\"\n                android:textColor=\"#FF000000\"\n                android:textStyle=\"bold\"\n                android:textSize=\"18sp\"/>\n            <TextView\n                android:id=\"@+id/item_text\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"20dp\"\n                android:textColor=\"#FF000000\"\n                android:textSize=\"18dp\"/>\n        </LinearLayout>\n\n    </LinearLayout>\n    ~~~\n4. 实现Adapter & ViewHolder\n    ~~~kotlin\n    /**\n     * 设置Activity的内容视图，并初始化RecyclerView及其相关组件。\n     *\n     * @param layoutResID 布局资源ID，用于设置Activity的界面布局。\n     */\n    override fun setContentView(layoutResID: Int) {\n        super.setContentView(layoutResID)\n\n        val recyclerView = findViewById<RecyclerView>(R.id.recyclerView)\n        // 设置RecyclerView的布局管理器为垂直方向的瀑布流布局，列数为1（即线性布局效果）\n        recyclerView?.setLayoutManager(\n            StaggeredGridLayoutManager(\n                1,\n                StaggeredGridLayoutManager.VERTICAL\n            )\n        )\n        // 初始化数据源，添加101个字符串项\n        val data = mutableListOf<String?>()\n        for (i in 0..100) {\n            data.add(\"Item $i\")\n        }\n        // 创建并设置适配器\n        val adapter = MyAdapter(data)\n        recyclerView?.setAdapter(adapter)\n        // 添加分割线装饰\n        recyclerView?.addItemDecoration(DividerItemDecoration(this, LinearLayoutManager.VERTICAL))\n        // 设置默认的动画效果\n        recyclerView?.itemAnimator = DefaultItemAnimator()\n    }\n\n    /**\n     * RecyclerView的适配器类，用于绑定不同类型的数据到视图上。\n     *\n     * @property data 数据源列表，包含要显示的字符串数据。\n     */\n    class MyAdapter(private val data: MutableList<String?>) :\n        RecyclerView.Adapter<MyAdapter.ViewHolder?>(){\n        companion object{\n            const val VIEW_TYPE_TEXT = 1\n            const val VIEW_TYPE_IMG = 2\n        }\n\n        /**\n         * 根据位置返回不同的视图类型。\n         *\n         * @param position 当前项在数据集中的位置。\n         * @return 返回视图类型标识符（VIEW_TYPE_TEXT 或 VIEW_TYPE_IMG）。\n         */\n        override fun getItemViewType(position: Int): Int{\n            return if (position % 2 == 0) VIEW_TYPE_TEXT else VIEW_TYPE_IMG\n        }\n\n        /**\n         * 创建一个新的ViewHolder实例。\n         *\n         * @param parent 父容器ViewGroup。\n         * @param viewType 视图类型标识符。\n         * @return 返回新创建的ViewHolder对象。\n         */\n        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyAdapter.ViewHolder {\n            val view : View\n            // 根据视图类型加载不同的布局文件\n            if(viewType == VIEW_TYPE_TEXT){\n                view = LayoutInflater.from(parent.getContext())\n                    .inflate(R.layout.recycler_text_item, parent, false)\n                view.tag = VIEW_TYPE_TEXT\n            } else{\n                view = LayoutInflater.from(parent.getContext())\n                    .inflate(R.layout.recycler_img_item, parent, false)\n                view.tag = VIEW_TYPE_IMG\n            }\n            return ViewHolder(view, data, this)\n        }\n\n        /**\n         * 将数据绑定到指定位置的ViewHolder上。\n         *\n         * @param holder 要绑定数据的ViewHolder。\n         * @param position 数据在列表中的位置。\n         */\n        override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n            holder.setText(data.get(position))\n        }\n\n        /**\n         * 返回数据集合的大小。\n         *\n         * @return 数据集合的元素数量。\n         */\n        override fun getItemCount(): Int {\n            return data.size\n        }\n\n        /**\n         * ViewHolder类，用于持有RecyclerView中每个子项的视图引用。\n         *\n         * @property itemView 子项的根视图。\n         * @property dataList 数据源列表。\n         * @property adapter 所属的适配器实例。\n         */\n        class ViewHolder(itemView: View, var dataList: MutableList<String?>, val adapter: MyAdapter) : RecyclerView.ViewHolder(itemView){\n            /**\n             * 设置文本内容并处理点击事件。\n             *\n             * @param text 要设置的文本内容。\n             */\n            fun setText(text: String?){\n                if(itemView.tag == VIEW_TYPE_TEXT){\n                    itemView.findViewById<TextView>(R.id.item_text).text = text\n                    // 文本类型项点击时移除第一个元素\n                    itemView.setOnClickListener {\n                        if (dataList.isNotEmpty()){\n                            dataList.removeAt(0)\n                            adapter.notifyItemRemoved(0)\n                        }\n                    }\n                }else {\n                    // 图片类型项点击时更新第一个元素的内容\n                    itemView.setOnClickListener {\n                        dataList[0] =  \"Item ${(0..100).random()}\"\n                        adapter.notifyItemChanged(0)\n                    }\n                }\n            }\n        }\n\n\n    }\n    ~~~\n5. 在Activity & Fragment中调用\n\n## 布局\n\n[回到目录](#目录)\n\nAndroid的布局过程是ui构建的核心环节，本质是 **视图树(View Hierarchy)** 中每个 **节点(View)** 确定自身以及其子元素尺寸和位置的过程\n\n### 测量和布局\n1. 测量 Measure\n    * 遍历子视图\n        * 跳过View.GONE\n        * 对其他子视图调用 measureChildWithMargins()\n    * 计算最大子视图尺寸\n        * 宽度：measureWidth + marginLeft + marginRight 的最大值\n        * 高度：measureHeight + marginTop + marginBottom 的最大值\n    * 处理自身尺寸\n        * 最终宽度 = max(子视图最大宽度，背景最小宽度，建议最小宽度) + paddingLeft + paddingRight\n        * 最终高度 = max(子视图最大高度，背景最小高度，建议最小高度) + paddingTop + paddingBottom\n        * 结果还需满足父视图传入的MeasureSpec\n    * 处理特殊子视图：设置了layout_gravity需重新测量调整位置\n2. 布局 Layout\n    * 确定布局区域 \n    * 遍历子视图\n\n### FrameLayout\n\n核心价值在于通过**layout_gravity**实现子视图的精准叠加定位\n\n#### 自身属性\n| 属性                      | 描述             | 参数说明                                                                                                    |\n| ------------------------- | ---------------- | ----------------------------------------------------------------------------------------------------------- |\n| android:layout_width      | 视图宽度         | match_parent:匹配父视图宽度<br>wrap_content:包裹内容宽度<br>具体数值:具体数值                               |\n| android:layout_height     | 视图高度         | match_parent:匹配父视图高度<br>wrap_content:包裹内容高度<br>具体数值:具体数值                               |\n| android:layout_gravity    | 视图对齐方式     | left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐<br>可以通过竖杠连接多个值 |\n| android:background        | 视图背景         | 颜色值:颜色值<br>图片:图片路径                                                                              |\n| android:foreground        | 视图前景         | 颜色值:颜色值<br>图片:图片路径                                                                              |\n| android:foregroundGravity | 视图前景对齐方式 | left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐                           |\n\n#### 子视图属性\n\n子视图默认排列在FrameLayout的左上角，且允许堆叠\n最终位置为对其方式并加上边距值后的位置\n\n| 属性                        | 描述           | 参数说明                                                                          |\n| --------------------------- | -------------- | --------------------------------------------------------------------------------- |\n| android:layout_gravity      | 子视图对齐方式 | left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐 |\n| android:layout_marginStart  | 子视图左边距   | 单位:dp                                                                           |\n| android:layout_marginEnd    | 子视图右边距   | 单位:dp                                                                           |\n| android:layout_marginTop    | 子视图上边距   | 单位:dp                                                                           |\n| android:layout_marginBottom | 子视图下边距   | 单位:dp                                                                           |\n\n### LinearLayout\n\n核心优势在于**方向性排列**和**权重分配**，适合构建列表、表单等结构性界面，但嵌套或频繁使用layout_weight属性可能会导致**性能问题**。\n\n#### 自身属性\n| 属性                        | 描述                         | 参数说明                                                                                                                                   |\n| --------------------------- | ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |\n| **android:orientation**     | 排列方向                     | horizontal：水平排列<br>vertical：垂直排列                                                                                                 |\n| android:layout_width        | 宽度                         | match_parent：填充父布局<br>wrap_content：内容自适应<br>具体数值                                                                           |\n| android:layout_height       | 高度                         | match_parent：填充父布局<br>wrap_content：内容自适应<br>具体数值                                                                           |\n| android:background          | 背景                         | 颜色值                                                                                                                                     |\n| android:gravity             | 子视图对齐方式               | center：居中<br>center_vertical：垂直居中<br>center_horizontal：水平居中<br>left：左对齐<br>right：右对齐<br>top：上对齐<br>bottom：下对齐 |\n| android:layout_gravity      | 子视图在父容器对齐方式       | center：居中<br>center_vertical：垂直居中<br>center_horizontal：水平居中<br>left：左对齐<br>right：右对齐<br>top：上对齐<br>bottom：下对齐 |\n| android:layout_marginTop    | 设置子视图与父容器顶部的距离 | 单位：dp                                                                                                                                   |\n| android:layout_marginBottom | 设置子视图与父容器底部的距离 | 单位：dp                                                                                                                                   |\n| android:layout_marginLeft   | 设置子视图与父容器左侧的距离 | 单位：dp                                                                                                                                   |\n| android:layout_marginRight  | 设置子视图与父容器右侧的距离 | 单位：dp                                                                                                                                   |\n| ***android:divider***       | 设置ListView的分割线         | drawable资源文件                                                                                                                           |\n| android:showDividers        | 设置ListView的分割线显示位置 | none：不显示；beginning：开头；middle：中间；end：结尾                                                                                     |\n| **android:weightSum**       | 设置LinearLayout的权重和     | float类型                                                                                                                                  |\n\n* 分割线示例\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\n    这是一个Android Drawable资源文件，用于定义分割线\n\n    主要功能：\n    - 创建一个1x1像素的红色矩形drawable\n    - 用于创建分割线\n\n    属性说明：\n    - android:shape=\"rectangle\": 指定形状为矩形\n    - android:width=\"1dp\" 和 android:height=\"1dp\": 设置形状尺寸为1x1像素\n    - android:color=\"#FF0000\": 设置填充颜色为纯红色\n\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:shape=\"rectangle\">\n\n    <size android:width=\"1dp\" android:height=\"1dp\"/>\n    <solid android:color=\"#FF0000\"/>\n\n</shape>\n~~~\n\n#### 子视图属性\n| 属性                   | 描述                           | 参数说明                                                                                            |\n| ---------------------- | ------------------------------ | --------------------------------------------------------------------------------------------------- |\n| android:layout_gravity | 设置子视图在父视图中的对齐方式 | left:左对齐<br>right:右对齐<br>center:居中对齐<br>fill:填充父视图                                   |\n| android:layout_weight  | 设置子视图在父视图中的权重     | 根据父视图的weightSum值来分配空间，默认weightSum为4，**需要将layout_width或layout_height设置为0dp** |\n\n### RelativeLayout\n\n[回到目录](#目录)\n\n是基于相对位置关系的布局容器，通过定义子视图相对于父容器或同级视图的位置来组织界面元素\n\n#### 子视图属性\n\n1. 对齐父容器边\n\n| 描述                             | 属性                       | 参数说明                                |\n| -------------------------------- | -------------------------- | --------------------------------------- |\n| android:layout_alignParentStart  | 设置视图与父容器起始边对齐 | true:启用左对齐<br>false:禁用左对齐     |\n| android:layout_alignParentEnd    | 设置视图与父容器结束边对齐 | true:启用右对齐<br>false:禁用右对齐     |\n| android:layout_alignParentTop    | 设置视图与父容器顶部对齐   | true:启用顶部对齐<br>false:禁用顶部对齐 |\n| android:layout_alignParentBottom | 设置视图与父容器底部对齐   | true:启用底部对齐<br>false:禁用底部对齐 |\n\n2. 方向位置\n\n| 描述                                              | 属性                             | 参数说明                     |\n| ------------------------------------------------- | -------------------------------- | ---------------------------- |\n| android:layout_toRightOf/ android:layout_toEndOf  | 设置视图相对于某个视图的右侧对齐 | @+id/viewId:指定某个视图的id |\n| android:layout_toLeftOf/ android:layout_toStartOf | 设置视图相对于某个视图的左侧对齐 | @+id/viewId:指定某个视图的id |\n| android:layout_below                              | 设置视图相对于某个视图的底部对齐 | @+id/viewId:指定某个视图的id |\n| android:layout_above                              | 设置视图相对于某个视图的顶部对齐 | @+id/viewId:指定某个视图的id |\n\n3. 边缘对齐\n\n| 描述                       | 属性                               | 参数说明                     |\n| -------------------------- | ---------------------------------- | ---------------------------- |\n| android:layout_alignTop    | 设置视图与某个视图的顶部对齐       | @+id/viewId:指定某个视图的id |\n| android:layout_alignBottom | 设置视图与某个视图的底部对齐       | @+id/viewId:指定某个视图的id |\n| android:layout_alignLeft   | 设置视图与某个视图的左侧对齐       | @+id/viewId:指定某个视图的id |\n| android:layout_alignRight  | 设置视图与某个视图的右侧对齐       | @+id/viewId:指定某个视图的id |\n| android:layout_baseline    | 设置视图的基线与指定视图的基线对齐 | @+id/viewId:指定某个视图的id |\n\n4. 居中控制\n\n| 描述                          | 属性                       | 参数说明                                |\n| ----------------------------- | -------------------------- | --------------------------------------- |\n| android:layout_centerInParent | 设置视图在父容器中居中显示 | true:启用居中显示<br>false:禁用居中显示 |\n| layout_centerHorizontal       | 垂直居中                   | true:启用垂直居中<br>false:禁用垂直居中 |\n| layout_centerVertical         | 水平居中                   | true:启用水平居中<br>false:禁用水平居中 |\n\n### ConstraintLayout\n\n[回到目录](#目录)\n\n用于构建复杂界面的灵活布局容器，通过 **约束关系(Constraint)** 精准控制子视图的相对位置和尺寸，相比传统布局能有效减少嵌套层级，**提升性能**\n\n#### 子视图属性\n\n1. 基本约束属性\n    * 水平方向\n        \n        | 属性                                 | 描述                   | 参数说明                     |\n        | ------------------------------------ | ---------------------- | ---------------------------- |\n        | app:layout_constraintLeft_toLeftOf   | 左对齐                 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintLeft_toRightOf  | 设置视图左侧在目标右侧 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintRight_toLeftOf  | 设置视图右侧在目标左侧 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintRight_toRightOf | 右对齐                 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintStart_toStartOf | 起始边对齐             | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintStart_toEndOf   | 起始边在目标结束边     | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintEnd_toStartOf   | 结束边在目标起始边     | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintEnd_toEndOf     | 结束边对齐             | @+id/viewId:指定某个视图的id |\n\n    * 垂直方向\n\n        | 属性                                   | 描述           | 参数说明                     |\n        | -------------------------------------- | -------------- | ---------------------------- |\n        | app:layout_constraintTop_toTopOf       | 顶部对齐       | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintTop_toBottomOf    | 顶部在目标底部 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintBottom_toTopOf    | 底部在目标顶部 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintBottom_toBottomOf | 底部对齐       | @+id/viewId:指定某个视图的id |\n\n    * 特殊对齐\n\n        | 属性                                       | 描述         | 参数说明                     |\n        | ------------------------------------------ | ------------ | ---------------------------- |\n        | app:layout_constraintBaseline_toBaselineOf | 文本基线对齐 | @+id/viewId:指定某个视图的id |\n\n2. 边距尺寸约束\n    * 常规边距\n        \n        | 属性                        | 描述             | 参数说明                  |\n        | --------------------------- | ---------------- | ------------------------- |\n        | android:layout_marginStart  | 设置视图起始边距 | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginEnd    | 设置视图结束边距 | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginTop    | 顶部边距         | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginBottom | 底部边距         | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginLeft   | 左侧边距         | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginRight  | 右侧边距         | 0dp:无边距<br>1dp:1dp边距 |\n\n    * 目标隐藏时的边距(约束目标变为GONE时生效)\n\n        | 属性                        | 描述               | 参数说明                                                                              |\n        | --------------------------- | ------------------ | ------------------------------------------------------------------------------------- |\n        | app:layout_goneMarginRight  | 目标隐藏时右侧边距 | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 目标宽度 + 目标margin** |\n        | app:layout_goneMarginLeft   | 目标隐藏时左侧边距 | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 目标宽度 + 目标margin** |\n        | app:layout_goneMarginTop    | 顶部边距           | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 目标高度 + 目标margin** |\n        | app:layout_goneMarginBottom | 底部边距           | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 目标高度 + 目标margin** |\n        | app:layout_goneMarginStart  | 启动边距           | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 宽度 + 目标margin**     |\n        | app:layout_goneMarginEnd    | 结束边距           | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 宽度 + 目标margin**     |\n\n    * 特殊尺寸值：0dp(即MATCH_CONSTRAINT，根据约束条件拓展)；wrap_content(自适应内容，可配合强制约束)\n    * 比例与限制\n\n        | 属性                                | 描述             | 参数说明                          |\n        | ----------------------------------- | ---------------- | --------------------------------- |\n        | app:layout_constraintDimensionRatio | 宽高比           | 1:1:宽高比为1:1                   |\n        | app:layout_constrainedWidth         | 强制宽度限制     | true:宽度限制<br>false:宽度不限制 |\n        | app:layout_constrainedHeight        | 强制高度限制     | true:高度限制<br>false:高度不限制 |\n        | android:minWidth                    | 设置视图最小宽度 | 0dp:无最小宽度                    |\n        | android:minHeight                   | 设置视图最小高度 | 0dp:无最小高度                    |\n        | android:maxWidth                    | 设置视图最大宽度 | 0dp:无最大宽度                    |\n        | android:maxHeight                   | 设置视图最大高度 | 0dp:无最大高度                    |\n\n3. 链式布局\n\n第一个元素的app:layout_constraintLeft_toLeftOf属性为parent，最后一个元素的app:layout_constraintRight_toRightOf属性为parent，中间的元素的app:layout_constraintLeft_toRightOf属性为前一个元素，app:layout_constraintRight_toLeftOf属性为后一个元素，即**双向连接**\n\n| 属性                                       | 描述             | 参数说明                                                                   |\n| ------------------------------------------ | ---------------- | -------------------------------------------------------------------------- |\n| app:layout_constraintHorizontal_chainStyle | 水平链式布局样式 | spread:均分<br>packed:均分且居中紧凑<br>spread_inside:均分且两侧紧贴父容器 |\n\n~~~xml\n<!--链式布局-->\n    <!--spread-->\n    <!--\n        Button控件button5的布局定义\n        该按钮参与水平链式约束，与button6、button7形成水平链条\n        左侧对齐父容器左侧，右侧对齐到button6的左侧\n        顶部位置在ratio控件的下方\n    -->\n    <Button\n        android:id=\"@+id/button5\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"button5\"\n        app:layout_constraintHorizontal_chainStyle=\"spread\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toLeftOf=\"@+id/button6\"\n        app:layout_constraintTop_toBottomOf=\"@id/ratio\"/>\n\n    <!--\n        Button控件button6的布局定义\n        该按钮是水平链条的中间元素\n        左侧对齐到button5的右侧，右侧对齐到button7的左侧\n        顶部位置与button5对齐\n    -->\n    <Button\n        android:id=\"@+id/button6\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"button6\"\n        app:layout_constraintLeft_toRightOf=\"@+id/button5\"\n        app:layout_constraintRight_toLeftOf=\"@id/button7\"\n        app:layout_constraintTop_toTopOf=\"@id/button5\"/>\n\n    <!--\n        Button控件button7的布局定义\n        该按钮是水平链条的最后一个元素\n        左侧对齐到button6的右侧，右侧对齐到父容器右侧\n        顶部位置与button5对齐\n    -->\n    <Button\n        android:id=\"@+id/button7\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"button7\"\n        app:layout_constraintTop_toTopOf=\"@id/button5\"\n        app:layout_constraintLeft_toRightOf=\"@id/button6\"\n        app:layout_constraintRight_toRightOf=\"parent\"/>\n~~~\n\n4. 权重分配\n\n通过结合链式布局和权重属性，实现权重分配，父容器默认权重总和为4\n\n此外，也可以通过结合layout_constraintLeft_toLeftOf、layout_constraintRight_toRightOf属性和偏移，实现按比例确定位置\n\n| 属性                                   | 描述         | 参数说明                   |\n| -------------------------------------- | ------------ | -------------------------- |\n| app:layout_constraintHorizontal_weight | 水平权重分配 | 0:不分配权重<br>1:分配权重 |\n| app:layout_constraintVertical_weight   | 垂直权重分配 | 0:不分配权重<br>1:分配权重 |\n| app:layout_constraintHorizontal_bias   | 水平偏移     | 0:不偏移<br>0.5:居中       |\n\n5. 参考线标签\n\n可以通过参考线标签，进一步实现复杂布局\n\n~~~xml\n    <!--\n        Guideline控件用于在ConstraintLayout中创建参考线，帮助布局对齐\n        android:id: 控件的唯一标识符\n        android:layout_width: 布局宽度，wrap_content表示根据内容自适应\n        android:layout_height: 布局高度，wrap_content表示根据内容自适应\n        android:orientation: 参考线方向，vertical表示垂直方向\n        app:layout_constraintGuide_begin: 参考线距离父容器开始位置的距离，100dp表示距离左边100dp处\n    -->\n    <androidx.constraintlayout.widget.Guideline\n        android:id=\"@+id/guideline\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\"\n        app:layout_constraintGuide_begin=\"100dp\"/>\n~~~\n\n### 总结\n\n| 特性     | LinearLayout  | FrameLayout  | RelativeLayout          | ConstraintLayout |\n| -------- | ------------- | ------------ | ----------------------- | ---------------- |\n| 布局逻辑 | 线性方向排列  | 视图堆叠     | 相对其他视图/父容器定位 | 视图间约束关系   |\n| 嵌套     | 易嵌套过深    | 极少嵌套     | 可减少嵌套              | 显著减少嵌套     |\n| 性能     | 嵌套多层时差  | 最优（简单） | 较差（两次测量）        | 最优（复杂布局） |\n| 适用场景 | 简单列表/等分 | 叠加视图     | 中等复杂的相对定位      | 高复杂度布局     |\n| 学习曲线 | 简单          | 简单         | 中等                    | 较高             |\n\n\n## 创建自定义组件\n\n[返回目录](#目录)\n\n1. 在res目录下的values文件夹中创建attrs.xml文件\n2. 在attrs.xml文件的<resources>标签中添加如下内容：`declare-styleable`标签中的`name`属性定义了自定义组件的名称，`attr`标签中的`name`属性定义了属性的名称，`format`属性定义了属性的类型\n\n~~~xml\n    <!--\n        定义自定义控件IconTextView的样式属性\n        该样式集合用于支持在XML布局文件中配置IconTextView控件的各种属性\n    -->\n    <declare-styleable name=\"IconTextView\">\n        <!-- 图标资源引用，用于设置控件显示的图标 -->\n        <attr name=\"iconSrc\" format=\"reference\"/>\n        <!-- 显示文本内容，用于设置控件显示的文字 -->\n        <attr name=\"text\" format=\"string\"/>\n        <!-- 文本颜色，用于设置文字的显示颜色 -->\n        <attr name=\"textColor\" format=\"color\"/>\n        <!-- 文本大小，用于设置文字的显示尺寸 -->\n        <attr name=\"textSize\" format=\"dimension\"/>\n    </declare-styleable>\n~~~\n\n3. 在主文件夹中创建自定义类IconTextView.kt\n4. 重写其中的onMeasure()、onLayout()方法\n\n~~~kotlin\nclass IconTextView @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null) :\n    ViewGroup(context, attrs){\n    /**\n     * 图标控件实例\n     */\n    private var mIcon: ImageView? = null\n\n    /**\n     * 文本控件实例\n     */\n    private var mText: TextView? = null\n\n    /**\n     * 初始化函数，在构造函数中调用\n     */\n    init{\n        init(context, attrs)\n    }\n\n    /**\n     * 初始化控件方法\n     *\n     * @param context 上下文对象，用于创建视图控件\n     * @param attrs 属性集合，包含布局文件中定义的属性\n     */\n    private fun init(context: Context, attrs: AttributeSet?){\n        // 创建图标和文本控件实例\n        mIcon = ImageView(context)\n        mText = TextView(context)\n\n        // 将子视图添加到容器中\n        addView(mIcon)\n        addView(mText)\n\n        // 解析自定义属性\n        attrs?.let { parseAttributes(context, it) }\n\n\n    }\n\n    private fun parseAttributes(context: Context, attrs: AttributeSet) {\n        val typedArray = context.obtainStyledAttributes(attrs, R.styleable.IconTextView)\n\n        // 解析图标资源\n        val iconResId = typedArray.getResourceId(R.styleable.IconTextView_iconSrc, -1)\n        if (iconResId != -1) {\n            mIcon?.setImageResource(iconResId)\n        }\n\n        // 解析文本内容\n        val text = typedArray.getString(R.styleable.IconTextView_text)\n        mText?.text = text\n\n        // 解析文本颜色\n        val textColor = typedArray.getColor(R.styleable.IconTextView_textColor,\n            mText?.currentTextColor ?: 0xFF000000.toInt())\n        mText?.setTextColor(textColor)\n\n        // 解析文本大小\n        val textSize = typedArray.getDimension(R.styleable.IconTextView_textSize, -1f)\n        if (textSize != -1f) {\n            mText?.textSize = textSize / context.resources.displayMetrics.scaledDensity\n        }\n\n        typedArray.recycle()\n    }\n\n\n    /**\n     * 重写onMeasure:测量自定义视图的尺寸\n     *\n     * @param widthMeasureSpec 宽度测量规格，包含宽度值和测量模式\n     * @param heightMeasureSpec 高度测量规格，包含高度值和测量模式\n     */\n    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {\n        // 测量图标和文本组件的实际尺寸\n        mIcon!!.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)\n        mText!!.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)\n\n        // 计算内容区域的宽度和高度\n        var width = mIcon!!.measuredWidth + mText!!.measuredWidth\n        var height = max(mIcon!!.measuredHeight, mText!!.measuredHeight)\n\n        // 添加内边距到总尺寸\n        width += paddingLeft + paddingRight\n        height += paddingTop + paddingBottom\n\n        // 根据测量规格解析最终尺寸并设置\n        setMeasuredDimension(\n            resolveSize(width, widthMeasureSpec),\n            resolveSize(height, heightMeasureSpec)\n        )\n    }\n\n    /**\n     * 重写onLayout:布局回调方法，用于确定子视图的位置\n     *\n     * @param changed 布局是否发生变化\n     * @param l 左边界位置\n     * @param t 上边界位置\n     * @param r 右边界位置\n     * @param b 下边界位置\n     */\n    override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {\n        val paddingLeft = paddingLeft\n        val paddingTop = paddingTop\n\n        // 布局图标视图，位置在左上角\n        mIcon!!.layout(\n            paddingLeft,\n            paddingTop,\n            paddingLeft + mIcon!!.measuredWidth,\n            paddingTop + mIcon!!.measuredHeight\n        )\n\n        // 布局文本视图，位置在图标右侧\n        mText!!.layout(\n            paddingLeft + mIcon!!.measuredWidth,\n            paddingTop,\n            paddingLeft + mIcon!!.measuredWidth + mText!!.measuredWidth,\n            paddingTop + mText!!.measuredHeight\n        )\n    }\n}\n~~~\n\n5. 在布局文件中使用自定义控件IconTextView\n\n~~~xml\n<com.kei.helloworld.IconTextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:iconSrc=\"@mipmap/ic_launcher_round\"\n        app:text=\"HelloWorld!!!\"\n        app:textColor=\"#FFFF0000\"\n        app:textSize=\"30sp\" />\n~~~\n\n## 属性动画\n\n### 动画框架\n\n| 特性       | ViewPropertyAnimator   | ObjextAnimator               |\n| ---------- | ---------------------- | ---------------------------- |\n| 目标对象   | 仅限View               | 任意对象                     |\n| 多属性动画 | 链式调用且自动合并     | 需手动优化                   |\n| 灵活性     | 易嵌套过深             | 极少嵌套                     |\n| 性能       | 低                     | 高                           |\n| 使用场景   | View的简单、高性能动画 | 界面复杂动画、非View对象动画 |\n\n### 常用API\n\n| API             | 作用            | 对应属性动画中的方法               |\n| --------------- | --------------- | ---------------------------------- |\n| setTranslationX | 设置X轴偏移     | translationX()<br>translationXBy() |\n| setTranslationY | 设置Y轴偏移     | translationY()<br>translationYBy() |\n| setTranslationZ | 设置Z轴偏移     | translationZ()<br>translationZBy() |\n| setX            | 设置X轴绝对位置 | x()<br>xBy()                       |\n| setY            | 设置Y轴绝对位置 | y()<br>yBy()                       |\n| setZ            | 设置Z轴绝对位置 | z()<br>zBy()                       |\n| setRotation     | 设置平面旋转    | rotation()<br>rotationBy()         |\n| setRotationX    | 设置沿x轴旋转   | rotationX()<br>rotationXBy()       |\n| setRotationY    | 设置沿y轴旋转   | rotationY()<br>rotationYBy()       |\n| setScaleX       | 设置X轴缩放     | scaleX()<br>scaleXBy()             |\n| setScaleY       | 设置Y轴缩放     | scaleY()<br>scaleYBy()             |\n| setAlpha        | 设置透明度      | alpha()<br>alphaBy()               |\n\n### ViewPropertyAnimator\n1. 获取组件对象\n2. 通过某些事件监听触发动画效果(示例使用了点击事件)\n3. 组件对象调用animate()方法然后链式调用设置动画效果\n\n~~~kotlin\n        // 获取蓝色视图组件\n        val blueView = findViewById<View>(R.id.view3)\n        /**\n         * 设置ViewPropertyAnimator按钮的点击事件监听器\n         * 该函数会在用户点击按钮时触发动画效果\n         */\n        findViewById<Button>(R.id.viewPropertyAnimator).setOnClickListener {\n            // 执行blueView的组合动画：平移、透明度变化和缩放\n            blueView.animate().translationX(500.0F)\n                .alpha(0.5F)\n                .scaleX(0.5F)\n                .scaleY(0.5F)\n                .setDuration(2000)\n        }\n~~~\n\n### ObjectAnimator\n1. 获取组件对象\n2. 通过某些事件监听触发动画效果(示例使用了点击事件)\n3. 创建AnimatorSet()对象\n4. 通过AnimatorSet()对象调用playTogether()方法添加多个属性动画\n5. ObjectAnimator()对象调用ofFloat()方法创建属性动画\n6. AnimatorSet()对象调用setDuration()方法设置动画持续时间\n7. AnimatorSet()对象interpolator属性可以为动画设置动画插值器\n8. AnimatorSet()对象调用start()方法开始执行动画\n\n~~~kotlin\n        // 获取蓝色视图组件\n        val blueView = findViewById<View>(R.id.view3)\n        /**\n         * 设置ObjectAnimator按钮的点击事件监听器\n         * 该函数会在用户点击按钮时触发动画效果\n         */\n        findViewById<Button>(R.id.objectAnimator).setOnClickListener {\n            // 创建动画集合，用于同时播放多个属性动画\n            val set = AnimatorSet()\n            set.playTogether(\n                ObjectAnimator.ofFloat(blueView, \"translationX\", 600.0F),\n                ObjectAnimator.ofFloat(blueView, \"scaleY\", 0.5F),\n                ObjectAnimator.ofFloat(blueView, \"alpha\", 0.5F)\n            )\n            // 设置动画持续时间为2000毫秒\n            set.setDuration(2000)\n            // 设置动画插值器为加速减速插值器\n            set.interpolator = AccelerateDecelerateInterpolator()\n            // 开始执行动画\n            set.start()\n        }\n~~~\n\n#### 动画插值器\n\n插值器控制动画的**变化速率**，将**线性时间进度(0.0-1.0)**转换为非线性进度值，实现加速、减速、弹跳等效果\n\n| 插值器类型                       | 效果描述                 | 适用场景     | 函数代码                                   |\n| -------------------------------- | ------------------------ | ------------ | ------------------------------------------ |\n| AccelerateDecelerateInterpolator | 默认插值器，先加速后减速 | 自然运动     | new AccelerateDecelerateInterpolator()     |\n| LinearInterpolator               | 匀速插值器               | 匀速运动     | new LinearInterpolator()                   |\n| AccelerateInterpolator           | 持续加速                 | 物体下落     | new AccelerateInterpolator()               |\n| DecelerateInterpolator           | 持续减速                 | 物体上升     | new DecelerateInterpolator()               |\n| BounceInterpolator               | 结束时弹跳               | 落地反弹     | new BounceInterpolator()                   |\n| OvershootInterpolator            | 超越终点后回弹           | 按钮点击反馈 | new OvershootInterpolator()                |\n| PathInterpolator                 | 自定义曲线轨迹           | 轨迹运动     | new PathInterpolator(0.4F, 0.5F, 0F, 1.0F) |\n\n### xmlAnimator\n1. 获取组件对象\n2. 通过某些事件监听触发动画效果(示例使用了点击事件)\n3. 创建AnimatorInflater()对象，并调用loadAnimator()方法加载XML定义的属性动画资源\n4. AnimatorInflater()对象调用addListener()方法添加状态监听器，重写监听方法\n5. AnimatorInflater()对象调用setTarget()方法设置动画目标对象\n6. AnimatorInflater()对象调用start()方法开始执行动画\n\n\n\n~~~kotlin\n        // 获取蓝色视图组件\n        val blueView = findViewById<View>(R.id.view3)\n        /**\n         * 设置XML动画按钮的点击监听器\n         * 该函数为按钮添加点击事件处理，加载并执行XML定义的属性动画\n         * 监听动画的各种状态并在状态变化时显示对应的Toast提示\n         */\n        findViewById<Button>(R.id.xmlAnimator).setOnClickListener {\n            // 加载XML中定义的属性动画资源\n            val anim = AnimatorInflater.loadAnimator(\n                this,\n                R.animator.text_animator\n            )\n\n            // 为动画添加状态监听器，监听动画的开始、结束、重复和取消事件\n            anim.addListener(object : Animator.AnimatorListener{\n                override fun onAnimationCancel(animation: Animator) {\n                    Toast.makeText(this@ActivityAnimation, \"onAnimationCancel\", Toast.LENGTH_SHORT).show()\n                }\n                override fun onAnimationEnd(animation: Animator) {\n                    Toast.makeText(this@ActivityAnimation, \"onAnimationEnd\", Toast.LENGTH_SHORT).show()\n                }\n                override fun onAnimationRepeat(animation: Animator) {\n                    Toast.makeText(this@ActivityAnimation, \"onAnimationRepeat\", Toast.LENGTH_SHORT).show()\n                }\n                override fun onAnimationStart(animation: Animator) {\n                    Toast.makeText(this@ActivityAnimation, \"onAnimationStart\", Toast.LENGTH_SHORT).show()\n                }\n            })\n            // 设置动画的目标视图\n            anim.setTarget(blueView)\n            // 启动动画\n            anim.start()\n        }\n~~~\n\n#### 动画属性资源的定义\n1. 在res目录下创建**animator文件夹**\n2. 创建**XML文件**，并添加以下内容\n3. set标签中的ordering属性控制**动画播放顺序**\n4. set标签下的objectAnimator标签定义了属性**动画效果**\n5. 其中duration属性控制**动画持续时间**，propertyName属性控制**动画属性名称**，valueFrom属性控制动画**起始值**，valueTo属性控制动画**结束值**\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!--\n    AnimatorSet配置文件\n\n    该XML文件定义了一个属性动画集合，用于按顺序播放多个动画效果\n\n    属性说明：\n    xmlns:android - Android命名空间声明，必需项\n    android:ordering - 动画播放顺序控制属性\n        值为\"sequentially\"表示动画将按顺序依次播放\n        可选值还包括\"together\"表示同时播放所有动画\n-->\n<set xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:ordering=\"sequentially\">\n\n    <!--\n        透明度动画函数\n        功能：在1000毫秒内将对象的透明度从1.0渐变到0.5\n        参数：\n            android:duration - 动画持续时间，单位为毫秒\n            android:propertyName - 动画属性名称，此处为透明度alpha\n            android:valueFrom - 属性起始值，完全不透明\n            android:valueTo - 属性结束值，半透明状态\n    -->\n    <objectAnimator\n        android:duration=\"1000\"\n        android:propertyName=\"alpha\"\n        android:valueFrom=\"1.0\"\n        android:valueTo=\"0.5\"/>\n\n    <!--\n        水平位移动画函数\n        功能：在1000毫秒内将对象沿X轴从位置0移动到位置600\n        参数：\n            android:duration - 动画持续时间，单位为毫秒\n            android:propertyName - 动画属性名称，此处为水平位移translationX\n            android:valueFrom - X轴起始位置坐标\n            android:valueTo - X轴结束位置坐标\n    -->\n    <objectAnimator\n        android:duration=\"1000\"\n        android:propertyName=\"translationX\"\n        android:valueFrom=\"0.0\"\n        android:valueTo=\"600.0\"/>\n\n    <!--\n        旋转变换动画函数\n        功能：在1000毫秒内将对象绕中心点旋转360度\n        参数：\n            android:duration - 动画持续时间，单位为毫秒\n            android:propertyName - 动画属性名称，此处为旋转角度rotation\n            android:valueFrom - 起始旋转角度，0度\n            android:valueTo - 结束旋转角度，360度\n    -->\n    <objectAnimator\n        android:propertyName=\"rotation\"\n        android:valueFrom=\"0\"\n        android:valueTo=\"360\"\n        android:duration=\"1000\"/>\n\n\n</set>\n~~~\n\n\n\n## 数据储存\n\n[回到目录](#目录)\n\n### SharedPreferences\n\n#### 简介\n* 核心概念​​：SharedPreferences 是 Android 系统提供的一个​​轻量级存储类​​，用于以 ​**​键值对（Key-Value）​**​ 的形式存储简单的数据。它本质上将一个 XML 文件保存在设备的私有目录中，从而实现了数据的持久化\n* 存储位置​​：**/data/data/<你的应用包名>/shared_prefs/**目录下。每个 SharedPreferences 文件都是一个 **.xml** 文件\n* ​数据类型​​：支持存储**基本数据类型**，包括 String（字符串）、`Int`（整型）、`Boolean`（布尔型）、`Float`（浮点型）、`Long`（长整型）以及 `Set<String>`（字符串集合）\n* 模式​​：通常使用 **MODE_PRIVATE模式**，这意味着该文件仅供你的应用自身访问，确保了数据的安全性。其他允许跨应用访问的模式（如 MODE_WORLD_READABLE）由于安全风险，已被废弃\n\n#### 存储数据\n\n1. 创建SharedPreferences对象\n\n~~~kotlin\n// 在 Activity 或 Fragment 中\nval sharedPref = getSharedPreferences(\"user_preferences\", Context.MODE_PRIVATE)\n~~~\n\n* ​参数1 \"user_preferences\"​​：自定义的文件名。系统会自动添加 .xml后缀。文件最终会是 user_preferences.xml\n* ​参数2 Context.MODE_PRIVATE​​：固定模式，表示私有文件。\n\n2. 获取edit对象\n\n~~~kotlin\nval editor = sharedPref.edit()\n~~~\n\n3. 写入数据\n\n~~~kotlin\neditor.putInt(\"Integer\", 1)// 存储整型数据\neditor.putLong(\"Long\", 1L)// 存储长整型数据\neditor.putFloat(\"Float\", 1.0f)// 存储浮点型数据\neditor.putBoolean(\"Boolean\", true)// 存储布尔型数据\neditor.putString(\"username\", \"admin\")// 存储字符串数据\nval setData: Set<String> = setOf(\"one\", \"two\", \"three\")\neditor.putStringSet(\"StringSet\", setData)// 存储字符串集合数据\n\neditor.apply() // 提交数据\n~~~\n\n\n* **​键（Key）​​：** 是一个字符串，作为数据的唯一标识符，比如 \"user_nickname\"。之后要靠这个键来读取数据。\n* **​值（Value）​​：** 你要存储的具体数据。\n* apply()vs commit()​​：\n    * apply()：​**​强烈推荐使用**​​。它是异步的，立即返回，不会阻塞你的用户界面（UI），性能更好\n    * commit()​​：是同步的，会等待数据完全写入磁盘后才返回。如果在主线程频繁使用，可能会引起应用无响应（ANR），通常只在需要立即知道写入是否成功的特殊场景下使用\n\n步骤2和步骤3可以合并为：\n~~~kotlin\nsharedPref.edit(){\n    putInt(\"Integer\", 1)// 存储整型数据\n    putLong(\"Long\", 1L)// 存储长整型数据\n    putFloat(\"Float\", 1.0f)// 存储浮点型数据\n    putBoolean(\"Boolean\", true)// 存储布尔型数据\n    putString(\"username\", \"admin\")// 存储字符串数据\n    val setData: Set<String> = setOf(\"one\", \"two\", \"three\")\n    putStringSet(\"StringSet\", setData)// 存储字符串集合数据\n}\n~~~\n\n#### 读取数据\n1. 创建SharedPreferences对象\n\n~~~kotlin\nval sharedPref = getSharedPreferences(\"user_preferences\", Context.MODE_PRIVATE)\n~~~\n\n2. 获取数据\n\n~~~kotlin\nval username = sharedPref.getString(\"username\", \"\")\nval age = sharedPref.getInt(\"age\", 0)\nval setData = sharedPref.getStringSet(\"StringSet\", null)\nval male = sharedPref.getBoolean(\"male\", true)\n~~~\n* **参数1 \"username\"​​：** 键，用于获取数据。\n* **参数2 \"\"：** 默认值，如果获取的数据不存在，则返回这个默认值。\n\n3. 更新ui\n\n#### 删除数据\n\n1. 创建SharedPreferences对象\n\n~~~kotlin\nval sharedPref = getSharedPreferences(\"user_preferences\", Context.MODE_PRIVATE)\n~~~\n\n2. 创建edit对象\n\n~~~kotlin\nval editor = sharedPref.edit()\n~~~\n\n3. 删除数据\n\n~~~kotlin\n// 删除单个数据\neditor.remove(\"username\")\n// 删除所有数据\neditor.clear()\n\neditor.apply()\n~~~\n\n步骤2和步骤3可以合并为：\n~~~kotlin\nsharedPref.edit(){\n    remove(\"username\")\n    clear()\n}\n\n~~~\n#### 完整代码实践\n\n~~~kotlin\npackage com.kei.datebaseandnetwork\n\nimport android.content.Context\nimport android.os.Bundle\nimport android.util.Log\nimport android.widget.Toast\nimport androidx.activity.ComponentActivity\nimport androidx.activity.enableEdgeToEdge\nimport androidx.appcompat.app.AppCompatActivity\nimport androidx.core.content.edit\nimport androidx.core.view.ViewCompat\nimport androidx.core.view.WindowInsetsCompat\nimport com.kei.datebaseandnetwork.databinding.ActivitySharedPrefBinding\n\nclass ActivitySharedPref : ComponentActivity() {\n    /**\n     * SharedPreferences文件名常量\n     */\n    private val prefsName = \"kei_prefs\"\n\n    /**\n     * 视图绑定对象\n     */\n    private lateinit var binding: ActivitySharedPrefBinding\n\n    /**\n     * 日志标签常量\n     */\n    private val TAG = \"SharedPrefActivity\"\n\n    /**\n     * Activity创建时的回调方法\n     *\n     * @param savedInstanceState 保存的实例状态Bundle对象，用于恢复之前保存的状态数据\n     */\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        // 初始化视图绑定并设置布局\n        binding = ActivitySharedPrefBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        // 为按钮设置点击事件监听器\n        binding.submit.setOnClickListener { saveData() }\n        binding.read.setOnClickListener { readData() }\n        binding.clear.setOnClickListener { clearData() }\n    }\n\n    /**\n     * 保存用户输入的数据到SharedPreferences中\n     * 该函数从界面输入框获取用户名、年龄、邮箱和配置信息，验证数据完整性后进行加密存储\n     *\n     * 无参数\n     * 无返回值\n     */\n    private fun saveData(){\n        // 获取用户输入的各个字段数据\n        val username = binding.inputName.text.toString()\n        val age = binding.inputAge.text.toString()\n        val email = binding.inputEmail.text.toString()\n        val config = binding.inputConfig.text.toString()\n\n        // 验证所有字段都不为空\n        if(username.isNotEmpty() && age.isNotEmpty() && email.isNotEmpty() && config.isNotEmpty()){\n            val prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)\n            // edit() 方法自带commit()方法\n            prefs.edit(){\n                putString(\"username\", username)\n                putInt(\"age\", age.toInt())\n                putString(\"email\", email)\n                // 处理配置信息，按分号分割并加密存储\n                val configs = config.split(\";\")\n                val setValue : MutableSet<String> = mutableSetOf()\n                configs.forEach {\n                    val value = SimpleEncryptor(TAG).encrypt(it)\n                    setValue.add(value)\n                }\n                Log.i(TAG, \"encryptor user config:value = $setValue\")\n                putStringSet(\"configs\", setValue)\n            }\n            binding.result.text = \"数据保存成功\"\n        }else{\n            Toast.makeText(this, \"信息输入错误\", Toast.LENGTH_SHORT).show()\n        }\n    }\n\n    /**\n     * 读取用户数据并显示在界面中\n     *\n     * 该函数从SharedPreferences中读取用户的个人信息和配置信息，\n     * 对加密的配置信息进行解密处理，最后将所有信息格式化显示在界面上。\n     *\n     * 注意：该函数不接收参数，无返回值\n     */\n    private fun readData() {\n        // 从SharedPreferences中读取用户基本信息\n        val prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)\n        val username = prefs.getString(\"username\", \"\")\n        val age = prefs.getInt(\"age\", 0)\n        val email = prefs.getString(\"email\", \"\")\n        val configs = prefs.getStringSet(\"configs\", null)\n\n        // 解密配置信息\n        val userConfig: MutableList<String> = mutableListOf()\n        configs?.forEach {\n            val decryptValue = SimpleEncryptor(TAG).decrypt(it)\n            Log.i(TAG, \"decrypt value, before = $it, after = $decryptValue\")\n            userConfig.add(decryptValue)\n        }\n\n        // 将用户信息显示在界面中\n        binding.result.text = \"用户名：$username\\n年龄：$age\\n邮箱：$email\\n配置信息：${userConfig.joinToString(\", \")}\"\n    }\n\n    private fun clearData(){\n        val prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)\n        prefs.edit(){\n            clear()\n        }\n        binding.result.text = \"数据已清空\"\n    }\n\n\n\n    class SimpleEncryptor(tag: String) {\n        fun encrypt(input: String): String {\n            // 示例简单加密：反转字符串（仅作演示）\n            return input.reversed()\n        }\n\n        fun decrypt(input: String): String {\n            // 示例简单解密：反转字符串（仅作演示）\n            return input.reversed()\n        }\n    }\n}\n~~~\n\n### SQLite数据库\n\n[回到目录](#目录)\n\nSQLite是一种基于文件的关系型数据库，用于存储和检索数据。具有**轻量级、独立性、跨平台、事务性**的特点\n\n#### SQLite数据库操作\n\n| 操作 | 方法          | 参数说明                                                                                                                                                                          | 返回值                         |\n| ---- | ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ |\n| 插入 | long insert() | @NotNull String table: 要插入数据的表名 <br> @Nullable String nullColumnHack: 插入数据时忽略的列名 <br> @Nullable ContentValues values: 要插入的数据                              | 新插入记录的行号，失败时返回-1 |\n| 更新 | int update()  | @NotNull String table: 要更新的表名 <br> @Nullable ContentValues values: 要更新的数据 <br> @Nullable String whereClause: 更新条件 <br> @Nullable String[] whereArgs: 更新条件参数 | 更新记录的行数                 |\n| 删除 | int delete()  | @NotNull String table: 要删除数据的表名 <br> @Nullable String whereClause: 删除条件 <br> @Nullable String[] whereArgs: 删除条件参数                                               | 删除记录的行数                 |\n\n\n\n#### SQLite使用步骤\n以实现简单的笔记管理功能为例，介绍SQLite数据库操作\n\n1. 定义数据模型 在app/src/main/java/你的包名/目录下创建 **Note.kt**\n\n~~~kotlin\ndata class Note(\n    val id: Long? = null, // 主键\n    val title: String, // 标题\n    val content: String, // 内容\n    val createTime: Long = System.currentTimeMillis() // 创建时间\n)\n~~~\n\n2. 创建数据库帮助类 在相同的目录下创建 **NoteDatabaseHelper.kt** 这是最关键的一步。我们需要创建一个继承自SQLiteOpenHelper的类，它负责**数据库的创建**和**版本管理**\n\n~~~kotlin\nclass NoteDbHelper(context: Context) : SQLiteOpenHelper(\n    context,\n    DATABASE_NAME,\n    null,\n    DATABASE_VERSION\n){\n    // 定义数据库结构信息\n    companion object {\n        const val DATABASE_NAME = \"notes.db\" // 数据库名称\n        const val DATABASE_VERSION = 1 // 数据库版本\n        const val TABLE_NAME = \"notes\" // 表名\n        const val COLUMN_ID = \"_id\" // 推荐使用 _id 作为主键列名\n        const val COLUMN_TITLE = \"title\" // 标题列名\n        const val COLUMN_CONTENT = \"content\" // 内容列名\n        const val COLUMN_CREATE_TIME = \"create_time\" // 创建时间列名\n    }\n\n    // 当数据库第一次被创建时调用，用于建表\n    override fun onCreate(db: SQLiteDatabase?) {\n        val createTableQuery = \"\"\"\n            CREATE TABLE $TABLE_NAME (\n                $COLUMN_ID INTEGER PRIMARY KEY AUTOINCREMENT,\n                $COLUMN_TITLE TEXT NOT NULL,\n                $COLUMN_CONTENT TEXT,\n                $COLUMN_CREATE_TIME INTEGER\n            )\n        \"\"\".trimIndent()\n        db?.execSQL(createTableQuery)\n    }\n\n    // 当数据库需要升级时调用（例如版本号增加）\n    override fun onUpgrade(db: SQLiteDatabase?, oldVersion: Int, newVersion: Int) {\n        db?.execSQL(\"DROP TABLE IF EXISTS $TABLE_NAME\")\n        onCreate(db)\n    }\n\n    // 插入一条新笔记\n    fun addNote(title: String, content: String): Long {\n        val db = writableDatabase\n        val values = ContentValues().apply {\n            put(COLUMN_TITLE, title)\n            put(COLUMN_CONTENT, content)\n            put(COLUMN_CREATE_TIME, System.currentTimeMillis())\n        }\n        // 插入操作，返回新行的ID，如果失败返回-1\n        return db.insert(TABLE_NAME, null, values)\n    }\n\n    // 获取所有笔记，按创建时间倒序排列\n    fun getAllNotes(): List<Note> {\n        val notes = mutableListOf<Note>()\n        val db = readableDatabase\n        // 查询语句，? 是占位符\n        val cursor = db.query(\n            TABLE_NAME,\n            null, // 选择所有列\n            null, // WHERE 子句\n            null, // WHERE 子句的参数\n            null, // GROUP BY\n            null, // HAVING\n            \"$COLUMN_CREATE_TIME DESC\" // ORDER BY 按时间降序\n        )\n\n        cursor.use {\n            // 遍历游标（Cursor），提取数据\n            while (it.moveToNext()) {\n                val id = it.getLong(it.getColumnIndexOrThrow(COLUMN_ID))\n                val title = it.getString(it.getColumnIndexOrThrow(COLUMN_TITLE))\n                val content = it.getString(it.getColumnIndexOrThrow(COLUMN_CONTENT))\n                val createTime = it.getLong(it.getColumnIndexOrThrow(COLUMN_CREATE_TIME))\n                notes.add(Note(id, title, content, createTime))\n            }\n        }\n        return notes\n    }\n\n    // 更新一条笔记\n    fun updateNote(note: Note): Int {\n        val db = writableDatabase\n        val values = ContentValues().apply {\n            put(COLUMN_TITLE, note.title)\n            put(COLUMN_CONTENT, note.content)\n        }\n        // 更新操作，返回受影响的行数\n        return db.update(\n            TABLE_NAME,\n            values,\n            \"$COLUMN_ID = ?\", // 通过ID定位要更新的笔记\n            arrayOf(note.id.toString())\n        )\n    }\n\n    // 根据ID删除一条笔记\n    fun deleteNoteById(id: Long): Int {\n        val db = writableDatabase\n        // 删除操作，返回被删除的行数\n        return db.delete(\n            TABLE_NAME,\n            \"$COLUMN_ID = ?\",\n            arrayOf(id.toString())\n        )\n    }\n}\n~~~\n\n3. 使用数据库帮助类 在app/src/main/java/你的包名/目录下创建 **NoteActivity.kt** 实例化NoteDbHelper，并调用其方法进行增删改查\n\n~~~kotlin\n\nclass NoteActivity : AppCompatActivity() {\n    \n    // 实例化数据库帮助类\n    private lateinit var dbHelper: NoteDbHelper\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_note)\n\n        // 初始化数据库帮助类\n        dbHelper = NoteDbHelper(this)\n\n        // 1. 插入一条新笔记\n        val newNoteId = dbHelper.addNote(\"我的第一篇笔记\", \"这是使用SQLite存储的内容！\")\n        Log.d(\"SQLiteDemo\", \"新笔记ID: $newNoteId\")\n\n        // 2. 查询所有笔记\n        val allNotes = dbHelper.getAllNotes()\n        for (note in allNotes) {\n            Log.d(\"SQLiteDemo\", \"笔记: [ID:${note.id}] ${note.title} - ${note.content}\")\n        }\n\n        // 假设我们要更新刚插入的笔记 (需要知道其ID)\n        if (newNoteId != -1L) {\n            val noteToUpdate = Note(newNoteId, \"修改后的标题\", \"更新后的内容\")\n            val rowsUpdated = dbHelper.updateNote(noteToUpdate)\n            Log.d(\"SQLiteDemo\", \"更新了 $rowsUpdated 行\")\n        }\n\n        // 删除笔记的示例（谨慎操作）\n        // val rowsDeleted = dbHelper.deleteNoteById(newNoteId)\n        // Log.d(\"SQLiteDemo\", \"删除了 $rowsDeleted 行\")\n    }\n\n    override fun onDestroy() {\n        dbHelper.close() // 记得在不用时关闭数据库连接\n        super.onDestroy()\n    }\n}\n~~~\n\n\n\n* 在实际开发中，可以通过各种事件监听来实现对数据库的操作，如点击按钮、输入框等。\n* 在实际开发中，通常使用**Room数据库框架**来操作数据库，Room是一个基于SQLite的ORM框架，可以更轻松地操作数据库。\n\n\n### 文件存储\n\n[回到目录](#目录)\n\nAndroid系统提供了两种主要的文件存储方式\n**​内部存储**​​是每个应用独有的沙盒环境，位于/data/data/<应用包名>/目录下，为应用数据提供了最高级别的保护\n​**​外部存储**​​可能是SD卡或设备的内置共享存储空间，适合存储需要共享或体积较大的文件\n\n#### 内部存储\n\n创建一个 FileStorageActivity.kt 文件用于演示文件操作，并添加以下代码：\n\n* 文件写入操作\n\n~~~kotlin\nclass FileStorageActivity : AppCompatActivity() {\n    \n    // 写入文件\n    private fun writeToInternalStorage(filename: String, content: String) {\n        try {\n            // 打开文件输出流\n            val outputStream: FileOutputStream = openFileOutput(filename, Context.MODE_PRIVATE)\n            \n            // 将字符串转换为字节并写入\n            outputStream.write(content.toByteArray())\n            \n            // 关闭流释放资源\n            outputStream.close()\n            \n            Log.d(\"FileIO\", \"文件写入成功: $filename\")\n        } catch (e: Exception) {\n            Log.e(\"FileIO\", \"文件写入失败\", e)\n            e.printStackTrace()\n        }\n    }\n    \n    // 使用示例\n    private fun saveUserData() {\n        val userData = \"\"\"\n            {\n                \"name\": \"张三\",\n                \"email\": \"zhangsan@example.com\",\n                \"preferences\": {\"theme\": \"dark\"}\n            }\n        \"\"\".trimIndent()\n        \n        writeToInternalStorage(\"user_config.json\", userData)\n    }\n}\n~~~\n\n​代码说明：​​\n\n  * openFileOutput()是Context类的方法，第一个参数是**文件名**，第二个参数是**操作模式**\n  * MODE_PRIVATE表示**覆盖**原文件，MODE_APPEND表示**追加**内容\n  * 必须使用try-catch处理可能的IOException\n  * 操作完成后务必**关闭**流释放资源\n\n\n* 文件读取操作\n\n~~~kotlin\n// 仍然在FileStorageActivity.kt中的FileStorageActivity类中添加以下方法\n\nprivate fun readFromInternalStorage(filename: String): String {\n    return try {\n        // 打开文件输入流\n        val inputStream: FileInputStream = openFileInput(filename)\n        \n        // 使用缓冲读取器提高读取效率\n        val reader = BufferedReader(InputStreamReader(inputStream))\n        val content = StringBuilder()\n        var line: String?\n        \n        // 逐行读取内容\n        while (reader.readLine().also { line = it } != null) {\n            content.append(line).append(\"\\n\")\n        }\n        \n        // 关闭资源\n        reader.close()\n        inputStream.close()\n        \n        // 返回读取的内容\n        content.toString()\n    } catch (e: FileNotFoundException) {\n        Log.e(\"FileIO\", \"文件不存在: $filename\", e)\n        \"\" // 返回空字符串表示文件不存在\n    } catch (e: Exception) {\n        Log.e(\"FileIO\", \"文件读取失败\", e)\n        \"\"\n    }\n}\n\n// 使用示例\nprivate fun loadUserConfig() {\n    val config = readFromInternalStorage(\"user_config.json\")\n    if (config.isNotEmpty()) {\n        // 处理配置数据\n        Log.d(\"FileIO\", \"加载的配置: $config\")\n    }\n}\n~~~\n​代码说明：​​\n\n  * 使用BufferedReader和InputStreamReader组合提高读取效率\n  * 逐行读取适合文本文件，避免内存溢出\n  * 需要处理文件不存在的特殊情况\n\n#### 序列化存储\n\n| 方案 | 使用场景 | 优缺点 |\n| --- | --- | --- |\n| `Serializable` | 将简单的对象持久化存储 | 优点：实现简单；<br>缺点：效率低，不适合跨进程高频传输 |\n| `Parcelable` | 跨进程通信使用（如Intent、AIDL等） | 优点：效率高，Android专用；<br>缺点：实现较为复杂 |\n| `JSON` | 网络传输，将复杂对象信息存储到文件 | 优点：跨平台，可读性好，兼容性强；<br>缺点：体积大 |\n\n### ContentProvider\n\n[回到目录](#目录)\n\nContentProvider是Android四大组件之一，它充当了一个​​标准化的**数据安全中间层**​​，允许你的应用将私有数据安全地**共享**给其他应用，或者去访问系统（如联系人、相册）或其他应用提供的数据它抽象了数据的底层存储细节（无论是SQLite数据库、文件还是网络数据），为所有数据访问提供了**统一的接口**\n\n#### 工作原理\n\n* **​ContentProvider（内容提供者）​​：** 数据提供方，负责封装对数据的增删改查等操作。你需要继承ContentProvider类并实现其核心方法\n* **​ContentResolver（内容解析器）​​：** 数据访问方。在任何需要访问数据的地方（如Activity），你通过ContentResolver（通过getContentResolver()获取）来调用统一的方法（query, insert, update, delete），由它去找到并调用正确的ContentProvider\n。这实现了数据访问方式的统一\n* **​URI（统一资源标识符）​​：** 这是数据的“地址”，用于唯一标识ContentProvider和其中的数据。它遵循标准格式：content://authority/path/id\n\n    * **content://：** 固定前缀，表示该URI用于ContentProvider\n    * **authority：** 授权标识，通常为应用的包名加上特定标识，用于在系统中唯一指定一个ContentProvider\n    * **path：** 路径，通常用于指定要操作的数据表（如users）\n    * **id（可选）：** 特定记录的ID（如/users/5表示ID为5的用户）\n\n#### ContentProvider的使用\n\n1. ​创建数据库契约类​​（定义数据库结构常量）：文件位置​​：app/src/main/java/com/example/yourAppName/目录下，新建Kotlin文件，例如NoteContract.kt 集中定义**数据库名、表名、列名**等常量，避免硬编码和拼写错误。\n\n~~~kotlin\n// NoteContract.kt\nobject NoteContract {\n    // ContentProvider的授权标识，通常使用应用包名\n    const val AUTHORITY = \"com.example.notepad.provider\"\n\n    // 定义Note数据表的模型\n    object NoteEntry {\n        const val TABLE_NAME = \"notes\"\n        // 必须包含 _id 列，这是Adapter等组件所期望的\n        const val _ID = \"_id\"\n        const val COLUMN_TITLE = \"title\"\n        const val COLUMN_CONTENT = \"content\"\n        const val COLUMN_CREATED_TIME = \"created_time\"\n    }\n}\n~~~\n\n2. ​创建数据库帮助类​​（SQLiteOpenHelper）：在同目录下新建Kotlin文件，例如NoteDatabaseHelper.kt 管理数据库的**创建和版本升级**\n\n~~~kotlin\n// NoteDatabaseHelper.kt\nimport android.content.Context\nimport android.database.sqlite.SQLiteDatabase\nimport android.database.sqlite.SQLiteOpenHelper\n\nclass NoteDatabaseHelper(context: Context) : SQLiteOpenHelper(\n    context,\n    DATABASE_NAME,\n    null,\n    DATABASE_VERSION\n) {\n    companion object {\n        const val DATABASE_NAME = \"notes.db\"\n        const val DATABASE_VERSION = 1\n    }\n\n    override fun onCreate(db: SQLiteDatabase) {\n        // 执行创建表的SQL语句\n        val SQL_CREATE_NOTES_TABLE = \"\"\"\n            CREATE TABLE ${NoteContract.NoteEntry.TABLE_NAME} (\n                ${NoteContract.NoteEntry._ID} INTEGER PRIMARY KEY AUTOINCREMENT,\n                ${NoteContract.NoteEntry.COLUMN_TITLE} TEXT NOT NULL,\n                ${NoteContract.NoteEntry.COLUMN_CONTENT} TEXT,\n                ${NoteContract.NoteEntry.COLUMN_CREATED_TIME} INTEGER DEFAULT (strftime('%s','now'))\n            )\n        \"\"\".trimIndent()\n        db.execSQL(SQL_CREATE_NOTES_TABLE)\n    }\n\n    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n        // 简单处理：删除旧表，创建新表。实际项目需做数据迁移。\n        db.execSQL(\"DROP TABLE IF EXISTS ${NoteContract.NoteEntry.TABLE_NAME}\")\n        onCreate(db)\n    }\n}\n~~~\n\n3. 实现自定义ContentProvider：在同目录下新建Kotlin文件，例如NoteProvider.kt 这是**最核心**的一步，我们需要创建一个类继承ContentProvider，并实现其**六个核心方法**\n\n~~~kotlin\n// NoteProvider.kt\nimport android.content.*\nimport android.database.Cursor\nimport android.net.Uri\n\nclass NoteProvider : ContentProvider() {\n    private lateinit var dbHelper: NoteDatabaseHelper\n\n    // UriMatcher用于匹配不同的URI请求\n    private val uriMatcher = UriMatcher(UriMatcher.NO_MATCH).apply {\n        // 注册URI模式\n        // content://com.example.notepad.provider/notes -> 操作整个notes表\n        addURI(NoteContract.AUTHORITY, \"notes\", NOTES)\n        // content://com.example.notepad.provider/notes/5 -> 操作ID为5的单条笔记\n        addURI(NoteContract.AUTHORITY, \"notes/#\", NOTE_ID)\n    }\n\n    companion object {\n        // 定义匹配码\n        private const val NOTES = 1\n        private const val NOTE_ID = 2\n    }\n\n    override fun onCreate(): Boolean {\n        // 初始化数据库帮助类\n        dbHelper = NoteDatabaseHelper(context!!)\n        return true // 返回true表示Provider初始化成功\n    }\n\n    // 查询数据\n    override fun query(\n        uri: Uri,\n        projection: Array<out String>?,\n        selection: String?,\n        selectionArgs: Array<out String>?,\n        sortOrder: String?\n    ): Cursor? {\n        val db = dbHelper.readableDatabase\n        return when (uriMatcher.match(uri)) {\n            NOTES -> {\n                // 查询所有笔记\n                db.query(\n                    NoteContract.NoteEntry.TABLE_NAME,\n                    projection,\n                    selection,\n                    selectionArgs,\n                    null,\n                    null,\n                    sortOrder ?: \"${NoteContract.NoteEntry.COLUMN_CREATED_TIME} DESC\"\n                )\n            }\n            NOTE_ID -> {\n                // 查询单条笔记，从URI中提取ID\n                val id = uri.lastPathSegment\n                db.query(\n                    NoteContract.NoteEntry.TABLE_NAME,\n                    projection,\n                    \"${NoteContract.NoteEntry._ID} = ?\",\n                    arrayOf(id),\n                    null,\n                    null,\n                    sortOrder\n                )\n            }\n            else -> throw IllegalArgumentException(\"Unknown URI: $uri\")\n        }.apply {\n            // 设置通知URI，当该URI对应的数据变化时，Cursor会知道\n            setNotificationUri(context?.contentResolver, uri)\n        }\n    }\n\n    // 插入数据\n    override fun insert(uri: Uri, values: ContentValues?): Uri? {\n        val db = dbHelper.writableDatabase\n        return when (uriMatcher.match(uri)) {\n            NOTES -> {\n                val id = db.insert(NoteContract.NoteEntry.TABLE_NAME, null, values)\n                if (id > 0) {\n                    // 插入成功，构造新插入数据的URI\n                    val newUri = ContentUris.withAppendedId(uri, id)\n                    // 通知所有监听此URI的数据观察者，数据已变更\n                    context?.contentResolver?.notifyChange(newUri, null)\n                    newUri\n                } else {\n                    throw SQLException(\"Failed to insert row into $uri\")\n                }\n            }\n            else -> throw IllegalArgumentException(\"Insertion not supported for $uri\")\n        }\n    }\n\n    // 更新数据\n    override fun update(\n        uri: Uri,\n        values: ContentValues?,\n        selection: String?,\n        selectionArgs: Array<out String>?\n    ): Int {\n        val db = dbHelper.writableDatabase\n        val count = when (uriMatcher.match(uri)) {\n            NOTES -> db.update(NoteContract.NoteEntry.TABLE_NAME, values, selection, selectionArgs)\n            NOTE_ID -> {\n                val id = uri.lastPathSegment\n                db.update(\n                    NoteContract.NoteEntry.TABLE_NAME,\n                    values,\n                    \"${NoteContract.NoteEntry._ID} = ?\",\n                    arrayOf(id)\n                )\n            }\n            else -> throw IllegalArgumentException(\"Update not supported for $uri\")\n        }\n        // 如果更新了数据，通知变化\n        if (count > 0) {\n            context?.contentResolver?.notifyChange(uri, null)\n        }\n        return count\n    }\n\n    // 删除数据\n    override fun delete(uri: Uri, selection: String?, selectionArgs: Array<out String>?): Int {\n        val db = dbHelper.writableDatabase\n        val count = when (uriMatcher.match(uri)) {\n            NOTES -> db.delete(NoteContract.NoteEntry.TABLE_NAME, selection, selectionArgs)\n            NOTE_ID -> {\n                val id = uri.lastPathSegment\n                db.delete(\n                    NoteContract.NoteEntry.TABLE_NAME,\n                    \"${NoteContract.NoteEntry._ID} = ?\",\n                    arrayOf(id)\n                )\n            }\n            else -> throw IllegalArgumentException(\"Deletion not supported for $uri\")\n        }\n        if (count > 0) {\n            context?.contentResolver?.notifyChange(uri, null)\n        }\n        return count\n    }\n\n    // 返回指定URI的MIME类型\n    override fun getType(uri: Uri): String? {\n        return when (uriMatcher.match(uri)) {\n            NOTES -> \"vnd.android.cursor.dir/vnd.${NoteContract.AUTHORITY}.note\"\n            NOTE_ID -> \"vnd.android.cursor.item/vnd.${NoteContract.AUTHORITY}.note\"\n            else -> throw IllegalArgumentException(\"Unknown URI: $uri\")\n        }\n    }\n}\n~~~\n\n4. 在AndroidManifest.xml中注册Provider：app/src/main/AndroidManifest.xml\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.example.notepad\">\n\n    <application ...>\n        <activity ...> ... </activity>\n\n        <!-- 注册ContentProvider -->\n        <provider\n            android:name=\".NoteProvider\"\n            android:authorities=\"com.example.notepad.provider\"\n            android:exported=\"true\" />\n            <!-- \n                android:name: 你的ContentProvider类的完整路径。\n                android:authorities: 授权标识，必须与代码中定义的AUTHORITY完全一致。\n                android:exported: 是否允许其他应用访问。true表示允许。\n            -->\n\n    </application>\n</manifest>\n~~~\n\n5. 在应用内或其他应用中通过ContentResolver访问数据（在Activity中）：\n\n~~~kotlin\n// 例如在您的 MainActivity.kt 中\nclass MainActivity : AppCompatActivity() {\n    // 定义基础URI\n    private val baseUri = Uri.parse(\"content://${NoteContract.AUTHORITY}/notes\")\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // 示例1：插入一条新笔记\n        val values = ContentValues().apply {\n            put(NoteContract.NoteEntry.COLUMN_TITLE, \"我的第一条笔记\")\n            put(NoteContract.NoteEntry.COLUMN_CONTENT, \"这是通过ContentProvider保存的内容。\")\n        }\n        val newUri = contentResolver.insert(baseUri, values)\n        Log.d(\"NoteApp\", \"新笔记插入成功，URI: $newUri\")\n\n        // 示例2：查询所有笔记\n        val cursor = contentResolver.query(baseUri, null, null, null, null)\n        cursor?.use {\n            while (it.moveToNext()) {\n                val id = it.getLong(it.getColumnIndexOrThrow(NoteContract.NoteEntry._ID))\n                val title = it.getString(it.getColumnIndexOrThrow(NoteContract.NoteEntry.COLUMN_TITLE))\n                val content = it.getString(it.getColumnIndexOrThrow(NoteContract.NoteEntry.COLUMN_CONTENT))\n                Log.d(\"NoteApp\", \"ID: $id, Title: $title, Content: $content\")\n            }\n        }\n    }\n}\n~~~\n\n## 异步交互\n\n### handler\n\n#### 核心组件和职责\n\n| 组件 | 职责 | 类比 |\n| --- | --- | --- |\n| Handler | **​​发送​​** 和 **​​处理​​** 消息| 公司的**​​快递员**​​，既负责把包裹寄出，也负责接收并处理送来的包裹。|\n| Message | 消息的载体，可以在线程间传递数据 | ​**​包裹**​​，里面装着要传递的信息或任务|\n| MessageQueue | 一个按时间排序的​**​消息队列**​​，用于存储所有通过 Handler 发送的消息 | ​**​快递分拣中心**​​，所有寄出的包裹都暂时存放在这里，排队等待发货 |\n| Looper | 运行 MessageQueue 的线程，不断循环，从 MessageQueue 中依次取出消息，并分发给对应的 Handler 处理 | **分拣员/送货员**​​，不停地从分拣中心取包裹，并按照地址交给对应的快递员 |\n\n一个线程通常只有一个 MessageQueue和一个 Looper，但可以有多个 Handler对象\n\n#### 使用步骤\n\n##### 使用 sendMessage\n\n在 Activity 或 Fragment 中（通常在主线程），创建 Handler 并指定如何处理消息。\n\n* 步骤1：创建Handler对象，关联主线程Looper对象，并重写handleMessage方法\n* 步骤2：重写handleMessage方法，处理消息\n* 步骤3：创建线程模拟耗时操作\n* 步骤4：构造消息对象发送到主线程\n\n完整类实现\n\n~~~kotlin\npackage com.kei.handlerdemo\n\nimport android.os.Bundle\nimport android.os.Handler\nimport android.os.Looper\nimport android.os.Message\nimport android.widget.TextView\nimport androidx.activity.ComponentActivity\n\n/**\n * 发送消息Activity\n * 用于演示如何在子线程中执行耗时操作，并通过Handler将结果传递到主线程更新UI\n */\nclass SendMessageActivity : ComponentActivity() {\n\n    private lateinit var textView: TextView\n\n    /**\n     * 主线程Handler，用于处理来自子线程的消息\n     * 使用Looper.getMainLooper()确保Handler在主线程中处理消息\n     * Looper能够自动处理到达的消息，并调用handleMessage方法进行处理\n     */\n    // 步骤1： 创建Handler对象，关联主线程Looper对象，并重写handleMessage方法\n    private val mainHandler = object : Handler(Looper.getMainLooper()){\n        /**\n         * 处理从子线程发送过来的消息\n         * @param msg 从子线程发送过来的消息对象\n         */\n        override fun handleMessage(msg: Message){\n            // 步骤2：在这里处理消息，此方法运行在主线程，可以安全更新ui\n            // 根据消息类型处理不同的业务逻辑\n            when (msg.what){\n                1 -> {\n                    // 从msg.obj中获取数据\n                    // 更新textView显示加载结果\n                    textView.text = msg.obj as String\n                }\n                2 -> {\n                    // 也可以使用arg1，arg2等传递简单整型数据\n                    // 处理进度信息（当前未使用）\n                    val progress = msg.arg1\n                    // 例如处理更新进度条\n                }\n            }\n        }\n    }\n\n    /**\n     * Activity创建时的回调方法\n     * @param savedInstanceState 用于恢复Activity状态的Bundle对象\n     */\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_send_message)\n        \n        // 初始化textView控件\n        textView = findViewById(R.id.textView)\n\n        // 创建并启动一个子线程来模拟耗时操作\n        Thread{\n            // 步骤3：模拟耗时操作，睡眠2秒\n            Thread.sleep(2000)\n            val result = \"数据加载完成\"\n\n            // 步骤4：构造消息对象并发送到主线程\n            val message = mainHandler.obtainMessage() // 使用obtainMessage() 复用消息对象\n            message.what = 1 // 消息标识\n            message.obj = result // 消息内容\n            mainHandler.sendMessage(message) // 发送消息\n        }.start()\n    }\n}\n~~~\n\n##### 使用 post\n\n* 步骤1: 创建Handler对象（关联主线程Looper）\n* 步骤2: 在子线程中执行耗时操作\n* 步骤3：使用post()方法，将UI更新操作直接投递到主线程执行\n\n完整类实现\n\n~~~kotlin\npackage com.kei.handlerdemo\n\nimport android.os.Bundle\nimport android.os.Handler\nimport android.os.Looper\nimport android.widget.TextView\nimport androidx.activity.ComponentActivity\n\n/**\n * PostActivity类用于演示Handler的post和postDelayed方法的使用\n * 通过子线程执行耗时操作后，使用Handler.post()方法将UI更新操作切换到主线程执行\n */\nclass PostActivity: ComponentActivity() {\n\n    private lateinit var textView: TextView\n\n    /**\n     * 主线程Handler，用于将Runnable切换到主线程执行\n     * 使用Looper.getMainLooper()确保Handler在主线程中处理消息\n     */\n    private val mainHandler = Handler(Looper.getMainLooper())\n\n    /**\n     * Activity创建时的回调方法\n     * @param savedInstanceState 用于恢复Activity状态的Bundle对象\n     */\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        setContentView(R.layout.activity_post)\n\n        textView = findViewById(R.id.tv_post)\n\n        // 创建并启动一个子线程来模拟耗时操作\n        Thread{\n            // 模拟耗时操作，睡眠2秒\n            Thread.sleep(2000)\n            val result = \"数据加载完成\"\n\n            // 使用Handler.post()将UI更新操作切换到主线程执行\n            mainHandler.post {\n                textView.text = result\n            }\n        }.start()\n    }\n\n    /**\n     * 延迟任务方法，使用Handler.postDelayed()延迟执行UI更新操作\n     * 在指定延迟时间后将Runnable切换到主线程执行\n     */\n    private fun delayTask(){\n        mainHandler.postDelayed({\n            textView.text = \"延迟2秒执行\"\n        }, 2000)\n    }\n}\n~~~\n\n##### 安全的最佳实践\n\n* 将 Handler 定义为静态内部类，并不再持有外部类的强引用\n* 使用 WeakReference 弱引用 Activity\n* 在处理消息前，先判断 Activity 是否还存在\n* 在 Activity 销毁时，移除所有未处理的消息和回调\n\n完整类实现\n\n~~~kotlin\npackage com.kei.handlerdemo\n\nimport android.os.Bundle\nimport android.os.Handler\nimport android.os.Looper\nimport android.os.Message\nimport android.widget.TextView\nimport androidx.appcompat.app.AppCompatActivity\nimport java.lang.ref.WeakReference\n\nclass SafeHandlerActivity : AppCompatActivity() {\n    private lateinit var textView: TextView\n    private lateinit var safeHandler: SafeHandler // 使用安全的 Handler\n\n    // 1. 将 Handler 定义为静态内部类，并不再持有外部类的强引用\n    class SafeHandler(activity: SafeHandlerActivity) : Handler(Looper.getMainLooper()) {\n        // 2. 使用 WeakReference 弱引用 Activity\n        private val activityWeakReference: WeakReference<SafeHandlerActivity> = WeakReference(activity)\n\n        override fun handleMessage(msg: Message) {\n            // 3. 在处理消息前，先判断 Activity 是否还存在\n            val activity = activityWeakReference.get()\n            if (activity != null) { // 如果 Activity 没被回收\n                // 安全地更新 UI\n                when (msg.what) {\n                    MSG_UPDATE_TEXT -> {\n                        activity.textView.text = msg.obj as? String\n                    }\n                    // 处理其他类型的消息...\n                }\n            }\n            // 如果 Activity 为 null（已被回收），则不执行任何操作\n        }\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_safe_handler)\n        textView = findViewById(R.id.tv_safe_handler)\n\n        // 初始化安全的 Handler\n        safeHandler = SafeHandler(this)\n\n        // 在子线程中工作\n        Thread {\n            // 模拟耗时任务\n            Thread.sleep(1500)\n            val result = \"数据加载完毕！\"\n\n            // 创建并发送消息\n            val message = safeHandler.obtainMessage().apply {\n                what = MSG_UPDATE_TEXT\n                obj = result\n            }\n            safeHandler.sendMessage(message)\n        }.start()\n    }\n\n    // 4. 在 Activity 销毁时，移除所有未处理的消息和回调\n    override fun onDestroy() {\n        super.onDestroy()\n        safeHandler.removeCallbacksAndMessages(null) // 参数为 null 表示移除所有\n    }\n\n    companion object {\n        // 定义消息类型常量，便于管理\n        private const val MSG_UPDATE_TEXT = 1\n    }\n}\n~~~\n\n### Coroutines 协程\n\n**Kotlin协程**是处理异步操作的推荐方案，它能帮你用更直观的代码替代复杂的回调，并高效管理后台任务\n\n#### 协程使用步骤\n\n1. 前置工作：添加依赖\n\n~~~kotlin\ndependencies {\n    // 协程核心库\n    implementation(\"org.jetbrains.kotlinx:kotlinx-coroutines-android:1.10.2\")\n    // 为ViewModel提供viewModelScope\n    implementation(\"androidx.lifecycle:lifecycle-viewmodel-ktx:2.9.4\")\n    // 为Activity/Fragment提供lifecycleScope\n    implementation(libs.androidx.lifecycle.runtime.ktx.v280)\n}\n~~~\n\n2. 在ViewModel中使用协程 文件位置：app/src/main/java/com/yourpackage/MyViewModel.kt 创建一个MyViewModel类，从网络获取数据并更新ui\n\n~~~kotlin\nclass MyViewModel(private val repository: MyRepository) : ViewModel() {\n\n    // 使用LiveData暴露UI状态\n    private val _data = MutableLiveData<String>()\n    val data: LiveData<String> = _data\n\n    private val _isLoading = MutableLiveData<Boolean>()\n    val isLoading: LiveData<Boolean> = _isLoading\n\n    // 触发数据获取\n    fun fetchData() {\n        // 在viewModelScope内启动协程\n        viewModelScope.launch {\n            _isLoading.value = true\n            try {\n                // 执行挂起函数，获取数据\n                val result = repository.fetchDataFromNetwork()\n                _data.value = result\n            } catch (e: Exception) {\n                // 处理错误\n                _data.value = \"Error: ${e.message}\"\n            } finally {\n                _isLoading.value = false\n            }\n        }\n    }\n}\n\n// 假设的Repository，包含挂起函数\nclass MyRepository {\n    // 声明为挂起函数，表明其内部执行耗时操作\n    suspend fun fetchDataFromNetwork(): String {\n        // 使用withContext确保耗时操作在IO线程池进行，保证主线程安全\n        return withContext(Dispatchers.IO) {\n            // 模拟网络请求，如使用Retrofit（Retrofit本身已支持挂起函数）\n            kotlinx.coroutines.delay(2000) // 模拟2秒网络延迟\n            \"Hello from Network!\"\n        }\n    }\n}\n~~~\n\n* **viewModelScope.launch​​:** 在ViewModel的作用域内**启动一个新的协程**，默认在​​主线程​​开始执行。这使得你可以在协程内直接更新UI状态（如设置_isLoading.value）\n\n* ​**​withContext(Dispatchers.IO)​​:** 这是一个关键的**挂起函数**。它将协程的执行上下文切换到为I/O操作优化的线程池，执行耗时的网络或数据库操作。操作完成后，协程会自动切回原来的线程（此处是主线程）这使得fetchDataFromNetwork函数是​​主线程安全​​的，意味着你可以安全地从主线程调用它。\n\n3. 在Activity/Fragment中处理UI交互 文件位置：app/src/main/java/com/yourpackage/MyActivity.kt\n\n~~~kotlin\nclass MyActivity : AppCompatActivity() { \n    private val viewModel: MyViewModel by viewModels()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // 观察LiveData，当数据变化时更新UI\n        viewModel.data.observe(this) { data ->\n            // 更新TextView等UI组件\n            textView.text = data\n        }\n\n        viewModel.isLoading.observe(this) { isLoading ->\n            progressBar.visibility = if (isLoading) View.VISIBLE else View.GONE\n        }\n\n        // 点击按钮触发数据获取\n        button.setOnClickListener {\n            viewModel.fetchData()\n        }\n\n        // 使用lifecycleScope执行与界面生命周期相关的协程任务\n        lifecycleScope.launchWhenResumed {\n            // 此协程只会在Activity处于Resumed状态时执行\n            // 适合执行一些需要界面完全可见才进行的操作\n        }\n    }\n}\n~~~\n\n4. 处理并行任务\n\n~~~kotlin\n// 在ViewModel或Repository中\nsuspend fun fetchDataInParallel(): List<String> =\n    kotlinx.coroutines.coroutineScope { // 创建一个协程作用域\n        val deferredOne = async { repository.fetchFromSource1() } // 启动第一个异步任务\n        val deferredTwo = async { repository.fetchFromSource2() } // 启动第二个异步任务\n\n        // 等待两个任务都完成并返回结果\n        val result1 = deferredOne.await()\n        val result2 = deferredTwo.await()\n        listOf(result1, result2)\n    }\n~~~\n\n## 网络通信\n\n[回到目录](#目录)\n\n### OkHttp\n\n**OkHttp**是一个**开源**的**HTTP客户端**，**用于**在Android和Java应用程序中执行网络请求。\n\n#### OkHttp使用步骤\n\n1. 添加网络权限和依赖\n\n在 AndroidManifest.xml 文件中添加网络权限：\n~~~xml\n<!-- 添加网络权限 -->\n<uses-permission android:name=\"android.permission.INTERNET\"/>\n<uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/>\n~~~\n\n在 gradle/libs.versions.toml 中定义 OkHttp 版本和依赖：\n\n~~~toml\n[versions]\nokhttp = \"5.3.0\"\n\n[libraries]\nokhttp = { group = \"com.squareup.okhttp3\", name = \"okhttp\", version.ref = \"okhttp\"}\n~~~\n\n在 app/build.gradle.kts 中引入依赖：\n~~~kotlin\ndependencies {\n    // 添加OkHttp依赖\n    implementation(libs.okhttp)\n}\n~~~\n\n2. 创建网络服务类\n\n创建 NetworkService.kt 类，包含 GET 和 POST 请求方法：\n* 初始化 OkHttpClient 实例\n* 实现 GET 请求方法 makeGetRequest\n* 实现 POST 请求方法 makePostRequest\n\n~~~kotlin\n/**\n * 网络请求服务类\n */\nclass NetworkService {\n    private val client = OkHttpClient() // 创建OkHttpClient实例，用于发送网络请求\n\n    /**\n     * 发送GET请求的示例方法\n     * @param url 请求的URL地址\n     * @param callback 回调函数，用于处理请求结果\n     */\n    fun makeGetRequest(url: String, callback: (String?, IOException?) -> Unit) {\n        // 1. 构建请求对象\n        val request = Request.Builder()\n            .url(url) // 设置请求URL\n            .build()  // 构建Request对象\n\n        // 2. 创建Call对象并异步执行\n        client.newCall(request).enqueue(object : Callback {\n            // 3. 处理请求失败的情况\n            override fun onFailure(call: Call, e: IOException) {\n                // 请求失败，通过回调传递异常信息\n                callback(null, e)\n            }\n\n            // 4. 处理请求成功的情况\n            override fun onResponse(call: Call, response: Response) {\n                // 5. 检查HTTP响应状态码是否成功(200-299)\n                if (response.isSuccessful) {\n                    // 请求成功，通过回调传递响应体内容\n                    response.body?.let { responseBody ->\n                        callback(responseBody.string(), null)\n                    } ?: run {\n                        callback(\"\", null) // 如果body为null，返回空字符串\n                    }\n                } else {\n                    // 请求失败，创建异常并传递错误码\n                    callback(null, IOException(\"请求失败，错误码：${response.code}\").also { \n                        it.printStackTrace() \n                    })\n                }\n            }\n        })\n    }\n\n    /**\n     * 发送POST请求的示例方法\n     * @param url 请求的URL地址\n     * @param jsonBody POST请求体中的JSON数据\n     * @param callback 回调函数，用于处理请求结果\n     */\n    fun makePostRequest(url: String, jsonBody: String, callback: (String?, IOException?) -> Unit){\n        // 1. 定义请求体的媒体类型为JSON\n        val json = \"application/json; charset=utf-8\".toMediaType()\n        \n        // 2. 将字符串转换为RequestBody对象\n        val body = jsonBody.toRequestBody(json)\n\n        // 3. 构建POST请求对象\n        val request = Request.Builder()\n            .url(url) // 设置请求URL\n            .post(body) // 设置请求方法为POST，并附带请求体\n            .build() // 构建Request对象\n\n        // 4. 创建Call对象并异步执行\n        client.newCall(request).enqueue(object : Callback{\n            // 5. 处理请求失败的情况\n            override fun onFailure(call: Call, e: IOException) {\n                // 请求失败，通过回调传递异常信息\n                callback(null, e)\n            }\n\n            // 6. 处理请求成功的情况\n            override fun onResponse(call: Call, response: Response) {\n                // 7. 检查HTTP响应状态码是否成功(200-299)\n                if(response.isSuccessful){\n                    // 请求成功，通过回调传递响应体内容\n                    response.body?.let { responseBody ->\n                        callback(responseBody.string(), null)\n                    } ?: run {\n                        callback(\"\", null) // 如果body为null，返回空字符串\n                    }\n                }else{\n                    // 请求失败，创建异常并传递错误码\n                    callback(null, IOException(\"请求失败，错误码：${response.code}\").also { \n                        it.printStackTrace() \n                    })\n                }\n            }\n        })\n    }\n}\n~~~\n\n3. 在 Activity 中使用网络服务\n\n在 MainActivity.kt 中：\n* 启用 ViewBinding 功能以访问 UI 元素\n* 创建 NetworkService 实例\n* 在按钮点击事件中调用相应的网络请求方法\n* 处理网络请求结果并在主线程中更新 UI\n\n~~~kotlin\nclass MainActivity : ComponentActivity() {\n\n    // 延迟初始化绑定器\n    private lateinit var binding: ActivityMainBinding\n\n    // 创建网络服务实例\n    private val networkService = NetworkService()\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        // 1. inflate XML 布局文件，创建 View 对象\n        binding = ActivityMainBinding.inflate(layoutInflater)\n\n        // 2. 将根视图设置为 Activity 的内容视图\n        setContentView(binding.root)\n\n        // 3. 现在可以通过 binding 访问布局中的所有视图组件\n        binding.btnGet.setOnClickListener {\n            networkService.makeGetRequest(\"https://httpbin.org/get\") { response: String?, error: IOException? ->\n                runOnUiThread {\n                    if (error != null){\n                        Log.e(\"NetworkDemo\", \"Get请求失败：${error.message}\")\n                        Toast.makeText(this, \"Get请求失败：${error.message}\", Toast.LENGTH_SHORT).show()\n                        binding.tvResult.text = \"Get请求失败：${error.message}\"\n                    }else{\n                        Log.d(\"NetworkDemo\", \"Get请求成功：${response}\")\n                        Toast.makeText(this, \"Get请求成功:${response}\", Toast.LENGTH_SHORT).show()\n                        binding.tvResult.text = \"Get请求成功：${response}\"\n                    }\n                }\n            }\n        }\n\n        binding.btnPost.setOnClickListener {\n            val jsonBody = \"\"\"\n                {\n                    \"name\": \"John Doe\",\n                    \"age\": 30\n                }\n            \"\"\".trimIndent()\n\n            networkService.makePostRequest(\"https://httpbin.org/post\", jsonBody) { response: String?, error: IOException? ->\n                runOnUiThread {\n                    if (error != null){\n                        Log.e(\"NetworkDemo\", \"Post请求失败：${error.message}\")\n                        Toast.makeText(this, \"Post请求失败：${error.message}\", Toast.LENGTH_SHORT).show()\n                        binding.tvResult.text = \"Post请求失败：${error.message}\"\n                    }else{\n                        Log.d(\"NetworkDemo\", \"Post请求成功：${response}\")\n                        Toast.makeText(this, \"Post请求成功,${response}\", Toast.LENGTH_SHORT).show()\n                        binding.tvResult.text = \"Post请求成功：${response}\"\n                    }\n                }\n            }\n        }\n    }\n}\n~~~\n\n## 后台服务\n\n[回到目录](#目录)\n\n\n### 基本特征\n* **无 UI 界面：** 在后台运行，不与用户直接交互。\n* **生命周期独立：** 不受 Activity 生命周期直接影响（启动它的 Activity 销毁后，Service 可以继续运行）。\n* **运行在主线程：** 这一点至关重要！默认情况下，Service 与你的应用运行在同一个进程的主线程（UI 线程）中。因此，你不能直接在 Service 中执行**耗时操作**（如网络请求、大量文件读写），否则会阻塞主线程，导致应用无响应（ANR）。必须在 Service 内部**创建子线程**来处理这些任务\n\n### 启动方式\n\n####  通过startService()启动\n\n* **生命周期**流程：**onCreate()→ onStartCommand()→ (运行中) → onDestroy()**\n* onStartCommand()的返回值：这个返回值决定了服务被系统意外杀死后如何重启，非常重要\n  * START_STICKY：服务被杀死后会被系统**重新创建**，但之前的 Intent 数据会**丢失**（传入 null）。适合**音乐播放**等持续任务\n  * START_NOT_STICKY：服务被杀死后**不会自动重启**。适合一次性的任务，如**下载**单个文件\n  * START_REDELIVER_INTENT：服务被杀死后会被**重启**，并且最后一个 Intent 会被**重新传递**。适合必须完成的任务，如**支付**回调\n\n#### 通过bindService()启动\n\n这种方式允许组件（如 Activity）与 Service 进行双向通信。\n\n* **生命周期**流程：onCreate()→ onBind()→ (运行中，与绑定者交互) → onUnbind()→ onDestroy()\n* 通信桥梁 IBinder：服务通过 onBind()方法返回一个 IBinder对象，绑定组件通过这个对象来调用服务内部的方法，实现交互\n\n#### 混合启动方式\n一个 Service 可以同时被 startService()启动并被 bindService()绑定。这时，必须同时调用 stopService()和**所有绑定组件**的 unbindService()，服务才会销毁\n\n### 代码实现\n\n#### startService()启动方式示例\n\n以开启后台日志服务为例：\n\n1. 创建后台日志服务类LoggingService.kt，继承 Service类，需要重写onCreate()、onStartCommand()、onDestroy()方法，onBind()方法可返回null\n\n~~~kotlin\nclass LoggingService: Service() {\n\n    companion object{\n        const val TAG = \"LoggingService\"\n        const val EXTRA_MESSAGE = \"extra_massage\" // 用于Intent传递数据的键\n    }\n\n    // 服务创建时被调用（仅调用一次）\n    override fun onCreate() {\n        super.onCreate()\n        Log.d(TAG, \"日志服务已创建\")\n    }\n\n    // 核心方法，每次startService都会调用\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n        Log.d(TAG, \"收到启动命令，startID：$startId\")\n\n        // 1.从Intent中获取要记录的消息\n        val message = intent?.getStringExtra(EXTRA_MESSAGE)?: \"默认消息\"\n\n        // 2.开启新线程执行耗时操作，避免阻塞主线程\n        thread(start = true) {\n            // 模拟耗时的保存操作\n            Log.d(TAG, \"后台线程开始工作：${Thread.currentThread().name}\")\n            Thread.sleep(3000)\n            Log.i(\"APP_LOG\", \"消息已记录：$message\")\n\n            // 3.任务完成后，服务自行停止\n            stopSelf(startId)\n            Log.d(TAG, \"任务完成，服务已停止\")\n        }\n\n        // 4.返回值，如果服务被杀死，希望系统重新创建并重传最后的Intent\n        return START_REDELIVER_INTENT\n    }\n\n    // 必须实现的方法，但对于startService方式可返回null\n    override fun onBind(intent: Intent?): IBinder? = null\n\n    // 服务销毁时清理资源\n    override fun onDestroy() {\n        super.onDestroy()\n        Log.d(TAG, \"日志服务已销毁\")\n    }\n}\n~~~\n\n2. 在AndroidManifest.xml中注册服务，manifest/application标签内添加如下内容：\n\n~~~xml\n<!--注册LoggingService-->\n<service android:name=\".LoggingService\"/>\n~~~\n\n3. 在需要使用服务时，调用startService()方法启动服务，并传递Intent对象，Intent对象中可以携带数据\n\n示例在主活动中通过按钮点击启动服务：\n\n~~~kotlin\nclass MainActivity : ComponentActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // 启动服务按钮\n        findViewById<Button>(R.id.btn_start_service).setOnClickListener {\n            // 1. 创建Intent, 指定要启动的服务\n            val intent = Intent(this, LoggingService::class.java).apply{\n                // 2.通过Intent传递数据给服务\n                putExtra(LoggingService.EXTRA_MESSAGE, \"这是一条来自 Activity 的消息，时间：${System.currentTimeMillis()}\")\n            }\n\n            // 3.启动服务\n            startService(intent)\n        }\n\n        // 停止服务按钮\n        findViewById<Button>(R.id.btn_stop_service).setOnClickListener {\n            // 停止服务的Intent\n            val stopIntent = Intent(this, LoggingService::class.java)\n            stopService(stopIntent)\n        }\n    }\n}\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/android_develop.md","raw":"---\ntitle: \"Android 开发\"\ndate: \ntags:\n    - Android\ncategories:\n    - 项目开发\n---\n\n# Android 开发\n\n## 目录\n- [Android 开发](#android-开发)\n  - [目录](#目录)\n  - [前置条件](#前置条件)\n  - [四大组件](#四大组件)\n    - [入口文件](#入口文件)\n    - [Activity](#activity)\n      - [创建一个Activity](#创建一个activity)\n      - [Activity生命周期](#activity生命周期)\n      - [Activity保存和恢复](#activity保存和恢复)\n      - [Activity启动模式](#activity启动模式)\n      - [Fragment](#fragment)\n        - [创建Fragment](#创建fragment)\n        - [将Fragment添加到Activity中](#将fragment添加到activity中)\n        - [Fragment生命周期](#fragment生命周期)\n      - [Intent](#intent)\n        - [Intent Flag](#intent-flag)\n        - [IntentFilter 匹配规则](#intentfilter-匹配规则)\n    - [Service](#service)\n      - [Service的创建](#service的创建)\n      - [Service的启动方式](#service的启动方式)\n      - [Service的生命周期](#service的生命周期)\n    - [BroadcastReceiver](#broadcastreceiver)\n      - [创建BroadcastReceiver](#创建broadcastreceiver)\n      - [注册BroadcastReceiver](#注册broadcastreceiver)\n      - [Broadcast 分类](#broadcast-分类)\n    - [ContentProvider](#contentprovider)\n      - [创建ContentProvider](#创建contentprovider)\n      - [注册ContentProvider](#注册contentprovider)\n      - [ContentResolver](#contentresolver)\n      - [三个辅助类](#三个辅助类)\n  - [基本组件](#基本组件)\n    - [TextView 文本显示控件](#textview-文本显示控件)\n      - [布局属性](#布局属性)\n    - [Button 按钮](#button-按钮)\n      - [布局属性](#布局属性-1)\n      - [代码添加属性](#代码添加属性)\n    - [EditText 文本输入框](#edittext-文本输入框)\n      - [布局属性](#布局属性-2)\n      - [代码添加属性](#代码添加属性-1)\n    - [ImageView 图片](#imageview-图片)\n      - [布局属性](#布局属性-3)\n      - [代码添加属性](#代码添加属性-2)\n    - [ProgressBar 进度条](#progressbar-进度条)\n      - [布局属性](#布局属性-4)\n      - [代码添加属性](#代码添加属性-3)\n    - [ScrollView 滚动](#scrollview-滚动)\n      - [布局属性](#布局属性-5)\n      - [代码添加属性](#代码添加属性-4)\n    - [RecyclerView 容器](#recyclerview-容器)\n      - [核心组件](#核心组件)\n      - [引入依赖](#引入依赖)\n      - [布局属性](#布局属性-6)\n      - [RecyclerView的使用](#recyclerview的使用)\n  - [布局](#布局)\n    - [测量和布局](#测量和布局)\n    - [FrameLayout](#framelayout)\n      - [自身属性](#自身属性)\n      - [子视图属性](#子视图属性)\n    - [LinearLayout](#linearlayout)\n      - [自身属性](#自身属性-1)\n      - [子视图属性](#子视图属性-1)\n    - [RelativeLayout](#relativelayout)\n      - [子视图属性](#子视图属性-2)\n    - [ConstraintLayout](#constraintlayout)\n      - [子视图属性](#子视图属性-3)\n    - [总结](#总结)\n  - [创建自定义组件](#创建自定义组件)\n  - [属性动画](#属性动画)\n    - [动画框架](#动画框架)\n    - [常用API](#常用api)\n    - [ViewPropertyAnimator](#viewpropertyanimator)\n    - [ObjectAnimator](#objectanimator)\n      - [动画插值器](#动画插值器)\n    - [xmlAnimator](#xmlanimator)\n      - [动画属性资源的定义](#动画属性资源的定义)\n  - [数据储存](#数据储存)\n    - [SharedPreferences](#sharedpreferences)\n      - [简介](#简介)\n      - [存储数据](#存储数据)\n      - [读取数据](#读取数据)\n      - [删除数据](#删除数据)\n      - [完整代码实践](#完整代码实践)\n    - [SQLite数据库](#sqlite数据库)\n      - [SQLite数据库操作](#sqlite数据库操作)\n      - [SQLite使用步骤](#sqlite使用步骤)\n    - [文件存储](#文件存储)\n      - [内部存储](#内部存储)\n      - [序列化存储](#序列化存储)\n    - [ContentProvider](#contentprovider-1)\n      - [工作原理](#工作原理)\n      - [ContentProvider的使用](#contentprovider的使用)\n  - [异步交互](#异步交互)\n    - [handler](#handler)\n      - [核心组件和职责](#核心组件和职责)\n      - [使用步骤](#使用步骤)\n        - [使用 sendMessage](#使用-sendmessage)\n        - [使用 post](#使用-post)\n        - [安全的最佳实践](#安全的最佳实践)\n    - [Coroutines 协程](#coroutines-协程)\n      - [协程使用步骤](#协程使用步骤)\n  - [网络通信](#网络通信)\n    - [OkHttp](#okhttp)\n      - [OkHttp使用步骤](#okhttp使用步骤)\n  - [后台服务](#后台服务)\n    - [基本特征](#基本特征)\n    - [启动方式](#启动方式)\n      - [通过startService()启动](#通过startservice启动)\n      - [通过bindService()启动](#通过bindservice启动)\n      - [混合启动方式](#混合启动方式)\n    - [代码实现](#代码实现)\n      - [startService()启动方式示例](#startservice启动方式示例)\n\n## 前置条件\n* [安装Android Studio](https://developer.android.google.cn/studio/index.html?hl=ro)\n\n## 四大组件\n\n[回到目录](#目录)\n\n| 组件名称                                | 场景     | 用途                                                                                       |\n| --------------------------------------- | -------- | ------------------------------------------------------------------------------------------ |\n| [Activity](#activity)                   | 界面交互 | 是用户交互的入口点，代表一个界面，可以拉起其他的界面和组件                                 |\n| [Service](#service)                     | 后台服务 | 处理耗时任务(即使应用退出)，比如下载，网络请求，跨进程访问等                               |\n| [BroadcastReceiver](#broadcastreceiver) | 事件响应 | 捕获系统事件(时区变更，短信到达)或者用户发送到自定义事件，然后根据事件决定接下来的业务逻辑 |\n| [ContentProvider](#contentprovider)     | 数据共享 | 对外安全暴露私有数据，提供统一的api访问，内部可以是不同存储方式的实现                      |\n\n### 入口文件\nAndroidManifest.xml\n\n### Activity\n\n[回到目录](#目录)\n\n#### 创建一个Activity\n* 首先在layout目录下创建一个**xml文件**，并设置文件名，如activity_1.xml\n* 创建与**xml文件**对应的activity子类\n* 把声明的子类在AndroidManifest.xml中注入\n* **xml文件**可以添加组件\n* kt文件可以为组件添加事件监听\n\n#### Activity生命周期\n| 生命周期    | 说明                                                                                       |\n| ----------- | ------------------------------------------------------------------------------------------ |\n| onCreate()  | 首次创建Activity时调用，完成初始化工作，多用于创建视图、为列表绑定数据                     |\n| onStart()   | 当Activity可见时调用，多用于启动后台任务                                                   |\n| onResume()  | 当Activity开始与用户交互时调用，进入活跃状态，位于栈顶，可以接受用户输入                   |\n| onPause()   | 要启动另一个Activity时调用，暂停当前Activity，但保留状态，可以保存数据，最后一个可控的回调 |\n| onStop()    | 当Activity不可见时调用                                                                     |\n| onDestroy() | 当Activity销毁时调用，发生在finish()方法执行时，或由于系统内存不足而销毁                   |\n| onRestart() | 当Activity重新启动时调用，通常用于恢复数据                                                 |\n\n#### Activity保存和恢复\n| 方法                                              | 调用时机                                                         | 说明                                                                          | 使用场景                                                                                                      |\n| ------------------------------------------------- | ---------------------------------------------------------------- | ----------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |\n| onSaveInstanceState(outState:Bundle)              | 系统未经“你的许可”，可能销毁了你的activity，则会被调用           | 用户主动销毁不调用，可能销毁即调用                                            | 从一个Activity启动另一个Activity <br> 屏幕方向切换 <br> home键返回，切换别的应用 <br> 关闭屏幕显示            |\n| onRestoreInstanceState(savedInstanceState:Bundle) | 系统未经“你的许可”，确实销毁了你的activity，重新启动时则会被调用 | 用户主动销毁不调用，可能销毁即调用，与onSaveInstanceState()方法不一定成对调用 | 异常关闭了Activity，下次启动时则被调用 <br> onCreate() -> onStart() -> onRestoreInstanceState() -> onResume() |\n\n#### Activity启动模式\n在AndroidManifest.xml中,`<application>`标签下的`<activity>`中设置Activity的启动模式 `android:launchMode=\"启动模式`\n| 启动模式       | 说明                                                                                   |\n| -------------- | -------------------------------------------------------------------------------------- |\n| standard       | 默认启动模式，按Activity启动顺序压入Task Stack中                                       |\n| singleTop      | 栈顶复用模式，栈顶Activity实例已经存在，则不会创建新的实例，同一个Activity可以多次创建 |\n| singleTask     | 如果Activity存在于栈中，弹出其上所有Activity，目标Activity置于栈顶并获得焦点           |\n| singleInstance | 全局唯一模式，为目标Activity创建一个栈，栈顶Activity获得焦点，如果已经创建过则唤醒     |\n\n除了从AndroidManifest.xml中设置启动模式外，也可以在代码中设置启动模式，比如通过Intent的setFlags()方法设置\n~~~kotlin\nval intent = Intent(this, MainActivity::class.java)\nintent.setFlags(Intent.[Intent Flag])\n~~~\n\n| Intent Flag                    | 说明                                                                     |\n| ------------------------------ | ------------------------------------------------------------------------ |\n| FLAG_ACTIVITY_NEW_TASK         | 从后台服务中启动新的Activity；从通知栏点开新的任务                       |\n| FLAG_ACTIVITY_SINGLE_TOP       | 点击通知或状态栏，不希望重新创建已经存在的Activity，而是复用现有实例     |\n| FLAG_ACTIVITY_CLEAR_TOP        | 导航回已经存在的Activity，并清除其上的所有Activity，如从深层页面返回主页 |\n| FLAG_ACTIVITY_CLEAR_TASK       | 完全清空当前任务，并创建一个新任务，比如用户注销返回登录界面             |\n| FLAG_ACTIVITY_NO_HISTORY       | 启动一个页面时，不希望用户通过返回键回到该页面                           |\n| FLAG_ACTIVITY_REORDER_TO_FRONT | 需要将后台的Activity移到前台而不是重新创建，比如多个步骤的表格填写       |\n\n#### Fragment\nFragment表示应用界面中可重复使用的一部分，可以用于实现模块化的UI设计，在不同的Activity中重复使用\n\n##### 创建Fragment\n~~~kotlin\n/**\n * MyFragment 类继承自 Fragment，用于显示自定义的 fragment 界面\n */\nclass MyFragment : Fragment() { \n    /**\n     * 创建并返回 fragment 的视图层次结构\n     * \n     * @param inflater 用于将 XML 布局文件转换为 View 对象的布局加载器\n     * @param container 包含此 fragment 的父视图组，可能为 null\n     * @param savedInstanceState 包含 fragment 上次保存状态的 Bundle 对象，可能为 null\n     * @return 返回 inflate 后的 View 对象，作为 fragment 的根视图\n     */\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? { \n        // 使用 inflater 将指定的布局文件（.xml）加载为 View 并返回\n        return inflater.inflate(R.layout.fragment_my, container, false)\n    }\n}\n~~~\n\n##### 将Fragment添加到Activity中\n\nFragment拥有与Activity类似的栈(BACK stack，回退栈)，\n\n* 通过xml文件添加Fragment(静态添加，无法在运行时动态移除)\n    ~~~kotlin\n    <androidx.fragment.app.FragmentContainerView\n        android:id=\"@+id/fragment_container\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:name=\"com.example.myapplication.MyFragment\" />\n    ~~~\n\n* 通过代码添加Fragment\n    ~~~kotlin\n    /**\n    * 当Activity创建时调用此方法，用于初始化界面和添加Fragment\n    * \n    * @param savedInstanceState 保存的实例状态，用于恢复之前保存的Activity状态\n    */\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        // 创建MyFragment实例并添加到Activity中\n        val fragment = MyFragment()\n\n        // 获取Fragment管理器并开始一个事务\n        // 向指定容器添加Fragment，推荐使用FragmentContainerView容器\n        // 将该操作添加到返回栈\n        // 标记为\"MyFragment\"，提交事务使更改生效\n        supportFragmentManager.beginTransaction()\n        .add(R.id.fragment_container_view, fragment)\n        .addToBackStack(\"MyFragment\")\n        .commit()\n    }\n    ~~~\n\n##### Fragment生命周期\n| 回调方法            | 说明                                               |\n| ------------------- | -------------------------------------------------- |\n| onAttach()          | 当Fragment被附加到Activity时调用                   |\n| onCreate()          | 当Fragment创建时调用                               |\n| onCreateView()      | 当Fragment创建视图时调用                           |\n| onActivityCreated() | 当Fragment的Activity的onCreate()方法执行完毕时调用 |\n| onStart()           | 当Fragment可见时调用                               |\n| onResume()          | 当Fragment获得焦点时调用                           |\n| onPause()           | 当Fragment失去焦点时或被其他Fragment覆盖时调用     |\n| onStop()            | 当Fragment不可见时调用                             |\n| onDestroyView()     | 当Fragment销毁视图时调用                           |\n| onDestroy()         | 当Fragment销毁时调用                               |\n| onDetach()          | 当Fragment被分离时调用                             |\n\n\n#### Intent\nIntent是Android提供的用来协助组件间的交互和通信机制，描述一次操作的动作和数据\n\n* 显式Intent：指定目标组件，通过Intent对象启动目标组件\n* 隐式Intent：不指定目标组件，通过Intent对象启动匹配的组件\n\n##### Intent Flag\n| Intent Flag | 说明               |\n| ----------- | ------------------ |\n| Component   | 指定来源和目标     |\n| Action      | 指定动作行为       |\n| Category    | 指定哪种组件来处理 |\n| Data        | uri，指定数据源    |\n| Type        | 指定消息数据类型   |\n| Extras      | 拓展信息           |\n| Flags       | 指定运行模式       |\n\n##### IntentFilter 匹配规则\n\n| 条件         | 匹配规则                                                                                                                                                                                                                                                                                                                  | 使用                                                                       |\n| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |\n| Action       | 1. `<intent-filter>`中必须包含一个Action, Intent也必须指定一个Action<br>2. `<intent-filter>`中可以有一个或者多个Action, Intent匹配其中的一个Action即可                                                                                                                                                                    | `Intent(\"xxxAction\")`                                                      |\n| Data         | 1. `<intent-filter>`中描述了data, 必须在Intent中指定匹配的Data信息<br>2. `<intent-filter>`中没有描述data信息, Intent中可以不指定Data信息<br>3. `<intent-filter>`只指定了mimeType, 默认的URI的scheme是file或者content, 在Intent中必须同时设置mimeType和URI<br>4. `<intent-filter>`中有多个Data, Intent中只需要匹配一组即可 | `intent.setData()`                                                         |\n| Category     | 1. Intent中未指定Category, `<intent-filter>`中也可以不指定Category<br>2. 要隐式启动一个Activity是就必须指定android.intent.category.DEFAULT的Category<br>3. Intent中指定了一个Category时, 会在具有Category的`<intent-filter>`中去找匹配组件                                                                                | `intent.addCategory()`<br>`intent.removeCategory()`<br>`intent.categories` |\n| 整体匹配规则 | Action+Data+Category同时匹配, 才能启动Activity<br>Activity可以有多个intent-filter, Intent只需匹配任何一组`<intent-filter>`即可启动Activity                                                                                                                                                                                | -                                                                          |\n| 匹配过程     | 1. 加载`<intent-filter>`列表<br>2. 依次去掉action、Data、Category匹配失败的`<intent-filter>`<br>3. 剩余`<intent-filter>`按优先级排序                                                                                                                                                                                      | -                                                                          |\n\n\n### Service\n\n[回到目录](#目录)\n\n* 无ui，可后台长时间运行\n* 启动后，切换应用仍会运行一段时间\n* 可用于应用处理网络事务、音频播放、数据同步等\n* 默认在主线程[UI线程]运行，除单独指定线程，并且不会单独在进程中运行\n\n#### Service的创建\n* 在AndroidManifest.xml中注册Service\n\n| 属性             | 说明                  |\n| ---------------- | --------------------- |\n| android:name     | 指定Service的完整类名 |\n| android:enabled  | 能否被实例化          |\n| android:exported | 是否允许其他应用访问  |\n\n~~~xml\n<service\nandroid:name=\".MyService\"\nandroid:enabled=\"true\"\nandroid:exported=\"true\" />\n~~~\n\n* 在Kotlin中创建Service\n\n| 方法           | 说明                  |\n| -------------- | --------------------- |\n| onBind         | 当Service被绑定时调用 |\n| onCreate       | 当Service创建时调用   |\n| onStartCommand | 当Service启动时调用   |\n| onDestroy      | 当Service销毁时调用   |\n\n~~~kotlin\n/**\n * MyService类继承自Service，用于在后台执行长时间运行的操作\n * 该服务不提供绑定功能，仅支持启动和停止\n */\nclass MyService : Service() { \n    /**\n     * 当其他组件想要通过bindService()绑定到服务时调用\n     * @param intent 启动服务的Intent对象\n     * @return IBinder对象，用于与服务通信，此处返回null表示不支持绑定\n     */\n    override fun onBind(intent: Intent): IBinder? { \n        return null\n    }\n\n    /**\n     * 当服务首次创建时调用，用于执行一次性设置操作\n     * 该方法只在服务生命周期中调用一次\n     */\n    override fun onCreate() { \n        super.onCreate()\n        Log.d(TAG, \"onCreate\")\n    }\n\n    /**\n     * 当其他组件通过startService()启动服务时调用\n     * @param intent 启动服务时传递的Intent对象，可能为null\n     * @param flags 附加数据，用于描述如何启动服务\n     * @param startId 服务启动请求的唯一标识符\n     * @return 服务被杀死后的重启模式，返回super.onStartCommand()的默认值\n     */\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int { \n            Log.d(TAG, \"onStartCommand\")\n            return super.onStartCommand(intent, flags, startId)\n    }\n\n    /**\n     * 当服务被销毁时调用，用于清理资源和执行收尾工作\n     * 该方法在服务生命周期结束时调用\n     */\n    override fun onDestroy() { \n        super.onDestroy()\n        Log.d(TAG, \"onDestroy\")\n    }\n}\n~~~\n\n#### Service的启动方式\n| 启动方式       | 说明                                                                                                                       |\n| -------------- | -------------------------------------------------------------------------------------------------------------------------- |\n| startService() | 适用于独立与其他组件长期运行的服务，如播放音乐、下载文件等 需要自身stopService()来停止服务                                 |\n| bindService()  | 适用于需要与其他组件进行通信的服务，如获取传感器数据、访问数据库等 需要所有绑定的组件调用unbindService()解除绑定才停止服务 |\n\n#### Service的生命周期\n| 回调方法           | 说明                                                                                                                                                                                                                                                                   |\n| ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `onCreate()`       | 系统会在服务首次创建时（在 `onStartCommand()` 或 `onBind()` 之前）调用此方法来执行一次性设置过程。如果服务已在运行，不会调用此方法。                                                                                                                                   |\n| `onDestroy()`      | 当服务不再使用且被销毁时，系统会调用此方法。用于清理线程、已注册的监听器或接收器等资源。是服务接收的最后一个回调。                                                                                                                                                     |\n| `onStartCommand()` | 当其他组件（例如 Activity）请求启动服务时，系统会通过调用 `startService()` 来调用此方法。执行此方法时，系统会启动服务，该服务可以在后台无限期运行。如果实现了此功能，需要在服务完成工作后通过 `stopSelf()` 或 `stopService()` 来停止服务。如果只想提供绑定，无需实现。 |\n| `onBind()`         | 当其他组件想要与服务绑定（例如执行 RPC）时，系统会通过调用 `bindService()` 来调用此方法。在实现此方法必须提供一个接口，使客户端通过返回 `IBinder` 与服务进行通信。如果不允许绑定，则应返回 `null`。                                                                    |\n| `onUnbind()`       | 当所有绑定的客户端都解绑（通过 `unbindService()`）时，系统会调用此方法。                                                                                                                                                                                               |\n\n\n### BroadcastReceiver\n\n[回到目录](#目录)\n\nBroadcast 是一种用于应用程序之间或程序内部的一种通信机制\nBroadcastReceiver 捕获系统事件或用户的自定义事件，并根据事件执行对应的逻辑\n\n#### 创建BroadcastReceiver\n~~~kotlin\n/**\n * 广播接收器类，用于接收和处理广播消息\n * 继承自BroadcastReceiver，当接收到广播时会显示Toast提示\n */\nclass MyReceiver : BroadcastReceiver() { \n    /**\n     * 当接收到广播时调用此方法\n     * @param context 上下文对象，提供访问应用程序环境信息的接口\n     * @param intent 包含广播数据的Intent对象\n     */\n    override fun onReceive(context: Context, intent: Intent) { \n        // 显示广播接收成功的Toast消息提示\n        Toast.makeText(context, \"MyBroadcastReceiver: Broadcast Received\", Toast.LENGTH_SHORT).show()\n    }\n}\n~~~\n\n#### 注册BroadcastReceiver\n* 在AndroidManifest.xml中注册BroadcastReceiver[静态注册，程序未启动也能监听广播]\n~~~xml\n广播接收器声明块\n    \n    该代码块声明了一个Android广播接收器组件，用于接收和处理特定的广播消息。\n    \n    组件属性说明：\n    - android:name: 指定接收器的类名，\".MyReceiver\"表示该类在当前应用包名下\n    - android:enabled: 设置为true表示该接收器在应用安装后默认启用\n    - android:exported: 设置为true表示该接收器可以接收来自其他应用或系统的广播\n    \n    意图过滤器配置：\n    - android:priority: 设置广播接收优先级为100，数值越大优先级越高\n    - action: 声明该接收器可以处理的广播动作，此处为自定义广播动作\"com.example.myapplication.MY_BROADCAST\" \n<receiver\n    android:name=\".MyReceiver\"\n    android:enabled=\"true\"\n    android:exported=\"true\"> \n    <intent-filter android:priority=\"100\">\n        <action android:name=\"com.example.myapplication.MY_BROADCAST\" />\n    </intent-filter>\n</receiver>\n~~~ \n\n* 在代码中注册BroadcastReceiver[动态注册]\n~~~kotlin\n/**\n * 主活动类，负责发送广播和注册/注销广播接收器\n */\nclass MainActivity : AppCompatActivity() { \n    private var mBroadcastReceiver: MyReceiver? = null\n    private val broadcastAction = \"com.example.myapplication.MY_BROADCAST\"\n    \n    /**\n     * 活动创建时的回调方法\n     * @param savedInstanceState 保存的实例状态Bundle对象\n     */\n    override fun onCreate(savedInstanceState: Bundle?) { \n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        mBroadcastReceiver = MyReceiver()\n        // 设置按钮点击监听器，用于发送广播\n        findViewById<Button>(R.id.button).setOnClickListener(View.OnClickListener { \n            sendBroadcast(Intent(broadcastAction))\n        })\n    }\n}\n\n/**\n * 活动恢复时的回调方法，用于注册广播接收器\n */\noverride fun onResume() { \n    super.onResume()\n    // 注册广播接收器以接收指定action的广播\n    mBroadcastReceiver?.let { \n        registerReceiver(it, IntentFilter(broadcastAction), RECEIVER_EXPORTED)\n    }\n}\n\n/**\n * 活动销毁时的回调方法，用于注销广播接收器\n */\noverride fun onDestroy() { \n    super.onDestroy()\n    // 注销广播接收器以避免内存泄漏\n    mBroadcastReceiver?.let { \n        unregisterReceiver(it)\n    }\n}\n~~~\n\n#### Broadcast 分类\n| 广播类型 | 方法                                                                                                                                                                                                                    | 描述                                                                                   |\n| -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |\n| 标准广播 | sendBroadcast(Intent intent)                                                                                                                                                                                            | 异步广播，发送给所有注册的接收器，但无法将处理结果发送给下一个接收器，无法终止广播传播 |\n| 有序广播 | sendOrderedBroadcast(Intent intent, String receiverPermission)                                                                                                                                                          | 同步广播，同一时刻只有一个接收器收到，可以选择继续传播，拦截或修改广播                 |\n| 本地广播 | LocalBroadcastManager.registerReceiver(BroadcastReceiver receiver, IntentFilter filter) <br>LocalBroadcastManager.sendBroadcast(Intent intent) <br>LocalBroadcastManager.unregisterReceiver(BroadcastReceiver receiver) | exported=false，只能动态注册，只能发送给本应用，注册为本地广播的接收器无法接受标准广播 |\n\n~~~kotlin\n    // 隐式Intent\n    sendBroadcast(Intent(\"BROADCAST_ACTION\"))\n    // 显式Intent\n    val intent = Intent(this, MyReceiver::class.java)\n    intent.action = \"BROADCAST_ACTION\"\n    sendBroadcast(intent)\n~~~\n\n### ContentProvider\n\n[回到目录](#目录)\n\n以标准化的方式在Android应用间共享数据，以相对安全的方式封装数据存储以及增删改查，提供对外统一接口供其他程序调用\n\n* 通过 **uri**[universal resource identifier ，通用资源标识符]访问数据\n* content://authority/path/id\n    - content://：通用前缀\n    - authority：内容提供者的唯一标识符，通常为包名+内容提供者的类名\n    - path：内容提供者的数据路径，通常为数据表名\n    - id：内容提供者的数据项ID，通常为数据项的行号\n\n#### 创建ContentProvider\n~~~kotlin\n/**\n * MyContentProvider 是一个自定义的内容提供者类，用于管理应用程序数据的访问和操作。\n * 它继承自 Android 的 ContentProvider 类，提供了对结构化数据的标准化访问接口。\n */\nclass MyContentProvider : ContentProvider() { \n    /**\n     * 获取指定 URI 对应数据的 MIME 类型\n     * @param uri 指向所需数据的统一资源标识符\n     * @return 返回对应数据的 MIME 类型字符串，如果无法识别则返回 null\n     */\n    override fun getType(uri: Uri): String? { \n        TODO(\"Implement this to handle requests for the MIME type of the data at the given URI.\")\n    }\n\n    /**\n     * 初始化内容提供者，在系统启动时调用\n     * @return 初始化成功返回 true，失败返回 false\n     */\n    override fun onCreate(): Boolean { \n        TODO(\"Implement this to initialize your content provider on startup.\")\n    }\n\n    /**\n     * 向内容提供者中插入新的数据行\n     * @param uri 指定要插入数据的位置 URI\n     * @param values 包含要插入数据的键值对集合\n     * @return 返回新插入数据行的 URI，插入失败则返回 null\n     */\n    override fun insert(uri: Uri, values: ContentValues?): Uri? { \n        TODO(\"Implement this to handle requests to insert a new row.\")\n    }\n\n    /**\n     * 删除指定条件的数据行\n     * @param uri 指定要删除数据的位置 URI\n     * @param selection SQL WHERE 子句，用于指定删除条件，null 表示删除所有行\n     * @param selectionArgs WHERE 子句中占位符对应的参数值数组\n     * @return 返回实际删除的数据行数量\n     */\n    override fun delete(uri: Uri, selection: String?, selectionArgs: Array<String>?): Int { \n        TODO(\"Implement this to handle requests to delete one or more rows.\")\n    }\n\n    /**\n     * 查询满足条件的数据\n     * @param uri 指定要查询数据的位置 URI\n     * @param projection 要查询的列名数组，null 表示查询所有列\n     * @param selection SQL WHERE 子句，用于指定查询条件\n     * @param selectionArgs WHERE 子句中占位符对应的参数值数组\n     * @param sortOrder 查询结果的排序方式\n     * @return 返回包含查询结果的 Cursor 对象\n     */\n    override fun query(uri: Uri, projection: Array<String>?, selection: String?, selectionArgs: Array<String>?, sortOrder: String?){ \n        TODO(\"Implement this to handle query requests from clients.\")\n    }\n\n    /**\n     * 更新满足条件的数据行\n     * @param uri 指定要更新数据的位置 URI\n     * @param values 包含要更新数据的键值对集合\n     * @param selection SQL WHERE 子句，用于指定更新条件\n     * @param selectionArgs WHERE 子句中占位符对应的参数值数组\n     * @return 返回实际更新的数据行数量\n     */\n    override fun update(uri: Uri, values: ContentValues?, selection: String?, selectionArgs: Array<String>?): Int { \n        TODO(\"Implement this to handle requests to update one or more rows.\")\n    }\n}\n~~~\n#### 注册ContentProvider\n~~~xml\n<provider\n    android:name=\".MyContentProvider\"\n    android:authorities=\"com.example.myapplication.MyContentProvider\"\n    android:enabled=\"true\"\n    android:exported=\"false\" />\n\n~~~\n\n#### ContentResolver\n~~~kotlin\n/**\n * 测试ContentResolver的基本操作方法\n * \n * 该函数演示了如何使用ContentResolver进行数据的增删改查操作，\n * 包括插入、删除、更新和查询数据\n */\nfun testContentResolver() { \n    // 构造ContentProvider的URI地址\n    val uri = Uri.parse(\"content://com.example.myapplication.MyContentProvider/user\")\n    \n    // 创建要操作的数据内容值\n    val value = ContentValues().apply { \n        put(\"user_id\", 1)\n        put(\"user_name\", \"张三\")\n    }\n\n    // 向ContentProvider中插入一条用户数据\n    contentResolver.insert(uri, value)\n\n    // 删除user_id为1的用户数据\n    contentResolver.delete(uri, \"user_id=?\", arrayOf(\"1\"))\n\n    // 更新user_id为1的用户数据\n    contentResolver.update(uri, value, \"user_id=?\", arrayOf(\"1\"))\n\n    // 查询所有用户数据，按user_id升序排列\n    val cursor = contentResolver.query(uri, \n        null, \n        null, \n        null, \n        \"user_id ASC\")\n\n    // 遍历查询结果并处理每条数据\n    while (cursor?.moveToNext() == true) { \n        // 处理数据\n    }\n}\n~~~\n\n#### 三个辅助类\n* ContentUris\n* UriMatcher\n* ContentObserver\n\n~~~kotlin\n/**\n * 通过ContentUris.withAppendedId方法将指定的ID追加到URI路径末尾\n * @param uri 原始URI\n * @param id 要追加的ID值\n * @return 返回追加ID后的新URI\n */\nContentUris.withAppendedId(uri, id)\n\n/**\n * 从URI中解析出ID值\n * @param uri 包含ID的URI\n * @return 返回解析出的ID值\n */\nval id = ContentUris.parseId(uri)\n\n/**\n * 创建UriMatcher实例用于URI匹配\n * @param code 当URI不匹配任何模式时返回的默认代码\n */\nval uriMatcher = UriMatcher(UriMatcher.NO_MATCH)\n\n// 添加URI匹配模式：匹配\"user\"路径，匹配成功返回代码1\nuriMatcher.addURI(\"com.example.myapplication\", \"user\", 1)\n\n// 添加URI匹配模式：匹配\"user/#\"路径（#表示数字），匹配成功返回代码2\nuriMatcher.addURI(\"com.example.myapplication\", \"user/#\", 2)\n\n/**\n * 自定义ContentObserver类，用于监听ContentProvider数据变化\n */\nclass MyContentObserver : ContentObserver(null) { \n    /**\n     * 当被监听的URI对应的数据发生变化时调用\n     * @param selfChange 如果为true表示数据变化是由当前进程引起的\n     */\n    override fun onChange(selfChange: Boolean) { \n        super.onChange(selfChange)\n    }\n}\n~~~\n\n## 基本组件\n\n[回到目录](#目录)\n\n### TextView 文本显示控件\n[回到目录](#目录)\n\n#### 布局属性\n\n~~~xml\n<TextView\n        属性名=\"属性值\"\n        ....../>\n~~~\n\n\n| 属性               | 说明                       | 参数说明                                                                                                                                                   |\n| ------------------ | -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| id                 | 控件的id                   | @+id/textView: 创建一个id<br>@id/textView: 引用一个id                                                                                                      |\n| layout_width       | 控件的宽度                 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                   |\n| layout_height      | 控件的高度                 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                   |\n| layout_margin      | 控件的外边距               | 具体数值: 边距大小                                                                                                                                         |\n| text               | 显示的文本                 | 文本内容                                                                                                                                                   |\n| textAllCaps        | 是否将文本转换为大写       | true: 转换为大写<br>false: 不转换                                                                                                                          |\n| textSize           | 文本的大小                 | 具体数值: 尺寸大小                                                                                                                                         |\n| textColor          | 文本的颜色                 | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                   |\n| textStyle          | 文本的样式                 | normal: 正常样式<br>bold: 加粗样式<br>italic: 斜体样式<br>bold_italic: 加粗斜体样式                                                                        |\n| autoLink           | 是否自动链接文本           | web: 自动链接网址<br>email: 自动链接邮箱地址<br>phone: 自动链接电话号码                                                                                    |\n| textColorHighlight | 文本高亮颜色               | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                   |\n| drawableTop        | 文本顶部图标               | @drawable/icon: 图标资源                                                                                                                                   |\n| drawablePadding    | 图标和文本之间的间距       | 具体数值: 间距大小                                                                                                                                         |\n| gravity            | 文本的对齐方式             | center: 居中对齐<br>center_vertical: 垂直居中对齐<br>center_horizontal: 水平居中对齐<br>left: 左对齐<br>right: 右对齐<br>top: 顶部对齐<br>bottom: 底部对齐 |\n| letterSpacing      | 字符间距                   | 具体数值: 间距大小                                                                                                                                         |\n| lineSpacingExtra   | 行间距                     | 具体数值: 间距大小                                                                                                                                         |\n| maxLines           | 文本的最大行数             | 具体数值: 行数                                                                                                                                             |\n| ellipsize          | 文本超出显示范围时如何显示 | start: 显示开头省略号<br>middle: 显示中间省略号<br>end: 显示末尾省略号<br>marquee: 滚动显示                                                                |\n\n### Button 按钮\n[回到目录](#目录)\n#### 布局属性\n\n~~~xml\n<Button\n        属性名=\"属性值\"\n        ....../>\n<ImageButton\n        属性名=\"属性值\"\n        ....../>\n~~~\n\n| 属性               | 说明                    | 参数说明                                                                                                                                                   |\n| ------------------ | ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| id                 | 控件的id                | @+id/button: 创建一个id<br>@id/button: 引用一个id                                                                                                          |\n| layout_width       | 控件的宽度              | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                   |\n| layout_height      | 控件的高度              | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                   |\n| layout_margin      | 控件的外边距            | 具体数值: 边距大小                                                                                                                                         |\n| text               | 显示的文本              | 文本内容                                                                                                                                                   |\n| background         | 按钮的背景              | @drawable/button_background: 背景资源                                                                                                                      |\n| padding            | 按钮的内边距            | 具体数值: 内边距大小                                                                                                                                       |\n| gravity            | 按钮的文本对齐方式      | center: 居中对齐<br>center_vertical: 垂直居中对齐<br>center_horizontal: 水平居中对齐<br>left: 左对齐<br>right: 右对齐<br>top: 顶部对齐<br>bottom: 底部对齐 |\n| contentDescription | `ImageButton`按钮的描述 | 文本内容                                                                                                                                                   |\n| src                | `ImageButton`按钮的图标 | @drawable/icon: 图标资源                                                                                                                                   |\n| drawableStart      | 按钮的图标              | @drawable/icon: 图标资源                                                                                                                                   |\n| drawablePadding    | 图标和文本之间的间距    | 具体数值: 间距大小                                                                                                                                         |\n| enable             | 按钮是否可用            | true: 可用<br>false: 不可用                                                                                                                                |\n| clickable          | 按钮是否可点击          | true: 可点击<br>false: 不可点击                                                                                                                            |\n\n#### 代码添加属性\n\n~~~kotlin\n// 1、设置按钮点击Toast提示\nfindViewById<Button>(R.id.button_click).setOnClickListener{\n    // 显示Toast提示\n    Toast.makeText(this, \"点击了按钮\", Toast.LENGTH_SHORT).show()\n}\n\n// 2、设置按钮长按Toast提示\nfindViewById<Button>(R.id.button_long_click).setOnLongClickListener{\n    // 显示Toast提示\n    Toast.makeText(this, \"长按了按钮\", Toast.LENGTH_SHORT).show()\n}\n~~~\n\n### EditText 文本输入框\n[回到目录](#目录)\n#### 布局属性\n\n~~~xml\n<EditText\n        属性名=\"属性值\"\n        ....../>\n~~~\n\n| 属性               | 说明                       | 参数说明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| ------------------ | -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| id                 | 控件的id                   | @+id/editText: 创建一个id<br>@id/editText: 引用一个id                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n| layout_width       | 控件的宽度                 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| layout_height      | 控件的高度                 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| layout_margin      | 控件的外边距               | 具体数值: 边距大小                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| hint               | 输入框的提示文本           | 文本内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| inputType          | 输入框的类型               | text: 文本输入框<br>number: 数字输入框<br>phone: 电话输入框<br>datetime: 日期时间输入框<br>email: 邮箱输入框<br>textMultiLine: 多行文本输入框<br>textCapSentences: 首字母大写输入框<br>textCapWords: 单词首字母大写输入框<br>textCapCharacters: 全字母大写输入框<br>textNoSuggestions: 无建议输入框<br>textPassword: 密码输入框<br>textVisiblePassword: 可见密码输入框<br>textMultiLine: 多行文本输入框<br>textAutoCorrect: 自动修正输入框<br>textAutoComplete: 自动完成输入框<br>textWebEditText: 网页输入框<br>textUri: URI输入框<br>textEmailAddress: 邮箱地址输入框<br>textPostalAddress: 邮政编码输入框<br>textPersonName: 人名输入框<br>textShortMessage: 短消息输入框<br>textLongMessage: 长消息输入框<br>textFilter: 过滤输入框<br>textPhonetic: 音标输入框<br>textWebEmailAddress: 网页邮箱地址输入框<br>textWebPassword: 网页密码输入框 |\n| maxLenght          | 输入框的最大长度           | 具体数值: 最大长度                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| cursorVisible      | 输入框的游标是否可见       | true: 可见<br>false: 不可见                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| textColor          | 输入框的文本颜色           | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| textColorHint      | 输入框的提示文本颜色       | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| textColorHighlight | 输入框的文本高亮颜色       | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| digits             | 输入框只能输入的字符       | 具体数值: 输入内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| imeOptions         | 输入框的键盘(回车)完成按钮 | done: 完成按钮<br>go: 跳转按钮<br>next: 下一个按钮<br>search: 搜索按钮<br>send: 发送按钮                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n\n\n#### 代码添加属性\n~~~kotlin\n// 1、设置输入过滤器，仅允许英文字符和数字输入\nval filter =InputFilter{ source: CharSequence?, start: Int, end: Int, dest: Spanned?, dstart: Int, dend: Int ->\n                if(!source.toString()\n                        .matches(\"[A-Za-z0-9]+\".toRegex())\n                )return@InputFilter \"\"\n                null\n            }\n// 将过滤器应用到指定的EditText控件\nfindViewById<EditText>(R.id.set_filters).filters = arrayOf<InputFilter>(filter)\n\n// 2、设置文本检查器\nval et = findViewById<EditText>(R.id.add_text_changed_listener)\net.addTextChangedListener(object : TextWatcher {\n    /**\n     * 文本改变前的回调方法\n     * @param s 当前文本内容\n     * @param start 改变开始的位置\n     * @param count 被改变的字符数量\n     * @param after 改变后的字符数量\n     */\n    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {\n        // 可留空，如无逻辑需要\n    }\n\n    /**\n     * 文本改变时的回调方法\n     * @param s 当前文本内容\n     * @param start 改变开始的位置\n     * @param before 改变前的字符数量\n     * @param count 改变后的字符数量\n     */\n    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\n        // 可留空，如无逻辑需要\n    }\n\n    /**\n     * 文本改变后的回调方法，用于验证输入内容是否符合要求\n     * @param s 改变后的文本内容\n     */\n    override fun afterTextChanged(s: Editable?) {\n        // 验证输入内容是否只包含#$%字符\n        if (!s.toString().matches(\"[#$%]+\".toRegex())){\n            et.error = \"仅允许#$%\"\n        }\n    }\n})\n\n// 3、设置焦点监听\n/**\n * 设置EditText焦点变化监听器\n * 用于处理EditText获取焦点和失去焦点时的UI变化\n * 参数v: 发生焦点变化的View对象\n * 参数hasFocus: 表示View是否获得焦点的布尔值\n */\nval setOnFocusChangeListenerEt = findViewById<EditText>(R.id.set_on_focus_change_listener)\nsetOnFocusChangeListenerEt.setOnFocusChangeListener({ v, hasFocus ->\n    if(hasFocus){\n        // 获取焦点时清空提示\n        setOnFocusChangeListenerEt.setText(\"\")\n        setOnFocusChangeListenerEt.error = null\n    } else{\n        // 失去焦点时设置提示\n        setOnFocusChangeListenerEt.error = \"失去焦点了\"\n    }\n})\n~~~\n\n### ImageView 图片\n[回到目录](#目录)\n\n#### 布局属性\n\n~~~xml\n<ImageView\n        属性名=\"属性值\"\n        ....../>\n~~~\n\n| 属性               | 说明               | 参数说明                                                                                                                                                                       |\n| ------------------ | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| id                 | 控件的id           | @+id/imageView: 创建一个id<br>@id/imageView: 引用一个id                                                                                                                        |\n| layout_width       | 控件的宽度         | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                       |\n| layout_height      | 控件的高度         | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                       |\n| layout_margin      | 控件的外边距       | 具体数值: 边距大小                                                                                                                                                             |\n| adjustViewBounds   | 图片是否适应控件   | true: 适应<br>false: 不适应                                                                                                                                                    |\n| contentDescription | 图片的描述         | 文本内容                                                                                                                                                                       |\n| maxHeight          | 图片的最大高度     | 具体数值: 最大高度                                                                                                                                                             |\n| maxWidth           | 图片的最大宽度     | 具体数值: 最大宽度                                                                                                                                                             |\n| src                | 图片的资源         | @drawable/image: 图片资源<br>@mipmap/image: 图片资源                                                                                                                           |\n| background         | 图片的背景         | @color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值                                                                                                                       |\n| padding            | 图片的内边距       | 具体数值: 内边距大小                                                                                                                                                           |\n| cropToPadding      | 图片是否剪切内边距 | true: 剪切<br>false: 不剪切                                                                                                                                                    |\n| scaleType          | 图片的缩放类型     | fitXY: 填充父布局<br>fitStart: 适应内容并居左<br>fitCenter: 适应内容并居中<br>fitEnd: 适应内容并居右<br>center: 中心<br>centerCrop: 剪切并居中<br>centerInside: 适应内容并居中 |\n\n#### 代码添加属性\n\n~~~kotlin\n// 创建一个图形变换矩阵，用于对ImageView进行缩放变换\n// 设置X轴缩放比例为0.04，Y轴缩放比例为0.08\n// 将变换矩阵应用到ID为matrix的ImageView控件上\nval matrix = android.graphics.Matrix()\nmatrix.setScale(0.04f, 0.08f)\nfindViewById<ImageView>(R.id.matrix).imageMatrix = matrix\n~~~\n\n### ProgressBar 进度条\n[回到目录](#目录)\n\n#### 布局属性\n~~~xml\n<ProgressBar\n        属性名=\"属性值\"\n        ....../>\n~~~\n| 属性                  | 说明                     | 参数说明                                                                                                                                                                                                                                                                                                                                                 |\n| --------------------- | ------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| id                    | 控件的id                 | @+id/progressBar: 创建一个id<br>@id/progressBar: 引用一个id                                                                                                                                                                                                                                                                                              |\n| layout_width          | 控件的宽度               | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                                                                                                                                                                                                 |\n| layout_height         | 控件的高度               | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小                                                                                                                                                                                                                                                                                 |\n| layout_margin         | 控件的外边距             | 具体数值: 边距大小                                                                                                                                                                                                                                                                                                                                       |\n| style                 | 进度条样式               | ?android:attr/progressBarStyleHorizontal: 水平直条样式<br>？android:attr/progressBarStyleSmall: 小尺寸圆形样式<br>？android:attr/progressBarStyleLarge: 大尺寸圆形样式<br>？android:attr/progressBarStyleInverse: 反向样式<br>？android:attr/progressBarStyleSmallInverse: 小尺寸反向样式<br>？android:attr/progressBarStyleLargeInverse: 大尺寸反向样式 |\n| max                   | 进度条的最大值           | 具体数值: 最大值                                                                                                                                                                                                                                                                                                                                         |\n| progress              | 进度条的当前进度         | 具体数值: 当前进度                                                                                                                                                                                                                                                                                                                                       |\n| secondaryProgress     | 进度条的当前进度         | 具体数值: 当前进度                                                                                                                                                                                                                                                                                                                                       |\n| indeterminate         | 进度条是否为不确定状态   | true: 不确定<br>false: 确定                                                                                                                                                                                                                                                                                                                              |\n| indeterminateDrawable | 进度条的不确定状态的图片 | @drawable/image: 图片资源<br>@mipmap/image: 图片资源                                                                                                                                                                                                                                                                                                     |\n\n图片旋转样式\n~~~xml\n<!--\n    animated-rotate动画旋转组件\n\n    该组件用于创建一个旋转动画效果，将指定的drawable资源进行360度旋转\n\n    参数说明：\n    android:drawable - 指定要进行旋转动画的drawable资源引用\n    android:fromDegree - 动画开始时的旋转角度，单位为度\n    android:toDegree - 动画结束时的旋转角度，单位为度\n    android:pivotX - 旋转中心点的X轴坐标，50%表示在drawable宽度的中心位置\n    android:pivotY - 旋转中心点的Y轴坐标，50%表示在drawable高度的中心位置\n-->\n<animated-rotate xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:drawable=\"@drawable/p0\"\n    android:fromDegrees=\"0\"\n    android:pivotX=\"50%\"\n    android:pivotY=\"50%\"\n    android:toDegrees=\"360\" />\n~~~\n\n#### 代码添加属性\n~~~kotlin\nval progress = findViewById<ProgressBar>(R.id.progress)\n// 启动一个后台线程来模拟进度更新\nThread{\n    var p = 0\n    while (p < 100){\n        Thread.sleep(100) // 每100毫秒更新一次进度\n        p++\n        // 在主线程中更新进度条UI\n        runOnUiThread {\n            progress.progress = p\n            progress.secondaryProgress = (p + 5)\n        }\n    }\n}.start()\n~~~\n\n### ScrollView 滚动\n[回到目录](#目录)\n\n#### 布局属性\n\n~~~xml\n<ScrollView\n        属性名=\"属性值\"\n        ......>\n        <布局标签\n            属性名=\"属性值\"\n            ......>\n        </布局标签>\n</ScrollView>\n\n<HorizontalScrollView\n        属性名=\"属性值\"\n        ......>\n        <布局标签\n            属性名=\"属性值\"\n            ......>\n        </布局标签>\n</HorizontalScrollView>\n~~~\n\n| 属性                  | 说明                   | 参数说明                                                                                                               |\n| --------------------- | ---------------------- | ---------------------------------------------------------------------------------------------------------------------- |\n| id                    | 控件的id               | @+id/scrollView: 创建一个id<br>@id/scrollView: 引用一个id                                                              |\n| layout_width          | 控件的宽度             | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局                                             |\n| layout_height         | 控件的高度             | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局                                             |\n| fillViewport          | 滚动视图是否填充父布局 | true: 填充<br>false: 不填充                                                                                            |\n| scrollbars            | 滚动条样式             | none: 无<br>horizontal: 水平滚动条<br>vertical: 垂直滚动条                                                             |\n| scrollbarSize         | 滚动条大小             | 具体数值: 滚动条大小                                                                                                   |\n| scrollbarFadeDuration | 滚动条淡出时间         | 具体数值: 淡出时间                                                                                                     |\n| layout_weight         | 控件的权重             | 具体数值: 权重大小                                                                                                     |\n| scrollbarStyle        | 滚动条样式             | insideOverlay: 覆盖在内容上方<br>insideInset: 嵌入内容内<br>outsideOverlay: 覆盖在内容上方<br>outsideInset: 嵌入内容内 |\n| requiresFadingEdge    | 需要淡出边缘效果       | vertical: 垂直<br>horizontal: 水平                                                                                     |\n| fadingEdgeLength      | 淡出边缘长度           | 具体数值: 淡出边缘长度                                                                                                 |\n| overScrollMode        | 滚动模式               | never: 不允许滚动<br>always: 允许滚动<br>ifContentScrolls: 内容滚动时允许滚动                                          |\n\n#### 代码添加属性\n~~~kotlin\n// 在滚动视图中添加内容\n\n// 获取垂直线性布局容器\nval vsvc = findViewById<LinearLayout>(R.id.vsvc)\n\n// 循环创建50个TextView并添加到布局中\nfor (i in 1 .. 50){\n    // 创建并配置TextView样式\n    val textView = TextView(this).apply{\n        text = \"动态添加的 TextView $i\"\n        textSize = 16f\n        setTextColor(Color.BLACK)\n        setPadding(20, 10, 20, 10)\n    }\n\n    // 设置布局参数，配置上下边距\n    val params = LinearLayout.LayoutParams(\n        LinearLayout.LayoutParams.MATCH_PARENT,\n        LinearLayout.LayoutParams.WRAP_CONTENT\n    ).apply {\n        topMargin = 5\n    }\n    textView.layoutParams = params\n\n    // 将TextView添加到父布局中\n    vsvc.addView(textView)\n}\n\n\n// 获取水平滚动视图中的线性布局容器\nval hsvc = findViewById<LinearLayout>(R.id.hsvc)\n\n// 设置水平滚动视图的滚动监听器，用于监听滚动位置变化\nfindViewById<HorizontalScrollView>(R.id.hsv).setOnScrollChangeListener({v, scrollX, scrollY, oldScrollX, oldScrollY ->\n    Log.d(TAG, \"ScrollX: $scrollX, ScrollY: $scrollY, oldScrollX: $oldScrollX, oldScrollY: $oldScrollY\")\n})\n\n// 循环创建50个TextView并添加到水平滚动布局中\nfor(i in 1 .. 50){\n    val textView = TextView(this).apply {\n        text = \"第 $i 个\"\n        textSize = 16f\n        setTextColor(Color.BLACK)\n        setBackgroundColor(Color.WHITE)\n        setPadding(20, 10, 20, 10)\n    }\n\n    // 设置TextView的布局参数，包括上下边距和右边距\n    val params = LinearLayout.LayoutParams(\n        LinearLayout.LayoutParams.WRAP_CONTENT,\n        LinearLayout.LayoutParams.WRAP_CONTENT\n    ).apply {\n        topMargin = 100\n        rightMargin = 20\n    }\n    textView.layoutParams = params\n    hsvc.addView(textView)\n}\n~~~\n\n### RecyclerView 容器\n\n[回到目录](#目录)\n\n#### 核心组件\n| 组件           | 说明                                           |\n| -------------- | ---------------------------------------------- |\n| Adapter        | 数据与视图绑定，创建ViewHolder，绑定数据到视图 |\n| ViewHolder     | 缓存视图引用，存储item布局中的控件引用         |\n| LayoutManager  | 定义布局方式，如垂直或水平，以及如何排列item   |\n| ItemDecoration | 定义item的装饰，如分割线，边框，背景颜色等     |\n| ItemAnimator   | 定义item的动画，如插入，删除，移动，改变大小等 |\n\n#### 引入依赖\n1. 在模组的 build.gradle文件中添加以下依赖项：\n\n~~~gradle\n// 添加RecyclerView依赖\ndependencies {\n    implementation(libs.androidx.recyclerview)\n}\n// 若添加失败尝试添加以下依赖项\ndependencies {\n    implementation(\"androidx.recyclerview:recyclerview:1.3.2\")\n}\n~~~\n\n2. 在项目级gradle.properties文件中添加网络代理\n~~~properties\nandroid.useAndroidX=true\nandroid.enableJetifier=true\n\nsystemProp.http.proxyHost=http://127.0.0.1:端口号\n~~~\n3. sync now\n\n#### 布局属性\n\n~~~xml\n<androidx.recyclerview.widget.RecyclerView\n        属性名=\"属性值\"\n        ......>\n~~~\n\n| 属性          | 说明       | 参数说明                                                                   |\n| ------------- | ---------- | -------------------------------------------------------------------------- |\n| id            | 控件的id   | @+id/recyclerView: 创建一个id<br>@id/recyclerView: 引用一个id              |\n| layout_width  | 控件的宽度 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局 |\n| layout_height | 控件的高度 | match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局 |\n\n#### RecyclerView的使用\n1. 添加依赖\n2. 布局Activity\n3. 创建Item布局\n    1. recycler_img_item.xml\n    ~~~xml\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n    <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\">\n\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n\n    </LinearLayout>\n    ~~~\n    2. recycler_text_item.xml\n    ~~~xml\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n    <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\">\n\n        <ImageView\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:src=\"@drawable/p0\"/>\n        <LinearLayout\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:orientation=\"vertical\"\n            android:layout_marginLeft=\"20dp\">\n            <TextView\n                android:id=\"@+id/item_title\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"我是标题\"\n                android:textColor=\"#FF000000\"\n                android:textStyle=\"bold\"\n                android:textSize=\"18sp\"/>\n            <TextView\n                android:id=\"@+id/item_text\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"20dp\"\n                android:textColor=\"#FF000000\"\n                android:textSize=\"18dp\"/>\n        </LinearLayout>\n\n    </LinearLayout>\n    ~~~\n4. 实现Adapter & ViewHolder\n    ~~~kotlin\n    /**\n     * 设置Activity的内容视图，并初始化RecyclerView及其相关组件。\n     *\n     * @param layoutResID 布局资源ID，用于设置Activity的界面布局。\n     */\n    override fun setContentView(layoutResID: Int) {\n        super.setContentView(layoutResID)\n\n        val recyclerView = findViewById<RecyclerView>(R.id.recyclerView)\n        // 设置RecyclerView的布局管理器为垂直方向的瀑布流布局，列数为1（即线性布局效果）\n        recyclerView?.setLayoutManager(\n            StaggeredGridLayoutManager(\n                1,\n                StaggeredGridLayoutManager.VERTICAL\n            )\n        )\n        // 初始化数据源，添加101个字符串项\n        val data = mutableListOf<String?>()\n        for (i in 0..100) {\n            data.add(\"Item $i\")\n        }\n        // 创建并设置适配器\n        val adapter = MyAdapter(data)\n        recyclerView?.setAdapter(adapter)\n        // 添加分割线装饰\n        recyclerView?.addItemDecoration(DividerItemDecoration(this, LinearLayoutManager.VERTICAL))\n        // 设置默认的动画效果\n        recyclerView?.itemAnimator = DefaultItemAnimator()\n    }\n\n    /**\n     * RecyclerView的适配器类，用于绑定不同类型的数据到视图上。\n     *\n     * @property data 数据源列表，包含要显示的字符串数据。\n     */\n    class MyAdapter(private val data: MutableList<String?>) :\n        RecyclerView.Adapter<MyAdapter.ViewHolder?>(){\n        companion object{\n            const val VIEW_TYPE_TEXT = 1\n            const val VIEW_TYPE_IMG = 2\n        }\n\n        /**\n         * 根据位置返回不同的视图类型。\n         *\n         * @param position 当前项在数据集中的位置。\n         * @return 返回视图类型标识符（VIEW_TYPE_TEXT 或 VIEW_TYPE_IMG）。\n         */\n        override fun getItemViewType(position: Int): Int{\n            return if (position % 2 == 0) VIEW_TYPE_TEXT else VIEW_TYPE_IMG\n        }\n\n        /**\n         * 创建一个新的ViewHolder实例。\n         *\n         * @param parent 父容器ViewGroup。\n         * @param viewType 视图类型标识符。\n         * @return 返回新创建的ViewHolder对象。\n         */\n        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyAdapter.ViewHolder {\n            val view : View\n            // 根据视图类型加载不同的布局文件\n            if(viewType == VIEW_TYPE_TEXT){\n                view = LayoutInflater.from(parent.getContext())\n                    .inflate(R.layout.recycler_text_item, parent, false)\n                view.tag = VIEW_TYPE_TEXT\n            } else{\n                view = LayoutInflater.from(parent.getContext())\n                    .inflate(R.layout.recycler_img_item, parent, false)\n                view.tag = VIEW_TYPE_IMG\n            }\n            return ViewHolder(view, data, this)\n        }\n\n        /**\n         * 将数据绑定到指定位置的ViewHolder上。\n         *\n         * @param holder 要绑定数据的ViewHolder。\n         * @param position 数据在列表中的位置。\n         */\n        override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n            holder.setText(data.get(position))\n        }\n\n        /**\n         * 返回数据集合的大小。\n         *\n         * @return 数据集合的元素数量。\n         */\n        override fun getItemCount(): Int {\n            return data.size\n        }\n\n        /**\n         * ViewHolder类，用于持有RecyclerView中每个子项的视图引用。\n         *\n         * @property itemView 子项的根视图。\n         * @property dataList 数据源列表。\n         * @property adapter 所属的适配器实例。\n         */\n        class ViewHolder(itemView: View, var dataList: MutableList<String?>, val adapter: MyAdapter) : RecyclerView.ViewHolder(itemView){\n            /**\n             * 设置文本内容并处理点击事件。\n             *\n             * @param text 要设置的文本内容。\n             */\n            fun setText(text: String?){\n                if(itemView.tag == VIEW_TYPE_TEXT){\n                    itemView.findViewById<TextView>(R.id.item_text).text = text\n                    // 文本类型项点击时移除第一个元素\n                    itemView.setOnClickListener {\n                        if (dataList.isNotEmpty()){\n                            dataList.removeAt(0)\n                            adapter.notifyItemRemoved(0)\n                        }\n                    }\n                }else {\n                    // 图片类型项点击时更新第一个元素的内容\n                    itemView.setOnClickListener {\n                        dataList[0] =  \"Item ${(0..100).random()}\"\n                        adapter.notifyItemChanged(0)\n                    }\n                }\n            }\n        }\n\n\n    }\n    ~~~\n5. 在Activity & Fragment中调用\n\n## 布局\n\n[回到目录](#目录)\n\nAndroid的布局过程是ui构建的核心环节，本质是 **视图树(View Hierarchy)** 中每个 **节点(View)** 确定自身以及其子元素尺寸和位置的过程\n\n### 测量和布局\n1. 测量 Measure\n    * 遍历子视图\n        * 跳过View.GONE\n        * 对其他子视图调用 measureChildWithMargins()\n    * 计算最大子视图尺寸\n        * 宽度：measureWidth + marginLeft + marginRight 的最大值\n        * 高度：measureHeight + marginTop + marginBottom 的最大值\n    * 处理自身尺寸\n        * 最终宽度 = max(子视图最大宽度，背景最小宽度，建议最小宽度) + paddingLeft + paddingRight\n        * 最终高度 = max(子视图最大高度，背景最小高度，建议最小高度) + paddingTop + paddingBottom\n        * 结果还需满足父视图传入的MeasureSpec\n    * 处理特殊子视图：设置了layout_gravity需重新测量调整位置\n2. 布局 Layout\n    * 确定布局区域 \n    * 遍历子视图\n\n### FrameLayout\n\n核心价值在于通过**layout_gravity**实现子视图的精准叠加定位\n\n#### 自身属性\n| 属性                      | 描述             | 参数说明                                                                                                    |\n| ------------------------- | ---------------- | ----------------------------------------------------------------------------------------------------------- |\n| android:layout_width      | 视图宽度         | match_parent:匹配父视图宽度<br>wrap_content:包裹内容宽度<br>具体数值:具体数值                               |\n| android:layout_height     | 视图高度         | match_parent:匹配父视图高度<br>wrap_content:包裹内容高度<br>具体数值:具体数值                               |\n| android:layout_gravity    | 视图对齐方式     | left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐<br>可以通过竖杠连接多个值 |\n| android:background        | 视图背景         | 颜色值:颜色值<br>图片:图片路径                                                                              |\n| android:foreground        | 视图前景         | 颜色值:颜色值<br>图片:图片路径                                                                              |\n| android:foregroundGravity | 视图前景对齐方式 | left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐                           |\n\n#### 子视图属性\n\n子视图默认排列在FrameLayout的左上角，且允许堆叠\n最终位置为对其方式并加上边距值后的位置\n\n| 属性                        | 描述           | 参数说明                                                                          |\n| --------------------------- | -------------- | --------------------------------------------------------------------------------- |\n| android:layout_gravity      | 子视图对齐方式 | left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐 |\n| android:layout_marginStart  | 子视图左边距   | 单位:dp                                                                           |\n| android:layout_marginEnd    | 子视图右边距   | 单位:dp                                                                           |\n| android:layout_marginTop    | 子视图上边距   | 单位:dp                                                                           |\n| android:layout_marginBottom | 子视图下边距   | 单位:dp                                                                           |\n\n### LinearLayout\n\n核心优势在于**方向性排列**和**权重分配**，适合构建列表、表单等结构性界面，但嵌套或频繁使用layout_weight属性可能会导致**性能问题**。\n\n#### 自身属性\n| 属性                        | 描述                         | 参数说明                                                                                                                                   |\n| --------------------------- | ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |\n| **android:orientation**     | 排列方向                     | horizontal：水平排列<br>vertical：垂直排列                                                                                                 |\n| android:layout_width        | 宽度                         | match_parent：填充父布局<br>wrap_content：内容自适应<br>具体数值                                                                           |\n| android:layout_height       | 高度                         | match_parent：填充父布局<br>wrap_content：内容自适应<br>具体数值                                                                           |\n| android:background          | 背景                         | 颜色值                                                                                                                                     |\n| android:gravity             | 子视图对齐方式               | center：居中<br>center_vertical：垂直居中<br>center_horizontal：水平居中<br>left：左对齐<br>right：右对齐<br>top：上对齐<br>bottom：下对齐 |\n| android:layout_gravity      | 子视图在父容器对齐方式       | center：居中<br>center_vertical：垂直居中<br>center_horizontal：水平居中<br>left：左对齐<br>right：右对齐<br>top：上对齐<br>bottom：下对齐 |\n| android:layout_marginTop    | 设置子视图与父容器顶部的距离 | 单位：dp                                                                                                                                   |\n| android:layout_marginBottom | 设置子视图与父容器底部的距离 | 单位：dp                                                                                                                                   |\n| android:layout_marginLeft   | 设置子视图与父容器左侧的距离 | 单位：dp                                                                                                                                   |\n| android:layout_marginRight  | 设置子视图与父容器右侧的距离 | 单位：dp                                                                                                                                   |\n| ***android:divider***       | 设置ListView的分割线         | drawable资源文件                                                                                                                           |\n| android:showDividers        | 设置ListView的分割线显示位置 | none：不显示；beginning：开头；middle：中间；end：结尾                                                                                     |\n| **android:weightSum**       | 设置LinearLayout的权重和     | float类型                                                                                                                                  |\n\n* 分割线示例\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\n    这是一个Android Drawable资源文件，用于定义分割线\n\n    主要功能：\n    - 创建一个1x1像素的红色矩形drawable\n    - 用于创建分割线\n\n    属性说明：\n    - android:shape=\"rectangle\": 指定形状为矩形\n    - android:width=\"1dp\" 和 android:height=\"1dp\": 设置形状尺寸为1x1像素\n    - android:color=\"#FF0000\": 设置填充颜色为纯红色\n\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:shape=\"rectangle\">\n\n    <size android:width=\"1dp\" android:height=\"1dp\"/>\n    <solid android:color=\"#FF0000\"/>\n\n</shape>\n~~~\n\n#### 子视图属性\n| 属性                   | 描述                           | 参数说明                                                                                            |\n| ---------------------- | ------------------------------ | --------------------------------------------------------------------------------------------------- |\n| android:layout_gravity | 设置子视图在父视图中的对齐方式 | left:左对齐<br>right:右对齐<br>center:居中对齐<br>fill:填充父视图                                   |\n| android:layout_weight  | 设置子视图在父视图中的权重     | 根据父视图的weightSum值来分配空间，默认weightSum为4，**需要将layout_width或layout_height设置为0dp** |\n\n### RelativeLayout\n\n[回到目录](#目录)\n\n是基于相对位置关系的布局容器，通过定义子视图相对于父容器或同级视图的位置来组织界面元素\n\n#### 子视图属性\n\n1. 对齐父容器边\n\n| 描述                             | 属性                       | 参数说明                                |\n| -------------------------------- | -------------------------- | --------------------------------------- |\n| android:layout_alignParentStart  | 设置视图与父容器起始边对齐 | true:启用左对齐<br>false:禁用左对齐     |\n| android:layout_alignParentEnd    | 设置视图与父容器结束边对齐 | true:启用右对齐<br>false:禁用右对齐     |\n| android:layout_alignParentTop    | 设置视图与父容器顶部对齐   | true:启用顶部对齐<br>false:禁用顶部对齐 |\n| android:layout_alignParentBottom | 设置视图与父容器底部对齐   | true:启用底部对齐<br>false:禁用底部对齐 |\n\n2. 方向位置\n\n| 描述                                              | 属性                             | 参数说明                     |\n| ------------------------------------------------- | -------------------------------- | ---------------------------- |\n| android:layout_toRightOf/ android:layout_toEndOf  | 设置视图相对于某个视图的右侧对齐 | @+id/viewId:指定某个视图的id |\n| android:layout_toLeftOf/ android:layout_toStartOf | 设置视图相对于某个视图的左侧对齐 | @+id/viewId:指定某个视图的id |\n| android:layout_below                              | 设置视图相对于某个视图的底部对齐 | @+id/viewId:指定某个视图的id |\n| android:layout_above                              | 设置视图相对于某个视图的顶部对齐 | @+id/viewId:指定某个视图的id |\n\n3. 边缘对齐\n\n| 描述                       | 属性                               | 参数说明                     |\n| -------------------------- | ---------------------------------- | ---------------------------- |\n| android:layout_alignTop    | 设置视图与某个视图的顶部对齐       | @+id/viewId:指定某个视图的id |\n| android:layout_alignBottom | 设置视图与某个视图的底部对齐       | @+id/viewId:指定某个视图的id |\n| android:layout_alignLeft   | 设置视图与某个视图的左侧对齐       | @+id/viewId:指定某个视图的id |\n| android:layout_alignRight  | 设置视图与某个视图的右侧对齐       | @+id/viewId:指定某个视图的id |\n| android:layout_baseline    | 设置视图的基线与指定视图的基线对齐 | @+id/viewId:指定某个视图的id |\n\n4. 居中控制\n\n| 描述                          | 属性                       | 参数说明                                |\n| ----------------------------- | -------------------------- | --------------------------------------- |\n| android:layout_centerInParent | 设置视图在父容器中居中显示 | true:启用居中显示<br>false:禁用居中显示 |\n| layout_centerHorizontal       | 垂直居中                   | true:启用垂直居中<br>false:禁用垂直居中 |\n| layout_centerVertical         | 水平居中                   | true:启用水平居中<br>false:禁用水平居中 |\n\n### ConstraintLayout\n\n[回到目录](#目录)\n\n用于构建复杂界面的灵活布局容器，通过 **约束关系(Constraint)** 精准控制子视图的相对位置和尺寸，相比传统布局能有效减少嵌套层级，**提升性能**\n\n#### 子视图属性\n\n1. 基本约束属性\n    * 水平方向\n        \n        | 属性                                 | 描述                   | 参数说明                     |\n        | ------------------------------------ | ---------------------- | ---------------------------- |\n        | app:layout_constraintLeft_toLeftOf   | 左对齐                 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintLeft_toRightOf  | 设置视图左侧在目标右侧 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintRight_toLeftOf  | 设置视图右侧在目标左侧 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintRight_toRightOf | 右对齐                 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintStart_toStartOf | 起始边对齐             | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintStart_toEndOf   | 起始边在目标结束边     | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintEnd_toStartOf   | 结束边在目标起始边     | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintEnd_toEndOf     | 结束边对齐             | @+id/viewId:指定某个视图的id |\n\n    * 垂直方向\n\n        | 属性                                   | 描述           | 参数说明                     |\n        | -------------------------------------- | -------------- | ---------------------------- |\n        | app:layout_constraintTop_toTopOf       | 顶部对齐       | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintTop_toBottomOf    | 顶部在目标底部 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintBottom_toTopOf    | 底部在目标顶部 | @+id/viewId:指定某个视图的id |\n        | app:layout_constraintBottom_toBottomOf | 底部对齐       | @+id/viewId:指定某个视图的id |\n\n    * 特殊对齐\n\n        | 属性                                       | 描述         | 参数说明                     |\n        | ------------------------------------------ | ------------ | ---------------------------- |\n        | app:layout_constraintBaseline_toBaselineOf | 文本基线对齐 | @+id/viewId:指定某个视图的id |\n\n2. 边距尺寸约束\n    * 常规边距\n        \n        | 属性                        | 描述             | 参数说明                  |\n        | --------------------------- | ---------------- | ------------------------- |\n        | android:layout_marginStart  | 设置视图起始边距 | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginEnd    | 设置视图结束边距 | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginTop    | 顶部边距         | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginBottom | 底部边距         | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginLeft   | 左侧边距         | 0dp:无边距<br>1dp:1dp边距 |\n        | android:layout_marginRight  | 右侧边距         | 0dp:无边距<br>1dp:1dp边距 |\n\n    * 目标隐藏时的边距(约束目标变为GONE时生效)\n\n        | 属性                        | 描述               | 参数说明                                                                              |\n        | --------------------------- | ------------------ | ------------------------------------------------------------------------------------- |\n        | app:layout_goneMarginRight  | 目标隐藏时右侧边距 | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 目标宽度 + 目标margin** |\n        | app:layout_goneMarginLeft   | 目标隐藏时左侧边距 | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 目标宽度 + 目标margin** |\n        | app:layout_goneMarginTop    | 顶部边距           | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 目标高度 + 目标margin** |\n        | app:layout_goneMarginBottom | 底部边距           | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 目标高度 + 目标margin** |\n        | app:layout_goneMarginStart  | 启动边距           | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 宽度 + 目标margin**     |\n        | app:layout_goneMarginEnd    | 结束边距           | 0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则**设置值 = 宽度 + 目标margin**     |\n\n    * 特殊尺寸值：0dp(即MATCH_CONSTRAINT，根据约束条件拓展)；wrap_content(自适应内容，可配合强制约束)\n    * 比例与限制\n\n        | 属性                                | 描述             | 参数说明                          |\n        | ----------------------------------- | ---------------- | --------------------------------- |\n        | app:layout_constraintDimensionRatio | 宽高比           | 1:1:宽高比为1:1                   |\n        | app:layout_constrainedWidth         | 强制宽度限制     | true:宽度限制<br>false:宽度不限制 |\n        | app:layout_constrainedHeight        | 强制高度限制     | true:高度限制<br>false:高度不限制 |\n        | android:minWidth                    | 设置视图最小宽度 | 0dp:无最小宽度                    |\n        | android:minHeight                   | 设置视图最小高度 | 0dp:无最小高度                    |\n        | android:maxWidth                    | 设置视图最大宽度 | 0dp:无最大宽度                    |\n        | android:maxHeight                   | 设置视图最大高度 | 0dp:无最大高度                    |\n\n3. 链式布局\n\n第一个元素的app:layout_constraintLeft_toLeftOf属性为parent，最后一个元素的app:layout_constraintRight_toRightOf属性为parent，中间的元素的app:layout_constraintLeft_toRightOf属性为前一个元素，app:layout_constraintRight_toLeftOf属性为后一个元素，即**双向连接**\n\n| 属性                                       | 描述             | 参数说明                                                                   |\n| ------------------------------------------ | ---------------- | -------------------------------------------------------------------------- |\n| app:layout_constraintHorizontal_chainStyle | 水平链式布局样式 | spread:均分<br>packed:均分且居中紧凑<br>spread_inside:均分且两侧紧贴父容器 |\n\n~~~xml\n<!--链式布局-->\n    <!--spread-->\n    <!--\n        Button控件button5的布局定义\n        该按钮参与水平链式约束，与button6、button7形成水平链条\n        左侧对齐父容器左侧，右侧对齐到button6的左侧\n        顶部位置在ratio控件的下方\n    -->\n    <Button\n        android:id=\"@+id/button5\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"button5\"\n        app:layout_constraintHorizontal_chainStyle=\"spread\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toLeftOf=\"@+id/button6\"\n        app:layout_constraintTop_toBottomOf=\"@id/ratio\"/>\n\n    <!--\n        Button控件button6的布局定义\n        该按钮是水平链条的中间元素\n        左侧对齐到button5的右侧，右侧对齐到button7的左侧\n        顶部位置与button5对齐\n    -->\n    <Button\n        android:id=\"@+id/button6\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"button6\"\n        app:layout_constraintLeft_toRightOf=\"@+id/button5\"\n        app:layout_constraintRight_toLeftOf=\"@id/button7\"\n        app:layout_constraintTop_toTopOf=\"@id/button5\"/>\n\n    <!--\n        Button控件button7的布局定义\n        该按钮是水平链条的最后一个元素\n        左侧对齐到button6的右侧，右侧对齐到父容器右侧\n        顶部位置与button5对齐\n    -->\n    <Button\n        android:id=\"@+id/button7\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"button7\"\n        app:layout_constraintTop_toTopOf=\"@id/button5\"\n        app:layout_constraintLeft_toRightOf=\"@id/button6\"\n        app:layout_constraintRight_toRightOf=\"parent\"/>\n~~~\n\n4. 权重分配\n\n通过结合链式布局和权重属性，实现权重分配，父容器默认权重总和为4\n\n此外，也可以通过结合layout_constraintLeft_toLeftOf、layout_constraintRight_toRightOf属性和偏移，实现按比例确定位置\n\n| 属性                                   | 描述         | 参数说明                   |\n| -------------------------------------- | ------------ | -------------------------- |\n| app:layout_constraintHorizontal_weight | 水平权重分配 | 0:不分配权重<br>1:分配权重 |\n| app:layout_constraintVertical_weight   | 垂直权重分配 | 0:不分配权重<br>1:分配权重 |\n| app:layout_constraintHorizontal_bias   | 水平偏移     | 0:不偏移<br>0.5:居中       |\n\n5. 参考线标签\n\n可以通过参考线标签，进一步实现复杂布局\n\n~~~xml\n    <!--\n        Guideline控件用于在ConstraintLayout中创建参考线，帮助布局对齐\n        android:id: 控件的唯一标识符\n        android:layout_width: 布局宽度，wrap_content表示根据内容自适应\n        android:layout_height: 布局高度，wrap_content表示根据内容自适应\n        android:orientation: 参考线方向，vertical表示垂直方向\n        app:layout_constraintGuide_begin: 参考线距离父容器开始位置的距离，100dp表示距离左边100dp处\n    -->\n    <androidx.constraintlayout.widget.Guideline\n        android:id=\"@+id/guideline\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\"\n        app:layout_constraintGuide_begin=\"100dp\"/>\n~~~\n\n### 总结\n\n| 特性     | LinearLayout  | FrameLayout  | RelativeLayout          | ConstraintLayout |\n| -------- | ------------- | ------------ | ----------------------- | ---------------- |\n| 布局逻辑 | 线性方向排列  | 视图堆叠     | 相对其他视图/父容器定位 | 视图间约束关系   |\n| 嵌套     | 易嵌套过深    | 极少嵌套     | 可减少嵌套              | 显著减少嵌套     |\n| 性能     | 嵌套多层时差  | 最优（简单） | 较差（两次测量）        | 最优（复杂布局） |\n| 适用场景 | 简单列表/等分 | 叠加视图     | 中等复杂的相对定位      | 高复杂度布局     |\n| 学习曲线 | 简单          | 简单         | 中等                    | 较高             |\n\n\n## 创建自定义组件\n\n[返回目录](#目录)\n\n1. 在res目录下的values文件夹中创建attrs.xml文件\n2. 在attrs.xml文件的<resources>标签中添加如下内容：`declare-styleable`标签中的`name`属性定义了自定义组件的名称，`attr`标签中的`name`属性定义了属性的名称，`format`属性定义了属性的类型\n\n~~~xml\n    <!--\n        定义自定义控件IconTextView的样式属性\n        该样式集合用于支持在XML布局文件中配置IconTextView控件的各种属性\n    -->\n    <declare-styleable name=\"IconTextView\">\n        <!-- 图标资源引用，用于设置控件显示的图标 -->\n        <attr name=\"iconSrc\" format=\"reference\"/>\n        <!-- 显示文本内容，用于设置控件显示的文字 -->\n        <attr name=\"text\" format=\"string\"/>\n        <!-- 文本颜色，用于设置文字的显示颜色 -->\n        <attr name=\"textColor\" format=\"color\"/>\n        <!-- 文本大小，用于设置文字的显示尺寸 -->\n        <attr name=\"textSize\" format=\"dimension\"/>\n    </declare-styleable>\n~~~\n\n3. 在主文件夹中创建自定义类IconTextView.kt\n4. 重写其中的onMeasure()、onLayout()方法\n\n~~~kotlin\nclass IconTextView @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null) :\n    ViewGroup(context, attrs){\n    /**\n     * 图标控件实例\n     */\n    private var mIcon: ImageView? = null\n\n    /**\n     * 文本控件实例\n     */\n    private var mText: TextView? = null\n\n    /**\n     * 初始化函数，在构造函数中调用\n     */\n    init{\n        init(context, attrs)\n    }\n\n    /**\n     * 初始化控件方法\n     *\n     * @param context 上下文对象，用于创建视图控件\n     * @param attrs 属性集合，包含布局文件中定义的属性\n     */\n    private fun init(context: Context, attrs: AttributeSet?){\n        // 创建图标和文本控件实例\n        mIcon = ImageView(context)\n        mText = TextView(context)\n\n        // 将子视图添加到容器中\n        addView(mIcon)\n        addView(mText)\n\n        // 解析自定义属性\n        attrs?.let { parseAttributes(context, it) }\n\n\n    }\n\n    private fun parseAttributes(context: Context, attrs: AttributeSet) {\n        val typedArray = context.obtainStyledAttributes(attrs, R.styleable.IconTextView)\n\n        // 解析图标资源\n        val iconResId = typedArray.getResourceId(R.styleable.IconTextView_iconSrc, -1)\n        if (iconResId != -1) {\n            mIcon?.setImageResource(iconResId)\n        }\n\n        // 解析文本内容\n        val text = typedArray.getString(R.styleable.IconTextView_text)\n        mText?.text = text\n\n        // 解析文本颜色\n        val textColor = typedArray.getColor(R.styleable.IconTextView_textColor,\n            mText?.currentTextColor ?: 0xFF000000.toInt())\n        mText?.setTextColor(textColor)\n\n        // 解析文本大小\n        val textSize = typedArray.getDimension(R.styleable.IconTextView_textSize, -1f)\n        if (textSize != -1f) {\n            mText?.textSize = textSize / context.resources.displayMetrics.scaledDensity\n        }\n\n        typedArray.recycle()\n    }\n\n\n    /**\n     * 重写onMeasure:测量自定义视图的尺寸\n     *\n     * @param widthMeasureSpec 宽度测量规格，包含宽度值和测量模式\n     * @param heightMeasureSpec 高度测量规格，包含高度值和测量模式\n     */\n    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {\n        // 测量图标和文本组件的实际尺寸\n        mIcon!!.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)\n        mText!!.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)\n\n        // 计算内容区域的宽度和高度\n        var width = mIcon!!.measuredWidth + mText!!.measuredWidth\n        var height = max(mIcon!!.measuredHeight, mText!!.measuredHeight)\n\n        // 添加内边距到总尺寸\n        width += paddingLeft + paddingRight\n        height += paddingTop + paddingBottom\n\n        // 根据测量规格解析最终尺寸并设置\n        setMeasuredDimension(\n            resolveSize(width, widthMeasureSpec),\n            resolveSize(height, heightMeasureSpec)\n        )\n    }\n\n    /**\n     * 重写onLayout:布局回调方法，用于确定子视图的位置\n     *\n     * @param changed 布局是否发生变化\n     * @param l 左边界位置\n     * @param t 上边界位置\n     * @param r 右边界位置\n     * @param b 下边界位置\n     */\n    override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {\n        val paddingLeft = paddingLeft\n        val paddingTop = paddingTop\n\n        // 布局图标视图，位置在左上角\n        mIcon!!.layout(\n            paddingLeft,\n            paddingTop,\n            paddingLeft + mIcon!!.measuredWidth,\n            paddingTop + mIcon!!.measuredHeight\n        )\n\n        // 布局文本视图，位置在图标右侧\n        mText!!.layout(\n            paddingLeft + mIcon!!.measuredWidth,\n            paddingTop,\n            paddingLeft + mIcon!!.measuredWidth + mText!!.measuredWidth,\n            paddingTop + mText!!.measuredHeight\n        )\n    }\n}\n~~~\n\n5. 在布局文件中使用自定义控件IconTextView\n\n~~~xml\n<com.kei.helloworld.IconTextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:iconSrc=\"@mipmap/ic_launcher_round\"\n        app:text=\"HelloWorld!!!\"\n        app:textColor=\"#FFFF0000\"\n        app:textSize=\"30sp\" />\n~~~\n\n## 属性动画\n\n### 动画框架\n\n| 特性       | ViewPropertyAnimator   | ObjextAnimator               |\n| ---------- | ---------------------- | ---------------------------- |\n| 目标对象   | 仅限View               | 任意对象                     |\n| 多属性动画 | 链式调用且自动合并     | 需手动优化                   |\n| 灵活性     | 易嵌套过深             | 极少嵌套                     |\n| 性能       | 低                     | 高                           |\n| 使用场景   | View的简单、高性能动画 | 界面复杂动画、非View对象动画 |\n\n### 常用API\n\n| API             | 作用            | 对应属性动画中的方法               |\n| --------------- | --------------- | ---------------------------------- |\n| setTranslationX | 设置X轴偏移     | translationX()<br>translationXBy() |\n| setTranslationY | 设置Y轴偏移     | translationY()<br>translationYBy() |\n| setTranslationZ | 设置Z轴偏移     | translationZ()<br>translationZBy() |\n| setX            | 设置X轴绝对位置 | x()<br>xBy()                       |\n| setY            | 设置Y轴绝对位置 | y()<br>yBy()                       |\n| setZ            | 设置Z轴绝对位置 | z()<br>zBy()                       |\n| setRotation     | 设置平面旋转    | rotation()<br>rotationBy()         |\n| setRotationX    | 设置沿x轴旋转   | rotationX()<br>rotationXBy()       |\n| setRotationY    | 设置沿y轴旋转   | rotationY()<br>rotationYBy()       |\n| setScaleX       | 设置X轴缩放     | scaleX()<br>scaleXBy()             |\n| setScaleY       | 设置Y轴缩放     | scaleY()<br>scaleYBy()             |\n| setAlpha        | 设置透明度      | alpha()<br>alphaBy()               |\n\n### ViewPropertyAnimator\n1. 获取组件对象\n2. 通过某些事件监听触发动画效果(示例使用了点击事件)\n3. 组件对象调用animate()方法然后链式调用设置动画效果\n\n~~~kotlin\n        // 获取蓝色视图组件\n        val blueView = findViewById<View>(R.id.view3)\n        /**\n         * 设置ViewPropertyAnimator按钮的点击事件监听器\n         * 该函数会在用户点击按钮时触发动画效果\n         */\n        findViewById<Button>(R.id.viewPropertyAnimator).setOnClickListener {\n            // 执行blueView的组合动画：平移、透明度变化和缩放\n            blueView.animate().translationX(500.0F)\n                .alpha(0.5F)\n                .scaleX(0.5F)\n                .scaleY(0.5F)\n                .setDuration(2000)\n        }\n~~~\n\n### ObjectAnimator\n1. 获取组件对象\n2. 通过某些事件监听触发动画效果(示例使用了点击事件)\n3. 创建AnimatorSet()对象\n4. 通过AnimatorSet()对象调用playTogether()方法添加多个属性动画\n5. ObjectAnimator()对象调用ofFloat()方法创建属性动画\n6. AnimatorSet()对象调用setDuration()方法设置动画持续时间\n7. AnimatorSet()对象interpolator属性可以为动画设置动画插值器\n8. AnimatorSet()对象调用start()方法开始执行动画\n\n~~~kotlin\n        // 获取蓝色视图组件\n        val blueView = findViewById<View>(R.id.view3)\n        /**\n         * 设置ObjectAnimator按钮的点击事件监听器\n         * 该函数会在用户点击按钮时触发动画效果\n         */\n        findViewById<Button>(R.id.objectAnimator).setOnClickListener {\n            // 创建动画集合，用于同时播放多个属性动画\n            val set = AnimatorSet()\n            set.playTogether(\n                ObjectAnimator.ofFloat(blueView, \"translationX\", 600.0F),\n                ObjectAnimator.ofFloat(blueView, \"scaleY\", 0.5F),\n                ObjectAnimator.ofFloat(blueView, \"alpha\", 0.5F)\n            )\n            // 设置动画持续时间为2000毫秒\n            set.setDuration(2000)\n            // 设置动画插值器为加速减速插值器\n            set.interpolator = AccelerateDecelerateInterpolator()\n            // 开始执行动画\n            set.start()\n        }\n~~~\n\n#### 动画插值器\n\n插值器控制动画的**变化速率**，将**线性时间进度(0.0-1.0)**转换为非线性进度值，实现加速、减速、弹跳等效果\n\n| 插值器类型                       | 效果描述                 | 适用场景     | 函数代码                                   |\n| -------------------------------- | ------------------------ | ------------ | ------------------------------------------ |\n| AccelerateDecelerateInterpolator | 默认插值器，先加速后减速 | 自然运动     | new AccelerateDecelerateInterpolator()     |\n| LinearInterpolator               | 匀速插值器               | 匀速运动     | new LinearInterpolator()                   |\n| AccelerateInterpolator           | 持续加速                 | 物体下落     | new AccelerateInterpolator()               |\n| DecelerateInterpolator           | 持续减速                 | 物体上升     | new DecelerateInterpolator()               |\n| BounceInterpolator               | 结束时弹跳               | 落地反弹     | new BounceInterpolator()                   |\n| OvershootInterpolator            | 超越终点后回弹           | 按钮点击反馈 | new OvershootInterpolator()                |\n| PathInterpolator                 | 自定义曲线轨迹           | 轨迹运动     | new PathInterpolator(0.4F, 0.5F, 0F, 1.0F) |\n\n### xmlAnimator\n1. 获取组件对象\n2. 通过某些事件监听触发动画效果(示例使用了点击事件)\n3. 创建AnimatorInflater()对象，并调用loadAnimator()方法加载XML定义的属性动画资源\n4. AnimatorInflater()对象调用addListener()方法添加状态监听器，重写监听方法\n5. AnimatorInflater()对象调用setTarget()方法设置动画目标对象\n6. AnimatorInflater()对象调用start()方法开始执行动画\n\n\n\n~~~kotlin\n        // 获取蓝色视图组件\n        val blueView = findViewById<View>(R.id.view3)\n        /**\n         * 设置XML动画按钮的点击监听器\n         * 该函数为按钮添加点击事件处理，加载并执行XML定义的属性动画\n         * 监听动画的各种状态并在状态变化时显示对应的Toast提示\n         */\n        findViewById<Button>(R.id.xmlAnimator).setOnClickListener {\n            // 加载XML中定义的属性动画资源\n            val anim = AnimatorInflater.loadAnimator(\n                this,\n                R.animator.text_animator\n            )\n\n            // 为动画添加状态监听器，监听动画的开始、结束、重复和取消事件\n            anim.addListener(object : Animator.AnimatorListener{\n                override fun onAnimationCancel(animation: Animator) {\n                    Toast.makeText(this@ActivityAnimation, \"onAnimationCancel\", Toast.LENGTH_SHORT).show()\n                }\n                override fun onAnimationEnd(animation: Animator) {\n                    Toast.makeText(this@ActivityAnimation, \"onAnimationEnd\", Toast.LENGTH_SHORT).show()\n                }\n                override fun onAnimationRepeat(animation: Animator) {\n                    Toast.makeText(this@ActivityAnimation, \"onAnimationRepeat\", Toast.LENGTH_SHORT).show()\n                }\n                override fun onAnimationStart(animation: Animator) {\n                    Toast.makeText(this@ActivityAnimation, \"onAnimationStart\", Toast.LENGTH_SHORT).show()\n                }\n            })\n            // 设置动画的目标视图\n            anim.setTarget(blueView)\n            // 启动动画\n            anim.start()\n        }\n~~~\n\n#### 动画属性资源的定义\n1. 在res目录下创建**animator文件夹**\n2. 创建**XML文件**，并添加以下内容\n3. set标签中的ordering属性控制**动画播放顺序**\n4. set标签下的objectAnimator标签定义了属性**动画效果**\n5. 其中duration属性控制**动画持续时间**，propertyName属性控制**动画属性名称**，valueFrom属性控制动画**起始值**，valueTo属性控制动画**结束值**\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!--\n    AnimatorSet配置文件\n\n    该XML文件定义了一个属性动画集合，用于按顺序播放多个动画效果\n\n    属性说明：\n    xmlns:android - Android命名空间声明，必需项\n    android:ordering - 动画播放顺序控制属性\n        值为\"sequentially\"表示动画将按顺序依次播放\n        可选值还包括\"together\"表示同时播放所有动画\n-->\n<set xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:ordering=\"sequentially\">\n\n    <!--\n        透明度动画函数\n        功能：在1000毫秒内将对象的透明度从1.0渐变到0.5\n        参数：\n            android:duration - 动画持续时间，单位为毫秒\n            android:propertyName - 动画属性名称，此处为透明度alpha\n            android:valueFrom - 属性起始值，完全不透明\n            android:valueTo - 属性结束值，半透明状态\n    -->\n    <objectAnimator\n        android:duration=\"1000\"\n        android:propertyName=\"alpha\"\n        android:valueFrom=\"1.0\"\n        android:valueTo=\"0.5\"/>\n\n    <!--\n        水平位移动画函数\n        功能：在1000毫秒内将对象沿X轴从位置0移动到位置600\n        参数：\n            android:duration - 动画持续时间，单位为毫秒\n            android:propertyName - 动画属性名称，此处为水平位移translationX\n            android:valueFrom - X轴起始位置坐标\n            android:valueTo - X轴结束位置坐标\n    -->\n    <objectAnimator\n        android:duration=\"1000\"\n        android:propertyName=\"translationX\"\n        android:valueFrom=\"0.0\"\n        android:valueTo=\"600.0\"/>\n\n    <!--\n        旋转变换动画函数\n        功能：在1000毫秒内将对象绕中心点旋转360度\n        参数：\n            android:duration - 动画持续时间，单位为毫秒\n            android:propertyName - 动画属性名称，此处为旋转角度rotation\n            android:valueFrom - 起始旋转角度，0度\n            android:valueTo - 结束旋转角度，360度\n    -->\n    <objectAnimator\n        android:propertyName=\"rotation\"\n        android:valueFrom=\"0\"\n        android:valueTo=\"360\"\n        android:duration=\"1000\"/>\n\n\n</set>\n~~~\n\n\n\n## 数据储存\n\n[回到目录](#目录)\n\n### SharedPreferences\n\n#### 简介\n* 核心概念​​：SharedPreferences 是 Android 系统提供的一个​​轻量级存储类​​，用于以 ​**​键值对（Key-Value）​**​ 的形式存储简单的数据。它本质上将一个 XML 文件保存在设备的私有目录中，从而实现了数据的持久化\n* 存储位置​​：**/data/data/<你的应用包名>/shared_prefs/**目录下。每个 SharedPreferences 文件都是一个 **.xml** 文件\n* ​数据类型​​：支持存储**基本数据类型**，包括 String（字符串）、`Int`（整型）、`Boolean`（布尔型）、`Float`（浮点型）、`Long`（长整型）以及 `Set<String>`（字符串集合）\n* 模式​​：通常使用 **MODE_PRIVATE模式**，这意味着该文件仅供你的应用自身访问，确保了数据的安全性。其他允许跨应用访问的模式（如 MODE_WORLD_READABLE）由于安全风险，已被废弃\n\n#### 存储数据\n\n1. 创建SharedPreferences对象\n\n~~~kotlin\n// 在 Activity 或 Fragment 中\nval sharedPref = getSharedPreferences(\"user_preferences\", Context.MODE_PRIVATE)\n~~~\n\n* ​参数1 \"user_preferences\"​​：自定义的文件名。系统会自动添加 .xml后缀。文件最终会是 user_preferences.xml\n* ​参数2 Context.MODE_PRIVATE​​：固定模式，表示私有文件。\n\n2. 获取edit对象\n\n~~~kotlin\nval editor = sharedPref.edit()\n~~~\n\n3. 写入数据\n\n~~~kotlin\neditor.putInt(\"Integer\", 1)// 存储整型数据\neditor.putLong(\"Long\", 1L)// 存储长整型数据\neditor.putFloat(\"Float\", 1.0f)// 存储浮点型数据\neditor.putBoolean(\"Boolean\", true)// 存储布尔型数据\neditor.putString(\"username\", \"admin\")// 存储字符串数据\nval setData: Set<String> = setOf(\"one\", \"two\", \"three\")\neditor.putStringSet(\"StringSet\", setData)// 存储字符串集合数据\n\neditor.apply() // 提交数据\n~~~\n\n\n* **​键（Key）​​：** 是一个字符串，作为数据的唯一标识符，比如 \"user_nickname\"。之后要靠这个键来读取数据。\n* **​值（Value）​​：** 你要存储的具体数据。\n* apply()vs commit()​​：\n    * apply()：​**​强烈推荐使用**​​。它是异步的，立即返回，不会阻塞你的用户界面（UI），性能更好\n    * commit()​​：是同步的，会等待数据完全写入磁盘后才返回。如果在主线程频繁使用，可能会引起应用无响应（ANR），通常只在需要立即知道写入是否成功的特殊场景下使用\n\n步骤2和步骤3可以合并为：\n~~~kotlin\nsharedPref.edit(){\n    putInt(\"Integer\", 1)// 存储整型数据\n    putLong(\"Long\", 1L)// 存储长整型数据\n    putFloat(\"Float\", 1.0f)// 存储浮点型数据\n    putBoolean(\"Boolean\", true)// 存储布尔型数据\n    putString(\"username\", \"admin\")// 存储字符串数据\n    val setData: Set<String> = setOf(\"one\", \"two\", \"three\")\n    putStringSet(\"StringSet\", setData)// 存储字符串集合数据\n}\n~~~\n\n#### 读取数据\n1. 创建SharedPreferences对象\n\n~~~kotlin\nval sharedPref = getSharedPreferences(\"user_preferences\", Context.MODE_PRIVATE)\n~~~\n\n2. 获取数据\n\n~~~kotlin\nval username = sharedPref.getString(\"username\", \"\")\nval age = sharedPref.getInt(\"age\", 0)\nval setData = sharedPref.getStringSet(\"StringSet\", null)\nval male = sharedPref.getBoolean(\"male\", true)\n~~~\n* **参数1 \"username\"​​：** 键，用于获取数据。\n* **参数2 \"\"：** 默认值，如果获取的数据不存在，则返回这个默认值。\n\n3. 更新ui\n\n#### 删除数据\n\n1. 创建SharedPreferences对象\n\n~~~kotlin\nval sharedPref = getSharedPreferences(\"user_preferences\", Context.MODE_PRIVATE)\n~~~\n\n2. 创建edit对象\n\n~~~kotlin\nval editor = sharedPref.edit()\n~~~\n\n3. 删除数据\n\n~~~kotlin\n// 删除单个数据\neditor.remove(\"username\")\n// 删除所有数据\neditor.clear()\n\neditor.apply()\n~~~\n\n步骤2和步骤3可以合并为：\n~~~kotlin\nsharedPref.edit(){\n    remove(\"username\")\n    clear()\n}\n\n~~~\n#### 完整代码实践\n\n~~~kotlin\npackage com.kei.datebaseandnetwork\n\nimport android.content.Context\nimport android.os.Bundle\nimport android.util.Log\nimport android.widget.Toast\nimport androidx.activity.ComponentActivity\nimport androidx.activity.enableEdgeToEdge\nimport androidx.appcompat.app.AppCompatActivity\nimport androidx.core.content.edit\nimport androidx.core.view.ViewCompat\nimport androidx.core.view.WindowInsetsCompat\nimport com.kei.datebaseandnetwork.databinding.ActivitySharedPrefBinding\n\nclass ActivitySharedPref : ComponentActivity() {\n    /**\n     * SharedPreferences文件名常量\n     */\n    private val prefsName = \"kei_prefs\"\n\n    /**\n     * 视图绑定对象\n     */\n    private lateinit var binding: ActivitySharedPrefBinding\n\n    /**\n     * 日志标签常量\n     */\n    private val TAG = \"SharedPrefActivity\"\n\n    /**\n     * Activity创建时的回调方法\n     *\n     * @param savedInstanceState 保存的实例状态Bundle对象，用于恢复之前保存的状态数据\n     */\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        // 初始化视图绑定并设置布局\n        binding = ActivitySharedPrefBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        // 为按钮设置点击事件监听器\n        binding.submit.setOnClickListener { saveData() }\n        binding.read.setOnClickListener { readData() }\n        binding.clear.setOnClickListener { clearData() }\n    }\n\n    /**\n     * 保存用户输入的数据到SharedPreferences中\n     * 该函数从界面输入框获取用户名、年龄、邮箱和配置信息，验证数据完整性后进行加密存储\n     *\n     * 无参数\n     * 无返回值\n     */\n    private fun saveData(){\n        // 获取用户输入的各个字段数据\n        val username = binding.inputName.text.toString()\n        val age = binding.inputAge.text.toString()\n        val email = binding.inputEmail.text.toString()\n        val config = binding.inputConfig.text.toString()\n\n        // 验证所有字段都不为空\n        if(username.isNotEmpty() && age.isNotEmpty() && email.isNotEmpty() && config.isNotEmpty()){\n            val prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)\n            // edit() 方法自带commit()方法\n            prefs.edit(){\n                putString(\"username\", username)\n                putInt(\"age\", age.toInt())\n                putString(\"email\", email)\n                // 处理配置信息，按分号分割并加密存储\n                val configs = config.split(\";\")\n                val setValue : MutableSet<String> = mutableSetOf()\n                configs.forEach {\n                    val value = SimpleEncryptor(TAG).encrypt(it)\n                    setValue.add(value)\n                }\n                Log.i(TAG, \"encryptor user config:value = $setValue\")\n                putStringSet(\"configs\", setValue)\n            }\n            binding.result.text = \"数据保存成功\"\n        }else{\n            Toast.makeText(this, \"信息输入错误\", Toast.LENGTH_SHORT).show()\n        }\n    }\n\n    /**\n     * 读取用户数据并显示在界面中\n     *\n     * 该函数从SharedPreferences中读取用户的个人信息和配置信息，\n     * 对加密的配置信息进行解密处理，最后将所有信息格式化显示在界面上。\n     *\n     * 注意：该函数不接收参数，无返回值\n     */\n    private fun readData() {\n        // 从SharedPreferences中读取用户基本信息\n        val prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)\n        val username = prefs.getString(\"username\", \"\")\n        val age = prefs.getInt(\"age\", 0)\n        val email = prefs.getString(\"email\", \"\")\n        val configs = prefs.getStringSet(\"configs\", null)\n\n        // 解密配置信息\n        val userConfig: MutableList<String> = mutableListOf()\n        configs?.forEach {\n            val decryptValue = SimpleEncryptor(TAG).decrypt(it)\n            Log.i(TAG, \"decrypt value, before = $it, after = $decryptValue\")\n            userConfig.add(decryptValue)\n        }\n\n        // 将用户信息显示在界面中\n        binding.result.text = \"用户名：$username\\n年龄：$age\\n邮箱：$email\\n配置信息：${userConfig.joinToString(\", \")}\"\n    }\n\n    private fun clearData(){\n        val prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)\n        prefs.edit(){\n            clear()\n        }\n        binding.result.text = \"数据已清空\"\n    }\n\n\n\n    class SimpleEncryptor(tag: String) {\n        fun encrypt(input: String): String {\n            // 示例简单加密：反转字符串（仅作演示）\n            return input.reversed()\n        }\n\n        fun decrypt(input: String): String {\n            // 示例简单解密：反转字符串（仅作演示）\n            return input.reversed()\n        }\n    }\n}\n~~~\n\n### SQLite数据库\n\n[回到目录](#目录)\n\nSQLite是一种基于文件的关系型数据库，用于存储和检索数据。具有**轻量级、独立性、跨平台、事务性**的特点\n\n#### SQLite数据库操作\n\n| 操作 | 方法          | 参数说明                                                                                                                                                                          | 返回值                         |\n| ---- | ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ |\n| 插入 | long insert() | @NotNull String table: 要插入数据的表名 <br> @Nullable String nullColumnHack: 插入数据时忽略的列名 <br> @Nullable ContentValues values: 要插入的数据                              | 新插入记录的行号，失败时返回-1 |\n| 更新 | int update()  | @NotNull String table: 要更新的表名 <br> @Nullable ContentValues values: 要更新的数据 <br> @Nullable String whereClause: 更新条件 <br> @Nullable String[] whereArgs: 更新条件参数 | 更新记录的行数                 |\n| 删除 | int delete()  | @NotNull String table: 要删除数据的表名 <br> @Nullable String whereClause: 删除条件 <br> @Nullable String[] whereArgs: 删除条件参数                                               | 删除记录的行数                 |\n\n\n\n#### SQLite使用步骤\n以实现简单的笔记管理功能为例，介绍SQLite数据库操作\n\n1. 定义数据模型 在app/src/main/java/你的包名/目录下创建 **Note.kt**\n\n~~~kotlin\ndata class Note(\n    val id: Long? = null, // 主键\n    val title: String, // 标题\n    val content: String, // 内容\n    val createTime: Long = System.currentTimeMillis() // 创建时间\n)\n~~~\n\n2. 创建数据库帮助类 在相同的目录下创建 **NoteDatabaseHelper.kt** 这是最关键的一步。我们需要创建一个继承自SQLiteOpenHelper的类，它负责**数据库的创建**和**版本管理**\n\n~~~kotlin\nclass NoteDbHelper(context: Context) : SQLiteOpenHelper(\n    context,\n    DATABASE_NAME,\n    null,\n    DATABASE_VERSION\n){\n    // 定义数据库结构信息\n    companion object {\n        const val DATABASE_NAME = \"notes.db\" // 数据库名称\n        const val DATABASE_VERSION = 1 // 数据库版本\n        const val TABLE_NAME = \"notes\" // 表名\n        const val COLUMN_ID = \"_id\" // 推荐使用 _id 作为主键列名\n        const val COLUMN_TITLE = \"title\" // 标题列名\n        const val COLUMN_CONTENT = \"content\" // 内容列名\n        const val COLUMN_CREATE_TIME = \"create_time\" // 创建时间列名\n    }\n\n    // 当数据库第一次被创建时调用，用于建表\n    override fun onCreate(db: SQLiteDatabase?) {\n        val createTableQuery = \"\"\"\n            CREATE TABLE $TABLE_NAME (\n                $COLUMN_ID INTEGER PRIMARY KEY AUTOINCREMENT,\n                $COLUMN_TITLE TEXT NOT NULL,\n                $COLUMN_CONTENT TEXT,\n                $COLUMN_CREATE_TIME INTEGER\n            )\n        \"\"\".trimIndent()\n        db?.execSQL(createTableQuery)\n    }\n\n    // 当数据库需要升级时调用（例如版本号增加）\n    override fun onUpgrade(db: SQLiteDatabase?, oldVersion: Int, newVersion: Int) {\n        db?.execSQL(\"DROP TABLE IF EXISTS $TABLE_NAME\")\n        onCreate(db)\n    }\n\n    // 插入一条新笔记\n    fun addNote(title: String, content: String): Long {\n        val db = writableDatabase\n        val values = ContentValues().apply {\n            put(COLUMN_TITLE, title)\n            put(COLUMN_CONTENT, content)\n            put(COLUMN_CREATE_TIME, System.currentTimeMillis())\n        }\n        // 插入操作，返回新行的ID，如果失败返回-1\n        return db.insert(TABLE_NAME, null, values)\n    }\n\n    // 获取所有笔记，按创建时间倒序排列\n    fun getAllNotes(): List<Note> {\n        val notes = mutableListOf<Note>()\n        val db = readableDatabase\n        // 查询语句，? 是占位符\n        val cursor = db.query(\n            TABLE_NAME,\n            null, // 选择所有列\n            null, // WHERE 子句\n            null, // WHERE 子句的参数\n            null, // GROUP BY\n            null, // HAVING\n            \"$COLUMN_CREATE_TIME DESC\" // ORDER BY 按时间降序\n        )\n\n        cursor.use {\n            // 遍历游标（Cursor），提取数据\n            while (it.moveToNext()) {\n                val id = it.getLong(it.getColumnIndexOrThrow(COLUMN_ID))\n                val title = it.getString(it.getColumnIndexOrThrow(COLUMN_TITLE))\n                val content = it.getString(it.getColumnIndexOrThrow(COLUMN_CONTENT))\n                val createTime = it.getLong(it.getColumnIndexOrThrow(COLUMN_CREATE_TIME))\n                notes.add(Note(id, title, content, createTime))\n            }\n        }\n        return notes\n    }\n\n    // 更新一条笔记\n    fun updateNote(note: Note): Int {\n        val db = writableDatabase\n        val values = ContentValues().apply {\n            put(COLUMN_TITLE, note.title)\n            put(COLUMN_CONTENT, note.content)\n        }\n        // 更新操作，返回受影响的行数\n        return db.update(\n            TABLE_NAME,\n            values,\n            \"$COLUMN_ID = ?\", // 通过ID定位要更新的笔记\n            arrayOf(note.id.toString())\n        )\n    }\n\n    // 根据ID删除一条笔记\n    fun deleteNoteById(id: Long): Int {\n        val db = writableDatabase\n        // 删除操作，返回被删除的行数\n        return db.delete(\n            TABLE_NAME,\n            \"$COLUMN_ID = ?\",\n            arrayOf(id.toString())\n        )\n    }\n}\n~~~\n\n3. 使用数据库帮助类 在app/src/main/java/你的包名/目录下创建 **NoteActivity.kt** 实例化NoteDbHelper，并调用其方法进行增删改查\n\n~~~kotlin\n\nclass NoteActivity : AppCompatActivity() {\n    \n    // 实例化数据库帮助类\n    private lateinit var dbHelper: NoteDbHelper\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_note)\n\n        // 初始化数据库帮助类\n        dbHelper = NoteDbHelper(this)\n\n        // 1. 插入一条新笔记\n        val newNoteId = dbHelper.addNote(\"我的第一篇笔记\", \"这是使用SQLite存储的内容！\")\n        Log.d(\"SQLiteDemo\", \"新笔记ID: $newNoteId\")\n\n        // 2. 查询所有笔记\n        val allNotes = dbHelper.getAllNotes()\n        for (note in allNotes) {\n            Log.d(\"SQLiteDemo\", \"笔记: [ID:${note.id}] ${note.title} - ${note.content}\")\n        }\n\n        // 假设我们要更新刚插入的笔记 (需要知道其ID)\n        if (newNoteId != -1L) {\n            val noteToUpdate = Note(newNoteId, \"修改后的标题\", \"更新后的内容\")\n            val rowsUpdated = dbHelper.updateNote(noteToUpdate)\n            Log.d(\"SQLiteDemo\", \"更新了 $rowsUpdated 行\")\n        }\n\n        // 删除笔记的示例（谨慎操作）\n        // val rowsDeleted = dbHelper.deleteNoteById(newNoteId)\n        // Log.d(\"SQLiteDemo\", \"删除了 $rowsDeleted 行\")\n    }\n\n    override fun onDestroy() {\n        dbHelper.close() // 记得在不用时关闭数据库连接\n        super.onDestroy()\n    }\n}\n~~~\n\n\n\n* 在实际开发中，可以通过各种事件监听来实现对数据库的操作，如点击按钮、输入框等。\n* 在实际开发中，通常使用**Room数据库框架**来操作数据库，Room是一个基于SQLite的ORM框架，可以更轻松地操作数据库。\n\n\n### 文件存储\n\n[回到目录](#目录)\n\nAndroid系统提供了两种主要的文件存储方式\n**​内部存储**​​是每个应用独有的沙盒环境，位于/data/data/<应用包名>/目录下，为应用数据提供了最高级别的保护\n​**​外部存储**​​可能是SD卡或设备的内置共享存储空间，适合存储需要共享或体积较大的文件\n\n#### 内部存储\n\n创建一个 FileStorageActivity.kt 文件用于演示文件操作，并添加以下代码：\n\n* 文件写入操作\n\n~~~kotlin\nclass FileStorageActivity : AppCompatActivity() {\n    \n    // 写入文件\n    private fun writeToInternalStorage(filename: String, content: String) {\n        try {\n            // 打开文件输出流\n            val outputStream: FileOutputStream = openFileOutput(filename, Context.MODE_PRIVATE)\n            \n            // 将字符串转换为字节并写入\n            outputStream.write(content.toByteArray())\n            \n            // 关闭流释放资源\n            outputStream.close()\n            \n            Log.d(\"FileIO\", \"文件写入成功: $filename\")\n        } catch (e: Exception) {\n            Log.e(\"FileIO\", \"文件写入失败\", e)\n            e.printStackTrace()\n        }\n    }\n    \n    // 使用示例\n    private fun saveUserData() {\n        val userData = \"\"\"\n            {\n                \"name\": \"张三\",\n                \"email\": \"zhangsan@example.com\",\n                \"preferences\": {\"theme\": \"dark\"}\n            }\n        \"\"\".trimIndent()\n        \n        writeToInternalStorage(\"user_config.json\", userData)\n    }\n}\n~~~\n\n​代码说明：​​\n\n  * openFileOutput()是Context类的方法，第一个参数是**文件名**，第二个参数是**操作模式**\n  * MODE_PRIVATE表示**覆盖**原文件，MODE_APPEND表示**追加**内容\n  * 必须使用try-catch处理可能的IOException\n  * 操作完成后务必**关闭**流释放资源\n\n\n* 文件读取操作\n\n~~~kotlin\n// 仍然在FileStorageActivity.kt中的FileStorageActivity类中添加以下方法\n\nprivate fun readFromInternalStorage(filename: String): String {\n    return try {\n        // 打开文件输入流\n        val inputStream: FileInputStream = openFileInput(filename)\n        \n        // 使用缓冲读取器提高读取效率\n        val reader = BufferedReader(InputStreamReader(inputStream))\n        val content = StringBuilder()\n        var line: String?\n        \n        // 逐行读取内容\n        while (reader.readLine().also { line = it } != null) {\n            content.append(line).append(\"\\n\")\n        }\n        \n        // 关闭资源\n        reader.close()\n        inputStream.close()\n        \n        // 返回读取的内容\n        content.toString()\n    } catch (e: FileNotFoundException) {\n        Log.e(\"FileIO\", \"文件不存在: $filename\", e)\n        \"\" // 返回空字符串表示文件不存在\n    } catch (e: Exception) {\n        Log.e(\"FileIO\", \"文件读取失败\", e)\n        \"\"\n    }\n}\n\n// 使用示例\nprivate fun loadUserConfig() {\n    val config = readFromInternalStorage(\"user_config.json\")\n    if (config.isNotEmpty()) {\n        // 处理配置数据\n        Log.d(\"FileIO\", \"加载的配置: $config\")\n    }\n}\n~~~\n​代码说明：​​\n\n  * 使用BufferedReader和InputStreamReader组合提高读取效率\n  * 逐行读取适合文本文件，避免内存溢出\n  * 需要处理文件不存在的特殊情况\n\n#### 序列化存储\n\n| 方案 | 使用场景 | 优缺点 |\n| --- | --- | --- |\n| `Serializable` | 将简单的对象持久化存储 | 优点：实现简单；<br>缺点：效率低，不适合跨进程高频传输 |\n| `Parcelable` | 跨进程通信使用（如Intent、AIDL等） | 优点：效率高，Android专用；<br>缺点：实现较为复杂 |\n| `JSON` | 网络传输，将复杂对象信息存储到文件 | 优点：跨平台，可读性好，兼容性强；<br>缺点：体积大 |\n\n### ContentProvider\n\n[回到目录](#目录)\n\nContentProvider是Android四大组件之一，它充当了一个​​标准化的**数据安全中间层**​​，允许你的应用将私有数据安全地**共享**给其他应用，或者去访问系统（如联系人、相册）或其他应用提供的数据它抽象了数据的底层存储细节（无论是SQLite数据库、文件还是网络数据），为所有数据访问提供了**统一的接口**\n\n#### 工作原理\n\n* **​ContentProvider（内容提供者）​​：** 数据提供方，负责封装对数据的增删改查等操作。你需要继承ContentProvider类并实现其核心方法\n* **​ContentResolver（内容解析器）​​：** 数据访问方。在任何需要访问数据的地方（如Activity），你通过ContentResolver（通过getContentResolver()获取）来调用统一的方法（query, insert, update, delete），由它去找到并调用正确的ContentProvider\n。这实现了数据访问方式的统一\n* **​URI（统一资源标识符）​​：** 这是数据的“地址”，用于唯一标识ContentProvider和其中的数据。它遵循标准格式：content://authority/path/id\n\n    * **content://：** 固定前缀，表示该URI用于ContentProvider\n    * **authority：** 授权标识，通常为应用的包名加上特定标识，用于在系统中唯一指定一个ContentProvider\n    * **path：** 路径，通常用于指定要操作的数据表（如users）\n    * **id（可选）：** 特定记录的ID（如/users/5表示ID为5的用户）\n\n#### ContentProvider的使用\n\n1. ​创建数据库契约类​​（定义数据库结构常量）：文件位置​​：app/src/main/java/com/example/yourAppName/目录下，新建Kotlin文件，例如NoteContract.kt 集中定义**数据库名、表名、列名**等常量，避免硬编码和拼写错误。\n\n~~~kotlin\n// NoteContract.kt\nobject NoteContract {\n    // ContentProvider的授权标识，通常使用应用包名\n    const val AUTHORITY = \"com.example.notepad.provider\"\n\n    // 定义Note数据表的模型\n    object NoteEntry {\n        const val TABLE_NAME = \"notes\"\n        // 必须包含 _id 列，这是Adapter等组件所期望的\n        const val _ID = \"_id\"\n        const val COLUMN_TITLE = \"title\"\n        const val COLUMN_CONTENT = \"content\"\n        const val COLUMN_CREATED_TIME = \"created_time\"\n    }\n}\n~~~\n\n2. ​创建数据库帮助类​​（SQLiteOpenHelper）：在同目录下新建Kotlin文件，例如NoteDatabaseHelper.kt 管理数据库的**创建和版本升级**\n\n~~~kotlin\n// NoteDatabaseHelper.kt\nimport android.content.Context\nimport android.database.sqlite.SQLiteDatabase\nimport android.database.sqlite.SQLiteOpenHelper\n\nclass NoteDatabaseHelper(context: Context) : SQLiteOpenHelper(\n    context,\n    DATABASE_NAME,\n    null,\n    DATABASE_VERSION\n) {\n    companion object {\n        const val DATABASE_NAME = \"notes.db\"\n        const val DATABASE_VERSION = 1\n    }\n\n    override fun onCreate(db: SQLiteDatabase) {\n        // 执行创建表的SQL语句\n        val SQL_CREATE_NOTES_TABLE = \"\"\"\n            CREATE TABLE ${NoteContract.NoteEntry.TABLE_NAME} (\n                ${NoteContract.NoteEntry._ID} INTEGER PRIMARY KEY AUTOINCREMENT,\n                ${NoteContract.NoteEntry.COLUMN_TITLE} TEXT NOT NULL,\n                ${NoteContract.NoteEntry.COLUMN_CONTENT} TEXT,\n                ${NoteContract.NoteEntry.COLUMN_CREATED_TIME} INTEGER DEFAULT (strftime('%s','now'))\n            )\n        \"\"\".trimIndent()\n        db.execSQL(SQL_CREATE_NOTES_TABLE)\n    }\n\n    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n        // 简单处理：删除旧表，创建新表。实际项目需做数据迁移。\n        db.execSQL(\"DROP TABLE IF EXISTS ${NoteContract.NoteEntry.TABLE_NAME}\")\n        onCreate(db)\n    }\n}\n~~~\n\n3. 实现自定义ContentProvider：在同目录下新建Kotlin文件，例如NoteProvider.kt 这是**最核心**的一步，我们需要创建一个类继承ContentProvider，并实现其**六个核心方法**\n\n~~~kotlin\n// NoteProvider.kt\nimport android.content.*\nimport android.database.Cursor\nimport android.net.Uri\n\nclass NoteProvider : ContentProvider() {\n    private lateinit var dbHelper: NoteDatabaseHelper\n\n    // UriMatcher用于匹配不同的URI请求\n    private val uriMatcher = UriMatcher(UriMatcher.NO_MATCH).apply {\n        // 注册URI模式\n        // content://com.example.notepad.provider/notes -> 操作整个notes表\n        addURI(NoteContract.AUTHORITY, \"notes\", NOTES)\n        // content://com.example.notepad.provider/notes/5 -> 操作ID为5的单条笔记\n        addURI(NoteContract.AUTHORITY, \"notes/#\", NOTE_ID)\n    }\n\n    companion object {\n        // 定义匹配码\n        private const val NOTES = 1\n        private const val NOTE_ID = 2\n    }\n\n    override fun onCreate(): Boolean {\n        // 初始化数据库帮助类\n        dbHelper = NoteDatabaseHelper(context!!)\n        return true // 返回true表示Provider初始化成功\n    }\n\n    // 查询数据\n    override fun query(\n        uri: Uri,\n        projection: Array<out String>?,\n        selection: String?,\n        selectionArgs: Array<out String>?,\n        sortOrder: String?\n    ): Cursor? {\n        val db = dbHelper.readableDatabase\n        return when (uriMatcher.match(uri)) {\n            NOTES -> {\n                // 查询所有笔记\n                db.query(\n                    NoteContract.NoteEntry.TABLE_NAME,\n                    projection,\n                    selection,\n                    selectionArgs,\n                    null,\n                    null,\n                    sortOrder ?: \"${NoteContract.NoteEntry.COLUMN_CREATED_TIME} DESC\"\n                )\n            }\n            NOTE_ID -> {\n                // 查询单条笔记，从URI中提取ID\n                val id = uri.lastPathSegment\n                db.query(\n                    NoteContract.NoteEntry.TABLE_NAME,\n                    projection,\n                    \"${NoteContract.NoteEntry._ID} = ?\",\n                    arrayOf(id),\n                    null,\n                    null,\n                    sortOrder\n                )\n            }\n            else -> throw IllegalArgumentException(\"Unknown URI: $uri\")\n        }.apply {\n            // 设置通知URI，当该URI对应的数据变化时，Cursor会知道\n            setNotificationUri(context?.contentResolver, uri)\n        }\n    }\n\n    // 插入数据\n    override fun insert(uri: Uri, values: ContentValues?): Uri? {\n        val db = dbHelper.writableDatabase\n        return when (uriMatcher.match(uri)) {\n            NOTES -> {\n                val id = db.insert(NoteContract.NoteEntry.TABLE_NAME, null, values)\n                if (id > 0) {\n                    // 插入成功，构造新插入数据的URI\n                    val newUri = ContentUris.withAppendedId(uri, id)\n                    // 通知所有监听此URI的数据观察者，数据已变更\n                    context?.contentResolver?.notifyChange(newUri, null)\n                    newUri\n                } else {\n                    throw SQLException(\"Failed to insert row into $uri\")\n                }\n            }\n            else -> throw IllegalArgumentException(\"Insertion not supported for $uri\")\n        }\n    }\n\n    // 更新数据\n    override fun update(\n        uri: Uri,\n        values: ContentValues?,\n        selection: String?,\n        selectionArgs: Array<out String>?\n    ): Int {\n        val db = dbHelper.writableDatabase\n        val count = when (uriMatcher.match(uri)) {\n            NOTES -> db.update(NoteContract.NoteEntry.TABLE_NAME, values, selection, selectionArgs)\n            NOTE_ID -> {\n                val id = uri.lastPathSegment\n                db.update(\n                    NoteContract.NoteEntry.TABLE_NAME,\n                    values,\n                    \"${NoteContract.NoteEntry._ID} = ?\",\n                    arrayOf(id)\n                )\n            }\n            else -> throw IllegalArgumentException(\"Update not supported for $uri\")\n        }\n        // 如果更新了数据，通知变化\n        if (count > 0) {\n            context?.contentResolver?.notifyChange(uri, null)\n        }\n        return count\n    }\n\n    // 删除数据\n    override fun delete(uri: Uri, selection: String?, selectionArgs: Array<out String>?): Int {\n        val db = dbHelper.writableDatabase\n        val count = when (uriMatcher.match(uri)) {\n            NOTES -> db.delete(NoteContract.NoteEntry.TABLE_NAME, selection, selectionArgs)\n            NOTE_ID -> {\n                val id = uri.lastPathSegment\n                db.delete(\n                    NoteContract.NoteEntry.TABLE_NAME,\n                    \"${NoteContract.NoteEntry._ID} = ?\",\n                    arrayOf(id)\n                )\n            }\n            else -> throw IllegalArgumentException(\"Deletion not supported for $uri\")\n        }\n        if (count > 0) {\n            context?.contentResolver?.notifyChange(uri, null)\n        }\n        return count\n    }\n\n    // 返回指定URI的MIME类型\n    override fun getType(uri: Uri): String? {\n        return when (uriMatcher.match(uri)) {\n            NOTES -> \"vnd.android.cursor.dir/vnd.${NoteContract.AUTHORITY}.note\"\n            NOTE_ID -> \"vnd.android.cursor.item/vnd.${NoteContract.AUTHORITY}.note\"\n            else -> throw IllegalArgumentException(\"Unknown URI: $uri\")\n        }\n    }\n}\n~~~\n\n4. 在AndroidManifest.xml中注册Provider：app/src/main/AndroidManifest.xml\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.example.notepad\">\n\n    <application ...>\n        <activity ...> ... </activity>\n\n        <!-- 注册ContentProvider -->\n        <provider\n            android:name=\".NoteProvider\"\n            android:authorities=\"com.example.notepad.provider\"\n            android:exported=\"true\" />\n            <!-- \n                android:name: 你的ContentProvider类的完整路径。\n                android:authorities: 授权标识，必须与代码中定义的AUTHORITY完全一致。\n                android:exported: 是否允许其他应用访问。true表示允许。\n            -->\n\n    </application>\n</manifest>\n~~~\n\n5. 在应用内或其他应用中通过ContentResolver访问数据（在Activity中）：\n\n~~~kotlin\n// 例如在您的 MainActivity.kt 中\nclass MainActivity : AppCompatActivity() {\n    // 定义基础URI\n    private val baseUri = Uri.parse(\"content://${NoteContract.AUTHORITY}/notes\")\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // 示例1：插入一条新笔记\n        val values = ContentValues().apply {\n            put(NoteContract.NoteEntry.COLUMN_TITLE, \"我的第一条笔记\")\n            put(NoteContract.NoteEntry.COLUMN_CONTENT, \"这是通过ContentProvider保存的内容。\")\n        }\n        val newUri = contentResolver.insert(baseUri, values)\n        Log.d(\"NoteApp\", \"新笔记插入成功，URI: $newUri\")\n\n        // 示例2：查询所有笔记\n        val cursor = contentResolver.query(baseUri, null, null, null, null)\n        cursor?.use {\n            while (it.moveToNext()) {\n                val id = it.getLong(it.getColumnIndexOrThrow(NoteContract.NoteEntry._ID))\n                val title = it.getString(it.getColumnIndexOrThrow(NoteContract.NoteEntry.COLUMN_TITLE))\n                val content = it.getString(it.getColumnIndexOrThrow(NoteContract.NoteEntry.COLUMN_CONTENT))\n                Log.d(\"NoteApp\", \"ID: $id, Title: $title, Content: $content\")\n            }\n        }\n    }\n}\n~~~\n\n## 异步交互\n\n### handler\n\n#### 核心组件和职责\n\n| 组件 | 职责 | 类比 |\n| --- | --- | --- |\n| Handler | **​​发送​​** 和 **​​处理​​** 消息| 公司的**​​快递员**​​，既负责把包裹寄出，也负责接收并处理送来的包裹。|\n| Message | 消息的载体，可以在线程间传递数据 | ​**​包裹**​​，里面装着要传递的信息或任务|\n| MessageQueue | 一个按时间排序的​**​消息队列**​​，用于存储所有通过 Handler 发送的消息 | ​**​快递分拣中心**​​，所有寄出的包裹都暂时存放在这里，排队等待发货 |\n| Looper | 运行 MessageQueue 的线程，不断循环，从 MessageQueue 中依次取出消息，并分发给对应的 Handler 处理 | **分拣员/送货员**​​，不停地从分拣中心取包裹，并按照地址交给对应的快递员 |\n\n一个线程通常只有一个 MessageQueue和一个 Looper，但可以有多个 Handler对象\n\n#### 使用步骤\n\n##### 使用 sendMessage\n\n在 Activity 或 Fragment 中（通常在主线程），创建 Handler 并指定如何处理消息。\n\n* 步骤1：创建Handler对象，关联主线程Looper对象，并重写handleMessage方法\n* 步骤2：重写handleMessage方法，处理消息\n* 步骤3：创建线程模拟耗时操作\n* 步骤4：构造消息对象发送到主线程\n\n完整类实现\n\n~~~kotlin\npackage com.kei.handlerdemo\n\nimport android.os.Bundle\nimport android.os.Handler\nimport android.os.Looper\nimport android.os.Message\nimport android.widget.TextView\nimport androidx.activity.ComponentActivity\n\n/**\n * 发送消息Activity\n * 用于演示如何在子线程中执行耗时操作，并通过Handler将结果传递到主线程更新UI\n */\nclass SendMessageActivity : ComponentActivity() {\n\n    private lateinit var textView: TextView\n\n    /**\n     * 主线程Handler，用于处理来自子线程的消息\n     * 使用Looper.getMainLooper()确保Handler在主线程中处理消息\n     * Looper能够自动处理到达的消息，并调用handleMessage方法进行处理\n     */\n    // 步骤1： 创建Handler对象，关联主线程Looper对象，并重写handleMessage方法\n    private val mainHandler = object : Handler(Looper.getMainLooper()){\n        /**\n         * 处理从子线程发送过来的消息\n         * @param msg 从子线程发送过来的消息对象\n         */\n        override fun handleMessage(msg: Message){\n            // 步骤2：在这里处理消息，此方法运行在主线程，可以安全更新ui\n            // 根据消息类型处理不同的业务逻辑\n            when (msg.what){\n                1 -> {\n                    // 从msg.obj中获取数据\n                    // 更新textView显示加载结果\n                    textView.text = msg.obj as String\n                }\n                2 -> {\n                    // 也可以使用arg1，arg2等传递简单整型数据\n                    // 处理进度信息（当前未使用）\n                    val progress = msg.arg1\n                    // 例如处理更新进度条\n                }\n            }\n        }\n    }\n\n    /**\n     * Activity创建时的回调方法\n     * @param savedInstanceState 用于恢复Activity状态的Bundle对象\n     */\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_send_message)\n        \n        // 初始化textView控件\n        textView = findViewById(R.id.textView)\n\n        // 创建并启动一个子线程来模拟耗时操作\n        Thread{\n            // 步骤3：模拟耗时操作，睡眠2秒\n            Thread.sleep(2000)\n            val result = \"数据加载完成\"\n\n            // 步骤4：构造消息对象并发送到主线程\n            val message = mainHandler.obtainMessage() // 使用obtainMessage() 复用消息对象\n            message.what = 1 // 消息标识\n            message.obj = result // 消息内容\n            mainHandler.sendMessage(message) // 发送消息\n        }.start()\n    }\n}\n~~~\n\n##### 使用 post\n\n* 步骤1: 创建Handler对象（关联主线程Looper）\n* 步骤2: 在子线程中执行耗时操作\n* 步骤3：使用post()方法，将UI更新操作直接投递到主线程执行\n\n完整类实现\n\n~~~kotlin\npackage com.kei.handlerdemo\n\nimport android.os.Bundle\nimport android.os.Handler\nimport android.os.Looper\nimport android.widget.TextView\nimport androidx.activity.ComponentActivity\n\n/**\n * PostActivity类用于演示Handler的post和postDelayed方法的使用\n * 通过子线程执行耗时操作后，使用Handler.post()方法将UI更新操作切换到主线程执行\n */\nclass PostActivity: ComponentActivity() {\n\n    private lateinit var textView: TextView\n\n    /**\n     * 主线程Handler，用于将Runnable切换到主线程执行\n     * 使用Looper.getMainLooper()确保Handler在主线程中处理消息\n     */\n    private val mainHandler = Handler(Looper.getMainLooper())\n\n    /**\n     * Activity创建时的回调方法\n     * @param savedInstanceState 用于恢复Activity状态的Bundle对象\n     */\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        setContentView(R.layout.activity_post)\n\n        textView = findViewById(R.id.tv_post)\n\n        // 创建并启动一个子线程来模拟耗时操作\n        Thread{\n            // 模拟耗时操作，睡眠2秒\n            Thread.sleep(2000)\n            val result = \"数据加载完成\"\n\n            // 使用Handler.post()将UI更新操作切换到主线程执行\n            mainHandler.post {\n                textView.text = result\n            }\n        }.start()\n    }\n\n    /**\n     * 延迟任务方法，使用Handler.postDelayed()延迟执行UI更新操作\n     * 在指定延迟时间后将Runnable切换到主线程执行\n     */\n    private fun delayTask(){\n        mainHandler.postDelayed({\n            textView.text = \"延迟2秒执行\"\n        }, 2000)\n    }\n}\n~~~\n\n##### 安全的最佳实践\n\n* 将 Handler 定义为静态内部类，并不再持有外部类的强引用\n* 使用 WeakReference 弱引用 Activity\n* 在处理消息前，先判断 Activity 是否还存在\n* 在 Activity 销毁时，移除所有未处理的消息和回调\n\n完整类实现\n\n~~~kotlin\npackage com.kei.handlerdemo\n\nimport android.os.Bundle\nimport android.os.Handler\nimport android.os.Looper\nimport android.os.Message\nimport android.widget.TextView\nimport androidx.appcompat.app.AppCompatActivity\nimport java.lang.ref.WeakReference\n\nclass SafeHandlerActivity : AppCompatActivity() {\n    private lateinit var textView: TextView\n    private lateinit var safeHandler: SafeHandler // 使用安全的 Handler\n\n    // 1. 将 Handler 定义为静态内部类，并不再持有外部类的强引用\n    class SafeHandler(activity: SafeHandlerActivity) : Handler(Looper.getMainLooper()) {\n        // 2. 使用 WeakReference 弱引用 Activity\n        private val activityWeakReference: WeakReference<SafeHandlerActivity> = WeakReference(activity)\n\n        override fun handleMessage(msg: Message) {\n            // 3. 在处理消息前，先判断 Activity 是否还存在\n            val activity = activityWeakReference.get()\n            if (activity != null) { // 如果 Activity 没被回收\n                // 安全地更新 UI\n                when (msg.what) {\n                    MSG_UPDATE_TEXT -> {\n                        activity.textView.text = msg.obj as? String\n                    }\n                    // 处理其他类型的消息...\n                }\n            }\n            // 如果 Activity 为 null（已被回收），则不执行任何操作\n        }\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_safe_handler)\n        textView = findViewById(R.id.tv_safe_handler)\n\n        // 初始化安全的 Handler\n        safeHandler = SafeHandler(this)\n\n        // 在子线程中工作\n        Thread {\n            // 模拟耗时任务\n            Thread.sleep(1500)\n            val result = \"数据加载完毕！\"\n\n            // 创建并发送消息\n            val message = safeHandler.obtainMessage().apply {\n                what = MSG_UPDATE_TEXT\n                obj = result\n            }\n            safeHandler.sendMessage(message)\n        }.start()\n    }\n\n    // 4. 在 Activity 销毁时，移除所有未处理的消息和回调\n    override fun onDestroy() {\n        super.onDestroy()\n        safeHandler.removeCallbacksAndMessages(null) // 参数为 null 表示移除所有\n    }\n\n    companion object {\n        // 定义消息类型常量，便于管理\n        private const val MSG_UPDATE_TEXT = 1\n    }\n}\n~~~\n\n### Coroutines 协程\n\n**Kotlin协程**是处理异步操作的推荐方案，它能帮你用更直观的代码替代复杂的回调，并高效管理后台任务\n\n#### 协程使用步骤\n\n1. 前置工作：添加依赖\n\n~~~kotlin\ndependencies {\n    // 协程核心库\n    implementation(\"org.jetbrains.kotlinx:kotlinx-coroutines-android:1.10.2\")\n    // 为ViewModel提供viewModelScope\n    implementation(\"androidx.lifecycle:lifecycle-viewmodel-ktx:2.9.4\")\n    // 为Activity/Fragment提供lifecycleScope\n    implementation(libs.androidx.lifecycle.runtime.ktx.v280)\n}\n~~~\n\n2. 在ViewModel中使用协程 文件位置：app/src/main/java/com/yourpackage/MyViewModel.kt 创建一个MyViewModel类，从网络获取数据并更新ui\n\n~~~kotlin\nclass MyViewModel(private val repository: MyRepository) : ViewModel() {\n\n    // 使用LiveData暴露UI状态\n    private val _data = MutableLiveData<String>()\n    val data: LiveData<String> = _data\n\n    private val _isLoading = MutableLiveData<Boolean>()\n    val isLoading: LiveData<Boolean> = _isLoading\n\n    // 触发数据获取\n    fun fetchData() {\n        // 在viewModelScope内启动协程\n        viewModelScope.launch {\n            _isLoading.value = true\n            try {\n                // 执行挂起函数，获取数据\n                val result = repository.fetchDataFromNetwork()\n                _data.value = result\n            } catch (e: Exception) {\n                // 处理错误\n                _data.value = \"Error: ${e.message}\"\n            } finally {\n                _isLoading.value = false\n            }\n        }\n    }\n}\n\n// 假设的Repository，包含挂起函数\nclass MyRepository {\n    // 声明为挂起函数，表明其内部执行耗时操作\n    suspend fun fetchDataFromNetwork(): String {\n        // 使用withContext确保耗时操作在IO线程池进行，保证主线程安全\n        return withContext(Dispatchers.IO) {\n            // 模拟网络请求，如使用Retrofit（Retrofit本身已支持挂起函数）\n            kotlinx.coroutines.delay(2000) // 模拟2秒网络延迟\n            \"Hello from Network!\"\n        }\n    }\n}\n~~~\n\n* **viewModelScope.launch​​:** 在ViewModel的作用域内**启动一个新的协程**，默认在​​主线程​​开始执行。这使得你可以在协程内直接更新UI状态（如设置_isLoading.value）\n\n* ​**​withContext(Dispatchers.IO)​​:** 这是一个关键的**挂起函数**。它将协程的执行上下文切换到为I/O操作优化的线程池，执行耗时的网络或数据库操作。操作完成后，协程会自动切回原来的线程（此处是主线程）这使得fetchDataFromNetwork函数是​​主线程安全​​的，意味着你可以安全地从主线程调用它。\n\n3. 在Activity/Fragment中处理UI交互 文件位置：app/src/main/java/com/yourpackage/MyActivity.kt\n\n~~~kotlin\nclass MyActivity : AppCompatActivity() { \n    private val viewModel: MyViewModel by viewModels()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // 观察LiveData，当数据变化时更新UI\n        viewModel.data.observe(this) { data ->\n            // 更新TextView等UI组件\n            textView.text = data\n        }\n\n        viewModel.isLoading.observe(this) { isLoading ->\n            progressBar.visibility = if (isLoading) View.VISIBLE else View.GONE\n        }\n\n        // 点击按钮触发数据获取\n        button.setOnClickListener {\n            viewModel.fetchData()\n        }\n\n        // 使用lifecycleScope执行与界面生命周期相关的协程任务\n        lifecycleScope.launchWhenResumed {\n            // 此协程只会在Activity处于Resumed状态时执行\n            // 适合执行一些需要界面完全可见才进行的操作\n        }\n    }\n}\n~~~\n\n4. 处理并行任务\n\n~~~kotlin\n// 在ViewModel或Repository中\nsuspend fun fetchDataInParallel(): List<String> =\n    kotlinx.coroutines.coroutineScope { // 创建一个协程作用域\n        val deferredOne = async { repository.fetchFromSource1() } // 启动第一个异步任务\n        val deferredTwo = async { repository.fetchFromSource2() } // 启动第二个异步任务\n\n        // 等待两个任务都完成并返回结果\n        val result1 = deferredOne.await()\n        val result2 = deferredTwo.await()\n        listOf(result1, result2)\n    }\n~~~\n\n## 网络通信\n\n[回到目录](#目录)\n\n### OkHttp\n\n**OkHttp**是一个**开源**的**HTTP客户端**，**用于**在Android和Java应用程序中执行网络请求。\n\n#### OkHttp使用步骤\n\n1. 添加网络权限和依赖\n\n在 AndroidManifest.xml 文件中添加网络权限：\n~~~xml\n<!-- 添加网络权限 -->\n<uses-permission android:name=\"android.permission.INTERNET\"/>\n<uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/>\n~~~\n\n在 gradle/libs.versions.toml 中定义 OkHttp 版本和依赖：\n\n~~~toml\n[versions]\nokhttp = \"5.3.0\"\n\n[libraries]\nokhttp = { group = \"com.squareup.okhttp3\", name = \"okhttp\", version.ref = \"okhttp\"}\n~~~\n\n在 app/build.gradle.kts 中引入依赖：\n~~~kotlin\ndependencies {\n    // 添加OkHttp依赖\n    implementation(libs.okhttp)\n}\n~~~\n\n2. 创建网络服务类\n\n创建 NetworkService.kt 类，包含 GET 和 POST 请求方法：\n* 初始化 OkHttpClient 实例\n* 实现 GET 请求方法 makeGetRequest\n* 实现 POST 请求方法 makePostRequest\n\n~~~kotlin\n/**\n * 网络请求服务类\n */\nclass NetworkService {\n    private val client = OkHttpClient() // 创建OkHttpClient实例，用于发送网络请求\n\n    /**\n     * 发送GET请求的示例方法\n     * @param url 请求的URL地址\n     * @param callback 回调函数，用于处理请求结果\n     */\n    fun makeGetRequest(url: String, callback: (String?, IOException?) -> Unit) {\n        // 1. 构建请求对象\n        val request = Request.Builder()\n            .url(url) // 设置请求URL\n            .build()  // 构建Request对象\n\n        // 2. 创建Call对象并异步执行\n        client.newCall(request).enqueue(object : Callback {\n            // 3. 处理请求失败的情况\n            override fun onFailure(call: Call, e: IOException) {\n                // 请求失败，通过回调传递异常信息\n                callback(null, e)\n            }\n\n            // 4. 处理请求成功的情况\n            override fun onResponse(call: Call, response: Response) {\n                // 5. 检查HTTP响应状态码是否成功(200-299)\n                if (response.isSuccessful) {\n                    // 请求成功，通过回调传递响应体内容\n                    response.body?.let { responseBody ->\n                        callback(responseBody.string(), null)\n                    } ?: run {\n                        callback(\"\", null) // 如果body为null，返回空字符串\n                    }\n                } else {\n                    // 请求失败，创建异常并传递错误码\n                    callback(null, IOException(\"请求失败，错误码：${response.code}\").also { \n                        it.printStackTrace() \n                    })\n                }\n            }\n        })\n    }\n\n    /**\n     * 发送POST请求的示例方法\n     * @param url 请求的URL地址\n     * @param jsonBody POST请求体中的JSON数据\n     * @param callback 回调函数，用于处理请求结果\n     */\n    fun makePostRequest(url: String, jsonBody: String, callback: (String?, IOException?) -> Unit){\n        // 1. 定义请求体的媒体类型为JSON\n        val json = \"application/json; charset=utf-8\".toMediaType()\n        \n        // 2. 将字符串转换为RequestBody对象\n        val body = jsonBody.toRequestBody(json)\n\n        // 3. 构建POST请求对象\n        val request = Request.Builder()\n            .url(url) // 设置请求URL\n            .post(body) // 设置请求方法为POST，并附带请求体\n            .build() // 构建Request对象\n\n        // 4. 创建Call对象并异步执行\n        client.newCall(request).enqueue(object : Callback{\n            // 5. 处理请求失败的情况\n            override fun onFailure(call: Call, e: IOException) {\n                // 请求失败，通过回调传递异常信息\n                callback(null, e)\n            }\n\n            // 6. 处理请求成功的情况\n            override fun onResponse(call: Call, response: Response) {\n                // 7. 检查HTTP响应状态码是否成功(200-299)\n                if(response.isSuccessful){\n                    // 请求成功，通过回调传递响应体内容\n                    response.body?.let { responseBody ->\n                        callback(responseBody.string(), null)\n                    } ?: run {\n                        callback(\"\", null) // 如果body为null，返回空字符串\n                    }\n                }else{\n                    // 请求失败，创建异常并传递错误码\n                    callback(null, IOException(\"请求失败，错误码：${response.code}\").also { \n                        it.printStackTrace() \n                    })\n                }\n            }\n        })\n    }\n}\n~~~\n\n3. 在 Activity 中使用网络服务\n\n在 MainActivity.kt 中：\n* 启用 ViewBinding 功能以访问 UI 元素\n* 创建 NetworkService 实例\n* 在按钮点击事件中调用相应的网络请求方法\n* 处理网络请求结果并在主线程中更新 UI\n\n~~~kotlin\nclass MainActivity : ComponentActivity() {\n\n    // 延迟初始化绑定器\n    private lateinit var binding: ActivityMainBinding\n\n    // 创建网络服务实例\n    private val networkService = NetworkService()\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        // 1. inflate XML 布局文件，创建 View 对象\n        binding = ActivityMainBinding.inflate(layoutInflater)\n\n        // 2. 将根视图设置为 Activity 的内容视图\n        setContentView(binding.root)\n\n        // 3. 现在可以通过 binding 访问布局中的所有视图组件\n        binding.btnGet.setOnClickListener {\n            networkService.makeGetRequest(\"https://httpbin.org/get\") { response: String?, error: IOException? ->\n                runOnUiThread {\n                    if (error != null){\n                        Log.e(\"NetworkDemo\", \"Get请求失败：${error.message}\")\n                        Toast.makeText(this, \"Get请求失败：${error.message}\", Toast.LENGTH_SHORT).show()\n                        binding.tvResult.text = \"Get请求失败：${error.message}\"\n                    }else{\n                        Log.d(\"NetworkDemo\", \"Get请求成功：${response}\")\n                        Toast.makeText(this, \"Get请求成功:${response}\", Toast.LENGTH_SHORT).show()\n                        binding.tvResult.text = \"Get请求成功：${response}\"\n                    }\n                }\n            }\n        }\n\n        binding.btnPost.setOnClickListener {\n            val jsonBody = \"\"\"\n                {\n                    \"name\": \"John Doe\",\n                    \"age\": 30\n                }\n            \"\"\".trimIndent()\n\n            networkService.makePostRequest(\"https://httpbin.org/post\", jsonBody) { response: String?, error: IOException? ->\n                runOnUiThread {\n                    if (error != null){\n                        Log.e(\"NetworkDemo\", \"Post请求失败：${error.message}\")\n                        Toast.makeText(this, \"Post请求失败：${error.message}\", Toast.LENGTH_SHORT).show()\n                        binding.tvResult.text = \"Post请求失败：${error.message}\"\n                    }else{\n                        Log.d(\"NetworkDemo\", \"Post请求成功：${response}\")\n                        Toast.makeText(this, \"Post请求成功,${response}\", Toast.LENGTH_SHORT).show()\n                        binding.tvResult.text = \"Post请求成功：${response}\"\n                    }\n                }\n            }\n        }\n    }\n}\n~~~\n\n## 后台服务\n\n[回到目录](#目录)\n\n\n### 基本特征\n* **无 UI 界面：** 在后台运行，不与用户直接交互。\n* **生命周期独立：** 不受 Activity 生命周期直接影响（启动它的 Activity 销毁后，Service 可以继续运行）。\n* **运行在主线程：** 这一点至关重要！默认情况下，Service 与你的应用运行在同一个进程的主线程（UI 线程）中。因此，你不能直接在 Service 中执行**耗时操作**（如网络请求、大量文件读写），否则会阻塞主线程，导致应用无响应（ANR）。必须在 Service 内部**创建子线程**来处理这些任务\n\n### 启动方式\n\n####  通过startService()启动\n\n* **生命周期**流程：**onCreate()→ onStartCommand()→ (运行中) → onDestroy()**\n* onStartCommand()的返回值：这个返回值决定了服务被系统意外杀死后如何重启，非常重要\n  * START_STICKY：服务被杀死后会被系统**重新创建**，但之前的 Intent 数据会**丢失**（传入 null）。适合**音乐播放**等持续任务\n  * START_NOT_STICKY：服务被杀死后**不会自动重启**。适合一次性的任务，如**下载**单个文件\n  * START_REDELIVER_INTENT：服务被杀死后会被**重启**，并且最后一个 Intent 会被**重新传递**。适合必须完成的任务，如**支付**回调\n\n#### 通过bindService()启动\n\n这种方式允许组件（如 Activity）与 Service 进行双向通信。\n\n* **生命周期**流程：onCreate()→ onBind()→ (运行中，与绑定者交互) → onUnbind()→ onDestroy()\n* 通信桥梁 IBinder：服务通过 onBind()方法返回一个 IBinder对象，绑定组件通过这个对象来调用服务内部的方法，实现交互\n\n#### 混合启动方式\n一个 Service 可以同时被 startService()启动并被 bindService()绑定。这时，必须同时调用 stopService()和**所有绑定组件**的 unbindService()，服务才会销毁\n\n### 代码实现\n\n#### startService()启动方式示例\n\n以开启后台日志服务为例：\n\n1. 创建后台日志服务类LoggingService.kt，继承 Service类，需要重写onCreate()、onStartCommand()、onDestroy()方法，onBind()方法可返回null\n\n~~~kotlin\nclass LoggingService: Service() {\n\n    companion object{\n        const val TAG = \"LoggingService\"\n        const val EXTRA_MESSAGE = \"extra_massage\" // 用于Intent传递数据的键\n    }\n\n    // 服务创建时被调用（仅调用一次）\n    override fun onCreate() {\n        super.onCreate()\n        Log.d(TAG, \"日志服务已创建\")\n    }\n\n    // 核心方法，每次startService都会调用\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n        Log.d(TAG, \"收到启动命令，startID：$startId\")\n\n        // 1.从Intent中获取要记录的消息\n        val message = intent?.getStringExtra(EXTRA_MESSAGE)?: \"默认消息\"\n\n        // 2.开启新线程执行耗时操作，避免阻塞主线程\n        thread(start = true) {\n            // 模拟耗时的保存操作\n            Log.d(TAG, \"后台线程开始工作：${Thread.currentThread().name}\")\n            Thread.sleep(3000)\n            Log.i(\"APP_LOG\", \"消息已记录：$message\")\n\n            // 3.任务完成后，服务自行停止\n            stopSelf(startId)\n            Log.d(TAG, \"任务完成，服务已停止\")\n        }\n\n        // 4.返回值，如果服务被杀死，希望系统重新创建并重传最后的Intent\n        return START_REDELIVER_INTENT\n    }\n\n    // 必须实现的方法，但对于startService方式可返回null\n    override fun onBind(intent: Intent?): IBinder? = null\n\n    // 服务销毁时清理资源\n    override fun onDestroy() {\n        super.onDestroy()\n        Log.d(TAG, \"日志服务已销毁\")\n    }\n}\n~~~\n\n2. 在AndroidManifest.xml中注册服务，manifest/application标签内添加如下内容：\n\n~~~xml\n<!--注册LoggingService-->\n<service android:name=\".LoggingService\"/>\n~~~\n\n3. 在需要使用服务时，调用startService()方法启动服务，并传递Intent对象，Intent对象中可以携带数据\n\n示例在主活动中通过按钮点击启动服务：\n\n~~~kotlin\nclass MainActivity : ComponentActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // 启动服务按钮\n        findViewById<Button>(R.id.btn_start_service).setOnClickListener {\n            // 1. 创建Intent, 指定要启动的服务\n            val intent = Intent(this, LoggingService::class.java).apply{\n                // 2.通过Intent传递数据给服务\n                putExtra(LoggingService.EXTRA_MESSAGE, \"这是一条来自 Activity 的消息，时间：${System.currentTimeMillis()}\")\n            }\n\n            // 3.启动服务\n            startService(intent)\n        }\n\n        // 停止服务按钮\n        findViewById<Button>(R.id.btn_stop_service).setOnClickListener {\n            // 停止服务的Intent\n            val stopIntent = Intent(this, LoggingService::class.java)\n            stopService(stopIntent)\n        }\n    }\n}\n~~~\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"android_develop","published":1,"updated":"2025-11-03T07:37:30.255Z","_id":"cmg22ta090000wotl1wgo5c5c","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h1><span id=\"android-%E5%BC%80%E5%8F%91\">Android 开发</span></h1><h2><span id=\"%E7%9B%AE%E5%BD%95\">目录</span></h2><ul>\n<li><a href=\"#android-%E5%BC%80%E5%8F%91\">Android 开发</a><ul>\n<li><a href=\"#%E7%9B%AE%E5%BD%95\">目录</a></li>\n<li><a href=\"#%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6\">前置条件</a></li>\n<li><a href=\"#%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6\">四大组件</a><ul>\n<li><a href=\"#%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6\">入口文件</a></li>\n<li><a href=\"#activity\">Activity</a><ul>\n<li><a href=\"#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAactivity\">创建一个Activity</a></li>\n<li><a href=\"#activity%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\">Activity生命周期</a></li>\n<li><a href=\"#activity%E4%BF%9D%E5%AD%98%E5%92%8C%E6%81%A2%E5%A4%8D\">Activity保存和恢复</a></li>\n<li><a href=\"#activity%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F\">Activity启动模式</a></li>\n<li><a href=\"#fragment\">Fragment</a><ul>\n<li><a href=\"#%E5%88%9B%E5%BB%BAfragment\">创建Fragment</a></li>\n<li><a href=\"#%E5%B0%86fragment%E6%B7%BB%E5%8A%A0%E5%88%B0activity%E4%B8%AD\">将Fragment添加到Activity中</a></li>\n<li><a href=\"#fragment%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\">Fragment生命周期</a></li>\n</ul>\n</li>\n<li><a href=\"#intent\">Intent</a><ul>\n<li><a href=\"#intent-flag\">Intent Flag</a></li>\n<li><a href=\"#intentfilter-%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99\">IntentFilter 匹配规则</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#service\">Service</a><ul>\n<li><a href=\"#service%E7%9A%84%E5%88%9B%E5%BB%BA\">Service的创建</a></li>\n<li><a href=\"#service%E7%9A%84%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F\">Service的启动方式</a></li>\n<li><a href=\"#service%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\">Service的生命周期</a></li>\n</ul>\n</li>\n<li><a href=\"#broadcastreceiver\">BroadcastReceiver</a><ul>\n<li><a href=\"#%E5%88%9B%E5%BB%BAbroadcastreceiver\">创建BroadcastReceiver</a></li>\n<li><a href=\"#%E6%B3%A8%E5%86%8Cbroadcastreceiver\">注册BroadcastReceiver</a></li>\n<li><a href=\"#broadcast-%E5%88%86%E7%B1%BB\">Broadcast 分类</a></li>\n</ul>\n</li>\n<li><a href=\"#contentprovider\">ContentProvider</a><ul>\n<li><a href=\"#%E5%88%9B%E5%BB%BAcontentprovider\">创建ContentProvider</a></li>\n<li><a href=\"#%E6%B3%A8%E5%86%8Ccontentprovider\">注册ContentProvider</a></li>\n<li><a href=\"#contentresolver\">ContentResolver</a></li>\n<li><a href=\"#%E4%B8%89%E4%B8%AA%E8%BE%85%E5%8A%A9%E7%B1%BB\">三个辅助类</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6\">基本组件</a><ul>\n<li><a href=\"#textview-%E6%96%87%E6%9C%AC%E6%98%BE%E7%A4%BA%E6%8E%A7%E4%BB%B6\">TextView 文本显示控件</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7\">布局属性</a></li>\n</ul>\n</li>\n<li><a href=\"#button-%E6%8C%89%E9%92%AE\">Button 按钮</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-1\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#edittext-%E6%96%87%E6%9C%AC%E8%BE%93%E5%85%A5%E6%A1%86\">EditText 文本输入框</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-2\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7-1\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#imageview-%E5%9B%BE%E7%89%87\">ImageView 图片</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-3\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7-2\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#progressbar-%E8%BF%9B%E5%BA%A6%E6%9D%A1\">ProgressBar 进度条</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-4\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7-3\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#scrollview-%E6%BB%9A%E5%8A%A8\">ScrollView 滚动</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-5\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7-4\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#recyclerview-%E5%AE%B9%E5%99%A8\">RecyclerView 容器</a><ul>\n<li><a href=\"#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6\">核心组件</a></li>\n<li><a href=\"#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96\">引入依赖</a></li>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-6\">布局属性</a></li>\n<li><a href=\"#recyclerview%E7%9A%84%E4%BD%BF%E7%94%A8\">RecyclerView的使用</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%B8%83%E5%B1%80\">布局</a><ul>\n<li><a href=\"#%E6%B5%8B%E9%87%8F%E5%92%8C%E5%B8%83%E5%B1%80\">测量和布局</a></li>\n<li><a href=\"#framelayout\">FrameLayout</a><ul>\n<li><a href=\"#%E8%87%AA%E8%BA%AB%E5%B1%9E%E6%80%A7\">自身属性</a></li>\n<li><a href=\"#%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7\">子视图属性</a></li>\n</ul>\n</li>\n<li><a href=\"#linearlayout\">LinearLayout</a><ul>\n<li><a href=\"#%E8%87%AA%E8%BA%AB%E5%B1%9E%E6%80%A7-1\">自身属性</a></li>\n<li><a href=\"#%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7-1\">子视图属性</a></li>\n</ul>\n</li>\n<li><a href=\"#relativelayout\">RelativeLayout</a><ul>\n<li><a href=\"#%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7-2\">子视图属性</a></li>\n</ul>\n</li>\n<li><a href=\"#constraintlayout\">ConstraintLayout</a><ul>\n<li><a href=\"#%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7-3\">子视图属性</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%80%BB%E7%BB%93\">总结</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6\">创建自定义组件</a></li>\n<li><a href=\"#%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB\">属性动画</a><ul>\n<li><a href=\"#%E5%8A%A8%E7%94%BB%E6%A1%86%E6%9E%B6\">动画框架</a></li>\n<li><a href=\"#%E5%B8%B8%E7%94%A8api\">常用API</a></li>\n<li><a href=\"#viewpropertyanimator\">ViewPropertyAnimator</a></li>\n<li><a href=\"#objectanimator\">ObjectAnimator</a><ul>\n<li><a href=\"#%E5%8A%A8%E7%94%BB%E6%8F%92%E5%80%BC%E5%99%A8\">动画插值器</a></li>\n</ul>\n</li>\n<li><a href=\"#xmlanimator\">xmlAnimator</a><ul>\n<li><a href=\"#%E5%8A%A8%E7%94%BB%E5%B1%9E%E6%80%A7%E8%B5%84%E6%BA%90%E7%9A%84%E5%AE%9A%E4%B9%89\">动画属性资源的定义</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E6%95%B0%E6%8D%AE%E5%82%A8%E5%AD%98\">数据储存</a><ul>\n<li><a href=\"#sharedpreferences\">SharedPreferences</a><ul>\n<li><a href=\"#%E7%AE%80%E4%BB%8B\">简介</a></li>\n<li><a href=\"#%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE\">存储数据</a></li>\n<li><a href=\"#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE\">读取数据</a></li>\n<li><a href=\"#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE\">删除数据</a></li>\n<li><a href=\"#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E5%AE%9E%E8%B7%B5\">完整代码实践</a></li>\n</ul>\n</li>\n<li><a href=\"#sqlite%E6%95%B0%E6%8D%AE%E5%BA%93\">SQLite数据库</a><ul>\n<li><a href=\"#sqlite%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C\">SQLite数据库操作</a></li>\n<li><a href=\"#sqlite%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">SQLite使用步骤</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8\">文件存储</a><ul>\n<li><a href=\"#%E5%86%85%E9%83%A8%E5%AD%98%E5%82%A8\">内部存储</a></li>\n<li><a href=\"#%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%98%E5%82%A8\">序列化存储</a></li>\n</ul>\n</li>\n<li><a href=\"#contentprovider-1\">ContentProvider</a><ul>\n<li><a href=\"#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86\">工作原理</a></li>\n<li><a href=\"#contentprovider%E7%9A%84%E4%BD%BF%E7%94%A8\">ContentProvider的使用</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%BC%82%E6%AD%A5%E4%BA%A4%E4%BA%92\">异步交互</a><ul>\n<li><a href=\"#handler\">handler</a><ul>\n<li><a href=\"#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E5%92%8C%E8%81%8C%E8%B4%A3\">核心组件和职责</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">使用步骤</a><ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8-sendmessage\">使用 sendMessage</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8-post\">使用 post</a></li>\n<li><a href=\"#%E5%AE%89%E5%85%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5\">安全的最佳实践</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#coroutines-%E5%8D%8F%E7%A8%8B\">Coroutines 协程</a><ul>\n<li><a href=\"#%E5%8D%8F%E7%A8%8B%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">协程使用步骤</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1\">网络通信</a><ul>\n<li><a href=\"#okhttp\">OkHttp</a><ul>\n<li><a href=\"#okhttp%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">OkHttp使用步骤</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%90%8E%E5%8F%B0%E6%9C%8D%E5%8A%A1\">后台服务</a><ul>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81\">基本特征</a></li>\n<li><a href=\"#%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F\">启动方式</a><ul>\n<li><a href=\"#%E9%80%9A%E8%BF%87startservice%E5%90%AF%E5%8A%A8\">通过startService()启动</a></li>\n<li><a href=\"#%E9%80%9A%E8%BF%87bindservice%E5%90%AF%E5%8A%A8\">通过bindService()启动</a></li>\n<li><a href=\"#%E6%B7%B7%E5%90%88%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F\">混合启动方式</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</a><ul>\n<li><a href=\"#startservice%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F%E7%A4%BA%E4%BE%8B\">startService()启动方式示例</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2><span id=\"%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6\">前置条件</span></h2><ul>\n<li><a href=\"https://developer.android.google.cn/studio/index.html?hl=ro\">安装Android Studio</a></li>\n</ul>\n<h2><span id=\"%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6\">四大组件</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<table>\n<thead>\n<tr>\n<th>组件名称</th>\n<th>场景</th>\n<th>用途</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"#activity\">Activity</a></td>\n<td>界面交互</td>\n<td>是用户交互的入口点，代表一个界面，可以拉起其他的界面和组件</td>\n</tr>\n<tr>\n<td><a href=\"#service\">Service</a></td>\n<td>后台服务</td>\n<td>处理耗时任务(即使应用退出)，比如下载，网络请求，跨进程访问等</td>\n</tr>\n<tr>\n<td><a href=\"#broadcastreceiver\">BroadcastReceiver</a></td>\n<td>事件响应</td>\n<td>捕获系统事件(时区变更，短信到达)或者用户发送到自定义事件，然后根据事件决定接下来的业务逻辑</td>\n</tr>\n<tr>\n<td><a href=\"#contentprovider\">ContentProvider</a></td>\n<td>数据共享</td>\n<td>对外安全暴露私有数据，提供统一的api访问，内部可以是不同存储方式的实现</td>\n</tr>\n</tbody></table>\n<h3><span id=\"%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6\">入口文件</span></h3><p>AndroidManifest.xml</p>\n<h3><span id=\"activity\">Activity</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4><span id=\"%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAactivity\">创建一个Activity</span></h4><ul>\n<li>首先在layout目录下创建一个<strong>xml文件</strong>，并设置文件名，如activity_1.xml</li>\n<li>创建与<strong>xml文件</strong>对应的activity子类</li>\n<li>把声明的子类在AndroidManifest.xml中注入</li>\n<li><strong>xml文件</strong>可以添加组件</li>\n<li>kt文件可以为组件添加事件监听</li>\n</ul>\n<h4><span id=\"activity%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\">Activity生命周期</span></h4><table>\n<thead>\n<tr>\n<th>生命周期</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onCreate()</td>\n<td>首次创建Activity时调用，完成初始化工作，多用于创建视图、为列表绑定数据</td>\n</tr>\n<tr>\n<td>onStart()</td>\n<td>当Activity可见时调用，多用于启动后台任务</td>\n</tr>\n<tr>\n<td>onResume()</td>\n<td>当Activity开始与用户交互时调用，进入活跃状态，位于栈顶，可以接受用户输入</td>\n</tr>\n<tr>\n<td>onPause()</td>\n<td>要启动另一个Activity时调用，暂停当前Activity，但保留状态，可以保存数据，最后一个可控的回调</td>\n</tr>\n<tr>\n<td>onStop()</td>\n<td>当Activity不可见时调用</td>\n</tr>\n<tr>\n<td>onDestroy()</td>\n<td>当Activity销毁时调用，发生在finish()方法执行时，或由于系统内存不足而销毁</td>\n</tr>\n<tr>\n<td>onRestart()</td>\n<td>当Activity重新启动时调用，通常用于恢复数据</td>\n</tr>\n</tbody></table>\n<h4><span id=\"activity%E4%BF%9D%E5%AD%98%E5%92%8C%E6%81%A2%E5%A4%8D\">Activity保存和恢复</span></h4><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>调用时机</th>\n<th>说明</th>\n<th>使用场景</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onSaveInstanceState(outState:Bundle)</td>\n<td>系统未经“你的许可”，可能销毁了你的activity，则会被调用</td>\n<td>用户主动销毁不调用，可能销毁即调用</td>\n<td>从一个Activity启动另一个Activity <br> 屏幕方向切换 <br> home键返回，切换别的应用 <br> 关闭屏幕显示</td>\n</tr>\n<tr>\n<td>onRestoreInstanceState(savedInstanceState:Bundle)</td>\n<td>系统未经“你的许可”，确实销毁了你的activity，重新启动时则会被调用</td>\n<td>用户主动销毁不调用，可能销毁即调用，与onSaveInstanceState()方法不一定成对调用</td>\n<td>异常关闭了Activity，下次启动时则被调用 <br> onCreate() -&gt; onStart() -&gt; onRestoreInstanceState() -&gt; onResume()</td>\n</tr>\n</tbody></table>\n<h4><span id=\"activity%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F\">Activity启动模式</span></h4><p>在AndroidManifest.xml中,<code>&lt;application&gt;</code>标签下的<code>&lt;activity&gt;</code>中设置Activity的启动模式 <code>android:launchMode=\"启动模式</code></p>\n<table>\n<thead>\n<tr>\n<th>启动模式</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>standard</td>\n<td>默认启动模式，按Activity启动顺序压入Task Stack中</td>\n</tr>\n<tr>\n<td>singleTop</td>\n<td>栈顶复用模式，栈顶Activity实例已经存在，则不会创建新的实例，同一个Activity可以多次创建</td>\n</tr>\n<tr>\n<td>singleTask</td>\n<td>如果Activity存在于栈中，弹出其上所有Activity，目标Activity置于栈顶并获得焦点</td>\n</tr>\n<tr>\n<td>singleInstance</td>\n<td>全局唯一模式，为目标Activity创建一个栈，栈顶Activity获得焦点，如果已经创建过则唤醒</td>\n</tr>\n</tbody></table>\n<p>除了从AndroidManifest.xml中设置启动模式外，也可以在代码中设置启动模式，比如通过Intent的setFlags()方法设置</p>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> intent = Intent(<span class=\"hljs-keyword\">this</span>, MainActivity::<span class=\"hljs-keyword\">class</span>.java)<br>intent.setFlags(Intent.[Intent Flag])<br></code></pre></td></tr></tbody></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>Intent Flag</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>FLAG_ACTIVITY_NEW_TASK</td>\n<td>从后台服务中启动新的Activity；从通知栏点开新的任务</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_SINGLE_TOP</td>\n<td>点击通知或状态栏，不希望重新创建已经存在的Activity，而是复用现有实例</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_CLEAR_TOP</td>\n<td>导航回已经存在的Activity，并清除其上的所有Activity，如从深层页面返回主页</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_CLEAR_TASK</td>\n<td>完全清空当前任务，并创建一个新任务，比如用户注销返回登录界面</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_NO_HISTORY</td>\n<td>启动一个页面时，不希望用户通过返回键回到该页面</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_REORDER_TO_FRONT</td>\n<td>需要将后台的Activity移到前台而不是重新创建，比如多个步骤的表格填写</td>\n</tr>\n</tbody></table>\n<h4><span id=\"fragment\">Fragment</span></h4><p>Fragment表示应用界面中可重复使用的一部分，可以用于实现模块化的UI设计，在不同的Activity中重复使用</p>\n<h5><span id=\"%E5%88%9B%E5%BB%BAfragment\">创建Fragment</span></h5><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * MyFragment 类继承自 Fragment，用于显示自定义的 fragment 界面</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyFragment</span> : <span class=\"hljs-type\">Fragment</span>() { <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 创建并返回 fragment 的视图层次结构</span><br><span class=\"hljs-comment\">     * </span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> inflater 用于将 XML 布局文件转换为 View 对象的布局加载器</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> container 包含此 fragment 的父视图组，可能为 null</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 包含 fragment 上次保存状态的 Bundle 对象，可能为 null</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回 inflate 后的 View 对象，作为 fragment 的根视图</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreateView</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        inflater: <span class=\"hljs-type\">LayoutInflater</span>,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        container: <span class=\"hljs-type\">ViewGroup</span>?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        savedInstanceState: <span class=\"hljs-type\">Bundle</span>?</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">    )</span></span>: View? { <br>        <span class=\"hljs-comment\">// 使用 inflater 将指定的布局文件（.xml）加载为 View 并返回</span><br>        <span class=\"hljs-keyword\">return</span> inflater.inflate(R.layout.fragment_my, container, <span class=\"hljs-literal\">false</span>)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h5><span id=\"%E5%B0%86fragment%E6%B7%BB%E5%8A%A0%E5%88%B0activity%E4%B8%AD\">将Fragment添加到Activity中</span></h5><p>Fragment拥有与Activity类似的栈(BACK stack，回退栈)，</p>\n<ul>\n<li><p>通过xml文件添加Fragment(静态添加，无法在运行时动态移除)</p>\n  <figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">&lt;androidx.fragment.app.FragmentContainerView<br>    android:id=<span class=\"hljs-string\">\"@+id/fragment_container\"</span><br>    android:layout_width=<span class=\"hljs-string\">\"match_parent\"</span><br>    android:layout_height=<span class=\"hljs-string\">\"match_parent\"</span><br>    android:name=<span class=\"hljs-string\">\"com.example.myapplication.MyFragment\"</span> /&gt;<br></code></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>通过代码添加Fragment</p>\n  <figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">* 当Activity创建时调用此方法，用于初始化界面和添加Fragment</span><br><span class=\"hljs-comment\">* </span><br><span class=\"hljs-comment\">* <span class=\"hljs-doctag\">@param</span> savedInstanceState 保存的实例状态，用于恢复之前保存的Activity状态</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>    <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br><br>    <span class=\"hljs-comment\">// 创建MyFragment实例并添加到Activity中</span><br>    <span class=\"hljs-keyword\">val</span> fragment = MyFragment()<br><br>    <span class=\"hljs-comment\">// 获取Fragment管理器并开始一个事务</span><br>    <span class=\"hljs-comment\">// 向指定容器添加Fragment，推荐使用FragmentContainerView容器</span><br>    <span class=\"hljs-comment\">// 将该操作添加到返回栈</span><br>    <span class=\"hljs-comment\">// 标记为\"MyFragment\"，提交事务使更改生效</span><br>    supportFragmentManager.beginTransaction()<br>    .add(R.id.fragment_container_view, fragment)<br>    .addToBackStack(<span class=\"hljs-string\">\"MyFragment\"</span>)<br>    .commit()<br>}<br></code></pre></td></tr></tbody></table></figure></li>\n</ul>\n<h5><span id=\"fragment%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\">Fragment生命周期</span></h5><table>\n<thead>\n<tr>\n<th>回调方法</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onAttach()</td>\n<td>当Fragment被附加到Activity时调用</td>\n</tr>\n<tr>\n<td>onCreate()</td>\n<td>当Fragment创建时调用</td>\n</tr>\n<tr>\n<td>onCreateView()</td>\n<td>当Fragment创建视图时调用</td>\n</tr>\n<tr>\n<td>onActivityCreated()</td>\n<td>当Fragment的Activity的onCreate()方法执行完毕时调用</td>\n</tr>\n<tr>\n<td>onStart()</td>\n<td>当Fragment可见时调用</td>\n</tr>\n<tr>\n<td>onResume()</td>\n<td>当Fragment获得焦点时调用</td>\n</tr>\n<tr>\n<td>onPause()</td>\n<td>当Fragment失去焦点时或被其他Fragment覆盖时调用</td>\n</tr>\n<tr>\n<td>onStop()</td>\n<td>当Fragment不可见时调用</td>\n</tr>\n<tr>\n<td>onDestroyView()</td>\n<td>当Fragment销毁视图时调用</td>\n</tr>\n<tr>\n<td>onDestroy()</td>\n<td>当Fragment销毁时调用</td>\n</tr>\n<tr>\n<td>onDetach()</td>\n<td>当Fragment被分离时调用</td>\n</tr>\n</tbody></table>\n<h4><span id=\"intent\">Intent</span></h4><p>Intent是Android提供的用来协助组件间的交互和通信机制，描述一次操作的动作和数据</p>\n<ul>\n<li>显式Intent：指定目标组件，通过Intent对象启动目标组件</li>\n<li>隐式Intent：不指定目标组件，通过Intent对象启动匹配的组件</li>\n</ul>\n<h5><span id=\"intent-flag\">Intent Flag</span></h5><table>\n<thead>\n<tr>\n<th>Intent Flag</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Component</td>\n<td>指定来源和目标</td>\n</tr>\n<tr>\n<td>Action</td>\n<td>指定动作行为</td>\n</tr>\n<tr>\n<td>Category</td>\n<td>指定哪种组件来处理</td>\n</tr>\n<tr>\n<td>Data</td>\n<td>uri，指定数据源</td>\n</tr>\n<tr>\n<td>Type</td>\n<td>指定消息数据类型</td>\n</tr>\n<tr>\n<td>Extras</td>\n<td>拓展信息</td>\n</tr>\n<tr>\n<td>Flags</td>\n<td>指定运行模式</td>\n</tr>\n</tbody></table>\n<h5><span id=\"intentfilter-%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99\">IntentFilter 匹配规则</span></h5><table>\n<thead>\n<tr>\n<th>条件</th>\n<th>匹配规则</th>\n<th>使用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Action</td>\n<td>1. <code>&lt;intent-filter&gt;</code>中必须包含一个Action, Intent也必须指定一个Action<br>2. <code>&lt;intent-filter&gt;</code>中可以有一个或者多个Action, Intent匹配其中的一个Action即可</td>\n<td><code>Intent(\"xxxAction\")</code></td>\n</tr>\n<tr>\n<td>Data</td>\n<td>1. <code>&lt;intent-filter&gt;</code>中描述了data, 必须在Intent中指定匹配的Data信息<br>2. <code>&lt;intent-filter&gt;</code>中没有描述data信息, Intent中可以不指定Data信息<br>3. <code>&lt;intent-filter&gt;</code>只指定了mimeType, 默认的URI的scheme是file或者content, 在Intent中必须同时设置mimeType和URI<br>4. <code>&lt;intent-filter&gt;</code>中有多个Data, Intent中只需要匹配一组即可</td>\n<td><code>intent.setData()</code></td>\n</tr>\n<tr>\n<td>Category</td>\n<td>1. Intent中未指定Category, <code>&lt;intent-filter&gt;</code>中也可以不指定Category<br>2. 要隐式启动一个Activity是就必须指定android.intent.category.DEFAULT的Category<br>3. Intent中指定了一个Category时, 会在具有Category的<code>&lt;intent-filter&gt;</code>中去找匹配组件</td>\n<td><code>intent.addCategory()</code><br><code>intent.removeCategory()</code><br><code>intent.categories</code></td>\n</tr>\n<tr>\n<td>整体匹配规则</td>\n<td>Action+Data+Category同时匹配, 才能启动Activity<br>Activity可以有多个intent-filter, Intent只需匹配任何一组<code>&lt;intent-filter&gt;</code>即可启动Activity</td>\n<td>-</td>\n</tr>\n<tr>\n<td>匹配过程</td>\n<td>1. 加载<code>&lt;intent-filter&gt;</code>列表<br>2. 依次去掉action、Data、Category匹配失败的<code>&lt;intent-filter&gt;</code><br>3. 剩余<code>&lt;intent-filter&gt;</code>按优先级排序</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<h3><span id=\"service\">Service</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<ul>\n<li>无ui，可后台长时间运行</li>\n<li>启动后，切换应用仍会运行一段时间</li>\n<li>可用于应用处理网络事务、音频播放、数据同步等</li>\n<li>默认在主线程[UI线程]运行，除单独指定线程，并且不会单独在进程中运行</li>\n</ul>\n<h4><span id=\"service%E7%9A%84%E5%88%9B%E5%BB%BA\">Service的创建</span></h4><ul>\n<li>在AndroidManifest.xml中注册Service</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:name</td>\n<td>指定Service的完整类名</td>\n</tr>\n<tr>\n<td>android:enabled</td>\n<td>能否被实例化</td>\n</tr>\n<tr>\n<td>android:exported</td>\n<td>是否允许其他应用访问</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">service</span></span><br><span class=\"hljs-tag\"><span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\".MyService\"</span></span><br><span class=\"hljs-tag\"><span class=\"hljs-attr\">android:enabled</span>=<span class=\"hljs-string\">\"true\"</span></span><br><span class=\"hljs-tag\"><span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">\"true\"</span> /&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<ul>\n<li>在Kotlin中创建Service</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onBind</td>\n<td>当Service被绑定时调用</td>\n</tr>\n<tr>\n<td>onCreate</td>\n<td>当Service创建时调用</td>\n</tr>\n<tr>\n<td>onStartCommand</td>\n<td>当Service启动时调用</td>\n</tr>\n<tr>\n<td>onDestroy</td>\n<td>当Service销毁时调用</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * MyService类继承自Service，用于在后台执行长时间运行的操作</span><br><span class=\"hljs-comment\"> * 该服务不提供绑定功能，仅支持启动和停止</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyService</span> : <span class=\"hljs-type\">Service</span>() { <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当其他组件想要通过bindService()绑定到服务时调用</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> intent 启动服务的Intent对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> IBinder对象，用于与服务通信，此处返回null表示不支持绑定</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onBind</span><span class=\"hljs-params\">(intent: <span class=\"hljs-type\">Intent</span>)</span></span>: IBinder? { <br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span><br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当服务首次创建时调用，用于执行一次性设置操作</span><br><span class=\"hljs-comment\">     * 该方法只在服务生命周期中调用一次</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">()</span></span> { <br>        <span class=\"hljs-keyword\">super</span>.onCreate()<br>        Log.d(TAG, <span class=\"hljs-string\">\"onCreate\"</span>)<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当其他组件通过startService()启动服务时调用</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> intent 启动服务时传递的Intent对象，可能为null</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> flags 附加数据，用于描述如何启动服务</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> startId 服务启动请求的唯一标识符</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 服务被杀死后的重启模式，返回super.onStartCommand()的默认值</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onStartCommand</span><span class=\"hljs-params\">(intent: <span class=\"hljs-type\">Intent</span>?, flags: <span class=\"hljs-type\">Int</span>, startId: <span class=\"hljs-type\">Int</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> { <br>            Log.d(TAG, <span class=\"hljs-string\">\"onStartCommand\"</span>)<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">super</span>.onStartCommand(intent, flags, startId)<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当服务被销毁时调用，用于清理资源和执行收尾工作</span><br><span class=\"hljs-comment\">     * 该方法在服务生命周期结束时调用</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> { <br>        <span class=\"hljs-keyword\">super</span>.onDestroy()<br>        Log.d(TAG, <span class=\"hljs-string\">\"onDestroy\"</span>)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h4><span id=\"service%E7%9A%84%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F\">Service的启动方式</span></h4><table>\n<thead>\n<tr>\n<th>启动方式</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>startService()</td>\n<td>适用于独立与其他组件长期运行的服务，如播放音乐、下载文件等 需要自身stopService()来停止服务</td>\n</tr>\n<tr>\n<td>bindService()</td>\n<td>适用于需要与其他组件进行通信的服务，如获取传感器数据、访问数据库等 需要所有绑定的组件调用unbindService()解除绑定才停止服务</td>\n</tr>\n</tbody></table>\n<h4><span id=\"service%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\">Service的生命周期</span></h4><table>\n<thead>\n<tr>\n<th>回调方法</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>onCreate()</code></td>\n<td>系统会在服务首次创建时（在 <code>onStartCommand()</code> 或 <code>onBind()</code> 之前）调用此方法来执行一次性设置过程。如果服务已在运行，不会调用此方法。</td>\n</tr>\n<tr>\n<td><code>onDestroy()</code></td>\n<td>当服务不再使用且被销毁时，系统会调用此方法。用于清理线程、已注册的监听器或接收器等资源。是服务接收的最后一个回调。</td>\n</tr>\n<tr>\n<td><code>onStartCommand()</code></td>\n<td>当其他组件（例如 Activity）请求启动服务时，系统会通过调用 <code>startService()</code> 来调用此方法。执行此方法时，系统会启动服务，该服务可以在后台无限期运行。如果实现了此功能，需要在服务完成工作后通过 <code>stopSelf()</code> 或 <code>stopService()</code> 来停止服务。如果只想提供绑定，无需实现。</td>\n</tr>\n<tr>\n<td><code>onBind()</code></td>\n<td>当其他组件想要与服务绑定（例如执行 RPC）时，系统会通过调用 <code>bindService()</code> 来调用此方法。在实现此方法必须提供一个接口，使客户端通过返回 <code>IBinder</code> 与服务进行通信。如果不允许绑定，则应返回 <code>null</code>。</td>\n</tr>\n<tr>\n<td><code>onUnbind()</code></td>\n<td>当所有绑定的客户端都解绑（通过 <code>unbindService()</code>）时，系统会调用此方法。</td>\n</tr>\n</tbody></table>\n<h3><span id=\"broadcastreceiver\">BroadcastReceiver</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>Broadcast 是一种用于应用程序之间或程序内部的一种通信机制<br>BroadcastReceiver 捕获系统事件或用户的自定义事件，并根据事件执行对应的逻辑</p>\n<h4><span id=\"%E5%88%9B%E5%BB%BAbroadcastreceiver\">创建BroadcastReceiver</span></h4><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 广播接收器类，用于接收和处理广播消息</span><br><span class=\"hljs-comment\"> * 继承自BroadcastReceiver，当接收到广播时会显示Toast提示</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyReceiver</span> : <span class=\"hljs-type\">BroadcastReceiver</span>() { <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当接收到广播时调用此方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> context 上下文对象，提供访问应用程序环境信息的接口</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> intent 包含广播数据的Intent对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onReceive</span><span class=\"hljs-params\">(context: <span class=\"hljs-type\">Context</span>, intent: <span class=\"hljs-type\">Intent</span>)</span></span> { <br>        <span class=\"hljs-comment\">// 显示广播接收成功的Toast消息提示</span><br>        Toast.makeText(context, <span class=\"hljs-string\">\"MyBroadcastReceiver: Broadcast Received\"</span>, Toast.LENGTH_SHORT).show()<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h4><span id=\"%E6%B3%A8%E5%86%8Cbroadcastreceiver\">注册BroadcastReceiver</span></h4><ul>\n<li><p>在AndroidManifest.xml中注册BroadcastReceiver[静态注册，程序未启动也能监听广播]</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\">广播接收器声明块<br>    <br>    该代码块声明了一个Android广播接收器组件，用于接收和处理特定的广播消息。<br>    <br>    组件属性说明：<br>    - android:name: 指定接收器的类名，\".MyReceiver\"表示该类在当前应用包名下<br>    - android:enabled: 设置为true表示该接收器在应用安装后默认启用<br>    - android:exported: 设置为true表示该接收器可以接收来自其他应用或系统的广播<br>    <br>    意图过滤器配置：<br>    - android:priority: 设置广播接收优先级为100，数值越大优先级越高<br>    - action: 声明该接收器可以处理的广播动作，此处为自定义广播动作\"com.example.myapplication.MY_BROADCAST\" <br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">receiver</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\".MyReceiver\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:enabled</span>=<span class=\"hljs-string\">\"true\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">\"true\"</span>&gt;</span> <br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">intent-filter</span> <span class=\"hljs-attr\">android:priority</span>=<span class=\"hljs-string\">\"100\"</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">action</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"com.example.myapplication.MY_BROADCAST\"</span> /&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">intent-filter</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">receiver</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>在代码中注册BroadcastReceiver[动态注册]</p>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 主活动类，负责发送广播和注册/注销广播接收器</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() { <br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> mBroadcastReceiver: MyReceiver? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> broadcastAction = <span class=\"hljs-string\">\"com.example.myapplication.MY_BROADCAST\"</span><br>    <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 活动创建时的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 保存的实例状态Bundle对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> { <br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br>        mBroadcastReceiver = MyReceiver()<br>        <span class=\"hljs-comment\">// 设置按钮点击监听器，用于发送广播</span><br>        findViewById&lt;Button&gt;(R.id.button).setOnClickListener(View.OnClickListener { <br>            sendBroadcast(Intent(broadcastAction))<br>        })<br>    }<br>}<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动恢复时的回调方法，用于注册广播接收器</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onResume</span><span class=\"hljs-params\">()</span></span> { <br>    <span class=\"hljs-keyword\">super</span>.onResume()<br>    <span class=\"hljs-comment\">// 注册广播接收器以接收指定action的广播</span><br>    mBroadcastReceiver?.let { <br>        registerReceiver(it, IntentFilter(broadcastAction), RECEIVER_EXPORTED)<br>    }<br>}<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动销毁时的回调方法，用于注销广播接收器</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> { <br>    <span class=\"hljs-keyword\">super</span>.onDestroy()<br>    <span class=\"hljs-comment\">// 注销广播接收器以避免内存泄漏</span><br>    mBroadcastReceiver?.let { <br>        unregisterReceiver(it)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure></li>\n</ul>\n<h4><span id=\"broadcast-%E5%88%86%E7%B1%BB\">Broadcast 分类</span></h4><table>\n<thead>\n<tr>\n<th>广播类型</th>\n<th>方法</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>标准广播</td>\n<td>sendBroadcast(Intent intent)</td>\n<td>异步广播，发送给所有注册的接收器，但无法将处理结果发送给下一个接收器，无法终止广播传播</td>\n</tr>\n<tr>\n<td>有序广播</td>\n<td>sendOrderedBroadcast(Intent intent, String receiverPermission)</td>\n<td>同步广播，同一时刻只有一个接收器收到，可以选择继续传播，拦截或修改广播</td>\n</tr>\n<tr>\n<td>本地广播</td>\n<td>LocalBroadcastManager.registerReceiver(BroadcastReceiver receiver, IntentFilter filter) <br>LocalBroadcastManager.sendBroadcast(Intent intent) <br>LocalBroadcastManager.unregisterReceiver(BroadcastReceiver receiver)</td>\n<td>exported=false，只能动态注册，只能发送给本应用，注册为本地广播的接收器无法接受标准广播</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 隐式Intent</span><br>sendBroadcast(Intent(<span class=\"hljs-string\">\"BROADCAST_ACTION\"</span>))<br><span class=\"hljs-comment\">// 显式Intent</span><br><span class=\"hljs-keyword\">val</span> intent = Intent(<span class=\"hljs-keyword\">this</span>, MyReceiver::<span class=\"hljs-keyword\">class</span>.java)<br>intent.action = <span class=\"hljs-string\">\"BROADCAST_ACTION\"</span><br>sendBroadcast(intent)<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"contentprovider\">ContentProvider</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>以标准化的方式在Android应用间共享数据，以相对安全的方式封装数据存储以及增删改查，提供对外统一接口供其他程序调用</p>\n<ul>\n<li>通过 <strong>uri</strong>[universal resource identifier ，通用资源标识符]访问数据</li>\n<li>content://authority/path/id<ul>\n<li>content://：通用前缀</li>\n<li>authority：内容提供者的唯一标识符，通常为包名+内容提供者的类名</li>\n<li>path：内容提供者的数据路径，通常为数据表名</li>\n<li>id：内容提供者的数据项ID，通常为数据项的行号</li>\n</ul>\n</li>\n</ul>\n<h4><span id=\"%E5%88%9B%E5%BB%BAcontentprovider\">创建ContentProvider</span></h4><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * MyContentProvider 是一个自定义的内容提供者类，用于管理应用程序数据的访问和操作。</span><br><span class=\"hljs-comment\"> * 它继承自 Android 的 ContentProvider 类，提供了对结构化数据的标准化访问接口。</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyContentProvider</span> : <span class=\"hljs-type\">ContentProvider</span>() { <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 获取指定 URI 对应数据的 MIME 类型</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指向所需数据的统一资源标识符</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回对应数据的 MIME 类型字符串，如果无法识别则返回 null</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getType</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>)</span></span>: String? { <br>        TODO(<span class=\"hljs-string\">\"Implement this to handle requests for the MIME type of the data at the given URI.\"</span>)<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 初始化内容提供者，在系统启动时调用</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 初始化成功返回 true，失败返回 false</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">()</span></span>: <span class=\"hljs-built_in\">Boolean</span> { <br>        TODO(<span class=\"hljs-string\">\"Implement this to initialize your content provider on startup.\"</span>)<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向内容提供者中插入新的数据行</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指定要插入数据的位置 URI</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> values 包含要插入数据的键值对集合</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回新插入数据行的 URI，插入失败则返回 null</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">insert</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, values: <span class=\"hljs-type\">ContentValues</span>?)</span></span>: Uri? { <br>        TODO(<span class=\"hljs-string\">\"Implement this to handle requests to insert a new row.\"</span>)<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 删除指定条件的数据行</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指定要删除数据的位置 URI</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selection SQL WHERE 子句，用于指定删除条件，null 表示删除所有行</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selectionArgs WHERE 子句中占位符对应的参数值数组</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回实际删除的数据行数量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">delete</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, selection: <span class=\"hljs-type\">String</span>?, selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">String</span>&gt;?)</span></span>: <span class=\"hljs-built_in\">Int</span> { <br>        TODO(<span class=\"hljs-string\">\"Implement this to handle requests to delete one or more rows.\"</span>)<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 查询满足条件的数据</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指定要查询数据的位置 URI</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> projection 要查询的列名数组，null 表示查询所有列</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selection SQL WHERE 子句，用于指定查询条件</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selectionArgs WHERE 子句中占位符对应的参数值数组</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> sortOrder 查询结果的排序方式</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回包含查询结果的 Cursor 对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">query</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, projection: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">String</span>&gt;?, selection: <span class=\"hljs-type\">String</span>?, selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">String</span>&gt;?, sortOrder: <span class=\"hljs-type\">String</span>?)</span></span>{ <br>        TODO(<span class=\"hljs-string\">\"Implement this to handle query requests from clients.\"</span>)<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 更新满足条件的数据行</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指定要更新数据的位置 URI</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> values 包含要更新数据的键值对集合</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selection SQL WHERE 子句，用于指定更新条件</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selectionArgs WHERE 子句中占位符对应的参数值数组</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回实际更新的数据行数量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">update</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, values: <span class=\"hljs-type\">ContentValues</span>?, selection: <span class=\"hljs-type\">String</span>?, selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">String</span>&gt;?)</span></span>: <span class=\"hljs-built_in\">Int</span> { <br>        TODO(<span class=\"hljs-string\">\"Implement this to handle requests to update one or more rows.\"</span>)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n<h4><span id=\"%E6%B3%A8%E5%86%8Ccontentprovider\">注册ContentProvider</span></h4><figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">provider</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\".MyContentProvider\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:authorities</span>=<span class=\"hljs-string\">\"com.example.myapplication.MyContentProvider\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:enabled</span>=<span class=\"hljs-string\">\"true\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">\"false\"</span> /&gt;</span><br><br></code></pre></td></tr></tbody></table></figure>\n\n<h4><span id=\"contentresolver\">ContentResolver</span></h4><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 测试ContentResolver的基本操作方法</span><br><span class=\"hljs-comment\"> * </span><br><span class=\"hljs-comment\"> * 该函数演示了如何使用ContentResolver进行数据的增删改查操作，</span><br><span class=\"hljs-comment\"> * 包括插入、删除、更新和查询数据</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">testContentResolver</span><span class=\"hljs-params\">()</span></span> { <br>    <span class=\"hljs-comment\">// 构造ContentProvider的URI地址</span><br>    <span class=\"hljs-keyword\">val</span> uri = Uri.parse(<span class=\"hljs-string\">\"content://com.example.myapplication.MyContentProvider/user\"</span>)<br>    <br>    <span class=\"hljs-comment\">// 创建要操作的数据内容值</span><br>    <span class=\"hljs-keyword\">val</span> value = ContentValues().apply { <br>        put(<span class=\"hljs-string\">\"user_id\"</span>, <span class=\"hljs-number\">1</span>)<br>        put(<span class=\"hljs-string\">\"user_name\"</span>, <span class=\"hljs-string\">\"张三\"</span>)<br>    }<br><br>    <span class=\"hljs-comment\">// 向ContentProvider中插入一条用户数据</span><br>    contentResolver.insert(uri, value)<br><br>    <span class=\"hljs-comment\">// 删除user_id为1的用户数据</span><br>    contentResolver.delete(uri, <span class=\"hljs-string\">\"user_id=?\"</span>, arrayOf(<span class=\"hljs-string\">\"1\"</span>))<br><br>    <span class=\"hljs-comment\">// 更新user_id为1的用户数据</span><br>    contentResolver.update(uri, value, <span class=\"hljs-string\">\"user_id=?\"</span>, arrayOf(<span class=\"hljs-string\">\"1\"</span>))<br><br>    <span class=\"hljs-comment\">// 查询所有用户数据，按user_id升序排列</span><br>    <span class=\"hljs-keyword\">val</span> cursor = contentResolver.query(uri, <br>        <span class=\"hljs-literal\">null</span>, <br>        <span class=\"hljs-literal\">null</span>, <br>        <span class=\"hljs-literal\">null</span>, <br>        <span class=\"hljs-string\">\"user_id ASC\"</span>)<br><br>    <span class=\"hljs-comment\">// 遍历查询结果并处理每条数据</span><br>    <span class=\"hljs-keyword\">while</span> (cursor?.moveToNext() == <span class=\"hljs-literal\">true</span>) { <br>        <span class=\"hljs-comment\">// 处理数据</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h4><span id=\"%E4%B8%89%E4%B8%AA%E8%BE%85%E5%8A%A9%E7%B1%BB\">三个辅助类</span></h4><ul>\n<li>ContentUris</li>\n<li>UriMatcher</li>\n<li>ContentObserver</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 通过ContentUris.withAppendedId方法将指定的ID追加到URI路径末尾</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> uri 原始URI</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> id 要追加的ID值</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@return</span> 返回追加ID后的新URI</span><br><span class=\"hljs-comment\"> */</span><br>ContentUris.withAppendedId(uri, id)<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 从URI中解析出ID值</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> uri 包含ID的URI</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@return</span> 返回解析出的ID值</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">val</span> id = ContentUris.parseId(uri)<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 创建UriMatcher实例用于URI匹配</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> code 当URI不匹配任何模式时返回的默认代码</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">val</span> uriMatcher = UriMatcher(UriMatcher.NO_MATCH)<br><br><span class=\"hljs-comment\">// 添加URI匹配模式：匹配\"user\"路径，匹配成功返回代码1</span><br>uriMatcher.addURI(<span class=\"hljs-string\">\"com.example.myapplication\"</span>, <span class=\"hljs-string\">\"user\"</span>, <span class=\"hljs-number\">1</span>)<br><br><span class=\"hljs-comment\">// 添加URI匹配模式：匹配\"user/#\"路径（#表示数字），匹配成功返回代码2</span><br>uriMatcher.addURI(<span class=\"hljs-string\">\"com.example.myapplication\"</span>, <span class=\"hljs-string\">\"user/#\"</span>, <span class=\"hljs-number\">2</span>)<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 自定义ContentObserver类，用于监听ContentProvider数据变化</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyContentObserver</span> : <span class=\"hljs-type\">ContentObserver</span>(<span class=\"hljs-literal\">null</span>) { <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当被监听的URI对应的数据发生变化时调用</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selfChange 如果为true表示数据变化是由当前进程引起的</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onChange</span><span class=\"hljs-params\">(selfChange: <span class=\"hljs-type\">Boolean</span>)</span></span> { <br>        <span class=\"hljs-keyword\">super</span>.onChange(selfChange)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h2><span id=\"%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6\">基本组件</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3><span id=\"textview-%E6%96%87%E6%9C%AC%E6%98%BE%E7%A4%BA%E6%8E%A7%E4%BB%B6\">TextView 文本显示控件</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4><span id=\"%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7\">布局属性</span></h4><figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">TextView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id/textView: 创建一个id<br>@id/textView: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>text</td>\n<td>显示的文本</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>textAllCaps</td>\n<td>是否将文本转换为大写</td>\n<td>true: 转换为大写<br>false: 不转换</td>\n</tr>\n<tr>\n<td>textSize</td>\n<td>文本的大小</td>\n<td>具体数值: 尺寸大小</td>\n</tr>\n<tr>\n<td>textColor</td>\n<td>文本的颜色</td>\n<td>@color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>textStyle</td>\n<td>文本的样式</td>\n<td>normal: 正常样式<br>bold: 加粗样式<br>italic: 斜体样式<br>bold_italic: 加粗斜体样式</td>\n</tr>\n<tr>\n<td>autoLink</td>\n<td>是否自动链接文本</td>\n<td>web: 自动链接网址<br>email: 自动链接邮箱地址<br>phone: 自动链接电话号码</td>\n</tr>\n<tr>\n<td>textColorHighlight</td>\n<td>文本高亮颜色</td>\n<td>@color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>drawableTop</td>\n<td>文本顶部图标</td>\n<td>@drawable/icon: 图标资源</td>\n</tr>\n<tr>\n<td>drawablePadding</td>\n<td>图标和文本之间的间距</td>\n<td>具体数值: 间距大小</td>\n</tr>\n<tr>\n<td>gravity</td>\n<td>文本的对齐方式</td>\n<td>center: 居中对齐<br>center_vertical: 垂直居中对齐<br>center_horizontal: 水平居中对齐<br>left: 左对齐<br>right: 右对齐<br>top: 顶部对齐<br>bottom: 底部对齐</td>\n</tr>\n<tr>\n<td>letterSpacing</td>\n<td>字符间距</td>\n<td>具体数值: 间距大小</td>\n</tr>\n<tr>\n<td>lineSpacingExtra</td>\n<td>行间距</td>\n<td>具体数值: 间距大小</td>\n</tr>\n<tr>\n<td>maxLines</td>\n<td>文本的最大行数</td>\n<td>具体数值: 行数</td>\n</tr>\n<tr>\n<td>ellipsize</td>\n<td>文本超出显示范围时如何显示</td>\n<td>start: 显示开头省略号<br>middle: 显示中间省略号<br>end: 显示末尾省略号<br>marquee: 滚动显示</td>\n</tr>\n</tbody></table>\n<h3><span id=\"button-%E6%8C%89%E9%92%AE\">Button 按钮</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4><span id=\"%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7\">布局属性</span></h4><figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageButton</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id/button: 创建一个id<br>@id/button: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>text</td>\n<td>显示的文本</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>background</td>\n<td>按钮的背景</td>\n<td>@drawable/button_background: 背景资源</td>\n</tr>\n<tr>\n<td>padding</td>\n<td>按钮的内边距</td>\n<td>具体数值: 内边距大小</td>\n</tr>\n<tr>\n<td>gravity</td>\n<td>按钮的文本对齐方式</td>\n<td>center: 居中对齐<br>center_vertical: 垂直居中对齐<br>center_horizontal: 水平居中对齐<br>left: 左对齐<br>right: 右对齐<br>top: 顶部对齐<br>bottom: 底部对齐</td>\n</tr>\n<tr>\n<td>contentDescription</td>\n<td><code>ImageButton</code>按钮的描述</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>src</td>\n<td><code>ImageButton</code>按钮的图标</td>\n<td>@drawable/icon: 图标资源</td>\n</tr>\n<tr>\n<td>drawableStart</td>\n<td>按钮的图标</td>\n<td>@drawable/icon: 图标资源</td>\n</tr>\n<tr>\n<td>drawablePadding</td>\n<td>图标和文本之间的间距</td>\n<td>具体数值: 间距大小</td>\n</tr>\n<tr>\n<td>enable</td>\n<td>按钮是否可用</td>\n<td>true: 可用<br>false: 不可用</td>\n</tr>\n<tr>\n<td>clickable</td>\n<td>按钮是否可点击</td>\n<td>true: 可点击<br>false: 不可点击</td>\n</tr>\n</tbody></table>\n<h4><span id=\"%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7\">代码添加属性</span></h4><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 1、设置按钮点击Toast提示</span><br>findViewById&lt;Button&gt;(R.id.button_click).setOnClickListener{<br>    <span class=\"hljs-comment\">// 显示Toast提示</span><br>    Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">\"点击了按钮\"</span>, Toast.LENGTH_SHORT).show()<br>}<br><br><span class=\"hljs-comment\">// 2、设置按钮长按Toast提示</span><br>findViewById&lt;Button&gt;(R.id.button_long_click).setOnLongClickListener{<br>    <span class=\"hljs-comment\">// 显示Toast提示</span><br>    Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">\"长按了按钮\"</span>, Toast.LENGTH_SHORT).show()<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"edittext-%E6%96%87%E6%9C%AC%E8%BE%93%E5%85%A5%E6%A1%86\">EditText 文本输入框</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4><span id=\"%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7\">布局属性</span></h4><figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">EditText</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id/editText: 创建一个id<br>@id/editText: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>hint</td>\n<td>输入框的提示文本</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>inputType</td>\n<td>输入框的类型</td>\n<td>text: 文本输入框<br>number: 数字输入框<br>phone: 电话输入框<br>datetime: 日期时间输入框<br>email: 邮箱输入框<br>textMultiLine: 多行文本输入框<br>textCapSentences: 首字母大写输入框<br>textCapWords: 单词首字母大写输入框<br>textCapCharacters: 全字母大写输入框<br>textNoSuggestions: 无建议输入框<br>textPassword: 密码输入框<br>textVisiblePassword: 可见密码输入框<br>textMultiLine: 多行文本输入框<br>textAutoCorrect: 自动修正输入框<br>textAutoComplete: 自动完成输入框<br>textWebEditText: 网页输入框<br>textUri: URI输入框<br>textEmailAddress: 邮箱地址输入框<br>textPostalAddress: 邮政编码输入框<br>textPersonName: 人名输入框<br>textShortMessage: 短消息输入框<br>textLongMessage: 长消息输入框<br>textFilter: 过滤输入框<br>textPhonetic: 音标输入框<br>textWebEmailAddress: 网页邮箱地址输入框<br>textWebPassword: 网页密码输入框</td>\n</tr>\n<tr>\n<td>maxLenght</td>\n<td>输入框的最大长度</td>\n<td>具体数值: 最大长度</td>\n</tr>\n<tr>\n<td>cursorVisible</td>\n<td>输入框的游标是否可见</td>\n<td>true: 可见<br>false: 不可见</td>\n</tr>\n<tr>\n<td>textColor</td>\n<td>输入框的文本颜色</td>\n<td>@color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>textColorHint</td>\n<td>输入框的提示文本颜色</td>\n<td>@color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>textColorHighlight</td>\n<td>输入框的文本高亮颜色</td>\n<td>@color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>digits</td>\n<td>输入框只能输入的字符</td>\n<td>具体数值: 输入内容</td>\n</tr>\n<tr>\n<td>imeOptions</td>\n<td>输入框的键盘(回车)完成按钮</td>\n<td>done: 完成按钮<br>go: 跳转按钮<br>next: 下一个按钮<br>search: 搜索按钮<br>send: 发送按钮</td>\n</tr>\n</tbody></table>\n<h4><span id=\"%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7\">代码添加属性</span></h4><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 1、设置输入过滤器，仅允许英文字符和数字输入</span><br><span class=\"hljs-keyword\">val</span> filter =InputFilter{ source: CharSequence?, start: <span class=\"hljs-built_in\">Int</span>, end: <span class=\"hljs-built_in\">Int</span>, dest: Spanned?, dstart: <span class=\"hljs-built_in\">Int</span>, dend: <span class=\"hljs-built_in\">Int</span> -&gt;<br>                <span class=\"hljs-keyword\">if</span>(!source.toString()<br>                        .matches(<span class=\"hljs-string\">\"[A-Za-z0-9]+\"</span>.toRegex())<br>                )<span class=\"hljs-keyword\">return</span><span class=\"hljs-symbol\">@InputFilter</span> <span class=\"hljs-string\">\"\"</span><br>                <span class=\"hljs-literal\">null</span><br>            }<br><span class=\"hljs-comment\">// 将过滤器应用到指定的EditText控件</span><br>findViewById&lt;EditText&gt;(R.id.set_filters).filters = arrayOf&lt;InputFilter&gt;(filter)<br><br><span class=\"hljs-comment\">// 2、设置文本检查器</span><br><span class=\"hljs-keyword\">val</span> et = findViewById&lt;EditText&gt;(R.id.add_text_changed_listener)<br>et.addTextChangedListener(<span class=\"hljs-keyword\">object</span> : TextWatcher {<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 文本改变前的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> s 当前文本内容</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> start 改变开始的位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> count 被改变的字符数量</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> after 改变后的字符数量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">beforeTextChanged</span><span class=\"hljs-params\">(s: <span class=\"hljs-type\">CharSequence</span>?, start: <span class=\"hljs-type\">Int</span>, count: <span class=\"hljs-type\">Int</span>, after: <span class=\"hljs-type\">Int</span>)</span></span> {<br>        <span class=\"hljs-comment\">// 可留空，如无逻辑需要</span><br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 文本改变时的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> s 当前文本内容</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> start 改变开始的位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> before 改变前的字符数量</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> count 改变后的字符数量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onTextChanged</span><span class=\"hljs-params\">(s: <span class=\"hljs-type\">CharSequence</span>?, start: <span class=\"hljs-type\">Int</span>, before: <span class=\"hljs-type\">Int</span>, count: <span class=\"hljs-type\">Int</span>)</span></span> {<br>        <span class=\"hljs-comment\">// 可留空，如无逻辑需要</span><br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 文本改变后的回调方法，用于验证输入内容是否符合要求</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> s 改变后的文本内容</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">afterTextChanged</span><span class=\"hljs-params\">(s: <span class=\"hljs-type\">Editable</span>?)</span></span> {<br>        <span class=\"hljs-comment\">// 验证输入内容是否只包含#$%字符</span><br>        <span class=\"hljs-keyword\">if</span> (!s.toString().matches(<span class=\"hljs-string\">\"[#$%]+\"</span>.toRegex())){<br>            et.error = <span class=\"hljs-string\">\"仅允许#$%\"</span><br>        }<br>    }<br>})<br><br><span class=\"hljs-comment\">// 3、设置焦点监听</span><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置EditText焦点变化监听器</span><br><span class=\"hljs-comment\"> * 用于处理EditText获取焦点和失去焦点时的UI变化</span><br><span class=\"hljs-comment\"> * 参数v: 发生焦点变化的View对象</span><br><span class=\"hljs-comment\"> * 参数hasFocus: 表示View是否获得焦点的布尔值</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">val</span> setOnFocusChangeListenerEt = findViewById&lt;EditText&gt;(R.id.set_on_focus_change_listener)<br>setOnFocusChangeListenerEt.setOnFocusChangeListener({ v, hasFocus -&gt;<br>    <span class=\"hljs-keyword\">if</span>(hasFocus){<br>        <span class=\"hljs-comment\">// 获取焦点时清空提示</span><br>        setOnFocusChangeListenerEt.setText(<span class=\"hljs-string\">\"\"</span>)<br>        setOnFocusChangeListenerEt.error = <span class=\"hljs-literal\">null</span><br>    } <span class=\"hljs-keyword\">else</span>{<br>        <span class=\"hljs-comment\">// 失去焦点时设置提示</span><br>        setOnFocusChangeListenerEt.error = <span class=\"hljs-string\">\"失去焦点了\"</span><br>    }<br>})<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"imageview-%E5%9B%BE%E7%89%87\">ImageView 图片</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4><span id=\"%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7\">布局属性</span></h4><figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id/imageView: 创建一个id<br>@id/imageView: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>adjustViewBounds</td>\n<td>图片是否适应控件</td>\n<td>true: 适应<br>false: 不适应</td>\n</tr>\n<tr>\n<td>contentDescription</td>\n<td>图片的描述</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>maxHeight</td>\n<td>图片的最大高度</td>\n<td>具体数值: 最大高度</td>\n</tr>\n<tr>\n<td>maxWidth</td>\n<td>图片的最大宽度</td>\n<td>具体数值: 最大宽度</td>\n</tr>\n<tr>\n<td>src</td>\n<td>图片的资源</td>\n<td>@drawable/image: 图片资源<br>@mipmap/image: 图片资源</td>\n</tr>\n<tr>\n<td>background</td>\n<td>图片的背景</td>\n<td>@color/colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>padding</td>\n<td>图片的内边距</td>\n<td>具体数值: 内边距大小</td>\n</tr>\n<tr>\n<td>cropToPadding</td>\n<td>图片是否剪切内边距</td>\n<td>true: 剪切<br>false: 不剪切</td>\n</tr>\n<tr>\n<td>scaleType</td>\n<td>图片的缩放类型</td>\n<td>fitXY: 填充父布局<br>fitStart: 适应内容并居左<br>fitCenter: 适应内容并居中<br>fitEnd: 适应内容并居右<br>center: 中心<br>centerCrop: 剪切并居中<br>centerInside: 适应内容并居中</td>\n</tr>\n</tbody></table>\n<h4><span id=\"%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7\">代码添加属性</span></h4><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 创建一个图形变换矩阵，用于对ImageView进行缩放变换</span><br><span class=\"hljs-comment\">// 设置X轴缩放比例为0.04，Y轴缩放比例为0.08</span><br><span class=\"hljs-comment\">// 将变换矩阵应用到ID为matrix的ImageView控件上</span><br><span class=\"hljs-keyword\">val</span> matrix = android.graphics.Matrix()<br>matrix.setScale(<span class=\"hljs-number\">0.04f</span>, <span class=\"hljs-number\">0.08f</span>)<br>findViewById&lt;ImageView&gt;(R.id.matrix).imageMatrix = matrix<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"progressbar-%E8%BF%9B%E5%BA%A6%E6%9D%A1\">ProgressBar 进度条</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4><span id=\"%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7\">布局属性</span></h4><figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ProgressBar</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id/progressBar: 创建一个id<br>@id/progressBar: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>style</td>\n<td>进度条样式</td>\n<td>?android:attr/progressBarStyleHorizontal: 水平直条样式<br>？android:attr/progressBarStyleSmall: 小尺寸圆形样式<br>？android:attr/progressBarStyleLarge: 大尺寸圆形样式<br>？android:attr/progressBarStyleInverse: 反向样式<br>？android:attr/progressBarStyleSmallInverse: 小尺寸反向样式<br>？android:attr/progressBarStyleLargeInverse: 大尺寸反向样式</td>\n</tr>\n<tr>\n<td>max</td>\n<td>进度条的最大值</td>\n<td>具体数值: 最大值</td>\n</tr>\n<tr>\n<td>progress</td>\n<td>进度条的当前进度</td>\n<td>具体数值: 当前进度</td>\n</tr>\n<tr>\n<td>secondaryProgress</td>\n<td>进度条的当前进度</td>\n<td>具体数值: 当前进度</td>\n</tr>\n<tr>\n<td>indeterminate</td>\n<td>进度条是否为不确定状态</td>\n<td>true: 不确定<br>false: 确定</td>\n</tr>\n<tr>\n<td>indeterminateDrawable</td>\n<td>进度条的不确定状态的图片</td>\n<td>@drawable/image: 图片资源<br>@mipmap/image: 图片资源</td>\n</tr>\n</tbody></table>\n<p>图片旋转样式</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    animated-rotate动画旋转组件</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    该组件用于创建一个旋转动画效果，将指定的drawable资源进行360度旋转</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    参数说明：</span><br><span class=\"hljs-comment\">    android:drawable - 指定要进行旋转动画的drawable资源引用</span><br><span class=\"hljs-comment\">    android:fromDegree - 动画开始时的旋转角度，单位为度</span><br><span class=\"hljs-comment\">    android:toDegree - 动画结束时的旋转角度，单位为度</span><br><span class=\"hljs-comment\">    android:pivotX - 旋转中心点的X轴坐标，50%表示在drawable宽度的中心位置</span><br><span class=\"hljs-comment\">    android:pivotY - 旋转中心点的Y轴坐标，50%表示在drawable高度的中心位置</span><br><span class=\"hljs-comment\">--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">animated-rotate</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:drawable</span>=<span class=\"hljs-string\">\"@drawable/p0\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:fromDegrees</span>=<span class=\"hljs-string\">\"0\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:pivotX</span>=<span class=\"hljs-string\">\"50%\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:pivotY</span>=<span class=\"hljs-string\">\"50%\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:toDegrees</span>=<span class=\"hljs-string\">\"360\"</span> /&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<h4><span id=\"%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7\">代码添加属性</span></h4><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> progress = findViewById&lt;ProgressBar&gt;(R.id.progress)<br><span class=\"hljs-comment\">// 启动一个后台线程来模拟进度更新</span><br>Thread{<br>    <span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-number\">0</span><br>    <span class=\"hljs-keyword\">while</span> (p &lt; <span class=\"hljs-number\">100</span>){<br>        Thread.sleep(<span class=\"hljs-number\">100</span>) <span class=\"hljs-comment\">// 每100毫秒更新一次进度</span><br>        p++<br>        <span class=\"hljs-comment\">// 在主线程中更新进度条UI</span><br>        runOnUiThread {<br>            progress.progress = p<br>            progress.secondaryProgress = (p + <span class=\"hljs-number\">5</span>)<br>        }<br>    }<br>}.start()<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"scrollview-%E6%BB%9A%E5%8A%A8\">ScrollView 滚动</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4><span id=\"%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7\">布局属性</span></h4><figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ScrollView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">布局标签</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">......</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">布局标签</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ScrollView</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">HorizontalScrollView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">布局标签</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">......</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">布局标签</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">HorizontalScrollView</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id/scrollView: 创建一个id<br>@id/scrollView: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局</td>\n</tr>\n<tr>\n<td>fillViewport</td>\n<td>滚动视图是否填充父布局</td>\n<td>true: 填充<br>false: 不填充</td>\n</tr>\n<tr>\n<td>scrollbars</td>\n<td>滚动条样式</td>\n<td>none: 无<br>horizontal: 水平滚动条<br>vertical: 垂直滚动条</td>\n</tr>\n<tr>\n<td>scrollbarSize</td>\n<td>滚动条大小</td>\n<td>具体数值: 滚动条大小</td>\n</tr>\n<tr>\n<td>scrollbarFadeDuration</td>\n<td>滚动条淡出时间</td>\n<td>具体数值: 淡出时间</td>\n</tr>\n<tr>\n<td>layout_weight</td>\n<td>控件的权重</td>\n<td>具体数值: 权重大小</td>\n</tr>\n<tr>\n<td>scrollbarStyle</td>\n<td>滚动条样式</td>\n<td>insideOverlay: 覆盖在内容上方<br>insideInset: 嵌入内容内<br>outsideOverlay: 覆盖在内容上方<br>outsideInset: 嵌入内容内</td>\n</tr>\n<tr>\n<td>requiresFadingEdge</td>\n<td>需要淡出边缘效果</td>\n<td>vertical: 垂直<br>horizontal: 水平</td>\n</tr>\n<tr>\n<td>fadingEdgeLength</td>\n<td>淡出边缘长度</td>\n<td>具体数值: 淡出边缘长度</td>\n</tr>\n<tr>\n<td>overScrollMode</td>\n<td>滚动模式</td>\n<td>never: 不允许滚动<br>always: 允许滚动<br>ifContentScrolls: 内容滚动时允许滚动</td>\n</tr>\n</tbody></table>\n<h4><span id=\"%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7\">代码添加属性</span></h4><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 在滚动视图中添加内容</span><br><br><span class=\"hljs-comment\">// 获取垂直线性布局容器</span><br><span class=\"hljs-keyword\">val</span> vsvc = findViewById&lt;LinearLayout&gt;(R.id.vsvc)<br><br><span class=\"hljs-comment\">// 循环创建50个TextView并添加到布局中</span><br><span class=\"hljs-keyword\">for</span> (i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">1</span> .. <span class=\"hljs-number\">50</span>){<br>    <span class=\"hljs-comment\">// 创建并配置TextView样式</span><br>    <span class=\"hljs-keyword\">val</span> textView = TextView(<span class=\"hljs-keyword\">this</span>).apply{<br>        text = <span class=\"hljs-string\">\"动态添加的 TextView <span class=\"hljs-variable\">$i</span>\"</span><br>        textSize = <span class=\"hljs-number\">16f</span><br>        setTextColor(Color.BLACK)<br>        setPadding(<span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">10</span>)<br>    }<br><br>    <span class=\"hljs-comment\">// 设置布局参数，配置上下边距</span><br>    <span class=\"hljs-keyword\">val</span> params = LinearLayout.LayoutParams(<br>        LinearLayout.LayoutParams.MATCH_PARENT,<br>        LinearLayout.LayoutParams.WRAP_CONTENT<br>    ).apply {<br>        topMargin = <span class=\"hljs-number\">5</span><br>    }<br>    textView.layoutParams = params<br><br>    <span class=\"hljs-comment\">// 将TextView添加到父布局中</span><br>    vsvc.addView(textView)<br>}<br><br><br><span class=\"hljs-comment\">// 获取水平滚动视图中的线性布局容器</span><br><span class=\"hljs-keyword\">val</span> hsvc = findViewById&lt;LinearLayout&gt;(R.id.hsvc)<br><br><span class=\"hljs-comment\">// 设置水平滚动视图的滚动监听器，用于监听滚动位置变化</span><br>findViewById&lt;HorizontalScrollView&gt;(R.id.hsv).setOnScrollChangeListener({v, scrollX, scrollY, oldScrollX, oldScrollY -&gt;<br>    Log.d(TAG, <span class=\"hljs-string\">\"ScrollX: <span class=\"hljs-variable\">$scrollX</span>, ScrollY: <span class=\"hljs-variable\">$scrollY</span>, oldScrollX: <span class=\"hljs-variable\">$oldScrollX</span>, oldScrollY: <span class=\"hljs-variable\">$oldScrollY</span>\"</span>)<br>})<br><br><span class=\"hljs-comment\">// 循环创建50个TextView并添加到水平滚动布局中</span><br><span class=\"hljs-keyword\">for</span>(i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">1</span> .. <span class=\"hljs-number\">50</span>){<br>    <span class=\"hljs-keyword\">val</span> textView = TextView(<span class=\"hljs-keyword\">this</span>).apply {<br>        text = <span class=\"hljs-string\">\"第 <span class=\"hljs-variable\">$i</span> 个\"</span><br>        textSize = <span class=\"hljs-number\">16f</span><br>        setTextColor(Color.BLACK)<br>        setBackgroundColor(Color.WHITE)<br>        setPadding(<span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">10</span>)<br>    }<br><br>    <span class=\"hljs-comment\">// 设置TextView的布局参数，包括上下边距和右边距</span><br>    <span class=\"hljs-keyword\">val</span> params = LinearLayout.LayoutParams(<br>        LinearLayout.LayoutParams.WRAP_CONTENT,<br>        LinearLayout.LayoutParams.WRAP_CONTENT<br>    ).apply {<br>        topMargin = <span class=\"hljs-number\">100</span><br>        rightMargin = <span class=\"hljs-number\">20</span><br>    }<br>    textView.layoutParams = params<br>    hsvc.addView(textView)<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"recyclerview-%E5%AE%B9%E5%99%A8\">RecyclerView 容器</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4><span id=\"%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6\">核心组件</span></h4><table>\n<thead>\n<tr>\n<th>组件</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Adapter</td>\n<td>数据与视图绑定，创建ViewHolder，绑定数据到视图</td>\n</tr>\n<tr>\n<td>ViewHolder</td>\n<td>缓存视图引用，存储item布局中的控件引用</td>\n</tr>\n<tr>\n<td>LayoutManager</td>\n<td>定义布局方式，如垂直或水平，以及如何排列item</td>\n</tr>\n<tr>\n<td>ItemDecoration</td>\n<td>定义item的装饰，如分割线，边框，背景颜色等</td>\n</tr>\n<tr>\n<td>ItemAnimator</td>\n<td>定义item的动画，如插入，删除，移动，改变大小等</td>\n</tr>\n</tbody></table>\n<h4><span id=\"%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96\">引入依赖</span></h4><ol>\n<li>在模组的 build.gradle文件中添加以下依赖项：</li>\n</ol>\n<figure class=\"highlight gradle\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs gradle\"><span class=\"hljs-comment\">// 添加RecyclerView依赖</span><br><span class=\"hljs-keyword\">dependencies</span> {<br>    implementation(libs.androidx.recyclerview)<br>}<br><span class=\"hljs-comment\">// 若添加失败尝试添加以下依赖项</span><br><span class=\"hljs-keyword\">dependencies</span> {<br>    implementation(<span class=\"hljs-string\">\"androidx.recyclerview:recyclerview:1.3.2\"</span>)<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"2\">\n<li>在项目级gradle.properties文件中添加网络代理<figure class=\"highlight properties\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs properties\"><span class=\"hljs-attr\">android.useAndroidX</span>=<span class=\"hljs-string\">true</span><br><span class=\"hljs-attr\">android.enableJetifier</span>=<span class=\"hljs-string\">true</span><br><br><span class=\"hljs-attr\">systemProp.http.proxyHost</span>=<span class=\"hljs-string\">http://127.0.0.1:端口号</span><br></code></pre></td></tr></tbody></table></figure></li>\n<li>sync now</li>\n</ol>\n<h4><span id=\"%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7\">布局属性</span></h4><figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">androidx.recyclerview.widget.RecyclerView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">\"属性值\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id/recyclerView: 创建一个id<br>@id/recyclerView: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局</td>\n</tr>\n</tbody></table>\n<h4><span id=\"recyclerview%E7%9A%84%E4%BD%BF%E7%94%A8\">RecyclerView的使用</span></h4><ol>\n<li>添加依赖</li>\n<li>布局Activity</li>\n<li>创建Item布局<ol>\n<li>recycler_img_item.xml <figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">\"1.0\"</span> encoding=<span class=\"hljs-string\">\"utf-8\"</span>?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">LinearLayout</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"match_parent\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:orientation</span>=<span class=\"hljs-string\">\"horizontal\"</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">\"@drawable/p0\"</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">\"@drawable/p0\"</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">\"@drawable/p0\"</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">\"@drawable/p0\"</span>/&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">LinearLayout</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure></li>\n<li>recycler_text_item.xml <figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">\"1.0\"</span> encoding=<span class=\"hljs-string\">\"utf-8\"</span>?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">LinearLayout</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"match_parent\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:orientation</span>=<span class=\"hljs-string\">\"horizontal\"</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"80dp\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">\"@drawable/p0\"</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">LinearLayout</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:orientation</span>=<span class=\"hljs-string\">\"vertical\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_marginLeft</span>=<span class=\"hljs-string\">\"20dp\"</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">TextView</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">\"@+id/item_title\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:text</span>=<span class=\"hljs-string\">\"我是标题\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textColor</span>=<span class=\"hljs-string\">\"#FF000000\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textStyle</span>=<span class=\"hljs-string\">\"bold\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textSize</span>=<span class=\"hljs-string\">\"18sp\"</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">TextView</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">\"@+id/item_text\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_marginTop</span>=<span class=\"hljs-string\">\"20dp\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textColor</span>=<span class=\"hljs-string\">\"#FF000000\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textSize</span>=<span class=\"hljs-string\">\"18dp\"</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">LinearLayout</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">LinearLayout</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure></li>\n</ol>\n</li>\n<li>实现Adapter &amp; ViewHolder <figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置Activity的内容视图，并初始化RecyclerView及其相关组件。</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> layoutResID 布局资源ID，用于设置Activity的界面布局。</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">setContentView</span><span class=\"hljs-params\">(layoutResID: <span class=\"hljs-type\">Int</span>)</span></span> {<br>    <span class=\"hljs-keyword\">super</span>.setContentView(layoutResID)<br><br>    <span class=\"hljs-keyword\">val</span> recyclerView = findViewById&lt;RecyclerView&gt;(R.id.recyclerView)<br>    <span class=\"hljs-comment\">// 设置RecyclerView的布局管理器为垂直方向的瀑布流布局，列数为1（即线性布局效果）</span><br>    recyclerView?.setLayoutManager(<br>        StaggeredGridLayoutManager(<br>            <span class=\"hljs-number\">1</span>,<br>            StaggeredGridLayoutManager.VERTICAL<br>        )<br>    )<br>    <span class=\"hljs-comment\">// 初始化数据源，添加101个字符串项</span><br>    <span class=\"hljs-keyword\">val</span> <span class=\"hljs-keyword\">data</span> = mutableListOf&lt;String?&gt;()<br>    <span class=\"hljs-keyword\">for</span> (i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0.</span><span class=\"hljs-number\">.100</span>) {<br>        <span class=\"hljs-keyword\">data</span>.add(<span class=\"hljs-string\">\"Item <span class=\"hljs-variable\">$i</span>\"</span>)<br>    }<br>    <span class=\"hljs-comment\">// 创建并设置适配器</span><br>    <span class=\"hljs-keyword\">val</span> adapter = MyAdapter(<span class=\"hljs-keyword\">data</span>)<br>    recyclerView?.setAdapter(adapter)<br>    <span class=\"hljs-comment\">// 添加分割线装饰</span><br>    recyclerView?.addItemDecoration(DividerItemDecoration(<span class=\"hljs-keyword\">this</span>, LinearLayoutManager.VERTICAL))<br>    <span class=\"hljs-comment\">// 设置默认的动画效果</span><br>    recyclerView?.itemAnimator = DefaultItemAnimator()<br>}<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * RecyclerView的适配器类，用于绑定不同类型的数据到视图上。</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@property</span> data 数据源列表，包含要显示的字符串数据。</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyAdapter</span>(<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> <span class=\"hljs-keyword\">data</span>: MutableList&lt;String?&gt;) :<br>    RecyclerView.Adapter&lt;MyAdapter.ViewHolder?&gt;(){<br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span>{<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> VIEW_TYPE_TEXT = <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> VIEW_TYPE_IMG = <span class=\"hljs-number\">2</span><br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 根据位置返回不同的视图类型。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> position 当前项在数据集中的位置。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回视图类型标识符（VIEW_TYPE_TEXT 或 VIEW_TYPE_IMG）。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getItemViewType</span><span class=\"hljs-params\">(position: <span class=\"hljs-type\">Int</span>)</span></span>: <span class=\"hljs-built_in\">Int</span>{<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">if</span> (position % <span class=\"hljs-number\">2</span> == <span class=\"hljs-number\">0</span>) VIEW_TYPE_TEXT <span class=\"hljs-keyword\">else</span> VIEW_TYPE_IMG<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 创建一个新的ViewHolder实例。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> parent 父容器ViewGroup。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> viewType 视图类型标识符。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回新创建的ViewHolder对象。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreateViewHolder</span><span class=\"hljs-params\">(parent: <span class=\"hljs-type\">ViewGroup</span>, viewType: <span class=\"hljs-type\">Int</span>)</span></span>: MyAdapter.ViewHolder {<br>        <span class=\"hljs-keyword\">val</span> view : View<br>        <span class=\"hljs-comment\">// 根据视图类型加载不同的布局文件</span><br>        <span class=\"hljs-keyword\">if</span>(viewType == VIEW_TYPE_TEXT){<br>            view = LayoutInflater.from(parent.getContext())<br>                .inflate(R.layout.recycler_text_item, parent, <span class=\"hljs-literal\">false</span>)<br>            view.tag = VIEW_TYPE_TEXT<br>        } <span class=\"hljs-keyword\">else</span>{<br>            view = LayoutInflater.from(parent.getContext())<br>                .inflate(R.layout.recycler_img_item, parent, <span class=\"hljs-literal\">false</span>)<br>            view.tag = VIEW_TYPE_IMG<br>        }<br>        <span class=\"hljs-keyword\">return</span> ViewHolder(view, <span class=\"hljs-keyword\">data</span>, <span class=\"hljs-keyword\">this</span>)<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 将数据绑定到指定位置的ViewHolder上。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> holder 要绑定数据的ViewHolder。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> position 数据在列表中的位置。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onBindViewHolder</span><span class=\"hljs-params\">(holder: <span class=\"hljs-type\">ViewHolder</span>, position: <span class=\"hljs-type\">Int</span>)</span></span> {<br>        holder.setText(<span class=\"hljs-keyword\">data</span>.<span class=\"hljs-keyword\">get</span>(position))<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 返回数据集合的大小。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 数据集合的元素数量。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getItemCount</span><span class=\"hljs-params\">()</span></span>: <span class=\"hljs-built_in\">Int</span> {<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">data</span>.size<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * ViewHolder类，用于持有RecyclerView中每个子项的视图引用。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@property</span> itemView 子项的根视图。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@property</span> dataList 数据源列表。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@property</span> adapter 所属的适配器实例。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ViewHolder</span>(itemView: View, <span class=\"hljs-keyword\">var</span> dataList: MutableList&lt;String?&gt;, <span class=\"hljs-keyword\">val</span> adapter: MyAdapter) : RecyclerView.ViewHolder(itemView){<br>        <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">         * 设置文本内容并处理点击事件。</span><br><span class=\"hljs-comment\">         *</span><br><span class=\"hljs-comment\">         * <span class=\"hljs-doctag\">@param</span> text 要设置的文本内容。</span><br><span class=\"hljs-comment\">         */</span><br>        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">setText</span><span class=\"hljs-params\">(text: <span class=\"hljs-type\">String</span>?)</span></span>{<br>            <span class=\"hljs-keyword\">if</span>(itemView.tag == VIEW_TYPE_TEXT){<br>                itemView.findViewById&lt;TextView&gt;(R.id.item_text).text = text<br>                <span class=\"hljs-comment\">// 文本类型项点击时移除第一个元素</span><br>                itemView.setOnClickListener {<br>                    <span class=\"hljs-keyword\">if</span> (dataList.isNotEmpty()){<br>                        dataList.removeAt(<span class=\"hljs-number\">0</span>)<br>                        adapter.notifyItemRemoved(<span class=\"hljs-number\">0</span>)<br>                    }<br>                }<br>            }<span class=\"hljs-keyword\">else</span> {<br>                <span class=\"hljs-comment\">// 图片类型项点击时更新第一个元素的内容</span><br>                itemView.setOnClickListener {<br>                    dataList[<span class=\"hljs-number\">0</span>] =  <span class=\"hljs-string\">\"Item <span class=\"hljs-subst\">${(<span class=\"hljs-number\">0.</span><span class=\"hljs-number\">.100</span>).random()}</span>\"</span><br>                    adapter.notifyItemChanged(<span class=\"hljs-number\">0</span>)<br>                }<br>            }<br>        }<br>    }<br><br><br>}<br></code></pre></td></tr></tbody></table></figure></li>\n<li>在Activity &amp; Fragment中调用</li>\n</ol>\n<h2><span id=\"%E5%B8%83%E5%B1%80\">布局</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>Android的布局过程是ui构建的核心环节，本质是 <strong>视图树(View Hierarchy)</strong> 中每个 <strong>节点(View)</strong> 确定自身以及其子元素尺寸和位置的过程</p>\n<h3><span id=\"%E6%B5%8B%E9%87%8F%E5%92%8C%E5%B8%83%E5%B1%80\">测量和布局</span></h3><ol>\n<li>测量 Measure<ul>\n<li>遍历子视图<ul>\n<li>跳过View.GONE</li>\n<li>对其他子视图调用 measureChildWithMargins()</li>\n</ul>\n</li>\n<li>计算最大子视图尺寸<ul>\n<li>宽度：measureWidth + marginLeft + marginRight 的最大值</li>\n<li>高度：measureHeight + marginTop + marginBottom 的最大值</li>\n</ul>\n</li>\n<li>处理自身尺寸<ul>\n<li>最终宽度 = max(子视图最大宽度，背景最小宽度，建议最小宽度) + paddingLeft + paddingRight</li>\n<li>最终高度 = max(子视图最大高度，背景最小高度，建议最小高度) + paddingTop + paddingBottom</li>\n<li>结果还需满足父视图传入的MeasureSpec</li>\n</ul>\n</li>\n<li>处理特殊子视图：设置了layout_gravity需重新测量调整位置</li>\n</ul>\n</li>\n<li>布局 Layout<ul>\n<li>确定布局区域 </li>\n<li>遍历子视图</li>\n</ul>\n</li>\n</ol>\n<h3><span id=\"framelayout\">FrameLayout</span></h3><p>核心价值在于通过<strong>layout_gravity</strong>实现子视图的精准叠加定位</p>\n<h4><span id=\"%E8%87%AA%E8%BA%AB%E5%B1%9E%E6%80%A7\">自身属性</span></h4><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_width</td>\n<td>视图宽度</td>\n<td>match_parent:匹配父视图宽度<br>wrap_content:包裹内容宽度<br>具体数值:具体数值</td>\n</tr>\n<tr>\n<td>android:layout_height</td>\n<td>视图高度</td>\n<td>match_parent:匹配父视图高度<br>wrap_content:包裹内容高度<br>具体数值:具体数值</td>\n</tr>\n<tr>\n<td>android:layout_gravity</td>\n<td>视图对齐方式</td>\n<td>left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐<br>可以通过竖杠连接多个值</td>\n</tr>\n<tr>\n<td>android:background</td>\n<td>视图背景</td>\n<td>颜色值:颜色值<br>图片:图片路径</td>\n</tr>\n<tr>\n<td>android:foreground</td>\n<td>视图前景</td>\n<td>颜色值:颜色值<br>图片:图片路径</td>\n</tr>\n<tr>\n<td>android:foregroundGravity</td>\n<td>视图前景对齐方式</td>\n<td>left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐</td>\n</tr>\n</tbody></table>\n<h4><span id=\"%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7\">子视图属性</span></h4><p>子视图默认排列在FrameLayout的左上角，且允许堆叠<br>最终位置为对其方式并加上边距值后的位置</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_gravity</td>\n<td>子视图对齐方式</td>\n<td>left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐</td>\n</tr>\n<tr>\n<td>android:layout_marginStart</td>\n<td>子视图左边距</td>\n<td>单位:dp</td>\n</tr>\n<tr>\n<td>android:layout_marginEnd</td>\n<td>子视图右边距</td>\n<td>单位:dp</td>\n</tr>\n<tr>\n<td>android:layout_marginTop</td>\n<td>子视图上边距</td>\n<td>单位:dp</td>\n</tr>\n<tr>\n<td>android:layout_marginBottom</td>\n<td>子视图下边距</td>\n<td>单位:dp</td>\n</tr>\n</tbody></table>\n<h3><span id=\"linearlayout\">LinearLayout</span></h3><p>核心优势在于<strong>方向性排列</strong>和<strong>权重分配</strong>，适合构建列表、表单等结构性界面，但嵌套或频繁使用layout_weight属性可能会导致<strong>性能问题</strong>。</p>\n<h4><span id=\"%E8%87%AA%E8%BA%AB%E5%B1%9E%E6%80%A7\">自身属性</span></h4><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>android:orientation</strong></td>\n<td>排列方向</td>\n<td>horizontal：水平排列<br>vertical：垂直排列</td>\n</tr>\n<tr>\n<td>android:layout_width</td>\n<td>宽度</td>\n<td>match_parent：填充父布局<br>wrap_content：内容自适应<br>具体数值</td>\n</tr>\n<tr>\n<td>android:layout_height</td>\n<td>高度</td>\n<td>match_parent：填充父布局<br>wrap_content：内容自适应<br>具体数值</td>\n</tr>\n<tr>\n<td>android:background</td>\n<td>背景</td>\n<td>颜色值</td>\n</tr>\n<tr>\n<td>android:gravity</td>\n<td>子视图对齐方式</td>\n<td>center：居中<br>center_vertical：垂直居中<br>center_horizontal：水平居中<br>left：左对齐<br>right：右对齐<br>top：上对齐<br>bottom：下对齐</td>\n</tr>\n<tr>\n<td>android:layout_gravity</td>\n<td>子视图在父容器对齐方式</td>\n<td>center：居中<br>center_vertical：垂直居中<br>center_horizontal：水平居中<br>left：左对齐<br>right：右对齐<br>top：上对齐<br>bottom：下对齐</td>\n</tr>\n<tr>\n<td>android:layout_marginTop</td>\n<td>设置子视图与父容器顶部的距离</td>\n<td>单位：dp</td>\n</tr>\n<tr>\n<td>android:layout_marginBottom</td>\n<td>设置子视图与父容器底部的距离</td>\n<td>单位：dp</td>\n</tr>\n<tr>\n<td>android:layout_marginLeft</td>\n<td>设置子视图与父容器左侧的距离</td>\n<td>单位：dp</td>\n</tr>\n<tr>\n<td>android:layout_marginRight</td>\n<td>设置子视图与父容器右侧的距离</td>\n<td>单位：dp</td>\n</tr>\n<tr>\n<td><em><strong>android:divider</strong></em></td>\n<td>设置ListView的分割线</td>\n<td>drawable资源文件</td>\n</tr>\n<tr>\n<td>android:showDividers</td>\n<td>设置ListView的分割线显示位置</td>\n<td>none：不显示；beginning：开头；middle：中间；end：结尾</td>\n</tr>\n<tr>\n<td><strong>android:weightSum</strong></td>\n<td>设置LinearLayout的权重和</td>\n<td>float类型</td>\n</tr>\n</tbody></table>\n<ul>\n<li>分割线示例<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">\"1.0\"</span> encoding=<span class=\"hljs-string\">\"utf-8\"</span>?&gt;</span><br><br>    这是一个Android Drawable资源文件，用于定义分割线<br><br>    主要功能：<br>    - 创建一个1x1像素的红色矩形drawable<br>    - 用于创建分割线<br><br>    属性说明：<br>    - android:shape=\"rectangle\": 指定形状为矩形<br>    - android:width=\"1dp\" 和 android:height=\"1dp\": 设置形状尺寸为1x1像素<br>    - android:color=\"#FF0000\": 设置填充颜色为纯红色<br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">shape</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:shape</span>=<span class=\"hljs-string\">\"rectangle\"</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">size</span> <span class=\"hljs-attr\">android:width</span>=<span class=\"hljs-string\">\"1dp\"</span> <span class=\"hljs-attr\">android:height</span>=<span class=\"hljs-string\">\"1dp\"</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">solid</span> <span class=\"hljs-attr\">android:color</span>=<span class=\"hljs-string\">\"#FF0000\"</span>/&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">shape</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure></li>\n</ul>\n<h4><span id=\"%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7\">子视图属性</span></h4><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_gravity</td>\n<td>设置子视图在父视图中的对齐方式</td>\n<td>left:左对齐<br>right:右对齐<br>center:居中对齐<br>fill:填充父视图</td>\n</tr>\n<tr>\n<td>android:layout_weight</td>\n<td>设置子视图在父视图中的权重</td>\n<td>根据父视图的weightSum值来分配空间，默认weightSum为4，<strong>需要将layout_width或layout_height设置为0dp</strong></td>\n</tr>\n</tbody></table>\n<h3><span id=\"relativelayout\">RelativeLayout</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>是基于相对位置关系的布局容器，通过定义子视图相对于父容器或同级视图的位置来组织界面元素</p>\n<h4><span id=\"%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7\">子视图属性</span></h4><ol>\n<li>对齐父容器边</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>描述</th>\n<th>属性</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_alignParentStart</td>\n<td>设置视图与父容器起始边对齐</td>\n<td>true:启用左对齐<br>false:禁用左对齐</td>\n</tr>\n<tr>\n<td>android:layout_alignParentEnd</td>\n<td>设置视图与父容器结束边对齐</td>\n<td>true:启用右对齐<br>false:禁用右对齐</td>\n</tr>\n<tr>\n<td>android:layout_alignParentTop</td>\n<td>设置视图与父容器顶部对齐</td>\n<td>true:启用顶部对齐<br>false:禁用顶部对齐</td>\n</tr>\n<tr>\n<td>android:layout_alignParentBottom</td>\n<td>设置视图与父容器底部对齐</td>\n<td>true:启用底部对齐<br>false:禁用底部对齐</td>\n</tr>\n</tbody></table>\n<ol start=\"2\">\n<li>方向位置</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>描述</th>\n<th>属性</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_toRightOf/ android:layout_toEndOf</td>\n<td>设置视图相对于某个视图的右侧对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_toLeftOf/ android:layout_toStartOf</td>\n<td>设置视图相对于某个视图的左侧对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_below</td>\n<td>设置视图相对于某个视图的底部对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_above</td>\n<td>设置视图相对于某个视图的顶部对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n<ol start=\"3\">\n<li>边缘对齐</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>描述</th>\n<th>属性</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_alignTop</td>\n<td>设置视图与某个视图的顶部对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_alignBottom</td>\n<td>设置视图与某个视图的底部对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_alignLeft</td>\n<td>设置视图与某个视图的左侧对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_alignRight</td>\n<td>设置视图与某个视图的右侧对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_baseline</td>\n<td>设置视图的基线与指定视图的基线对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n<ol start=\"4\">\n<li>居中控制</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>描述</th>\n<th>属性</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_centerInParent</td>\n<td>设置视图在父容器中居中显示</td>\n<td>true:启用居中显示<br>false:禁用居中显示</td>\n</tr>\n<tr>\n<td>layout_centerHorizontal</td>\n<td>垂直居中</td>\n<td>true:启用垂直居中<br>false:禁用垂直居中</td>\n</tr>\n<tr>\n<td>layout_centerVertical</td>\n<td>水平居中</td>\n<td>true:启用水平居中<br>false:禁用水平居中</td>\n</tr>\n</tbody></table>\n<h3><span id=\"constraintlayout\">ConstraintLayout</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>用于构建复杂界面的灵活布局容器，通过 <strong>约束关系(Constraint)</strong> 精准控制子视图的相对位置和尺寸，相比传统布局能有效减少嵌套层级，<strong>提升性能</strong></p>\n<h4><span id=\"%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7\">子视图属性</span></h4><ol>\n<li><p>基本约束属性</p>\n<ul>\n<li><p>水平方向</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintLeft_toLeftOf</td>\n<td>左对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintLeft_toRightOf</td>\n<td>设置视图左侧在目标右侧</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintRight_toLeftOf</td>\n<td>设置视图右侧在目标左侧</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintRight_toRightOf</td>\n<td>右对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintStart_toStartOf</td>\n<td>起始边对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintStart_toEndOf</td>\n<td>起始边在目标结束边</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintEnd_toStartOf</td>\n<td>结束边在目标起始边</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintEnd_toEndOf</td>\n<td>结束边对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n</li>\n<li><p>垂直方向</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintTop_toTopOf</td>\n<td>顶部对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintTop_toBottomOf</td>\n<td>顶部在目标底部</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintBottom_toTopOf</td>\n<td>底部在目标顶部</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintBottom_toBottomOf</td>\n<td>底部对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n</li>\n<li><p>特殊对齐</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintBaseline_toBaselineOf</td>\n<td>文本基线对齐</td>\n<td>@+id/viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n<li><p>边距尺寸约束</p>\n<ul>\n<li><p>常规边距</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_marginStart</td>\n<td>设置视图起始边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginEnd</td>\n<td>设置视图结束边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginTop</td>\n<td>顶部边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginBottom</td>\n<td>底部边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginLeft</td>\n<td>左侧边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginRight</td>\n<td>右侧边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n</tbody></table>\n</li>\n<li><p>目标隐藏时的边距(约束目标变为GONE时生效)</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_goneMarginRight</td>\n<td>目标隐藏时右侧边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 = 目标宽度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginLeft</td>\n<td>目标隐藏时左侧边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 = 目标宽度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginTop</td>\n<td>顶部边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 = 目标高度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginBottom</td>\n<td>底部边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 = 目标高度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginStart</td>\n<td>启动边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 = 宽度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginEnd</td>\n<td>结束边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 = 宽度 + 目标margin</strong></td>\n</tr>\n</tbody></table>\n</li>\n<li><p>特殊尺寸值：0dp(即MATCH_CONSTRAINT，根据约束条件拓展)；wrap_content(自适应内容，可配合强制约束)</p>\n</li>\n<li><p>比例与限制</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintDimensionRatio</td>\n<td>宽高比</td>\n<td>1:1:宽高比为1:1</td>\n</tr>\n<tr>\n<td>app:layout_constrainedWidth</td>\n<td>强制宽度限制</td>\n<td>true:宽度限制<br>false:宽度不限制</td>\n</tr>\n<tr>\n<td>app:layout_constrainedHeight</td>\n<td>强制高度限制</td>\n<td>true:高度限制<br>false:高度不限制</td>\n</tr>\n<tr>\n<td>android:minWidth</td>\n<td>设置视图最小宽度</td>\n<td>0dp:无最小宽度</td>\n</tr>\n<tr>\n<td>android:minHeight</td>\n<td>设置视图最小高度</td>\n<td>0dp:无最小高度</td>\n</tr>\n<tr>\n<td>android:maxWidth</td>\n<td>设置视图最大宽度</td>\n<td>0dp:无最大宽度</td>\n</tr>\n<tr>\n<td>android:maxHeight</td>\n<td>设置视图最大高度</td>\n<td>0dp:无最大高度</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n<li><p>链式布局</p>\n</li>\n</ol>\n<p>第一个元素的app:layout_constraintLeft_toLeftOf属性为parent，最后一个元素的app:layout_constraintRight_toRightOf属性为parent，中间的元素的app:layout_constraintLeft_toRightOf属性为前一个元素，app:layout_constraintRight_toLeftOf属性为后一个元素，即<strong>双向连接</strong></p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintHorizontal_chainStyle</td>\n<td>水平链式布局样式</td>\n<td>spread:均分<br>packed:均分且居中紧凑<br>spread_inside:均分且两侧紧贴父容器</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--链式布局--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--spread--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        Button控件button5的布局定义</span><br><span class=\"hljs-comment\">        该按钮参与水平链式约束，与button6、button7形成水平链条</span><br><span class=\"hljs-comment\">        左侧对齐父容器左侧，右侧对齐到button6的左侧</span><br><span class=\"hljs-comment\">        顶部位置在ratio控件的下方</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">\"@+id/button5\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:text</span>=<span class=\"hljs-string\">\"button5\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintHorizontal_chainStyle</span>=<span class=\"hljs-string\">\"spread\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintLeft_toLeftOf</span>=<span class=\"hljs-string\">\"parent\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintRight_toLeftOf</span>=<span class=\"hljs-string\">\"@+id/button6\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"hljs-string\">\"@id/ratio\"</span>/&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        Button控件button6的布局定义</span><br><span class=\"hljs-comment\">        该按钮是水平链条的中间元素</span><br><span class=\"hljs-comment\">        左侧对齐到button5的右侧，右侧对齐到button7的左侧</span><br><span class=\"hljs-comment\">        顶部位置与button5对齐</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">\"@+id/button6\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:text</span>=<span class=\"hljs-string\">\"button6\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintLeft_toRightOf</span>=<span class=\"hljs-string\">\"@+id/button5\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintRight_toLeftOf</span>=<span class=\"hljs-string\">\"@id/button7\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"hljs-string\">\"@id/button5\"</span>/&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        Button控件button7的布局定义</span><br><span class=\"hljs-comment\">        该按钮是水平链条的最后一个元素</span><br><span class=\"hljs-comment\">        左侧对齐到button6的右侧，右侧对齐到父容器右侧</span><br><span class=\"hljs-comment\">        顶部位置与button5对齐</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">\"@+id/button7\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:text</span>=<span class=\"hljs-string\">\"button7\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"hljs-string\">\"@id/button5\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintLeft_toRightOf</span>=<span class=\"hljs-string\">\"@id/button6\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintRight_toRightOf</span>=<span class=\"hljs-string\">\"parent\"</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"4\">\n<li>权重分配</li>\n</ol>\n<p>通过结合链式布局和权重属性，实现权重分配，父容器默认权重总和为4</p>\n<p>此外，也可以通过结合layout_constraintLeft_toLeftOf、layout_constraintRight_toRightOf属性和偏移，实现按比例确定位置</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintHorizontal_weight</td>\n<td>水平权重分配</td>\n<td>0:不分配权重<br>1:分配权重</td>\n</tr>\n<tr>\n<td>app:layout_constraintVertical_weight</td>\n<td>垂直权重分配</td>\n<td>0:不分配权重<br>1:分配权重</td>\n</tr>\n<tr>\n<td>app:layout_constraintHorizontal_bias</td>\n<td>水平偏移</td>\n<td>0:不偏移<br>0.5:居中</td>\n</tr>\n</tbody></table>\n<ol start=\"5\">\n<li>参考线标签</li>\n</ol>\n<p>可以通过参考线标签，进一步实现复杂布局</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    Guideline控件用于在ConstraintLayout中创建参考线，帮助布局对齐</span><br><span class=\"hljs-comment\">    android:id: 控件的唯一标识符</span><br><span class=\"hljs-comment\">    android:layout_width: 布局宽度，wrap_content表示根据内容自适应</span><br><span class=\"hljs-comment\">    android:layout_height: 布局高度，wrap_content表示根据内容自适应</span><br><span class=\"hljs-comment\">    android:orientation: 参考线方向，vertical表示垂直方向</span><br><span class=\"hljs-comment\">    app:layout_constraintGuide_begin: 参考线距离父容器开始位置的距离，100dp表示距离左边100dp处</span><br><span class=\"hljs-comment\">--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">androidx.constraintlayout.widget.Guideline</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">\"@+id/guideline\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:orientation</span>=<span class=\"hljs-string\">\"vertical\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">app:layout_constraintGuide_begin</span>=<span class=\"hljs-string\">\"100dp\"</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E6%80%BB%E7%BB%93\">总结</span></h3><table>\n<thead>\n<tr>\n<th>特性</th>\n<th>LinearLayout</th>\n<th>FrameLayout</th>\n<th>RelativeLayout</th>\n<th>ConstraintLayout</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>布局逻辑</td>\n<td>线性方向排列</td>\n<td>视图堆叠</td>\n<td>相对其他视图/父容器定位</td>\n<td>视图间约束关系</td>\n</tr>\n<tr>\n<td>嵌套</td>\n<td>易嵌套过深</td>\n<td>极少嵌套</td>\n<td>可减少嵌套</td>\n<td>显著减少嵌套</td>\n</tr>\n<tr>\n<td>性能</td>\n<td>嵌套多层时差</td>\n<td>最优（简单）</td>\n<td>较差（两次测量）</td>\n<td>最优（复杂布局）</td>\n</tr>\n<tr>\n<td>适用场景</td>\n<td>简单列表/等分</td>\n<td>叠加视图</td>\n<td>中等复杂的相对定位</td>\n<td>高复杂度布局</td>\n</tr>\n<tr>\n<td>学习曲线</td>\n<td>简单</td>\n<td>简单</td>\n<td>中等</td>\n<td>较高</td>\n</tr>\n</tbody></table>\n<h2><span id=\"%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6\">创建自定义组件</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<ol>\n<li>在res目录下的values文件夹中创建attrs.xml文件</li>\n<li>在attrs.xml文件的<resources>标签中添加如下内容：<code>declare-styleable</code>标签中的<code>name</code>属性定义了自定义组件的名称，<code>attr</code>标签中的<code>name</code>属性定义了属性的名称，<code>format</code>属性定义了属性的类型</resources></li>\n</ol>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    定义自定义控件IconTextView的样式属性</span><br><span class=\"hljs-comment\">    该样式集合用于支持在XML布局文件中配置IconTextView控件的各种属性</span><br><span class=\"hljs-comment\">--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">declare-styleable</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"IconTextView\"</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 图标资源引用，用于设置控件显示的图标 --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">attr</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"iconSrc\"</span> <span class=\"hljs-attr\">format</span>=<span class=\"hljs-string\">\"reference\"</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 显示文本内容，用于设置控件显示的文字 --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">attr</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"text\"</span> <span class=\"hljs-attr\">format</span>=<span class=\"hljs-string\">\"string\"</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 文本颜色，用于设置文字的显示颜色 --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">attr</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"textColor\"</span> <span class=\"hljs-attr\">format</span>=<span class=\"hljs-string\">\"color\"</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 文本大小，用于设置文字的显示尺寸 --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">attr</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"textSize\"</span> <span class=\"hljs-attr\">format</span>=<span class=\"hljs-string\">\"dimension\"</span>/&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">declare-styleable</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"3\">\n<li>在主文件夹中创建自定义类IconTextView.kt</li>\n<li>重写其中的onMeasure()、onLayout()方法</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">IconTextView</span> <span class=\"hljs-meta\">@JvmOverloads</span> <span class=\"hljs-keyword\">constructor</span>(context: Context, attrs: AttributeSet? = <span class=\"hljs-literal\">null</span>) :<br>    ViewGroup(context, attrs){<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 图标控件实例</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> mIcon: ImageView? = <span class=\"hljs-literal\">null</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 文本控件实例</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> mText: TextView? = <span class=\"hljs-literal\">null</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 初始化函数，在构造函数中调用</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">init</span>{<br>        <span class=\"hljs-keyword\">init</span>(context, attrs)<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 初始化控件方法</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> context 上下文对象，用于创建视图控件</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> attrs 属性集合，包含布局文件中定义的属性</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">init</span><span class=\"hljs-params\">(context: <span class=\"hljs-type\">Context</span>, attrs: <span class=\"hljs-type\">AttributeSet</span>?)</span></span>{<br>        <span class=\"hljs-comment\">// 创建图标和文本控件实例</span><br>        mIcon = ImageView(context)<br>        mText = TextView(context)<br><br>        <span class=\"hljs-comment\">// 将子视图添加到容器中</span><br>        addView(mIcon)<br>        addView(mText)<br><br>        <span class=\"hljs-comment\">// 解析自定义属性</span><br>        attrs?.let { parseAttributes(context, it) }<br><br><br>    }<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">parseAttributes</span><span class=\"hljs-params\">(context: <span class=\"hljs-type\">Context</span>, attrs: <span class=\"hljs-type\">AttributeSet</span>)</span></span> {<br>        <span class=\"hljs-keyword\">val</span> typedArray = context.obtainStyledAttributes(attrs, R.styleable.IconTextView)<br><br>        <span class=\"hljs-comment\">// 解析图标资源</span><br>        <span class=\"hljs-keyword\">val</span> iconResId = typedArray.getResourceId(R.styleable.IconTextView_iconSrc, -<span class=\"hljs-number\">1</span>)<br>        <span class=\"hljs-keyword\">if</span> (iconResId != -<span class=\"hljs-number\">1</span>) {<br>            mIcon?.setImageResource(iconResId)<br>        }<br><br>        <span class=\"hljs-comment\">// 解析文本内容</span><br>        <span class=\"hljs-keyword\">val</span> text = typedArray.getString(R.styleable.IconTextView_text)<br>        mText?.text = text<br><br>        <span class=\"hljs-comment\">// 解析文本颜色</span><br>        <span class=\"hljs-keyword\">val</span> textColor = typedArray.getColor(R.styleable.IconTextView_textColor,<br>            mText?.currentTextColor ?: <span class=\"hljs-number\">0xFF000000</span>.toInt())<br>        mText?.setTextColor(textColor)<br><br>        <span class=\"hljs-comment\">// 解析文本大小</span><br>        <span class=\"hljs-keyword\">val</span> textSize = typedArray.getDimension(R.styleable.IconTextView_textSize, -<span class=\"hljs-number\">1f</span>)<br>        <span class=\"hljs-keyword\">if</span> (textSize != -<span class=\"hljs-number\">1f</span>) {<br>            mText?.textSize = textSize / context.resources.displayMetrics.scaledDensity<br>        }<br><br>        typedArray.recycle()<br>    }<br><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 重写onMeasure:测量自定义视图的尺寸</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> widthMeasureSpec 宽度测量规格，包含宽度值和测量模式</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> heightMeasureSpec 高度测量规格，包含高度值和测量模式</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onMeasure</span><span class=\"hljs-params\">(widthMeasureSpec: <span class=\"hljs-type\">Int</span>, heightMeasureSpec: <span class=\"hljs-type\">Int</span>)</span></span> {<br>        <span class=\"hljs-comment\">// 测量图标和文本组件的实际尺寸</span><br>        mIcon!!.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)<br>        mText!!.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)<br><br>        <span class=\"hljs-comment\">// 计算内容区域的宽度和高度</span><br>        <span class=\"hljs-keyword\">var</span> width = mIcon!!.measuredWidth + mText!!.measuredWidth<br>        <span class=\"hljs-keyword\">var</span> height = max(mIcon!!.measuredHeight, mText!!.measuredHeight)<br><br>        <span class=\"hljs-comment\">// 添加内边距到总尺寸</span><br>        width += paddingLeft + paddingRight<br>        height += paddingTop + paddingBottom<br><br>        <span class=\"hljs-comment\">// 根据测量规格解析最终尺寸并设置</span><br>        setMeasuredDimension(<br>            resolveSize(width, widthMeasureSpec),<br>            resolveSize(height, heightMeasureSpec)<br>        )<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 重写onLayout:布局回调方法，用于确定子视图的位置</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> changed 布局是否发生变化</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> l 左边界位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> t 上边界位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> r 右边界位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> b 下边界位置</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onLayout</span><span class=\"hljs-params\">(changed: <span class=\"hljs-type\">Boolean</span>, l: <span class=\"hljs-type\">Int</span>, t: <span class=\"hljs-type\">Int</span>, r: <span class=\"hljs-type\">Int</span>, b: <span class=\"hljs-type\">Int</span>)</span></span> {<br>        <span class=\"hljs-keyword\">val</span> paddingLeft = paddingLeft<br>        <span class=\"hljs-keyword\">val</span> paddingTop = paddingTop<br><br>        <span class=\"hljs-comment\">// 布局图标视图，位置在左上角</span><br>        mIcon!!.layout(<br>            paddingLeft,<br>            paddingTop,<br>            paddingLeft + mIcon!!.measuredWidth,<br>            paddingTop + mIcon!!.measuredHeight<br>        )<br><br>        <span class=\"hljs-comment\">// 布局文本视图，位置在图标右侧</span><br>        mText!!.layout(<br>            paddingLeft + mIcon!!.measuredWidth,<br>            paddingTop,<br>            paddingLeft + mIcon!!.measuredWidth + mText!!.measuredWidth,<br>            paddingTop + mText!!.measuredHeight<br>        )<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"5\">\n<li>在布局文件中使用自定义控件IconTextView</li>\n</ol>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">com.kei.helloworld.IconTextView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">\"wrap_content\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:iconSrc</span>=<span class=\"hljs-string\">\"@mipmap/ic_launcher_round\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:text</span>=<span class=\"hljs-string\">\"HelloWorld!!!\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:textColor</span>=<span class=\"hljs-string\">\"#FFFF0000\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:textSize</span>=<span class=\"hljs-string\">\"30sp\"</span> /&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<h2><span id=\"%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB\">属性动画</span></h2><h3><span id=\"%E5%8A%A8%E7%94%BB%E6%A1%86%E6%9E%B6\">动画框架</span></h3><table>\n<thead>\n<tr>\n<th>特性</th>\n<th>ViewPropertyAnimator</th>\n<th>ObjextAnimator</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>目标对象</td>\n<td>仅限View</td>\n<td>任意对象</td>\n</tr>\n<tr>\n<td>多属性动画</td>\n<td>链式调用且自动合并</td>\n<td>需手动优化</td>\n</tr>\n<tr>\n<td>灵活性</td>\n<td>易嵌套过深</td>\n<td>极少嵌套</td>\n</tr>\n<tr>\n<td>性能</td>\n<td>低</td>\n<td>高</td>\n</tr>\n<tr>\n<td>使用场景</td>\n<td>View的简单、高性能动画</td>\n<td>界面复杂动画、非View对象动画</td>\n</tr>\n</tbody></table>\n<h3><span id=\"%E5%B8%B8%E7%94%A8api\">常用API</span></h3><table>\n<thead>\n<tr>\n<th>API</th>\n<th>作用</th>\n<th>对应属性动画中的方法</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>setTranslationX</td>\n<td>设置X轴偏移</td>\n<td>translationX()<br>translationXBy()</td>\n</tr>\n<tr>\n<td>setTranslationY</td>\n<td>设置Y轴偏移</td>\n<td>translationY()<br>translationYBy()</td>\n</tr>\n<tr>\n<td>setTranslationZ</td>\n<td>设置Z轴偏移</td>\n<td>translationZ()<br>translationZBy()</td>\n</tr>\n<tr>\n<td>setX</td>\n<td>设置X轴绝对位置</td>\n<td>x()<br>xBy()</td>\n</tr>\n<tr>\n<td>setY</td>\n<td>设置Y轴绝对位置</td>\n<td>y()<br>yBy()</td>\n</tr>\n<tr>\n<td>setZ</td>\n<td>设置Z轴绝对位置</td>\n<td>z()<br>zBy()</td>\n</tr>\n<tr>\n<td>setRotation</td>\n<td>设置平面旋转</td>\n<td>rotation()<br>rotationBy()</td>\n</tr>\n<tr>\n<td>setRotationX</td>\n<td>设置沿x轴旋转</td>\n<td>rotationX()<br>rotationXBy()</td>\n</tr>\n<tr>\n<td>setRotationY</td>\n<td>设置沿y轴旋转</td>\n<td>rotationY()<br>rotationYBy()</td>\n</tr>\n<tr>\n<td>setScaleX</td>\n<td>设置X轴缩放</td>\n<td>scaleX()<br>scaleXBy()</td>\n</tr>\n<tr>\n<td>setScaleY</td>\n<td>设置Y轴缩放</td>\n<td>scaleY()<br>scaleYBy()</td>\n</tr>\n<tr>\n<td>setAlpha</td>\n<td>设置透明度</td>\n<td>alpha()<br>alphaBy()</td>\n</tr>\n</tbody></table>\n<h3><span id=\"viewpropertyanimator\">ViewPropertyAnimator</span></h3><ol>\n<li>获取组件对象</li>\n<li>通过某些事件监听触发动画效果(示例使用了点击事件)</li>\n<li>组件对象调用animate()方法然后链式调用设置动画效果</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 获取蓝色视图组件</span><br><span class=\"hljs-keyword\">val</span> blueView = findViewById&lt;View&gt;(R.id.view3)<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置ViewPropertyAnimator按钮的点击事件监听器</span><br><span class=\"hljs-comment\"> * 该函数会在用户点击按钮时触发动画效果</span><br><span class=\"hljs-comment\"> */</span><br>findViewById&lt;Button&gt;(R.id.viewPropertyAnimator).setOnClickListener {<br>    <span class=\"hljs-comment\">// 执行blueView的组合动画：平移、透明度变化和缩放</span><br>    blueView.animate().translationX(<span class=\"hljs-number\">500.0F</span>)<br>        .alpha(<span class=\"hljs-number\">0.5F</span>)<br>        .scaleX(<span class=\"hljs-number\">0.5F</span>)<br>        .scaleY(<span class=\"hljs-number\">0.5F</span>)<br>        .setDuration(<span class=\"hljs-number\">2000</span>)<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"objectanimator\">ObjectAnimator</span></h3><ol>\n<li>获取组件对象</li>\n<li>通过某些事件监听触发动画效果(示例使用了点击事件)</li>\n<li>创建AnimatorSet()对象</li>\n<li>通过AnimatorSet()对象调用playTogether()方法添加多个属性动画</li>\n<li>ObjectAnimator()对象调用ofFloat()方法创建属性动画</li>\n<li>AnimatorSet()对象调用setDuration()方法设置动画持续时间</li>\n<li>AnimatorSet()对象interpolator属性可以为动画设置动画插值器</li>\n<li>AnimatorSet()对象调用start()方法开始执行动画</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 获取蓝色视图组件</span><br><span class=\"hljs-keyword\">val</span> blueView = findViewById&lt;View&gt;(R.id.view3)<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置ObjectAnimator按钮的点击事件监听器</span><br><span class=\"hljs-comment\"> * 该函数会在用户点击按钮时触发动画效果</span><br><span class=\"hljs-comment\"> */</span><br>findViewById&lt;Button&gt;(R.id.objectAnimator).setOnClickListener {<br>    <span class=\"hljs-comment\">// 创建动画集合，用于同时播放多个属性动画</span><br>    <span class=\"hljs-keyword\">val</span> <span class=\"hljs-keyword\">set</span> = AnimatorSet()<br>    <span class=\"hljs-keyword\">set</span>.playTogether(<br>        ObjectAnimator.ofFloat(blueView, <span class=\"hljs-string\">\"translationX\"</span>, <span class=\"hljs-number\">600.0F</span>),<br>        ObjectAnimator.ofFloat(blueView, <span class=\"hljs-string\">\"scaleY\"</span>, <span class=\"hljs-number\">0.5F</span>),<br>        ObjectAnimator.ofFloat(blueView, <span class=\"hljs-string\">\"alpha\"</span>, <span class=\"hljs-number\">0.5F</span>)<br>    )<br>    <span class=\"hljs-comment\">// 设置动画持续时间为2000毫秒</span><br>    <span class=\"hljs-keyword\">set</span>.setDuration(<span class=\"hljs-number\">2000</span>)<br>    <span class=\"hljs-comment\">// 设置动画插值器为加速减速插值器</span><br>    <span class=\"hljs-keyword\">set</span>.interpolator = AccelerateDecelerateInterpolator()<br>    <span class=\"hljs-comment\">// 开始执行动画</span><br>    <span class=\"hljs-keyword\">set</span>.start()<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h4><span id=\"%E5%8A%A8%E7%94%BB%E6%8F%92%E5%80%BC%E5%99%A8\">动画插值器</span></h4><p>插值器控制动画的<strong>变化速率</strong>，将**线性时间进度(0.0-1.0)**转换为非线性进度值，实现加速、减速、弹跳等效果</p>\n<table>\n<thead>\n<tr>\n<th>插值器类型</th>\n<th>效果描述</th>\n<th>适用场景</th>\n<th>函数代码</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>AccelerateDecelerateInterpolator</td>\n<td>默认插值器，先加速后减速</td>\n<td>自然运动</td>\n<td>new AccelerateDecelerateInterpolator()</td>\n</tr>\n<tr>\n<td>LinearInterpolator</td>\n<td>匀速插值器</td>\n<td>匀速运动</td>\n<td>new LinearInterpolator()</td>\n</tr>\n<tr>\n<td>AccelerateInterpolator</td>\n<td>持续加速</td>\n<td>物体下落</td>\n<td>new AccelerateInterpolator()</td>\n</tr>\n<tr>\n<td>DecelerateInterpolator</td>\n<td>持续减速</td>\n<td>物体上升</td>\n<td>new DecelerateInterpolator()</td>\n</tr>\n<tr>\n<td>BounceInterpolator</td>\n<td>结束时弹跳</td>\n<td>落地反弹</td>\n<td>new BounceInterpolator()</td>\n</tr>\n<tr>\n<td>OvershootInterpolator</td>\n<td>超越终点后回弹</td>\n<td>按钮点击反馈</td>\n<td>new OvershootInterpolator()</td>\n</tr>\n<tr>\n<td>PathInterpolator</td>\n<td>自定义曲线轨迹</td>\n<td>轨迹运动</td>\n<td>new PathInterpolator(0.4F, 0.5F, 0F, 1.0F)</td>\n</tr>\n</tbody></table>\n<h3><span id=\"xmlanimator\">xmlAnimator</span></h3><ol>\n<li>获取组件对象</li>\n<li>通过某些事件监听触发动画效果(示例使用了点击事件)</li>\n<li>创建AnimatorInflater()对象，并调用loadAnimator()方法加载XML定义的属性动画资源</li>\n<li>AnimatorInflater()对象调用addListener()方法添加状态监听器，重写监听方法</li>\n<li>AnimatorInflater()对象调用setTarget()方法设置动画目标对象</li>\n<li>AnimatorInflater()对象调用start()方法开始执行动画</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 获取蓝色视图组件</span><br><span class=\"hljs-keyword\">val</span> blueView = findViewById&lt;View&gt;(R.id.view3)<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置XML动画按钮的点击监听器</span><br><span class=\"hljs-comment\"> * 该函数为按钮添加点击事件处理，加载并执行XML定义的属性动画</span><br><span class=\"hljs-comment\"> * 监听动画的各种状态并在状态变化时显示对应的Toast提示</span><br><span class=\"hljs-comment\"> */</span><br>findViewById&lt;Button&gt;(R.id.xmlAnimator).setOnClickListener {<br>    <span class=\"hljs-comment\">// 加载XML中定义的属性动画资源</span><br>    <span class=\"hljs-keyword\">val</span> anim = AnimatorInflater.loadAnimator(<br>        <span class=\"hljs-keyword\">this</span>,<br>        R.animator.text_animator<br>    )<br><br>    <span class=\"hljs-comment\">// 为动画添加状态监听器，监听动画的开始、结束、重复和取消事件</span><br>    anim.addListener(<span class=\"hljs-keyword\">object</span> : Animator.AnimatorListener{<br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onAnimationCancel</span><span class=\"hljs-params\">(animation: <span class=\"hljs-type\">Animator</span>)</span></span> {<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span><span class=\"hljs-symbol\">@ActivityAnimation</span>, <span class=\"hljs-string\">\"onAnimationCancel\"</span>, Toast.LENGTH_SHORT).show()<br>        }<br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onAnimationEnd</span><span class=\"hljs-params\">(animation: <span class=\"hljs-type\">Animator</span>)</span></span> {<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span><span class=\"hljs-symbol\">@ActivityAnimation</span>, <span class=\"hljs-string\">\"onAnimationEnd\"</span>, Toast.LENGTH_SHORT).show()<br>        }<br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onAnimationRepeat</span><span class=\"hljs-params\">(animation: <span class=\"hljs-type\">Animator</span>)</span></span> {<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span><span class=\"hljs-symbol\">@ActivityAnimation</span>, <span class=\"hljs-string\">\"onAnimationRepeat\"</span>, Toast.LENGTH_SHORT).show()<br>        }<br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onAnimationStart</span><span class=\"hljs-params\">(animation: <span class=\"hljs-type\">Animator</span>)</span></span> {<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span><span class=\"hljs-symbol\">@ActivityAnimation</span>, <span class=\"hljs-string\">\"onAnimationStart\"</span>, Toast.LENGTH_SHORT).show()<br>        }<br>    })<br>    <span class=\"hljs-comment\">// 设置动画的目标视图</span><br>    anim.setTarget(blueView)<br>    <span class=\"hljs-comment\">// 启动动画</span><br>    anim.start()<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h4><span id=\"%E5%8A%A8%E7%94%BB%E5%B1%9E%E6%80%A7%E8%B5%84%E6%BA%90%E7%9A%84%E5%AE%9A%E4%B9%89\">动画属性资源的定义</span></h4><ol>\n<li>在res目录下创建<strong>animator文件夹</strong></li>\n<li>创建<strong>XML文件</strong>，并添加以下内容</li>\n<li>set标签中的ordering属性控制<strong>动画播放顺序</strong></li>\n<li>set标签下的objectAnimator标签定义了属性<strong>动画效果</strong></li>\n<li>其中duration属性控制<strong>动画持续时间</strong>，propertyName属性控制<strong>动画属性名称</strong>，valueFrom属性控制动画<strong>起始值</strong>，valueTo属性控制动画<strong>结束值</strong></li>\n</ol>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">\"1.0\"</span> encoding=<span class=\"hljs-string\">\"utf-8\"</span>?&gt;</span><br><span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    AnimatorSet配置文件</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    该XML文件定义了一个属性动画集合，用于按顺序播放多个动画效果</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    属性说明：</span><br><span class=\"hljs-comment\">    xmlns:android - Android命名空间声明，必需项</span><br><span class=\"hljs-comment\">    android:ordering - 动画播放顺序控制属性</span><br><span class=\"hljs-comment\">        值为\"sequentially\"表示动画将按顺序依次播放</span><br><span class=\"hljs-comment\">        可选值还包括\"together\"表示同时播放所有动画</span><br><span class=\"hljs-comment\">--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">set</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:ordering</span>=<span class=\"hljs-string\">\"sequentially\"</span>&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        透明度动画函数</span><br><span class=\"hljs-comment\">        功能：在1000毫秒内将对象的透明度从1.0渐变到0.5</span><br><span class=\"hljs-comment\">        参数：</span><br><span class=\"hljs-comment\">            android:duration - 动画持续时间，单位为毫秒</span><br><span class=\"hljs-comment\">            android:propertyName - 动画属性名称，此处为透明度alpha</span><br><span class=\"hljs-comment\">            android:valueFrom - 属性起始值，完全不透明</span><br><span class=\"hljs-comment\">            android:valueTo - 属性结束值，半透明状态</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">objectAnimator</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:duration</span>=<span class=\"hljs-string\">\"1000\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:propertyName</span>=<span class=\"hljs-string\">\"alpha\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueFrom</span>=<span class=\"hljs-string\">\"1.0\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueTo</span>=<span class=\"hljs-string\">\"0.5\"</span>/&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        水平位移动画函数</span><br><span class=\"hljs-comment\">        功能：在1000毫秒内将对象沿X轴从位置0移动到位置600</span><br><span class=\"hljs-comment\">        参数：</span><br><span class=\"hljs-comment\">            android:duration - 动画持续时间，单位为毫秒</span><br><span class=\"hljs-comment\">            android:propertyName - 动画属性名称，此处为水平位移translationX</span><br><span class=\"hljs-comment\">            android:valueFrom - X轴起始位置坐标</span><br><span class=\"hljs-comment\">            android:valueTo - X轴结束位置坐标</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">objectAnimator</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:duration</span>=<span class=\"hljs-string\">\"1000\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:propertyName</span>=<span class=\"hljs-string\">\"translationX\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueFrom</span>=<span class=\"hljs-string\">\"0.0\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueTo</span>=<span class=\"hljs-string\">\"600.0\"</span>/&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        旋转变换动画函数</span><br><span class=\"hljs-comment\">        功能：在1000毫秒内将对象绕中心点旋转360度</span><br><span class=\"hljs-comment\">        参数：</span><br><span class=\"hljs-comment\">            android:duration - 动画持续时间，单位为毫秒</span><br><span class=\"hljs-comment\">            android:propertyName - 动画属性名称，此处为旋转角度rotation</span><br><span class=\"hljs-comment\">            android:valueFrom - 起始旋转角度，0度</span><br><span class=\"hljs-comment\">            android:valueTo - 结束旋转角度，360度</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">objectAnimator</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:propertyName</span>=<span class=\"hljs-string\">\"rotation\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueFrom</span>=<span class=\"hljs-string\">\"0\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueTo</span>=<span class=\"hljs-string\">\"360\"</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:duration</span>=<span class=\"hljs-string\">\"1000\"</span>/&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">set</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n\n\n<h2><span id=\"%E6%95%B0%E6%8D%AE%E5%82%A8%E5%AD%98\">数据储存</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3><span id=\"sharedpreferences\">SharedPreferences</span></h3><h4><span id=\"%E7%AE%80%E4%BB%8B\">简介</span></h4><ul>\n<li>核心概念​​：SharedPreferences 是 Android 系统提供的一个​​轻量级存储类​​，用于以 ​<strong>​键值对（Key-Value）​</strong>​ 的形式存储简单的数据。它本质上将一个 XML 文件保存在设备的私有目录中，从而实现了数据的持久化</li>\n<li>存储位置​​：**/data/data/&lt;你的应用包名&gt;/shared_prefs/**目录下。每个 SharedPreferences 文件都是一个 <strong>.xml</strong> 文件</li>\n<li>​数据类型​​：支持存储<strong>基本数据类型</strong>，包括 String（字符串）、<code>Int</code>（整型）、<code>Boolean</code>（布尔型）、<code>Float</code>（浮点型）、<code>Long</code>（长整型）以及 <code>Set&lt;String&gt;</code>（字符串集合）</li>\n<li>模式​​：通常使用 <strong>MODE_PRIVATE模式</strong>，这意味着该文件仅供你的应用自身访问，确保了数据的安全性。其他允许跨应用访问的模式（如 MODE_WORLD_READABLE）由于安全风险，已被废弃</li>\n</ul>\n<h4><span id=\"%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE\">存储数据</span></h4><ol>\n<li>创建SharedPreferences对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 在 Activity 或 Fragment 中</span><br><span class=\"hljs-keyword\">val</span> sharedPref = getSharedPreferences(<span class=\"hljs-string\">\"user_preferences\"</span>, Context.MODE_PRIVATE)<br></code></pre></td></tr></tbody></table></figure>\n\n<ul>\n<li>​参数1 \"user_preferences\"​​：自定义的文件名。系统会自动添加 .xml后缀。文件最终会是 user_preferences.xml</li>\n<li>​参数2 Context.MODE_PRIVATE​​：固定模式，表示私有文件。</li>\n</ul>\n<ol start=\"2\">\n<li>获取edit对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> editor = sharedPref.edit()<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"3\">\n<li>写入数据</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">editor.putInt(<span class=\"hljs-string\">\"Integer\"</span>, <span class=\"hljs-number\">1</span>)<span class=\"hljs-comment\">// 存储整型数据</span><br>editor.putLong(<span class=\"hljs-string\">\"Long\"</span>, <span class=\"hljs-number\">1L</span>)<span class=\"hljs-comment\">// 存储长整型数据</span><br>editor.putFloat(<span class=\"hljs-string\">\"Float\"</span>, <span class=\"hljs-number\">1.0f</span>)<span class=\"hljs-comment\">// 存储浮点型数据</span><br>editor.putBoolean(<span class=\"hljs-string\">\"Boolean\"</span>, <span class=\"hljs-literal\">true</span>)<span class=\"hljs-comment\">// 存储布尔型数据</span><br>editor.putString(<span class=\"hljs-string\">\"username\"</span>, <span class=\"hljs-string\">\"admin\"</span>)<span class=\"hljs-comment\">// 存储字符串数据</span><br><span class=\"hljs-keyword\">val</span> setData: Set&lt;String&gt; = setOf(<span class=\"hljs-string\">\"one\"</span>, <span class=\"hljs-string\">\"two\"</span>, <span class=\"hljs-string\">\"three\"</span>)<br>editor.putStringSet(<span class=\"hljs-string\">\"StringSet\"</span>, setData)<span class=\"hljs-comment\">// 存储字符串集合数据</span><br><br>editor.apply() <span class=\"hljs-comment\">// 提交数据</span><br></code></pre></td></tr></tbody></table></figure>\n\n\n<ul>\n<li><strong>​键（Key）​​：</strong> 是一个字符串，作为数据的唯一标识符，比如 \"user_nickname\"。之后要靠这个键来读取数据。</li>\n<li><strong>​值（Value）​​：</strong> 你要存储的具体数据。</li>\n<li>apply()vs commit()​​：<ul>\n<li>apply()：​<strong>​强烈推荐使用</strong>​​。它是异步的，立即返回，不会阻塞你的用户界面（UI），性能更好</li>\n<li>commit()​​：是同步的，会等待数据完全写入磁盘后才返回。如果在主线程频繁使用，可能会引起应用无响应（ANR），通常只在需要立即知道写入是否成功的特殊场景下使用</li>\n</ul>\n</li>\n</ul>\n<p>步骤2和步骤3可以合并为：</p>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">sharedPref.edit(){<br>    putInt(<span class=\"hljs-string\">\"Integer\"</span>, <span class=\"hljs-number\">1</span>)<span class=\"hljs-comment\">// 存储整型数据</span><br>    putLong(<span class=\"hljs-string\">\"Long\"</span>, <span class=\"hljs-number\">1L</span>)<span class=\"hljs-comment\">// 存储长整型数据</span><br>    putFloat(<span class=\"hljs-string\">\"Float\"</span>, <span class=\"hljs-number\">1.0f</span>)<span class=\"hljs-comment\">// 存储浮点型数据</span><br>    putBoolean(<span class=\"hljs-string\">\"Boolean\"</span>, <span class=\"hljs-literal\">true</span>)<span class=\"hljs-comment\">// 存储布尔型数据</span><br>    putString(<span class=\"hljs-string\">\"username\"</span>, <span class=\"hljs-string\">\"admin\"</span>)<span class=\"hljs-comment\">// 存储字符串数据</span><br>    <span class=\"hljs-keyword\">val</span> setData: Set&lt;String&gt; = setOf(<span class=\"hljs-string\">\"one\"</span>, <span class=\"hljs-string\">\"two\"</span>, <span class=\"hljs-string\">\"three\"</span>)<br>    putStringSet(<span class=\"hljs-string\">\"StringSet\"</span>, setData)<span class=\"hljs-comment\">// 存储字符串集合数据</span><br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h4><span id=\"%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE\">读取数据</span></h4><ol>\n<li>创建SharedPreferences对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> sharedPref = getSharedPreferences(<span class=\"hljs-string\">\"user_preferences\"</span>, Context.MODE_PRIVATE)<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"2\">\n<li>获取数据</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> username = sharedPref.getString(<span class=\"hljs-string\">\"username\"</span>, <span class=\"hljs-string\">\"\"</span>)<br><span class=\"hljs-keyword\">val</span> age = sharedPref.getInt(<span class=\"hljs-string\">\"age\"</span>, <span class=\"hljs-number\">0</span>)<br><span class=\"hljs-keyword\">val</span> setData = sharedPref.getStringSet(<span class=\"hljs-string\">\"StringSet\"</span>, <span class=\"hljs-literal\">null</span>)<br><span class=\"hljs-keyword\">val</span> male = sharedPref.getBoolean(<span class=\"hljs-string\">\"male\"</span>, <span class=\"hljs-literal\">true</span>)<br></code></pre></td></tr></tbody></table></figure>\n<ul>\n<li><strong>参数1 \"username\"​​：</strong> 键，用于获取数据。</li>\n<li><strong>参数2 \"\"：</strong> 默认值，如果获取的数据不存在，则返回这个默认值。</li>\n</ul>\n<ol start=\"3\">\n<li>更新ui</li>\n</ol>\n<h4><span id=\"%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE\">删除数据</span></h4><ol>\n<li>创建SharedPreferences对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> sharedPref = getSharedPreferences(<span class=\"hljs-string\">\"user_preferences\"</span>, Context.MODE_PRIVATE)<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"2\">\n<li>创建edit对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> editor = sharedPref.edit()<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"3\">\n<li>删除数据</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 删除单个数据</span><br>editor.remove(<span class=\"hljs-string\">\"username\"</span>)<br><span class=\"hljs-comment\">// 删除所有数据</span><br>editor.clear()<br><br>editor.apply()<br></code></pre></td></tr></tbody></table></figure>\n\n<p>步骤2和步骤3可以合并为：</p>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">sharedPref.edit(){<br>    remove(<span class=\"hljs-string\">\"username\"</span>)<br>    clear()<br>}<br><br></code></pre></td></tr></tbody></table></figure>\n<h4><span id=\"%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E5%AE%9E%E8%B7%B5\">完整代码实践</span></h4><figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> com.kei.datebaseandnetwork<br><br><span class=\"hljs-keyword\">import</span> android.content.Context<br><span class=\"hljs-keyword\">import</span> android.os.Bundle<br><span class=\"hljs-keyword\">import</span> android.util.Log<br><span class=\"hljs-keyword\">import</span> android.widget.Toast<br><span class=\"hljs-keyword\">import</span> androidx.activity.ComponentActivity<br><span class=\"hljs-keyword\">import</span> androidx.activity.enableEdgeToEdge<br><span class=\"hljs-keyword\">import</span> androidx.appcompat.app.AppCompatActivity<br><span class=\"hljs-keyword\">import</span> androidx.core.content.edit<br><span class=\"hljs-keyword\">import</span> androidx.core.view.ViewCompat<br><span class=\"hljs-keyword\">import</span> androidx.core.view.WindowInsetsCompat<br><span class=\"hljs-keyword\">import</span> com.kei.datebaseandnetwork.databinding.ActivitySharedPrefBinding<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ActivitySharedPref</span> : <span class=\"hljs-type\">ComponentActivity</span>() {<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * SharedPreferences文件名常量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> prefsName = <span class=\"hljs-string\">\"kei_prefs\"</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 视图绑定对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> binding: ActivitySharedPrefBinding<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 日志标签常量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> TAG = <span class=\"hljs-string\">\"SharedPrefActivity\"</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Activity创建时的回调方法</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 保存的实例状态Bundle对象，用于恢复之前保存的状态数据</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        <span class=\"hljs-comment\">// 初始化视图绑定并设置布局</span><br>        binding = ActivitySharedPrefBinding.inflate(layoutInflater)<br>        setContentView(binding.root)<br><br>        <span class=\"hljs-comment\">// 为按钮设置点击事件监听器</span><br>        binding.submit.setOnClickListener { saveData() }<br>        binding.read.setOnClickListener { readData() }<br>        binding.clear.setOnClickListener { clearData() }<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 保存用户输入的数据到SharedPreferences中</span><br><span class=\"hljs-comment\">     * 该函数从界面输入框获取用户名、年龄、邮箱和配置信息，验证数据完整性后进行加密存储</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * 无参数</span><br><span class=\"hljs-comment\">     * 无返回值</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">saveData</span><span class=\"hljs-params\">()</span></span>{<br>        <span class=\"hljs-comment\">// 获取用户输入的各个字段数据</span><br>        <span class=\"hljs-keyword\">val</span> username = binding.inputName.text.toString()<br>        <span class=\"hljs-keyword\">val</span> age = binding.inputAge.text.toString()<br>        <span class=\"hljs-keyword\">val</span> email = binding.inputEmail.text.toString()<br>        <span class=\"hljs-keyword\">val</span> config = binding.inputConfig.text.toString()<br><br>        <span class=\"hljs-comment\">// 验证所有字段都不为空</span><br>        <span class=\"hljs-keyword\">if</span>(username.isNotEmpty() &amp;&amp; age.isNotEmpty() &amp;&amp; email.isNotEmpty() &amp;&amp; config.isNotEmpty()){<br>            <span class=\"hljs-keyword\">val</span> prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)<br>            <span class=\"hljs-comment\">// edit() 方法自带commit()方法</span><br>            prefs.edit(){<br>                putString(<span class=\"hljs-string\">\"username\"</span>, username)<br>                putInt(<span class=\"hljs-string\">\"age\"</span>, age.toInt())<br>                putString(<span class=\"hljs-string\">\"email\"</span>, email)<br>                <span class=\"hljs-comment\">// 处理配置信息，按分号分割并加密存储</span><br>                <span class=\"hljs-keyword\">val</span> configs = config.split(<span class=\"hljs-string\">\";\"</span>)<br>                <span class=\"hljs-keyword\">val</span> setValue : MutableSet&lt;String&gt; = mutableSetOf()<br>                configs.forEach {<br>                    <span class=\"hljs-keyword\">val</span> value = SimpleEncryptor(TAG).encrypt(it)<br>                    setValue.add(value)<br>                }<br>                Log.i(TAG, <span class=\"hljs-string\">\"encryptor user config:value = <span class=\"hljs-variable\">$setValue</span>\"</span>)<br>                putStringSet(<span class=\"hljs-string\">\"configs\"</span>, setValue)<br>            }<br>            binding.result.text = <span class=\"hljs-string\">\"数据保存成功\"</span><br>        }<span class=\"hljs-keyword\">else</span>{<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">\"信息输入错误\"</span>, Toast.LENGTH_SHORT).show()<br>        }<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 读取用户数据并显示在界面中</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * 该函数从SharedPreferences中读取用户的个人信息和配置信息，</span><br><span class=\"hljs-comment\">     * 对加密的配置信息进行解密处理，最后将所有信息格式化显示在界面上。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * 注意：该函数不接收参数，无返回值</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">readData</span><span class=\"hljs-params\">()</span></span> {<br>        <span class=\"hljs-comment\">// 从SharedPreferences中读取用户基本信息</span><br>        <span class=\"hljs-keyword\">val</span> prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)<br>        <span class=\"hljs-keyword\">val</span> username = prefs.getString(<span class=\"hljs-string\">\"username\"</span>, <span class=\"hljs-string\">\"\"</span>)<br>        <span class=\"hljs-keyword\">val</span> age = prefs.getInt(<span class=\"hljs-string\">\"age\"</span>, <span class=\"hljs-number\">0</span>)<br>        <span class=\"hljs-keyword\">val</span> email = prefs.getString(<span class=\"hljs-string\">\"email\"</span>, <span class=\"hljs-string\">\"\"</span>)<br>        <span class=\"hljs-keyword\">val</span> configs = prefs.getStringSet(<span class=\"hljs-string\">\"configs\"</span>, <span class=\"hljs-literal\">null</span>)<br><br>        <span class=\"hljs-comment\">// 解密配置信息</span><br>        <span class=\"hljs-keyword\">val</span> userConfig: MutableList&lt;String&gt; = mutableListOf()<br>        configs?.forEach {<br>            <span class=\"hljs-keyword\">val</span> decryptValue = SimpleEncryptor(TAG).decrypt(it)<br>            Log.i(TAG, <span class=\"hljs-string\">\"decrypt value, before = <span class=\"hljs-variable\">$it</span>, after = <span class=\"hljs-variable\">$decryptValue</span>\"</span>)<br>            userConfig.add(decryptValue)<br>        }<br><br>        <span class=\"hljs-comment\">// 将用户信息显示在界面中</span><br>        binding.result.text = <span class=\"hljs-string\">\"用户名：<span class=\"hljs-variable\">$username</span>\\n年龄：<span class=\"hljs-variable\">$age</span>\\n邮箱：<span class=\"hljs-variable\">$email</span>\\n配置信息：<span class=\"hljs-subst\">${userConfig.joinToString(<span class=\"hljs-string\">\", \"</span>)}</span>\"</span><br>    }<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">clearData</span><span class=\"hljs-params\">()</span></span>{<br>        <span class=\"hljs-keyword\">val</span> prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)<br>        prefs.edit(){<br>            clear()<br>        }<br>        binding.result.text = <span class=\"hljs-string\">\"数据已清空\"</span><br>    }<br><br><br><br>    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SimpleEncryptor</span>(tag: String) {<br>        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">encrypt</span><span class=\"hljs-params\">(input: <span class=\"hljs-type\">String</span>)</span></span>: String {<br>            <span class=\"hljs-comment\">// 示例简单加密：反转字符串（仅作演示）</span><br>            <span class=\"hljs-keyword\">return</span> input.reversed()<br>        }<br><br>        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">decrypt</span><span class=\"hljs-params\">(input: <span class=\"hljs-type\">String</span>)</span></span>: String {<br>            <span class=\"hljs-comment\">// 示例简单解密：反转字符串（仅作演示）</span><br>            <span class=\"hljs-keyword\">return</span> input.reversed()<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"sqlite%E6%95%B0%E6%8D%AE%E5%BA%93\">SQLite数据库</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>SQLite是一种基于文件的关系型数据库，用于存储和检索数据。具有<strong>轻量级、独立性、跨平台、事务性</strong>的特点</p>\n<h4><span id=\"sqlite%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C\">SQLite数据库操作</span></h4><table>\n<thead>\n<tr>\n<th>操作</th>\n<th>方法</th>\n<th>参数说明</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>插入</td>\n<td>long insert()</td>\n<td>@NotNull String table: 要插入数据的表名 <br> @Nullable String nullColumnHack: 插入数据时忽略的列名 <br> @Nullable ContentValues values: 要插入的数据</td>\n<td>新插入记录的行号，失败时返回-1</td>\n</tr>\n<tr>\n<td>更新</td>\n<td>int update()</td>\n<td>@NotNull String table: 要更新的表名 <br> @Nullable ContentValues values: 要更新的数据 <br> @Nullable String whereClause: 更新条件 <br> @Nullable String[] whereArgs: 更新条件参数</td>\n<td>更新记录的行数</td>\n</tr>\n<tr>\n<td>删除</td>\n<td>int delete()</td>\n<td>@NotNull String table: 要删除数据的表名 <br> @Nullable String whereClause: 删除条件 <br> @Nullable String[] whereArgs: 删除条件参数</td>\n<td>删除记录的行数</td>\n</tr>\n</tbody></table>\n<h4><span id=\"sqlite%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">SQLite使用步骤</span></h4><p>以实现简单的笔记管理功能为例，介绍SQLite数据库操作</p>\n<ol>\n<li>定义数据模型 在app/src/main/java/你的包名/目录下创建 <strong>Note.kt</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">data</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Note</span>(<br>    <span class=\"hljs-keyword\">val</span> id: <span class=\"hljs-built_in\">Long</span>? = <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// 主键</span><br>    <span class=\"hljs-keyword\">val</span> title: String, <span class=\"hljs-comment\">// 标题</span><br>    <span class=\"hljs-keyword\">val</span> content: String, <span class=\"hljs-comment\">// 内容</span><br>    <span class=\"hljs-keyword\">val</span> createTime: <span class=\"hljs-built_in\">Long</span> = System.currentTimeMillis() <span class=\"hljs-comment\">// 创建时间</span><br>)<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"2\">\n<li>创建数据库帮助类 在相同的目录下创建 <strong>NoteDatabaseHelper.kt</strong> 这是最关键的一步。我们需要创建一个继承自SQLiteOpenHelper的类，它负责<strong>数据库的创建</strong>和<strong>版本管理</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NoteDbHelper</span>(context: Context) : SQLiteOpenHelper(<br>    context,<br>    DATABASE_NAME,<br>    <span class=\"hljs-literal\">null</span>,<br>    DATABASE_VERSION<br>){<br>    <span class=\"hljs-comment\">// 定义数据库结构信息</span><br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span> {<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> DATABASE_NAME = <span class=\"hljs-string\">\"notes.db\"</span> <span class=\"hljs-comment\">// 数据库名称</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> DATABASE_VERSION = <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\">// 数据库版本</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> TABLE_NAME = <span class=\"hljs-string\">\"notes\"</span> <span class=\"hljs-comment\">// 表名</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_ID = <span class=\"hljs-string\">\"_id\"</span> <span class=\"hljs-comment\">// 推荐使用 _id 作为主键列名</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_TITLE = <span class=\"hljs-string\">\"title\"</span> <span class=\"hljs-comment\">// 标题列名</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_CONTENT = <span class=\"hljs-string\">\"content\"</span> <span class=\"hljs-comment\">// 内容列名</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_CREATE_TIME = <span class=\"hljs-string\">\"create_time\"</span> <span class=\"hljs-comment\">// 创建时间列名</span><br>    }<br><br>    <span class=\"hljs-comment\">// 当数据库第一次被创建时调用，用于建表</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(db: <span class=\"hljs-type\">SQLiteDatabase</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">val</span> createTableQuery = <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">            CREATE TABLE <span class=\"hljs-variable\">$TABLE_NAME</span> (</span><br><span class=\"hljs-string\">                <span class=\"hljs-variable\">$COLUMN_ID</span> INTEGER PRIMARY KEY AUTOINCREMENT,</span><br><span class=\"hljs-string\">                <span class=\"hljs-variable\">$COLUMN_TITLE</span> TEXT NOT NULL,</span><br><span class=\"hljs-string\">                <span class=\"hljs-variable\">$COLUMN_CONTENT</span> TEXT,</span><br><span class=\"hljs-string\">                <span class=\"hljs-variable\">$COLUMN_CREATE_TIME</span> INTEGER</span><br><span class=\"hljs-string\">            )</span><br><span class=\"hljs-string\">        \"\"\"</span>.trimIndent()<br>        db?.execSQL(createTableQuery)<br>    }<br><br>    <span class=\"hljs-comment\">// 当数据库需要升级时调用（例如版本号增加）</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onUpgrade</span><span class=\"hljs-params\">(db: <span class=\"hljs-type\">SQLiteDatabase</span>?, oldVersion: <span class=\"hljs-type\">Int</span>, newVersion: <span class=\"hljs-type\">Int</span>)</span></span> {<br>        db?.execSQL(<span class=\"hljs-string\">\"DROP TABLE IF EXISTS <span class=\"hljs-variable\">$TABLE_NAME</span>\"</span>)<br>        onCreate(db)<br>    }<br><br>    <span class=\"hljs-comment\">// 插入一条新笔记</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">addNote</span><span class=\"hljs-params\">(title: <span class=\"hljs-type\">String</span>, content: <span class=\"hljs-type\">String</span>)</span></span>: <span class=\"hljs-built_in\">Long</span> {<br>        <span class=\"hljs-keyword\">val</span> db = writableDatabase<br>        <span class=\"hljs-keyword\">val</span> values = ContentValues().apply {<br>            put(COLUMN_TITLE, title)<br>            put(COLUMN_CONTENT, content)<br>            put(COLUMN_CREATE_TIME, System.currentTimeMillis())<br>        }<br>        <span class=\"hljs-comment\">// 插入操作，返回新行的ID，如果失败返回-1</span><br>        <span class=\"hljs-keyword\">return</span> db.insert(TABLE_NAME, <span class=\"hljs-literal\">null</span>, values)<br>    }<br><br>    <span class=\"hljs-comment\">// 获取所有笔记，按创建时间倒序排列</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getAllNotes</span><span class=\"hljs-params\">()</span></span>: List&lt;Note&gt; {<br>        <span class=\"hljs-keyword\">val</span> notes = mutableListOf&lt;Note&gt;()<br>        <span class=\"hljs-keyword\">val</span> db = readableDatabase<br>        <span class=\"hljs-comment\">// 查询语句，? 是占位符</span><br>        <span class=\"hljs-keyword\">val</span> cursor = db.query(<br>            TABLE_NAME,<br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// 选择所有列</span><br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// WHERE 子句</span><br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// WHERE 子句的参数</span><br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// GROUP BY</span><br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// HAVING</span><br>            <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$COLUMN_CREATE_TIME</span> DESC\"</span> <span class=\"hljs-comment\">// ORDER BY 按时间降序</span><br>        )<br><br>        cursor.use {<br>            <span class=\"hljs-comment\">// 遍历游标（Cursor），提取数据</span><br>            <span class=\"hljs-keyword\">while</span> (it.moveToNext()) {<br>                <span class=\"hljs-keyword\">val</span> id = it.getLong(it.getColumnIndexOrThrow(COLUMN_ID))<br>                <span class=\"hljs-keyword\">val</span> title = it.getString(it.getColumnIndexOrThrow(COLUMN_TITLE))<br>                <span class=\"hljs-keyword\">val</span> content = it.getString(it.getColumnIndexOrThrow(COLUMN_CONTENT))<br>                <span class=\"hljs-keyword\">val</span> createTime = it.getLong(it.getColumnIndexOrThrow(COLUMN_CREATE_TIME))<br>                notes.add(Note(id, title, content, createTime))<br>            }<br>        }<br>        <span class=\"hljs-keyword\">return</span> notes<br>    }<br><br>    <span class=\"hljs-comment\">// 更新一条笔记</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">updateNote</span><span class=\"hljs-params\">(note: <span class=\"hljs-type\">Note</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> {<br>        <span class=\"hljs-keyword\">val</span> db = writableDatabase<br>        <span class=\"hljs-keyword\">val</span> values = ContentValues().apply {<br>            put(COLUMN_TITLE, note.title)<br>            put(COLUMN_CONTENT, note.content)<br>        }<br>        <span class=\"hljs-comment\">// 更新操作，返回受影响的行数</span><br>        <span class=\"hljs-keyword\">return</span> db.update(<br>            TABLE_NAME,<br>            values,<br>            <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$COLUMN_ID</span> = ?\"</span>, <span class=\"hljs-comment\">// 通过ID定位要更新的笔记</span><br>            arrayOf(note.id.toString())<br>        )<br>    }<br><br>    <span class=\"hljs-comment\">// 根据ID删除一条笔记</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">deleteNoteById</span><span class=\"hljs-params\">(id: <span class=\"hljs-type\">Long</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> {<br>        <span class=\"hljs-keyword\">val</span> db = writableDatabase<br>        <span class=\"hljs-comment\">// 删除操作，返回被删除的行数</span><br>        <span class=\"hljs-keyword\">return</span> db.delete(<br>            TABLE_NAME,<br>            <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$COLUMN_ID</span> = ?\"</span>,<br>            arrayOf(id.toString())<br>        )<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"3\">\n<li>使用数据库帮助类 在app/src/main/java/你的包名/目录下创建 <strong>NoteActivity.kt</strong> 实例化NoteDbHelper，并调用其方法进行增删改查</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NoteActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() {<br>    <br>    <span class=\"hljs-comment\">// 实例化数据库帮助类</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> dbHelper: NoteDbHelper<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_note)<br><br>        <span class=\"hljs-comment\">// 初始化数据库帮助类</span><br>        dbHelper = NoteDbHelper(<span class=\"hljs-keyword\">this</span>)<br><br>        <span class=\"hljs-comment\">// 1. 插入一条新笔记</span><br>        <span class=\"hljs-keyword\">val</span> newNoteId = dbHelper.addNote(<span class=\"hljs-string\">\"我的第一篇笔记\"</span>, <span class=\"hljs-string\">\"这是使用SQLite存储的内容！\"</span>)<br>        Log.d(<span class=\"hljs-string\">\"SQLiteDemo\"</span>, <span class=\"hljs-string\">\"新笔记ID: <span class=\"hljs-variable\">$newNoteId</span>\"</span>)<br><br>        <span class=\"hljs-comment\">// 2. 查询所有笔记</span><br>        <span class=\"hljs-keyword\">val</span> allNotes = dbHelper.getAllNotes()<br>        <span class=\"hljs-keyword\">for</span> (note <span class=\"hljs-keyword\">in</span> allNotes) {<br>            Log.d(<span class=\"hljs-string\">\"SQLiteDemo\"</span>, <span class=\"hljs-string\">\"笔记: [ID:<span class=\"hljs-subst\">${note.id}</span>] <span class=\"hljs-subst\">${note.title}</span> - <span class=\"hljs-subst\">${note.content}</span>\"</span>)<br>        }<br><br>        <span class=\"hljs-comment\">// 假设我们要更新刚插入的笔记 (需要知道其ID)</span><br>        <span class=\"hljs-keyword\">if</span> (newNoteId != -<span class=\"hljs-number\">1L</span>) {<br>            <span class=\"hljs-keyword\">val</span> noteToUpdate = Note(newNoteId, <span class=\"hljs-string\">\"修改后的标题\"</span>, <span class=\"hljs-string\">\"更新后的内容\"</span>)<br>            <span class=\"hljs-keyword\">val</span> rowsUpdated = dbHelper.updateNote(noteToUpdate)<br>            Log.d(<span class=\"hljs-string\">\"SQLiteDemo\"</span>, <span class=\"hljs-string\">\"更新了 <span class=\"hljs-variable\">$rowsUpdated</span> 行\"</span>)<br>        }<br><br>        <span class=\"hljs-comment\">// 删除笔记的示例（谨慎操作）</span><br>        <span class=\"hljs-comment\">// val rowsDeleted = dbHelper.deleteNoteById(newNoteId)</span><br>        <span class=\"hljs-comment\">// Log.d(\"SQLiteDemo\", \"删除了 $rowsDeleted 行\")</span><br>    }<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> {<br>        dbHelper.close() <span class=\"hljs-comment\">// 记得在不用时关闭数据库连接</span><br>        <span class=\"hljs-keyword\">super</span>.onDestroy()<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n\n\n<ul>\n<li>在实际开发中，可以通过各种事件监听来实现对数据库的操作，如点击按钮、输入框等。</li>\n<li>在实际开发中，通常使用<strong>Room数据库框架</strong>来操作数据库，Room是一个基于SQLite的ORM框架，可以更轻松地操作数据库。</li>\n</ul>\n<h3><span id=\"%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8\">文件存储</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>Android系统提供了两种主要的文件存储方式<br><strong>​内部存储</strong>​​是每个应用独有的沙盒环境，位于/data/data/&lt;应用包名&gt;/目录下，为应用数据提供了最高级别的保护<br>​<strong>​外部存储</strong>​​可能是SD卡或设备的内置共享存储空间，适合存储需要共享或体积较大的文件</p>\n<h4><span id=\"%E5%86%85%E9%83%A8%E5%AD%98%E5%82%A8\">内部存储</span></h4><p>创建一个 FileStorageActivity.kt 文件用于演示文件操作，并添加以下代码：</p>\n<ul>\n<li>文件写入操作</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FileStorageActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() {<br>    <br>    <span class=\"hljs-comment\">// 写入文件</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">writeToInternalStorage</span><span class=\"hljs-params\">(filename: <span class=\"hljs-type\">String</span>, content: <span class=\"hljs-type\">String</span>)</span></span> {<br>        <span class=\"hljs-keyword\">try</span> {<br>            <span class=\"hljs-comment\">// 打开文件输出流</span><br>            <span class=\"hljs-keyword\">val</span> outputStream: FileOutputStream = openFileOutput(filename, Context.MODE_PRIVATE)<br>            <br>            <span class=\"hljs-comment\">// 将字符串转换为字节并写入</span><br>            outputStream.write(content.toByteArray())<br>            <br>            <span class=\"hljs-comment\">// 关闭流释放资源</span><br>            outputStream.close()<br>            <br>            Log.d(<span class=\"hljs-string\">\"FileIO\"</span>, <span class=\"hljs-string\">\"文件写入成功: <span class=\"hljs-variable\">$filename</span>\"</span>)<br>        } <span class=\"hljs-keyword\">catch</span> (e: Exception) {<br>            Log.e(<span class=\"hljs-string\">\"FileIO\"</span>, <span class=\"hljs-string\">\"文件写入失败\"</span>, e)<br>            e.printStackTrace()<br>        }<br>    }<br>    <br>    <span class=\"hljs-comment\">// 使用示例</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">saveUserData</span><span class=\"hljs-params\">()</span></span> {<br>        <span class=\"hljs-keyword\">val</span> userData = <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">            {</span><br><span class=\"hljs-string\">                \"name\": \"张三\",</span><br><span class=\"hljs-string\">                \"email\": \"zhangsan@example.com\",</span><br><span class=\"hljs-string\">                \"preferences\": {\"theme\": \"dark\"}</span><br><span class=\"hljs-string\">            }</span><br><span class=\"hljs-string\">        \"\"\"</span>.trimIndent()<br>        <br>        writeToInternalStorage(<span class=\"hljs-string\">\"user_config.json\"</span>, userData)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<p>​代码说明：​​</p>\n<ul>\n<li><p>openFileOutput()是Context类的方法，第一个参数是<strong>文件名</strong>，第二个参数是<strong>操作模式</strong></p>\n</li>\n<li><p>MODE_PRIVATE表示<strong>覆盖</strong>原文件，MODE_APPEND表示<strong>追加</strong>内容</p>\n</li>\n<li><p>必须使用try-catch处理可能的IOException</p>\n</li>\n<li><p>操作完成后务必<strong>关闭</strong>流释放资源</p>\n</li>\n<li><p>文件读取操作</p>\n</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 仍然在FileStorageActivity.kt中的FileStorageActivity类中添加以下方法</span><br><br><span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">readFromInternalStorage</span><span class=\"hljs-params\">(filename: <span class=\"hljs-type\">String</span>)</span></span>: String {<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">try</span> {<br>        <span class=\"hljs-comment\">// 打开文件输入流</span><br>        <span class=\"hljs-keyword\">val</span> inputStream: FileInputStream = openFileInput(filename)<br>        <br>        <span class=\"hljs-comment\">// 使用缓冲读取器提高读取效率</span><br>        <span class=\"hljs-keyword\">val</span> reader = BufferedReader(InputStreamReader(inputStream))<br>        <span class=\"hljs-keyword\">val</span> content = StringBuilder()<br>        <span class=\"hljs-keyword\">var</span> line: String?<br>        <br>        <span class=\"hljs-comment\">// 逐行读取内容</span><br>        <span class=\"hljs-keyword\">while</span> (reader.readLine().also { line = it } != <span class=\"hljs-literal\">null</span>) {<br>            content.append(line).append(<span class=\"hljs-string\">\"\\n\"</span>)<br>        }<br>        <br>        <span class=\"hljs-comment\">// 关闭资源</span><br>        reader.close()<br>        inputStream.close()<br>        <br>        <span class=\"hljs-comment\">// 返回读取的内容</span><br>        content.toString()<br>    } <span class=\"hljs-keyword\">catch</span> (e: FileNotFoundException) {<br>        Log.e(<span class=\"hljs-string\">\"FileIO\"</span>, <span class=\"hljs-string\">\"文件不存在: <span class=\"hljs-variable\">$filename</span>\"</span>, e)<br>        <span class=\"hljs-string\">\"\"</span> <span class=\"hljs-comment\">// 返回空字符串表示文件不存在</span><br>    } <span class=\"hljs-keyword\">catch</span> (e: Exception) {<br>        Log.e(<span class=\"hljs-string\">\"FileIO\"</span>, <span class=\"hljs-string\">\"文件读取失败\"</span>, e)<br>        <span class=\"hljs-string\">\"\"</span><br>    }<br>}<br><br><span class=\"hljs-comment\">// 使用示例</span><br><span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">loadUserConfig</span><span class=\"hljs-params\">()</span></span> {<br>    <span class=\"hljs-keyword\">val</span> config = readFromInternalStorage(<span class=\"hljs-string\">\"user_config.json\"</span>)<br>    <span class=\"hljs-keyword\">if</span> (config.isNotEmpty()) {<br>        <span class=\"hljs-comment\">// 处理配置数据</span><br>        Log.d(<span class=\"hljs-string\">\"FileIO\"</span>, <span class=\"hljs-string\">\"加载的配置: <span class=\"hljs-variable\">$config</span>\"</span>)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n<p>​代码说明：​​</p>\n<ul>\n<li>使用BufferedReader和InputStreamReader组合提高读取效率</li>\n<li>逐行读取适合文本文件，避免内存溢出</li>\n<li>需要处理文件不存在的特殊情况</li>\n</ul>\n<h4><span id=\"%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%98%E5%82%A8\">序列化存储</span></h4><table>\n<thead>\n<tr>\n<th>方案</th>\n<th>使用场景</th>\n<th>优缺点</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>Serializable</code></td>\n<td>将简单的对象持久化存储</td>\n<td>优点：实现简单；<br>缺点：效率低，不适合跨进程高频传输</td>\n</tr>\n<tr>\n<td><code>Parcelable</code></td>\n<td>跨进程通信使用（如Intent、AIDL等）</td>\n<td>优点：效率高，Android专用；<br>缺点：实现较为复杂</td>\n</tr>\n<tr>\n<td><code>JSON</code></td>\n<td>网络传输，将复杂对象信息存储到文件</td>\n<td>优点：跨平台，可读性好，兼容性强；<br>缺点：体积大</td>\n</tr>\n</tbody></table>\n<h3><span id=\"contentprovider\">ContentProvider</span></h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>ContentProvider是Android四大组件之一，它充当了一个​​标准化的<strong>数据安全中间层</strong>​​，允许你的应用将私有数据安全地<strong>共享</strong>给其他应用，或者去访问系统（如联系人、相册）或其他应用提供的数据它抽象了数据的底层存储细节（无论是SQLite数据库、文件还是网络数据），为所有数据访问提供了<strong>统一的接口</strong></p>\n<h4><span id=\"%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86\">工作原理</span></h4><ul>\n<li><p><strong>​ContentProvider（内容提供者）​​：</strong> 数据提供方，负责封装对数据的增删改查等操作。你需要继承ContentProvider类并实现其核心方法</p>\n</li>\n<li><p><strong>​ContentResolver（内容解析器）​​：</strong> 数据访问方。在任何需要访问数据的地方（如Activity），你通过ContentResolver（通过getContentResolver()获取）来调用统一的方法（query, insert, update, delete），由它去找到并调用正确的ContentProvider<br>。这实现了数据访问方式的统一</p>\n</li>\n<li><p><strong>​URI（统一资源标识符）​​：</strong> 这是数据的“地址”，用于唯一标识ContentProvider和其中的数据。它遵循标准格式：content://authority/path/id</p>\n<ul>\n<li><strong>content://：</strong> 固定前缀，表示该URI用于ContentProvider</li>\n<li><strong>authority：</strong> 授权标识，通常为应用的包名加上特定标识，用于在系统中唯一指定一个ContentProvider</li>\n<li><strong>path：</strong> 路径，通常用于指定要操作的数据表（如users）</li>\n<li><strong>id（可选）：</strong> 特定记录的ID（如/users/5表示ID为5的用户）</li>\n</ul>\n</li>\n</ul>\n<h4><span id=\"contentprovider%E7%9A%84%E4%BD%BF%E7%94%A8\">ContentProvider的使用</span></h4><ol>\n<li>​创建数据库契约类​​（定义数据库结构常量）：文件位置​​：app/src/main/java/com/example/yourAppName/目录下，新建Kotlin文件，例如NoteContract.kt 集中定义<strong>数据库名、表名、列名</strong>等常量，避免硬编码和拼写错误。</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// NoteContract.kt</span><br><span class=\"hljs-keyword\">object</span> NoteContract {<br>    <span class=\"hljs-comment\">// ContentProvider的授权标识，通常使用应用包名</span><br>    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> AUTHORITY = <span class=\"hljs-string\">\"com.example.notepad.provider\"</span><br><br>    <span class=\"hljs-comment\">// 定义Note数据表的模型</span><br>    <span class=\"hljs-keyword\">object</span> NoteEntry {<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> TABLE_NAME = <span class=\"hljs-string\">\"notes\"</span><br>        <span class=\"hljs-comment\">// 必须包含 _id 列，这是Adapter等组件所期望的</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> _ID = <span class=\"hljs-string\">\"_id\"</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_TITLE = <span class=\"hljs-string\">\"title\"</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_CONTENT = <span class=\"hljs-string\">\"content\"</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_CREATED_TIME = <span class=\"hljs-string\">\"created_time\"</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"2\">\n<li>​创建数据库帮助类​​（SQLiteOpenHelper）：在同目录下新建Kotlin文件，例如NoteDatabaseHelper.kt 管理数据库的<strong>创建和版本升级</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// NoteDatabaseHelper.kt</span><br><span class=\"hljs-keyword\">import</span> android.content.Context<br><span class=\"hljs-keyword\">import</span> android.database.sqlite.SQLiteDatabase<br><span class=\"hljs-keyword\">import</span> android.database.sqlite.SQLiteOpenHelper<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NoteDatabaseHelper</span>(context: Context) : SQLiteOpenHelper(<br>    context,<br>    DATABASE_NAME,<br>    <span class=\"hljs-literal\">null</span>,<br>    DATABASE_VERSION<br>) {<br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span> {<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> DATABASE_NAME = <span class=\"hljs-string\">\"notes.db\"</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> DATABASE_VERSION = <span class=\"hljs-number\">1</span><br>    }<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(db: <span class=\"hljs-type\">SQLiteDatabase</span>)</span></span> {<br>        <span class=\"hljs-comment\">// 执行创建表的SQL语句</span><br>        <span class=\"hljs-keyword\">val</span> SQL_CREATE_NOTES_TABLE = <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">            CREATE TABLE <span class=\"hljs-subst\">${NoteContract.NoteEntry.TABLE_NAME}</span> (</span><br><span class=\"hljs-string\">                <span class=\"hljs-subst\">${NoteContract.NoteEntry._ID}</span> INTEGER PRIMARY KEY AUTOINCREMENT,</span><br><span class=\"hljs-string\">                <span class=\"hljs-subst\">${NoteContract.NoteEntry.COLUMN_TITLE}</span> TEXT NOT NULL,</span><br><span class=\"hljs-string\">                <span class=\"hljs-subst\">${NoteContract.NoteEntry.COLUMN_CONTENT}</span> TEXT,</span><br><span class=\"hljs-string\">                <span class=\"hljs-subst\">${NoteContract.NoteEntry.COLUMN_CREATED_TIME}</span> INTEGER DEFAULT (strftime('%s','now'))</span><br><span class=\"hljs-string\">            )</span><br><span class=\"hljs-string\">        \"\"\"</span>.trimIndent()<br>        db.execSQL(SQL_CREATE_NOTES_TABLE)<br>    }<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onUpgrade</span><span class=\"hljs-params\">(db: <span class=\"hljs-type\">SQLiteDatabase</span>, oldVersion: <span class=\"hljs-type\">Int</span>, newVersion: <span class=\"hljs-type\">Int</span>)</span></span> {<br>        <span class=\"hljs-comment\">// 简单处理：删除旧表，创建新表。实际项目需做数据迁移。</span><br>        db.execSQL(<span class=\"hljs-string\">\"DROP TABLE IF EXISTS <span class=\"hljs-subst\">${NoteContract.NoteEntry.TABLE_NAME}</span>\"</span>)<br>        onCreate(db)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"3\">\n<li>实现自定义ContentProvider：在同目录下新建Kotlin文件，例如NoteProvider.kt 这是<strong>最核心</strong>的一步，我们需要创建一个类继承ContentProvider，并实现其<strong>六个核心方法</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// NoteProvider.kt</span><br><span class=\"hljs-keyword\">import</span> android.content.*<br><span class=\"hljs-keyword\">import</span> android.database.Cursor<br><span class=\"hljs-keyword\">import</span> android.net.Uri<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NoteProvider</span> : <span class=\"hljs-type\">ContentProvider</span>() {<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> dbHelper: NoteDatabaseHelper<br><br>    <span class=\"hljs-comment\">// UriMatcher用于匹配不同的URI请求</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> uriMatcher = UriMatcher(UriMatcher.NO_MATCH).apply {<br>        <span class=\"hljs-comment\">// 注册URI模式</span><br>        <span class=\"hljs-comment\">// content://com.example.notepad.provider/notes -&gt; 操作整个notes表</span><br>        addURI(NoteContract.AUTHORITY, <span class=\"hljs-string\">\"notes\"</span>, NOTES)<br>        <span class=\"hljs-comment\">// content://com.example.notepad.provider/notes/5 -&gt; 操作ID为5的单条笔记</span><br>        addURI(NoteContract.AUTHORITY, <span class=\"hljs-string\">\"notes/#\"</span>, NOTE_ID)<br>    }<br><br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span> {<br>        <span class=\"hljs-comment\">// 定义匹配码</span><br>        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> NOTES = <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> NOTE_ID = <span class=\"hljs-number\">2</span><br>    }<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">()</span></span>: <span class=\"hljs-built_in\">Boolean</span> {<br>        <span class=\"hljs-comment\">// 初始化数据库帮助类</span><br>        dbHelper = NoteDatabaseHelper(context!!)<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">// 返回true表示Provider初始化成功</span><br>    }<br><br>    <span class=\"hljs-comment\">// 查询数据</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">query</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        uri: <span class=\"hljs-type\">Uri</span>,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        projection: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">out</span> <span class=\"hljs-type\">String</span>&gt;?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        selection: <span class=\"hljs-type\">String</span>?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">out</span> <span class=\"hljs-type\">String</span>&gt;?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        sortOrder: <span class=\"hljs-type\">String</span>?</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">    )</span></span>: Cursor? {<br>        <span class=\"hljs-keyword\">val</span> db = dbHelper.readableDatabase<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) {<br>            NOTES -&gt; {<br>                <span class=\"hljs-comment\">// 查询所有笔记</span><br>                db.query(<br>                    NoteContract.NoteEntry.TABLE_NAME,<br>                    projection,<br>                    selection,<br>                    selectionArgs,<br>                    <span class=\"hljs-literal\">null</span>,<br>                    <span class=\"hljs-literal\">null</span>,<br>                    sortOrder ?: <span class=\"hljs-string\">\"<span class=\"hljs-subst\">${NoteContract.NoteEntry.COLUMN_CREATED_TIME}</span> DESC\"</span><br>                )<br>            }<br>            NOTE_ID -&gt; {<br>                <span class=\"hljs-comment\">// 查询单条笔记，从URI中提取ID</span><br>                <span class=\"hljs-keyword\">val</span> id = uri.lastPathSegment<br>                db.query(<br>                    NoteContract.NoteEntry.TABLE_NAME,<br>                    projection,<br>                    <span class=\"hljs-string\">\"<span class=\"hljs-subst\">${NoteContract.NoteEntry._ID}</span> = ?\"</span>,<br>                    arrayOf(id),<br>                    <span class=\"hljs-literal\">null</span>,<br>                    <span class=\"hljs-literal\">null</span>,<br>                    sortOrder<br>                )<br>            }<br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">\"Unknown URI: <span class=\"hljs-variable\">$uri</span>\"</span>)<br>        }.apply {<br>            <span class=\"hljs-comment\">// 设置通知URI，当该URI对应的数据变化时，Cursor会知道</span><br>            setNotificationUri(context?.contentResolver, uri)<br>        }<br>    }<br><br>    <span class=\"hljs-comment\">// 插入数据</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">insert</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, values: <span class=\"hljs-type\">ContentValues</span>?)</span></span>: Uri? {<br>        <span class=\"hljs-keyword\">val</span> db = dbHelper.writableDatabase<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) {<br>            NOTES -&gt; {<br>                <span class=\"hljs-keyword\">val</span> id = db.insert(NoteContract.NoteEntry.TABLE_NAME, <span class=\"hljs-literal\">null</span>, values)<br>                <span class=\"hljs-keyword\">if</span> (id &gt; <span class=\"hljs-number\">0</span>) {<br>                    <span class=\"hljs-comment\">// 插入成功，构造新插入数据的URI</span><br>                    <span class=\"hljs-keyword\">val</span> newUri = ContentUris.withAppendedId(uri, id)<br>                    <span class=\"hljs-comment\">// 通知所有监听此URI的数据观察者，数据已变更</span><br>                    context?.contentResolver?.notifyChange(newUri, <span class=\"hljs-literal\">null</span>)<br>                    newUri<br>                } <span class=\"hljs-keyword\">else</span> {<br>                    <span class=\"hljs-keyword\">throw</span> SQLException(<span class=\"hljs-string\">\"Failed to insert row into <span class=\"hljs-variable\">$uri</span>\"</span>)<br>                }<br>            }<br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">\"Insertion not supported for <span class=\"hljs-variable\">$uri</span>\"</span>)<br>        }<br>    }<br><br>    <span class=\"hljs-comment\">// 更新数据</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">update</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        uri: <span class=\"hljs-type\">Uri</span>,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        values: <span class=\"hljs-type\">ContentValues</span>?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        selection: <span class=\"hljs-type\">String</span>?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">out</span> <span class=\"hljs-type\">String</span>&gt;?</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">    )</span></span>: <span class=\"hljs-built_in\">Int</span> {<br>        <span class=\"hljs-keyword\">val</span> db = dbHelper.writableDatabase<br>        <span class=\"hljs-keyword\">val</span> count = <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) {<br>            NOTES -&gt; db.update(NoteContract.NoteEntry.TABLE_NAME, values, selection, selectionArgs)<br>            NOTE_ID -&gt; {<br>                <span class=\"hljs-keyword\">val</span> id = uri.lastPathSegment<br>                db.update(<br>                    NoteContract.NoteEntry.TABLE_NAME,<br>                    values,<br>                    <span class=\"hljs-string\">\"<span class=\"hljs-subst\">${NoteContract.NoteEntry._ID}</span> = ?\"</span>,<br>                    arrayOf(id)<br>                )<br>            }<br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">\"Update not supported for <span class=\"hljs-variable\">$uri</span>\"</span>)<br>        }<br>        <span class=\"hljs-comment\">// 如果更新了数据，通知变化</span><br>        <span class=\"hljs-keyword\">if</span> (count &gt; <span class=\"hljs-number\">0</span>) {<br>            context?.contentResolver?.notifyChange(uri, <span class=\"hljs-literal\">null</span>)<br>        }<br>        <span class=\"hljs-keyword\">return</span> count<br>    }<br><br>    <span class=\"hljs-comment\">// 删除数据</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">delete</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, selection: <span class=\"hljs-type\">String</span>?, selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">out</span> <span class=\"hljs-type\">String</span>&gt;?)</span></span>: <span class=\"hljs-built_in\">Int</span> {<br>        <span class=\"hljs-keyword\">val</span> db = dbHelper.writableDatabase<br>        <span class=\"hljs-keyword\">val</span> count = <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) {<br>            NOTES -&gt; db.delete(NoteContract.NoteEntry.TABLE_NAME, selection, selectionArgs)<br>            NOTE_ID -&gt; {<br>                <span class=\"hljs-keyword\">val</span> id = uri.lastPathSegment<br>                db.delete(<br>                    NoteContract.NoteEntry.TABLE_NAME,<br>                    <span class=\"hljs-string\">\"<span class=\"hljs-subst\">${NoteContract.NoteEntry._ID}</span> = ?\"</span>,<br>                    arrayOf(id)<br>                )<br>            }<br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">\"Deletion not supported for <span class=\"hljs-variable\">$uri</span>\"</span>)<br>        }<br>        <span class=\"hljs-keyword\">if</span> (count &gt; <span class=\"hljs-number\">0</span>) {<br>            context?.contentResolver?.notifyChange(uri, <span class=\"hljs-literal\">null</span>)<br>        }<br>        <span class=\"hljs-keyword\">return</span> count<br>    }<br><br>    <span class=\"hljs-comment\">// 返回指定URI的MIME类型</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getType</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>)</span></span>: String? {<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) {<br>            NOTES -&gt; <span class=\"hljs-string\">\"vnd.android.cursor.dir/vnd.<span class=\"hljs-subst\">${NoteContract.AUTHORITY}</span>.note\"</span><br>            NOTE_ID -&gt; <span class=\"hljs-string\">\"vnd.android.cursor.item/vnd.<span class=\"hljs-subst\">${NoteContract.AUTHORITY}</span>.note\"</span><br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">\"Unknown URI: <span class=\"hljs-variable\">$uri</span>\"</span>)<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"4\">\n<li>在AndroidManifest.xml中注册Provider：app/src/main/AndroidManifest.xml</li>\n</ol>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">\"1.0\"</span> encoding=<span class=\"hljs-string\">\"utf-8\"</span>?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">manifest</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">package</span>=<span class=\"hljs-string\">\"com.example.notepad\"</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">application</span> <span class=\"hljs-attr\">...</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">activity</span> <span class=\"hljs-attr\">...</span>&gt;</span> ... <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">activity</span>&gt;</span><br><br>        <span class=\"hljs-comment\">&lt;!-- 注册ContentProvider --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">provider</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\".NoteProvider\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:authorities</span>=<span class=\"hljs-string\">\"com.example.notepad.provider\"</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">\"true\"</span> /&gt;</span><br>            <span class=\"hljs-comment\">&lt;!-- </span><br><span class=\"hljs-comment\">                android:name: 你的ContentProvider类的完整路径。</span><br><span class=\"hljs-comment\">                android:authorities: 授权标识，必须与代码中定义的AUTHORITY完全一致。</span><br><span class=\"hljs-comment\">                android:exported: 是否允许其他应用访问。true表示允许。</span><br><span class=\"hljs-comment\">            --&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">application</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">manifest</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"5\">\n<li>在应用内或其他应用中通过ContentResolver访问数据（在Activity中）：</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 例如在您的 MainActivity.kt 中</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() {<br>    <span class=\"hljs-comment\">// 定义基础URI</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> baseUri = Uri.parse(<span class=\"hljs-string\">\"content://<span class=\"hljs-subst\">${NoteContract.AUTHORITY}</span>/notes\"</span>)<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br><br>        <span class=\"hljs-comment\">// 示例1：插入一条新笔记</span><br>        <span class=\"hljs-keyword\">val</span> values = ContentValues().apply {<br>            put(NoteContract.NoteEntry.COLUMN_TITLE, <span class=\"hljs-string\">\"我的第一条笔记\"</span>)<br>            put(NoteContract.NoteEntry.COLUMN_CONTENT, <span class=\"hljs-string\">\"这是通过ContentProvider保存的内容。\"</span>)<br>        }<br>        <span class=\"hljs-keyword\">val</span> newUri = contentResolver.insert(baseUri, values)<br>        Log.d(<span class=\"hljs-string\">\"NoteApp\"</span>, <span class=\"hljs-string\">\"新笔记插入成功，URI: <span class=\"hljs-variable\">$newUri</span>\"</span>)<br><br>        <span class=\"hljs-comment\">// 示例2：查询所有笔记</span><br>        <span class=\"hljs-keyword\">val</span> cursor = contentResolver.query(baseUri, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">null</span>)<br>        cursor?.use {<br>            <span class=\"hljs-keyword\">while</span> (it.moveToNext()) {<br>                <span class=\"hljs-keyword\">val</span> id = it.getLong(it.getColumnIndexOrThrow(NoteContract.NoteEntry._ID))<br>                <span class=\"hljs-keyword\">val</span> title = it.getString(it.getColumnIndexOrThrow(NoteContract.NoteEntry.COLUMN_TITLE))<br>                <span class=\"hljs-keyword\">val</span> content = it.getString(it.getColumnIndexOrThrow(NoteContract.NoteEntry.COLUMN_CONTENT))<br>                Log.d(<span class=\"hljs-string\">\"NoteApp\"</span>, <span class=\"hljs-string\">\"ID: <span class=\"hljs-variable\">$id</span>, Title: <span class=\"hljs-variable\">$title</span>, Content: <span class=\"hljs-variable\">$content</span>\"</span>)<br>            }<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h2><span id=\"%E5%BC%82%E6%AD%A5%E4%BA%A4%E4%BA%92\">异步交互</span></h2><h3><span id=\"handler\">handler</span></h3><h4><span id=\"%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E5%92%8C%E8%81%8C%E8%B4%A3\">核心组件和职责</span></h4><table>\n<thead>\n<tr>\n<th>组件</th>\n<th>职责</th>\n<th>类比</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Handler</td>\n<td><strong>​​发送​​</strong> 和 <strong>​​处理​​</strong> 消息</td>\n<td>公司的<strong>​​快递员</strong>​​，既负责把包裹寄出，也负责接收并处理送来的包裹。</td>\n</tr>\n<tr>\n<td>Message</td>\n<td>消息的载体，可以在线程间传递数据</td>\n<td>​<strong>​包裹</strong>​​，里面装着要传递的信息或任务</td>\n</tr>\n<tr>\n<td>MessageQueue</td>\n<td>一个按时间排序的​<strong>​消息队列</strong>​​，用于存储所有通过 Handler 发送的消息</td>\n<td>​<strong>​快递分拣中心</strong>​​，所有寄出的包裹都暂时存放在这里，排队等待发货</td>\n</tr>\n<tr>\n<td>Looper</td>\n<td>运行 MessageQueue 的线程，不断循环，从 MessageQueue 中依次取出消息，并分发给对应的 Handler 处理</td>\n<td><strong>分拣员/送货员</strong>​​，不停地从分拣中心取包裹，并按照地址交给对应的快递员</td>\n</tr>\n</tbody></table>\n<p>一个线程通常只有一个 MessageQueue和一个 Looper，但可以有多个 Handler对象</p>\n<h4><span id=\"%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">使用步骤</span></h4><h5><span id=\"%E4%BD%BF%E7%94%A8-sendmessage\">使用 sendMessage</span></h5><p>在 Activity 或 Fragment 中（通常在主线程），创建 Handler 并指定如何处理消息。</p>\n<ul>\n<li>步骤1：创建Handler对象，关联主线程Looper对象，并重写handleMessage方法</li>\n<li>步骤2：重写handleMessage方法，处理消息</li>\n<li>步骤3：创建线程模拟耗时操作</li>\n<li>步骤4：构造消息对象发送到主线程</li>\n</ul>\n<p>完整类实现</p>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> com.kei.handlerdemo<br><br><span class=\"hljs-keyword\">import</span> android.os.Bundle<br><span class=\"hljs-keyword\">import</span> android.os.Handler<br><span class=\"hljs-keyword\">import</span> android.os.Looper<br><span class=\"hljs-keyword\">import</span> android.os.Message<br><span class=\"hljs-keyword\">import</span> android.widget.TextView<br><span class=\"hljs-keyword\">import</span> androidx.activity.ComponentActivity<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 发送消息Activity</span><br><span class=\"hljs-comment\"> * 用于演示如何在子线程中执行耗时操作，并通过Handler将结果传递到主线程更新UI</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SendMessageActivity</span> : <span class=\"hljs-type\">ComponentActivity</span>() {<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> textView: TextView<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 主线程Handler，用于处理来自子线程的消息</span><br><span class=\"hljs-comment\">     * 使用Looper.getMainLooper()确保Handler在主线程中处理消息</span><br><span class=\"hljs-comment\">     * Looper能够自动处理到达的消息，并调用handleMessage方法进行处理</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-comment\">// 步骤1： 创建Handler对象，关联主线程Looper对象，并重写handleMessage方法</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> mainHandler = <span class=\"hljs-keyword\">object</span> : Handler(Looper.getMainLooper()){<br>        <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">         * 处理从子线程发送过来的消息</span><br><span class=\"hljs-comment\">         * <span class=\"hljs-doctag\">@param</span> msg 从子线程发送过来的消息对象</span><br><span class=\"hljs-comment\">         */</span><br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">handleMessage</span><span class=\"hljs-params\">(msg: <span class=\"hljs-type\">Message</span>)</span></span>{<br>            <span class=\"hljs-comment\">// 步骤2：在这里处理消息，此方法运行在主线程，可以安全更新ui</span><br>            <span class=\"hljs-comment\">// 根据消息类型处理不同的业务逻辑</span><br>            <span class=\"hljs-keyword\">when</span> (msg.what){<br>                <span class=\"hljs-number\">1</span> -&gt; {<br>                    <span class=\"hljs-comment\">// 从msg.obj中获取数据</span><br>                    <span class=\"hljs-comment\">// 更新textView显示加载结果</span><br>                    textView.text = msg.obj <span class=\"hljs-keyword\">as</span> String<br>                }<br>                <span class=\"hljs-number\">2</span> -&gt; {<br>                    <span class=\"hljs-comment\">// 也可以使用arg1，arg2等传递简单整型数据</span><br>                    <span class=\"hljs-comment\">// 处理进度信息（当前未使用）</span><br>                    <span class=\"hljs-keyword\">val</span> progress = msg.arg1<br>                    <span class=\"hljs-comment\">// 例如处理更新进度条</span><br>                }<br>            }<br>        }<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Activity创建时的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 用于恢复Activity状态的Bundle对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_send_message)<br>        <br>        <span class=\"hljs-comment\">// 初始化textView控件</span><br>        textView = findViewById(R.id.textView)<br><br>        <span class=\"hljs-comment\">// 创建并启动一个子线程来模拟耗时操作</span><br>        Thread{<br>            <span class=\"hljs-comment\">// 步骤3：模拟耗时操作，睡眠2秒</span><br>            Thread.sleep(<span class=\"hljs-number\">2000</span>)<br>            <span class=\"hljs-keyword\">val</span> result = <span class=\"hljs-string\">\"数据加载完成\"</span><br><br>            <span class=\"hljs-comment\">// 步骤4：构造消息对象并发送到主线程</span><br>            <span class=\"hljs-keyword\">val</span> message = mainHandler.obtainMessage() <span class=\"hljs-comment\">// 使用obtainMessage() 复用消息对象</span><br>            message.what = <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\">// 消息标识</span><br>            message.obj = result <span class=\"hljs-comment\">// 消息内容</span><br>            mainHandler.sendMessage(message) <span class=\"hljs-comment\">// 发送消息</span><br>        }.start()<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h5><span id=\"%E4%BD%BF%E7%94%A8-post\">使用 post</span></h5><ul>\n<li>步骤1: 创建Handler对象（关联主线程Looper）</li>\n<li>步骤2: 在子线程中执行耗时操作</li>\n<li>步骤3：使用post()方法，将UI更新操作直接投递到主线程执行</li>\n</ul>\n<p>完整类实现</p>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> com.kei.handlerdemo<br><br><span class=\"hljs-keyword\">import</span> android.os.Bundle<br><span class=\"hljs-keyword\">import</span> android.os.Handler<br><span class=\"hljs-keyword\">import</span> android.os.Looper<br><span class=\"hljs-keyword\">import</span> android.widget.TextView<br><span class=\"hljs-keyword\">import</span> androidx.activity.ComponentActivity<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * PostActivity类用于演示Handler的post和postDelayed方法的使用</span><br><span class=\"hljs-comment\"> * 通过子线程执行耗时操作后，使用Handler.post()方法将UI更新操作切换到主线程执行</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PostActivity</span>: <span class=\"hljs-type\">ComponentActivity</span>() {<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> textView: TextView<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 主线程Handler，用于将Runnable切换到主线程执行</span><br><span class=\"hljs-comment\">     * 使用Looper.getMainLooper()确保Handler在主线程中处理消息</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> mainHandler = Handler(Looper.getMainLooper())<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Activity创建时的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 用于恢复Activity状态的Bundle对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br><br>        setContentView(R.layout.activity_post)<br><br>        textView = findViewById(R.id.tv_post)<br><br>        <span class=\"hljs-comment\">// 创建并启动一个子线程来模拟耗时操作</span><br>        Thread{<br>            <span class=\"hljs-comment\">// 模拟耗时操作，睡眠2秒</span><br>            Thread.sleep(<span class=\"hljs-number\">2000</span>)<br>            <span class=\"hljs-keyword\">val</span> result = <span class=\"hljs-string\">\"数据加载完成\"</span><br><br>            <span class=\"hljs-comment\">// 使用Handler.post()将UI更新操作切换到主线程执行</span><br>            mainHandler.post {<br>                textView.text = result<br>            }<br>        }.start()<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 延迟任务方法，使用Handler.postDelayed()延迟执行UI更新操作</span><br><span class=\"hljs-comment\">     * 在指定延迟时间后将Runnable切换到主线程执行</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">delayTask</span><span class=\"hljs-params\">()</span></span>{<br>        mainHandler.postDelayed({<br>            textView.text = <span class=\"hljs-string\">\"延迟2秒执行\"</span><br>        }, <span class=\"hljs-number\">2000</span>)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h5><span id=\"%E5%AE%89%E5%85%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5\">安全的最佳实践</span></h5><ul>\n<li>将 Handler 定义为静态内部类，并不再持有外部类的强引用</li>\n<li>使用 WeakReference 弱引用 Activity</li>\n<li>在处理消息前，先判断 Activity 是否还存在</li>\n<li>在 Activity 销毁时，移除所有未处理的消息和回调</li>\n</ul>\n<p>完整类实现</p>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> com.kei.handlerdemo<br><br><span class=\"hljs-keyword\">import</span> android.os.Bundle<br><span class=\"hljs-keyword\">import</span> android.os.Handler<br><span class=\"hljs-keyword\">import</span> android.os.Looper<br><span class=\"hljs-keyword\">import</span> android.os.Message<br><span class=\"hljs-keyword\">import</span> android.widget.TextView<br><span class=\"hljs-keyword\">import</span> androidx.appcompat.app.AppCompatActivity<br><span class=\"hljs-keyword\">import</span> java.lang.ref.WeakReference<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SafeHandlerActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() {<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> textView: TextView<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> safeHandler: SafeHandler <span class=\"hljs-comment\">// 使用安全的 Handler</span><br><br>    <span class=\"hljs-comment\">// 1. 将 Handler 定义为静态内部类，并不再持有外部类的强引用</span><br>    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SafeHandler</span>(activity: SafeHandlerActivity) : Handler(Looper.getMainLooper()) {<br>        <span class=\"hljs-comment\">// 2. 使用 WeakReference 弱引用 Activity</span><br>        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> activityWeakReference: WeakReference&lt;SafeHandlerActivity&gt; = WeakReference(activity)<br><br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">handleMessage</span><span class=\"hljs-params\">(msg: <span class=\"hljs-type\">Message</span>)</span></span> {<br>            <span class=\"hljs-comment\">// 3. 在处理消息前，先判断 Activity 是否还存在</span><br>            <span class=\"hljs-keyword\">val</span> activity = activityWeakReference.<span class=\"hljs-keyword\">get</span>()<br>            <span class=\"hljs-keyword\">if</span> (activity != <span class=\"hljs-literal\">null</span>) { <span class=\"hljs-comment\">// 如果 Activity 没被回收</span><br>                <span class=\"hljs-comment\">// 安全地更新 UI</span><br>                <span class=\"hljs-keyword\">when</span> (msg.what) {<br>                    MSG_UPDATE_TEXT -&gt; {<br>                        activity.textView.text = msg.obj <span class=\"hljs-keyword\">as</span>? String<br>                    }<br>                    <span class=\"hljs-comment\">// 处理其他类型的消息...</span><br>                }<br>            }<br>            <span class=\"hljs-comment\">// 如果 Activity 为 null（已被回收），则不执行任何操作</span><br>        }<br>    }<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_safe_handler)<br>        textView = findViewById(R.id.tv_safe_handler)<br><br>        <span class=\"hljs-comment\">// 初始化安全的 Handler</span><br>        safeHandler = SafeHandler(<span class=\"hljs-keyword\">this</span>)<br><br>        <span class=\"hljs-comment\">// 在子线程中工作</span><br>        Thread {<br>            <span class=\"hljs-comment\">// 模拟耗时任务</span><br>            Thread.sleep(<span class=\"hljs-number\">1500</span>)<br>            <span class=\"hljs-keyword\">val</span> result = <span class=\"hljs-string\">\"数据加载完毕！\"</span><br><br>            <span class=\"hljs-comment\">// 创建并发送消息</span><br>            <span class=\"hljs-keyword\">val</span> message = safeHandler.obtainMessage().apply {<br>                what = MSG_UPDATE_TEXT<br>                obj = result<br>            }<br>            safeHandler.sendMessage(message)<br>        }.start()<br>    }<br><br>    <span class=\"hljs-comment\">// 4. 在 Activity 销毁时，移除所有未处理的消息和回调</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onDestroy()<br>        safeHandler.removeCallbacksAndMessages(<span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">// 参数为 null 表示移除所有</span><br>    }<br><br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span> {<br>        <span class=\"hljs-comment\">// 定义消息类型常量，便于管理</span><br>        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> MSG_UPDATE_TEXT = <span class=\"hljs-number\">1</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"coroutines-%E5%8D%8F%E7%A8%8B\">Coroutines 协程</span></h3><p><strong>Kotlin协程</strong>是处理异步操作的推荐方案，它能帮你用更直观的代码替代复杂的回调，并高效管理后台任务</p>\n<h4><span id=\"%E5%8D%8F%E7%A8%8B%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">协程使用步骤</span></h4><ol>\n<li>前置工作：添加依赖</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">dependencies {<br>    <span class=\"hljs-comment\">// 协程核心库</span><br>    implementation(<span class=\"hljs-string\">\"org.jetbrains.kotlinx:kotlinx-coroutines-android:1.10.2\"</span>)<br>    <span class=\"hljs-comment\">// 为ViewModel提供viewModelScope</span><br>    implementation(<span class=\"hljs-string\">\"androidx.lifecycle:lifecycle-viewmodel-ktx:2.9.4\"</span>)<br>    <span class=\"hljs-comment\">// 为Activity/Fragment提供lifecycleScope</span><br>    implementation(libs.androidx.lifecycle.runtime.ktx.v280)<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"2\">\n<li>在ViewModel中使用协程 文件位置：app/src/main/java/com/yourpackage/MyViewModel.kt 创建一个MyViewModel类，从网络获取数据并更新ui</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyViewModel</span>(<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> repository: MyRepository) : ViewModel() {<br><br>    <span class=\"hljs-comment\">// 使用LiveData暴露UI状态</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> _data = MutableLiveData&lt;String&gt;()<br>    <span class=\"hljs-keyword\">val</span> <span class=\"hljs-keyword\">data</span>: LiveData&lt;String&gt; = _data<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> _isLoading = MutableLiveData&lt;<span class=\"hljs-built_in\">Boolean</span>&gt;()<br>    <span class=\"hljs-keyword\">val</span> isLoading: LiveData&lt;<span class=\"hljs-built_in\">Boolean</span>&gt; = _isLoading<br><br>    <span class=\"hljs-comment\">// 触发数据获取</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">fetchData</span><span class=\"hljs-params\">()</span></span> {<br>        <span class=\"hljs-comment\">// 在viewModelScope内启动协程</span><br>        viewModelScope.launch {<br>            _isLoading.value = <span class=\"hljs-literal\">true</span><br>            <span class=\"hljs-keyword\">try</span> {<br>                <span class=\"hljs-comment\">// 执行挂起函数，获取数据</span><br>                <span class=\"hljs-keyword\">val</span> result = repository.fetchDataFromNetwork()<br>                _data.value = result<br>            } <span class=\"hljs-keyword\">catch</span> (e: Exception) {<br>                <span class=\"hljs-comment\">// 处理错误</span><br>                _data.value = <span class=\"hljs-string\">\"Error: <span class=\"hljs-subst\">${e.message}</span>\"</span><br>            } <span class=\"hljs-keyword\">finally</span> {<br>                _isLoading.value = <span class=\"hljs-literal\">false</span><br>            }<br>        }<br>    }<br>}<br><br><span class=\"hljs-comment\">// 假设的Repository，包含挂起函数</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyRepository</span> {<br>    <span class=\"hljs-comment\">// 声明为挂起函数，表明其内部执行耗时操作</span><br>    <span class=\"hljs-keyword\">suspend</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">fetchDataFromNetwork</span><span class=\"hljs-params\">()</span></span>: String {<br>        <span class=\"hljs-comment\">// 使用withContext确保耗时操作在IO线程池进行，保证主线程安全</span><br>        <span class=\"hljs-keyword\">return</span> withContext(Dispatchers.IO) {<br>            <span class=\"hljs-comment\">// 模拟网络请求，如使用Retrofit（Retrofit本身已支持挂起函数）</span><br>            kotlinx.coroutines.delay(<span class=\"hljs-number\">2000</span>) <span class=\"hljs-comment\">// 模拟2秒网络延迟</span><br>            <span class=\"hljs-string\">\"Hello from Network!\"</span><br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ul>\n<li><p><strong>viewModelScope.launch​​:</strong> 在ViewModel的作用域内<strong>启动一个新的协程</strong>，默认在​​主线程​​开始执行。这使得你可以在协程内直接更新UI状态（如设置_isLoading.value）</p>\n</li>\n<li><p>​<strong>​withContext(Dispatchers.IO)​​:</strong> 这是一个关键的<strong>挂起函数</strong>。它将协程的执行上下文切换到为I/O操作优化的线程池，执行耗时的网络或数据库操作。操作完成后，协程会自动切回原来的线程（此处是主线程）这使得fetchDataFromNetwork函数是​​主线程安全​​的，意味着你可以安全地从主线程调用它。</p>\n</li>\n</ul>\n<ol start=\"3\">\n<li>在Activity/Fragment中处理UI交互 文件位置：app/src/main/java/com/yourpackage/MyActivity.kt</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() { <br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> viewModel: MyViewModel <span class=\"hljs-keyword\">by</span> viewModels()<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br><br>        <span class=\"hljs-comment\">// 观察LiveData，当数据变化时更新UI</span><br>        viewModel.<span class=\"hljs-keyword\">data</span>.observe(<span class=\"hljs-keyword\">this</span>) { <span class=\"hljs-keyword\">data</span> -&gt;<br>            <span class=\"hljs-comment\">// 更新TextView等UI组件</span><br>            textView.text = <span class=\"hljs-keyword\">data</span><br>        }<br><br>        viewModel.isLoading.observe(<span class=\"hljs-keyword\">this</span>) { isLoading -&gt;<br>            progressBar.visibility = <span class=\"hljs-keyword\">if</span> (isLoading) View.VISIBLE <span class=\"hljs-keyword\">else</span> View.GONE<br>        }<br><br>        <span class=\"hljs-comment\">// 点击按钮触发数据获取</span><br>        button.setOnClickListener {<br>            viewModel.fetchData()<br>        }<br><br>        <span class=\"hljs-comment\">// 使用lifecycleScope执行与界面生命周期相关的协程任务</span><br>        lifecycleScope.launchWhenResumed {<br>            <span class=\"hljs-comment\">// 此协程只会在Activity处于Resumed状态时执行</span><br>            <span class=\"hljs-comment\">// 适合执行一些需要界面完全可见才进行的操作</span><br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"4\">\n<li>处理并行任务</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 在ViewModel或Repository中</span><br><span class=\"hljs-keyword\">suspend</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">fetchDataInParallel</span><span class=\"hljs-params\">()</span></span>: List&lt;String&gt; =<br>    kotlinx.coroutines.coroutineScope { <span class=\"hljs-comment\">// 创建一个协程作用域</span><br>        <span class=\"hljs-keyword\">val</span> deferredOne = async { repository.fetchFromSource1() } <span class=\"hljs-comment\">// 启动第一个异步任务</span><br>        <span class=\"hljs-keyword\">val</span> deferredTwo = async { repository.fetchFromSource2() } <span class=\"hljs-comment\">// 启动第二个异步任务</span><br><br>        <span class=\"hljs-comment\">// 等待两个任务都完成并返回结果</span><br>        <span class=\"hljs-keyword\">val</span> result1 = deferredOne.await()<br>        <span class=\"hljs-keyword\">val</span> result2 = deferredTwo.await()<br>        listOf(result1, result2)<br>    }<br></code></pre></td></tr></tbody></table></figure>\n\n<h2><span id=\"%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1\">网络通信</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3><span id=\"okhttp\">OkHttp</span></h3><p><strong>OkHttp</strong>是一个<strong>开源</strong>的<strong>HTTP客户端</strong>，<strong>用于</strong>在Android和Java应用程序中执行网络请求。</p>\n<h4><span id=\"okhttp%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">OkHttp使用步骤</span></h4><ol>\n<li>添加网络权限和依赖</li>\n</ol>\n<p>在 AndroidManifest.xml 文件中添加网络权限：</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!-- 添加网络权限 --&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">uses-permission</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.permission.INTERNET\"</span>/&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">uses-permission</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\"android.permission.ACCESS_NETWORK_STATE\"</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<p>在 gradle/libs.versions.toml 中定义 OkHttp 版本和依赖：</p>\n<figure class=\"highlight toml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs toml\"><span class=\"hljs-section\">[versions]</span><br><span class=\"hljs-attr\">okhttp</span> = <span class=\"hljs-string\">\"5.3.0\"</span><br><br><span class=\"hljs-section\">[libraries]</span><br><span class=\"hljs-attr\">okhttp</span> = { group = <span class=\"hljs-string\">\"com.squareup.okhttp3\"</span>, name = <span class=\"hljs-string\">\"okhttp\"</span>, version.ref = <span class=\"hljs-string\">\"okhttp\"</span>}<br></code></pre></td></tr></tbody></table></figure>\n\n<p>在 app/build.gradle.kts 中引入依赖：</p>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">dependencies {<br>    <span class=\"hljs-comment\">// 添加OkHttp依赖</span><br>    implementation(libs.okhttp)<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"2\">\n<li>创建网络服务类</li>\n</ol>\n<p>创建 NetworkService.kt 类，包含 GET 和 POST 请求方法：</p>\n<ul>\n<li>初始化 OkHttpClient 实例</li>\n<li>实现 GET 请求方法 makeGetRequest</li>\n<li>实现 POST 请求方法 makePostRequest</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 网络请求服务类</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NetworkService</span> {<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> client = OkHttpClient() <span class=\"hljs-comment\">// 创建OkHttpClient实例，用于发送网络请求</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 发送GET请求的示例方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> url 请求的URL地址</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> callback 回调函数，用于处理请求结果</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">makeGetRequest</span><span class=\"hljs-params\">(url: <span class=\"hljs-type\">String</span>, callback: (<span class=\"hljs-type\">String</span>?, <span class=\"hljs-type\">IOException</span>?) -&gt; <span class=\"hljs-type\">Unit</span>)</span></span> {<br>        <span class=\"hljs-comment\">// 1. 构建请求对象</span><br>        <span class=\"hljs-keyword\">val</span> request = Request.Builder()<br>            .url(url) <span class=\"hljs-comment\">// 设置请求URL</span><br>            .build()  <span class=\"hljs-comment\">// 构建Request对象</span><br><br>        <span class=\"hljs-comment\">// 2. 创建Call对象并异步执行</span><br>        client.newCall(request).enqueue(<span class=\"hljs-keyword\">object</span> : Callback {<br>            <span class=\"hljs-comment\">// 3. 处理请求失败的情况</span><br>            <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onFailure</span><span class=\"hljs-params\">(call: <span class=\"hljs-type\">Call</span>, e: <span class=\"hljs-type\">IOException</span>)</span></span> {<br>                <span class=\"hljs-comment\">// 请求失败，通过回调传递异常信息</span><br>                callback(<span class=\"hljs-literal\">null</span>, e)<br>            }<br><br>            <span class=\"hljs-comment\">// 4. 处理请求成功的情况</span><br>            <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onResponse</span><span class=\"hljs-params\">(call: <span class=\"hljs-type\">Call</span>, response: <span class=\"hljs-type\">Response</span>)</span></span> {<br>                <span class=\"hljs-comment\">// 5. 检查HTTP响应状态码是否成功(200-299)</span><br>                <span class=\"hljs-keyword\">if</span> (response.isSuccessful) {<br>                    <span class=\"hljs-comment\">// 请求成功，通过回调传递响应体内容</span><br>                    response.body?.let { responseBody -&gt;<br>                        callback(responseBody.string(), <span class=\"hljs-literal\">null</span>)<br>                    } ?: run {<br>                        callback(<span class=\"hljs-string\">\"\"</span>, <span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">// 如果body为null，返回空字符串</span><br>                    }<br>                } <span class=\"hljs-keyword\">else</span> {<br>                    <span class=\"hljs-comment\">// 请求失败，创建异常并传递错误码</span><br>                    callback(<span class=\"hljs-literal\">null</span>, IOException(<span class=\"hljs-string\">\"请求失败，错误码：<span class=\"hljs-subst\">${response.code}</span>\"</span>).also { <br>                        it.printStackTrace() <br>                    })<br>                }<br>            }<br>        })<br>    }<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 发送POST请求的示例方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> url 请求的URL地址</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jsonBody POST请求体中的JSON数据</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> callback 回调函数，用于处理请求结果</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">makePostRequest</span><span class=\"hljs-params\">(url: <span class=\"hljs-type\">String</span>, jsonBody: <span class=\"hljs-type\">String</span>, callback: (<span class=\"hljs-type\">String</span>?, <span class=\"hljs-type\">IOException</span>?) -&gt; <span class=\"hljs-type\">Unit</span>)</span></span>{<br>        <span class=\"hljs-comment\">// 1. 定义请求体的媒体类型为JSON</span><br>        <span class=\"hljs-keyword\">val</span> json = <span class=\"hljs-string\">\"application/json; charset=utf-8\"</span>.toMediaType()<br>        <br>        <span class=\"hljs-comment\">// 2. 将字符串转换为RequestBody对象</span><br>        <span class=\"hljs-keyword\">val</span> body = jsonBody.toRequestBody(json)<br><br>        <span class=\"hljs-comment\">// 3. 构建POST请求对象</span><br>        <span class=\"hljs-keyword\">val</span> request = Request.Builder()<br>            .url(url) <span class=\"hljs-comment\">// 设置请求URL</span><br>            .post(body) <span class=\"hljs-comment\">// 设置请求方法为POST，并附带请求体</span><br>            .build() <span class=\"hljs-comment\">// 构建Request对象</span><br><br>        <span class=\"hljs-comment\">// 4. 创建Call对象并异步执行</span><br>        client.newCall(request).enqueue(<span class=\"hljs-keyword\">object</span> : Callback{<br>            <span class=\"hljs-comment\">// 5. 处理请求失败的情况</span><br>            <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onFailure</span><span class=\"hljs-params\">(call: <span class=\"hljs-type\">Call</span>, e: <span class=\"hljs-type\">IOException</span>)</span></span> {<br>                <span class=\"hljs-comment\">// 请求失败，通过回调传递异常信息</span><br>                callback(<span class=\"hljs-literal\">null</span>, e)<br>            }<br><br>            <span class=\"hljs-comment\">// 6. 处理请求成功的情况</span><br>            <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onResponse</span><span class=\"hljs-params\">(call: <span class=\"hljs-type\">Call</span>, response: <span class=\"hljs-type\">Response</span>)</span></span> {<br>                <span class=\"hljs-comment\">// 7. 检查HTTP响应状态码是否成功(200-299)</span><br>                <span class=\"hljs-keyword\">if</span>(response.isSuccessful){<br>                    <span class=\"hljs-comment\">// 请求成功，通过回调传递响应体内容</span><br>                    response.body?.let { responseBody -&gt;<br>                        callback(responseBody.string(), <span class=\"hljs-literal\">null</span>)<br>                    } ?: run {<br>                        callback(<span class=\"hljs-string\">\"\"</span>, <span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">// 如果body为null，返回空字符串</span><br>                    }<br>                }<span class=\"hljs-keyword\">else</span>{<br>                    <span class=\"hljs-comment\">// 请求失败，创建异常并传递错误码</span><br>                    callback(<span class=\"hljs-literal\">null</span>, IOException(<span class=\"hljs-string\">\"请求失败，错误码：<span class=\"hljs-subst\">${response.code}</span>\"</span>).also { <br>                        it.printStackTrace() <br>                    })<br>                }<br>            }<br>        })<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"3\">\n<li>在 Activity 中使用网络服务</li>\n</ol>\n<p>在 MainActivity.kt 中：</p>\n<ul>\n<li>启用 ViewBinding 功能以访问 UI 元素</li>\n<li>创建 NetworkService 实例</li>\n<li>在按钮点击事件中调用相应的网络请求方法</li>\n<li>处理网络请求结果并在主线程中更新 UI</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span> : <span class=\"hljs-type\">ComponentActivity</span>() {<br><br>    <span class=\"hljs-comment\">// 延迟初始化绑定器</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> binding: ActivityMainBinding<br><br>    <span class=\"hljs-comment\">// 创建网络服务实例</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> networkService = NetworkService()<br><br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br><br>        <span class=\"hljs-comment\">// 1. inflate XML 布局文件，创建 View 对象</span><br>        binding = ActivityMainBinding.inflate(layoutInflater)<br><br>        <span class=\"hljs-comment\">// 2. 将根视图设置为 Activity 的内容视图</span><br>        setContentView(binding.root)<br><br>        <span class=\"hljs-comment\">// 3. 现在可以通过 binding 访问布局中的所有视图组件</span><br>        binding.btnGet.setOnClickListener {<br>            networkService.makeGetRequest(<span class=\"hljs-string\">\"https://httpbin.org/get\"</span>) { response: String?, error: IOException? -&gt;<br>                runOnUiThread {<br>                    <span class=\"hljs-keyword\">if</span> (error != <span class=\"hljs-literal\">null</span>){<br>                        Log.e(<span class=\"hljs-string\">\"NetworkDemo\"</span>, <span class=\"hljs-string\">\"Get请求失败：<span class=\"hljs-subst\">${error.message}</span>\"</span>)<br>                        Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">\"Get请求失败：<span class=\"hljs-subst\">${error.message}</span>\"</span>, Toast.LENGTH_SHORT).show()<br>                        binding.tvResult.text = <span class=\"hljs-string\">\"Get请求失败：<span class=\"hljs-subst\">${error.message}</span>\"</span><br>                    }<span class=\"hljs-keyword\">else</span>{<br>                        Log.d(<span class=\"hljs-string\">\"NetworkDemo\"</span>, <span class=\"hljs-string\">\"Get请求成功：<span class=\"hljs-subst\">${response}</span>\"</span>)<br>                        Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">\"Get请求成功:<span class=\"hljs-subst\">${response}</span>\"</span>, Toast.LENGTH_SHORT).show()<br>                        binding.tvResult.text = <span class=\"hljs-string\">\"Get请求成功：<span class=\"hljs-subst\">${response}</span>\"</span><br>                    }<br>                }<br>            }<br>        }<br><br>        binding.btnPost.setOnClickListener {<br>            <span class=\"hljs-keyword\">val</span> jsonBody = <span class=\"hljs-string\">\"\"\"</span><br><span class=\"hljs-string\">                {</span><br><span class=\"hljs-string\">                    \"name\": \"John Doe\",</span><br><span class=\"hljs-string\">                    \"age\": 30</span><br><span class=\"hljs-string\">                }</span><br><span class=\"hljs-string\">            \"\"\"</span>.trimIndent()<br><br>            networkService.makePostRequest(<span class=\"hljs-string\">\"https://httpbin.org/post\"</span>, jsonBody) { response: String?, error: IOException? -&gt;<br>                runOnUiThread {<br>                    <span class=\"hljs-keyword\">if</span> (error != <span class=\"hljs-literal\">null</span>){<br>                        Log.e(<span class=\"hljs-string\">\"NetworkDemo\"</span>, <span class=\"hljs-string\">\"Post请求失败：<span class=\"hljs-subst\">${error.message}</span>\"</span>)<br>                        Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">\"Post请求失败：<span class=\"hljs-subst\">${error.message}</span>\"</span>, Toast.LENGTH_SHORT).show()<br>                        binding.tvResult.text = <span class=\"hljs-string\">\"Post请求失败：<span class=\"hljs-subst\">${error.message}</span>\"</span><br>                    }<span class=\"hljs-keyword\">else</span>{<br>                        Log.d(<span class=\"hljs-string\">\"NetworkDemo\"</span>, <span class=\"hljs-string\">\"Post请求成功：<span class=\"hljs-subst\">${response}</span>\"</span>)<br>                        Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">\"Post请求成功,<span class=\"hljs-subst\">${response}</span>\"</span>, Toast.LENGTH_SHORT).show()<br>                        binding.tvResult.text = <span class=\"hljs-string\">\"Post请求成功：<span class=\"hljs-subst\">${response}</span>\"</span><br>                    }<br>                }<br>            }<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<h2><span id=\"%E5%90%8E%E5%8F%B0%E6%9C%8D%E5%8A%A1\">后台服务</span></h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3><span id=\"%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81\">基本特征</span></h3><ul>\n<li><strong>无 UI 界面：</strong> 在后台运行，不与用户直接交互。</li>\n<li><strong>生命周期独立：</strong> 不受 Activity 生命周期直接影响（启动它的 Activity 销毁后，Service 可以继续运行）。</li>\n<li><strong>运行在主线程：</strong> 这一点至关重要！默认情况下，Service 与你的应用运行在同一个进程的主线程（UI 线程）中。因此，你不能直接在 Service 中执行<strong>耗时操作</strong>（如网络请求、大量文件读写），否则会阻塞主线程，导致应用无响应（ANR）。必须在 Service 内部<strong>创建子线程</strong>来处理这些任务</li>\n</ul>\n<h3><span id=\"%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F\">启动方式</span></h3><h4><span id=\"%E9%80%9A%E8%BF%87startservice%E5%90%AF%E5%8A%A8\">通过startService()启动</span></h4><ul>\n<li><strong>生命周期</strong>流程：<strong>onCreate()→ onStartCommand()→ (运行中) → onDestroy()</strong></li>\n<li>onStartCommand()的返回值：这个返回值决定了服务被系统意外杀死后如何重启，非常重要<ul>\n<li>START_STICKY：服务被杀死后会被系统<strong>重新创建</strong>，但之前的 Intent 数据会<strong>丢失</strong>（传入 null）。适合<strong>音乐播放</strong>等持续任务</li>\n<li>START_NOT_STICKY：服务被杀死后<strong>不会自动重启</strong>。适合一次性的任务，如<strong>下载</strong>单个文件</li>\n<li>START_REDELIVER_INTENT：服务被杀死后会被<strong>重启</strong>，并且最后一个 Intent 会被<strong>重新传递</strong>。适合必须完成的任务，如<strong>支付</strong>回调</li>\n</ul>\n</li>\n</ul>\n<h4><span id=\"%E9%80%9A%E8%BF%87bindservice%E5%90%AF%E5%8A%A8\">通过bindService()启动</span></h4><p>这种方式允许组件（如 Activity）与 Service 进行双向通信。</p>\n<ul>\n<li><strong>生命周期</strong>流程：onCreate()→ onBind()→ (运行中，与绑定者交互) → onUnbind()→ onDestroy()</li>\n<li>通信桥梁 IBinder：服务通过 onBind()方法返回一个 IBinder对象，绑定组件通过这个对象来调用服务内部的方法，实现交互</li>\n</ul>\n<h4><span id=\"%E6%B7%B7%E5%90%88%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F\">混合启动方式</span></h4><p>一个 Service 可以同时被 startService()启动并被 bindService()绑定。这时，必须同时调用 stopService()和<strong>所有绑定组件</strong>的 unbindService()，服务才会销毁</p>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><h4><span id=\"startservice%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F%E7%A4%BA%E4%BE%8B\">startService()启动方式示例</span></h4><p>以开启后台日志服务为例：</p>\n<ol>\n<li>创建后台日志服务类LoggingService.kt，继承 Service类，需要重写onCreate()、onStartCommand()、onDestroy()方法，onBind()方法可返回null</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LoggingService</span>: <span class=\"hljs-type\">Service</span>() {<br><br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span>{<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> TAG = <span class=\"hljs-string\">\"LoggingService\"</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> EXTRA_MESSAGE = <span class=\"hljs-string\">\"extra_massage\"</span> <span class=\"hljs-comment\">// 用于Intent传递数据的键</span><br>    }<br><br>    <span class=\"hljs-comment\">// 服务创建时被调用（仅调用一次）</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">()</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate()<br>        Log.d(TAG, <span class=\"hljs-string\">\"日志服务已创建\"</span>)<br>    }<br><br>    <span class=\"hljs-comment\">// 核心方法，每次startService都会调用</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onStartCommand</span><span class=\"hljs-params\">(intent: <span class=\"hljs-type\">Intent</span>?, flags: <span class=\"hljs-type\">Int</span>, startId: <span class=\"hljs-type\">Int</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> {<br>        Log.d(TAG, <span class=\"hljs-string\">\"收到启动命令，startID：<span class=\"hljs-variable\">$startId</span>\"</span>)<br><br>        <span class=\"hljs-comment\">// 1.从Intent中获取要记录的消息</span><br>        <span class=\"hljs-keyword\">val</span> message = intent?.getStringExtra(EXTRA_MESSAGE)?: <span class=\"hljs-string\">\"默认消息\"</span><br><br>        <span class=\"hljs-comment\">// 2.开启新线程执行耗时操作，避免阻塞主线程</span><br>        thread(start = <span class=\"hljs-literal\">true</span>) {<br>            <span class=\"hljs-comment\">// 模拟耗时的保存操作</span><br>            Log.d(TAG, <span class=\"hljs-string\">\"后台线程开始工作：<span class=\"hljs-subst\">${Thread.currentThread().name}</span>\"</span>)<br>            Thread.sleep(<span class=\"hljs-number\">3000</span>)<br>            Log.i(<span class=\"hljs-string\">\"APP_LOG\"</span>, <span class=\"hljs-string\">\"消息已记录：<span class=\"hljs-variable\">$message</span>\"</span>)<br><br>            <span class=\"hljs-comment\">// 3.任务完成后，服务自行停止</span><br>            stopSelf(startId)<br>            Log.d(TAG, <span class=\"hljs-string\">\"任务完成，服务已停止\"</span>)<br>        }<br><br>        <span class=\"hljs-comment\">// 4.返回值，如果服务被杀死，希望系统重新创建并重传最后的Intent</span><br>        <span class=\"hljs-keyword\">return</span> START_REDELIVER_INTENT<br>    }<br><br>    <span class=\"hljs-comment\">// 必须实现的方法，但对于startService方式可返回null</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onBind</span><span class=\"hljs-params\">(intent: <span class=\"hljs-type\">Intent</span>?)</span></span>: IBinder? = <span class=\"hljs-literal\">null</span><br><br>    <span class=\"hljs-comment\">// 服务销毁时清理资源</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onDestroy()<br>        Log.d(TAG, <span class=\"hljs-string\">\"日志服务已销毁\"</span>)<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"2\">\n<li>在AndroidManifest.xml中注册服务，manifest/application标签内添加如下内容：</li>\n</ol>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--注册LoggingService--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">service</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">\".LoggingService\"</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"3\">\n<li>在需要使用服务时，调用startService()方法启动服务，并传递Intent对象，Intent对象中可以携带数据</li>\n</ol>\n<p>示例在主活动中通过按钮点击启动服务：</p>\n<figure class=\"highlight kotlin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span> : <span class=\"hljs-type\">ComponentActivity</span>() {<br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> {<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br><br>        <span class=\"hljs-comment\">// 启动服务按钮</span><br>        findViewById&lt;Button&gt;(R.id.btn_start_service).setOnClickListener {<br>            <span class=\"hljs-comment\">// 1. 创建Intent, 指定要启动的服务</span><br>            <span class=\"hljs-keyword\">val</span> intent = Intent(<span class=\"hljs-keyword\">this</span>, LoggingService::<span class=\"hljs-keyword\">class</span>.java).apply{<br>                <span class=\"hljs-comment\">// 2.通过Intent传递数据给服务</span><br>                putExtra(LoggingService.EXTRA_MESSAGE, <span class=\"hljs-string\">\"这是一条来自 Activity 的消息，时间：<span class=\"hljs-subst\">${System.currentTimeMillis()}</span>\"</span>)<br>            }<br><br>            <span class=\"hljs-comment\">// 3.启动服务</span><br>            startService(intent)<br>        }<br><br>        <span class=\"hljs-comment\">// 停止服务按钮</span><br>        findViewById&lt;Button&gt;(R.id.btn_stop_service).setOnClickListener {<br>            <span class=\"hljs-comment\">// 停止服务的Intent</span><br>            <span class=\"hljs-keyword\">val</span> stopIntent = Intent(<span class=\"hljs-keyword\">this</span>, LoggingService::<span class=\"hljs-keyword\">class</span>.java)<br>            stopService(stopIntent)<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n</body></html>","excerpt":"","more":"<h1 id=\"Android-开发\"><a href=\"#Android-开发\" class=\"headerlink\" title=\"Android 开发\"></a>Android 开发</h1><h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><ul>\n<li><a href=\"#android-%E5%BC%80%E5%8F%91\">Android 开发</a><ul>\n<li><a href=\"#%E7%9B%AE%E5%BD%95\">目录</a></li>\n<li><a href=\"#%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6\">前置条件</a></li>\n<li><a href=\"#%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6\">四大组件</a><ul>\n<li><a href=\"#%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6\">入口文件</a></li>\n<li><a href=\"#activity\">Activity</a><ul>\n<li><a href=\"#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAactivity\">创建一个Activity</a></li>\n<li><a href=\"#activity%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\">Activity生命周期</a></li>\n<li><a href=\"#activity%E4%BF%9D%E5%AD%98%E5%92%8C%E6%81%A2%E5%A4%8D\">Activity保存和恢复</a></li>\n<li><a href=\"#activity%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F\">Activity启动模式</a></li>\n<li><a href=\"#fragment\">Fragment</a><ul>\n<li><a href=\"#%E5%88%9B%E5%BB%BAfragment\">创建Fragment</a></li>\n<li><a href=\"#%E5%B0%86fragment%E6%B7%BB%E5%8A%A0%E5%88%B0activity%E4%B8%AD\">将Fragment添加到Activity中</a></li>\n<li><a href=\"#fragment%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\">Fragment生命周期</a></li>\n</ul>\n</li>\n<li><a href=\"#intent\">Intent</a><ul>\n<li><a href=\"#intent-flag\">Intent Flag</a></li>\n<li><a href=\"#intentfilter-%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99\">IntentFilter 匹配规则</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#service\">Service</a><ul>\n<li><a href=\"#service%E7%9A%84%E5%88%9B%E5%BB%BA\">Service的创建</a></li>\n<li><a href=\"#service%E7%9A%84%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F\">Service的启动方式</a></li>\n<li><a href=\"#service%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\">Service的生命周期</a></li>\n</ul>\n</li>\n<li><a href=\"#broadcastreceiver\">BroadcastReceiver</a><ul>\n<li><a href=\"#%E5%88%9B%E5%BB%BAbroadcastreceiver\">创建BroadcastReceiver</a></li>\n<li><a href=\"#%E6%B3%A8%E5%86%8Cbroadcastreceiver\">注册BroadcastReceiver</a></li>\n<li><a href=\"#broadcast-%E5%88%86%E7%B1%BB\">Broadcast 分类</a></li>\n</ul>\n</li>\n<li><a href=\"#contentprovider\">ContentProvider</a><ul>\n<li><a href=\"#%E5%88%9B%E5%BB%BAcontentprovider\">创建ContentProvider</a></li>\n<li><a href=\"#%E6%B3%A8%E5%86%8Ccontentprovider\">注册ContentProvider</a></li>\n<li><a href=\"#contentresolver\">ContentResolver</a></li>\n<li><a href=\"#%E4%B8%89%E4%B8%AA%E8%BE%85%E5%8A%A9%E7%B1%BB\">三个辅助类</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6\">基本组件</a><ul>\n<li><a href=\"#textview-%E6%96%87%E6%9C%AC%E6%98%BE%E7%A4%BA%E6%8E%A7%E4%BB%B6\">TextView 文本显示控件</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7\">布局属性</a></li>\n</ul>\n</li>\n<li><a href=\"#button-%E6%8C%89%E9%92%AE\">Button 按钮</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-1\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#edittext-%E6%96%87%E6%9C%AC%E8%BE%93%E5%85%A5%E6%A1%86\">EditText 文本输入框</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-2\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7-1\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#imageview-%E5%9B%BE%E7%89%87\">ImageView 图片</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-3\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7-2\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#progressbar-%E8%BF%9B%E5%BA%A6%E6%9D%A1\">ProgressBar 进度条</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-4\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7-3\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#scrollview-%E6%BB%9A%E5%8A%A8\">ScrollView 滚动</a><ul>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-5\">布局属性</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7-4\">代码添加属性</a></li>\n</ul>\n</li>\n<li><a href=\"#recyclerview-%E5%AE%B9%E5%99%A8\">RecyclerView 容器</a><ul>\n<li><a href=\"#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6\">核心组件</a></li>\n<li><a href=\"#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96\">引入依赖</a></li>\n<li><a href=\"#%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7-6\">布局属性</a></li>\n<li><a href=\"#recyclerview%E7%9A%84%E4%BD%BF%E7%94%A8\">RecyclerView的使用</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%B8%83%E5%B1%80\">布局</a><ul>\n<li><a href=\"#%E6%B5%8B%E9%87%8F%E5%92%8C%E5%B8%83%E5%B1%80\">测量和布局</a></li>\n<li><a href=\"#framelayout\">FrameLayout</a><ul>\n<li><a href=\"#%E8%87%AA%E8%BA%AB%E5%B1%9E%E6%80%A7\">自身属性</a></li>\n<li><a href=\"#%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7\">子视图属性</a></li>\n</ul>\n</li>\n<li><a href=\"#linearlayout\">LinearLayout</a><ul>\n<li><a href=\"#%E8%87%AA%E8%BA%AB%E5%B1%9E%E6%80%A7-1\">自身属性</a></li>\n<li><a href=\"#%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7-1\">子视图属性</a></li>\n</ul>\n</li>\n<li><a href=\"#relativelayout\">RelativeLayout</a><ul>\n<li><a href=\"#%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7-2\">子视图属性</a></li>\n</ul>\n</li>\n<li><a href=\"#constraintlayout\">ConstraintLayout</a><ul>\n<li><a href=\"#%E5%AD%90%E8%A7%86%E5%9B%BE%E5%B1%9E%E6%80%A7-3\">子视图属性</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%80%BB%E7%BB%93\">总结</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6\">创建自定义组件</a></li>\n<li><a href=\"#%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB\">属性动画</a><ul>\n<li><a href=\"#%E5%8A%A8%E7%94%BB%E6%A1%86%E6%9E%B6\">动画框架</a></li>\n<li><a href=\"#%E5%B8%B8%E7%94%A8api\">常用API</a></li>\n<li><a href=\"#viewpropertyanimator\">ViewPropertyAnimator</a></li>\n<li><a href=\"#objectanimator\">ObjectAnimator</a><ul>\n<li><a href=\"#%E5%8A%A8%E7%94%BB%E6%8F%92%E5%80%BC%E5%99%A8\">动画插值器</a></li>\n</ul>\n</li>\n<li><a href=\"#xmlanimator\">xmlAnimator</a><ul>\n<li><a href=\"#%E5%8A%A8%E7%94%BB%E5%B1%9E%E6%80%A7%E8%B5%84%E6%BA%90%E7%9A%84%E5%AE%9A%E4%B9%89\">动画属性资源的定义</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E6%95%B0%E6%8D%AE%E5%82%A8%E5%AD%98\">数据储存</a><ul>\n<li><a href=\"#sharedpreferences\">SharedPreferences</a><ul>\n<li><a href=\"#%E7%AE%80%E4%BB%8B\">简介</a></li>\n<li><a href=\"#%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE\">存储数据</a></li>\n<li><a href=\"#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE\">读取数据</a></li>\n<li><a href=\"#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE\">删除数据</a></li>\n<li><a href=\"#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E5%AE%9E%E8%B7%B5\">完整代码实践</a></li>\n</ul>\n</li>\n<li><a href=\"#sqlite%E6%95%B0%E6%8D%AE%E5%BA%93\">SQLite数据库</a><ul>\n<li><a href=\"#sqlite%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C\">SQLite数据库操作</a></li>\n<li><a href=\"#sqlite%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">SQLite使用步骤</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8\">文件存储</a><ul>\n<li><a href=\"#%E5%86%85%E9%83%A8%E5%AD%98%E5%82%A8\">内部存储</a></li>\n<li><a href=\"#%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%98%E5%82%A8\">序列化存储</a></li>\n</ul>\n</li>\n<li><a href=\"#contentprovider-1\">ContentProvider</a><ul>\n<li><a href=\"#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86\">工作原理</a></li>\n<li><a href=\"#contentprovider%E7%9A%84%E4%BD%BF%E7%94%A8\">ContentProvider的使用</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%BC%82%E6%AD%A5%E4%BA%A4%E4%BA%92\">异步交互</a><ul>\n<li><a href=\"#handler\">handler</a><ul>\n<li><a href=\"#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E5%92%8C%E8%81%8C%E8%B4%A3\">核心组件和职责</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">使用步骤</a><ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8-sendmessage\">使用 sendMessage</a></li>\n<li><a href=\"#%E4%BD%BF%E7%94%A8-post\">使用 post</a></li>\n<li><a href=\"#%E5%AE%89%E5%85%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5\">安全的最佳实践</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#coroutines-%E5%8D%8F%E7%A8%8B\">Coroutines 协程</a><ul>\n<li><a href=\"#%E5%8D%8F%E7%A8%8B%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">协程使用步骤</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1\">网络通信</a><ul>\n<li><a href=\"#okhttp\">OkHttp</a><ul>\n<li><a href=\"#okhttp%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\">OkHttp使用步骤</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%90%8E%E5%8F%B0%E6%9C%8D%E5%8A%A1\">后台服务</a><ul>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81\">基本特征</a></li>\n<li><a href=\"#%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F\">启动方式</a><ul>\n<li><a href=\"#%E9%80%9A%E8%BF%87startservice%E5%90%AF%E5%8A%A8\">通过startService()启动</a></li>\n<li><a href=\"#%E9%80%9A%E8%BF%87bindservice%E5%90%AF%E5%8A%A8\">通过bindService()启动</a></li>\n<li><a href=\"#%E6%B7%B7%E5%90%88%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F\">混合启动方式</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</a><ul>\n<li><a href=\"#startservice%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F%E7%A4%BA%E4%BE%8B\">startService()启动方式示例</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"前置条件\"><a href=\"#前置条件\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h2><ul>\n<li><a href=\"https://developer.android.google.cn/studio/index.html?hl=ro\">安装Android Studio</a></li>\n</ul>\n<h2 id=\"四大组件\"><a href=\"#四大组件\" class=\"headerlink\" title=\"四大组件\"></a>四大组件</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<table>\n<thead>\n<tr>\n<th>组件名称</th>\n<th>场景</th>\n<th>用途</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"#activity\">Activity</a></td>\n<td>界面交互</td>\n<td>是用户交互的入口点，代表一个界面，可以拉起其他的界面和组件</td>\n</tr>\n<tr>\n<td><a href=\"#service\">Service</a></td>\n<td>后台服务</td>\n<td>处理耗时任务(即使应用退出)，比如下载，网络请求，跨进程访问等</td>\n</tr>\n<tr>\n<td><a href=\"#broadcastreceiver\">BroadcastReceiver</a></td>\n<td>事件响应</td>\n<td>捕获系统事件(时区变更，短信到达)或者用户发送到自定义事件，然后根据事件决定接下来的业务逻辑</td>\n</tr>\n<tr>\n<td><a href=\"#contentprovider\">ContentProvider</a></td>\n<td>数据共享</td>\n<td>对外安全暴露私有数据，提供统一的api访问，内部可以是不同存储方式的实现</td>\n</tr>\n</tbody></table>\n<h3 id=\"入口文件\"><a href=\"#入口文件\" class=\"headerlink\" title=\"入口文件\"></a>入口文件</h3><p>AndroidManifest.xml</p>\n<h3 id=\"Activity\"><a href=\"#Activity\" class=\"headerlink\" title=\"Activity\"></a>Activity</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4 id=\"创建一个Activity\"><a href=\"#创建一个Activity\" class=\"headerlink\" title=\"创建一个Activity\"></a>创建一个Activity</h4><ul>\n<li>首先在layout目录下创建一个<strong>xml文件</strong>，并设置文件名，如activity_1.xml</li>\n<li>创建与<strong>xml文件</strong>对应的activity子类</li>\n<li>把声明的子类在AndroidManifest.xml中注入</li>\n<li><strong>xml文件</strong>可以添加组件</li>\n<li>kt文件可以为组件添加事件监听</li>\n</ul>\n<h4 id=\"Activity生命周期\"><a href=\"#Activity生命周期\" class=\"headerlink\" title=\"Activity生命周期\"></a>Activity生命周期</h4><table>\n<thead>\n<tr>\n<th>生命周期</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onCreate()</td>\n<td>首次创建Activity时调用，完成初始化工作，多用于创建视图、为列表绑定数据</td>\n</tr>\n<tr>\n<td>onStart()</td>\n<td>当Activity可见时调用，多用于启动后台任务</td>\n</tr>\n<tr>\n<td>onResume()</td>\n<td>当Activity开始与用户交互时调用，进入活跃状态，位于栈顶，可以接受用户输入</td>\n</tr>\n<tr>\n<td>onPause()</td>\n<td>要启动另一个Activity时调用，暂停当前Activity，但保留状态，可以保存数据，最后一个可控的回调</td>\n</tr>\n<tr>\n<td>onStop()</td>\n<td>当Activity不可见时调用</td>\n</tr>\n<tr>\n<td>onDestroy()</td>\n<td>当Activity销毁时调用，发生在finish()方法执行时，或由于系统内存不足而销毁</td>\n</tr>\n<tr>\n<td>onRestart()</td>\n<td>当Activity重新启动时调用，通常用于恢复数据</td>\n</tr>\n</tbody></table>\n<h4 id=\"Activity保存和恢复\"><a href=\"#Activity保存和恢复\" class=\"headerlink\" title=\"Activity保存和恢复\"></a>Activity保存和恢复</h4><table>\n<thead>\n<tr>\n<th>方法</th>\n<th>调用时机</th>\n<th>说明</th>\n<th>使用场景</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onSaveInstanceState(outState:Bundle)</td>\n<td>系统未经“你的许可”，可能销毁了你的activity，则会被调用</td>\n<td>用户主动销毁不调用，可能销毁即调用</td>\n<td>从一个Activity启动另一个Activity <br> 屏幕方向切换 <br> home键返回，切换别的应用 <br> 关闭屏幕显示</td>\n</tr>\n<tr>\n<td>onRestoreInstanceState(savedInstanceState:Bundle)</td>\n<td>系统未经“你的许可”，确实销毁了你的activity，重新启动时则会被调用</td>\n<td>用户主动销毁不调用，可能销毁即调用，与onSaveInstanceState()方法不一定成对调用</td>\n<td>异常关闭了Activity，下次启动时则被调用 <br> onCreate() -&gt; onStart() -&gt; onRestoreInstanceState() -&gt; onResume()</td>\n</tr>\n</tbody></table>\n<h4 id=\"Activity启动模式\"><a href=\"#Activity启动模式\" class=\"headerlink\" title=\"Activity启动模式\"></a>Activity启动模式</h4><p>在AndroidManifest.xml中,<code>&lt;application&gt;</code>标签下的<code>&lt;activity&gt;</code>中设置Activity的启动模式 <code>android:launchMode=&quot;启动模式</code></p>\n<table>\n<thead>\n<tr>\n<th>启动模式</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>standard</td>\n<td>默认启动模式，按Activity启动顺序压入Task Stack中</td>\n</tr>\n<tr>\n<td>singleTop</td>\n<td>栈顶复用模式，栈顶Activity实例已经存在，则不会创建新的实例，同一个Activity可以多次创建</td>\n</tr>\n<tr>\n<td>singleTask</td>\n<td>如果Activity存在于栈中，弹出其上所有Activity，目标Activity置于栈顶并获得焦点</td>\n</tr>\n<tr>\n<td>singleInstance</td>\n<td>全局唯一模式，为目标Activity创建一个栈，栈顶Activity获得焦点，如果已经创建过则唤醒</td>\n</tr>\n</tbody></table>\n<p>除了从AndroidManifest.xml中设置启动模式外，也可以在代码中设置启动模式，比如通过Intent的setFlags()方法设置</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> intent = Intent(<span class=\"hljs-keyword\">this</span>, MainActivity::<span class=\"hljs-keyword\">class</span>.java)<br>intent.setFlags(Intent.[Intent Flag])<br></code></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>Intent Flag</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>FLAG_ACTIVITY_NEW_TASK</td>\n<td>从后台服务中启动新的Activity；从通知栏点开新的任务</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_SINGLE_TOP</td>\n<td>点击通知或状态栏，不希望重新创建已经存在的Activity，而是复用现有实例</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_CLEAR_TOP</td>\n<td>导航回已经存在的Activity，并清除其上的所有Activity，如从深层页面返回主页</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_CLEAR_TASK</td>\n<td>完全清空当前任务，并创建一个新任务，比如用户注销返回登录界面</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_NO_HISTORY</td>\n<td>启动一个页面时，不希望用户通过返回键回到该页面</td>\n</tr>\n<tr>\n<td>FLAG_ACTIVITY_REORDER_TO_FRONT</td>\n<td>需要将后台的Activity移到前台而不是重新创建，比如多个步骤的表格填写</td>\n</tr>\n</tbody></table>\n<h4 id=\"Fragment\"><a href=\"#Fragment\" class=\"headerlink\" title=\"Fragment\"></a>Fragment</h4><p>Fragment表示应用界面中可重复使用的一部分，可以用于实现模块化的UI设计，在不同的Activity中重复使用</p>\n<h5 id=\"创建Fragment\"><a href=\"#创建Fragment\" class=\"headerlink\" title=\"创建Fragment\"></a>创建Fragment</h5><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * MyFragment 类继承自 Fragment，用于显示自定义的 fragment 界面</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyFragment</span> : <span class=\"hljs-type\">Fragment</span>() &#123; <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 创建并返回 fragment 的视图层次结构</span><br><span class=\"hljs-comment\">     * </span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> inflater 用于将 XML 布局文件转换为 View 对象的布局加载器</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> container 包含此 fragment 的父视图组，可能为 null</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 包含 fragment 上次保存状态的 Bundle 对象，可能为 null</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回 inflate 后的 View 对象，作为 fragment 的根视图</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreateView</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        inflater: <span class=\"hljs-type\">LayoutInflater</span>,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        container: <span class=\"hljs-type\">ViewGroup</span>?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        savedInstanceState: <span class=\"hljs-type\">Bundle</span>?</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">    )</span></span>: View? &#123; <br>        <span class=\"hljs-comment\">// 使用 inflater 将指定的布局文件（.xml）加载为 View 并返回</span><br>        <span class=\"hljs-keyword\">return</span> inflater.inflate(R.layout.fragment_my, container, <span class=\"hljs-literal\">false</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h5 id=\"将Fragment添加到Activity中\"><a href=\"#将Fragment添加到Activity中\" class=\"headerlink\" title=\"将Fragment添加到Activity中\"></a>将Fragment添加到Activity中</h5><p>Fragment拥有与Activity类似的栈(BACK stack，回退栈)，</p>\n<ul>\n<li><p>通过xml文件添加Fragment(静态添加，无法在运行时动态移除)</p>\n  <figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">&lt;androidx.fragment.app.FragmentContainerView<br>    android:id=<span class=\"hljs-string\">&quot;@+id/fragment_container&quot;</span><br>    android:layout_width=<span class=\"hljs-string\">&quot;match_parent&quot;</span><br>    android:layout_height=<span class=\"hljs-string\">&quot;match_parent&quot;</span><br>    android:name=<span class=\"hljs-string\">&quot;com.example.myapplication.MyFragment&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>\n</li>\n<li><p>通过代码添加Fragment</p>\n  <figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">* 当Activity创建时调用此方法，用于初始化界面和添加Fragment</span><br><span class=\"hljs-comment\">* </span><br><span class=\"hljs-comment\">* <span class=\"hljs-doctag\">@param</span> savedInstanceState 保存的实例状态，用于恢复之前保存的Activity状态</span><br><span class=\"hljs-comment\">*/</span><br><span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>    <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br><br>    <span class=\"hljs-comment\">// 创建MyFragment实例并添加到Activity中</span><br>    <span class=\"hljs-keyword\">val</span> fragment = MyFragment()<br><br>    <span class=\"hljs-comment\">// 获取Fragment管理器并开始一个事务</span><br>    <span class=\"hljs-comment\">// 向指定容器添加Fragment，推荐使用FragmentContainerView容器</span><br>    <span class=\"hljs-comment\">// 将该操作添加到返回栈</span><br>    <span class=\"hljs-comment\">// 标记为&quot;MyFragment&quot;，提交事务使更改生效</span><br>    supportFragmentManager.beginTransaction()<br>    .add(R.id.fragment_container_view, fragment)<br>    .addToBackStack(<span class=\"hljs-string\">&quot;MyFragment&quot;</span>)<br>    .commit()<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"Fragment生命周期\"><a href=\"#Fragment生命周期\" class=\"headerlink\" title=\"Fragment生命周期\"></a>Fragment生命周期</h5><table>\n<thead>\n<tr>\n<th>回调方法</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onAttach()</td>\n<td>当Fragment被附加到Activity时调用</td>\n</tr>\n<tr>\n<td>onCreate()</td>\n<td>当Fragment创建时调用</td>\n</tr>\n<tr>\n<td>onCreateView()</td>\n<td>当Fragment创建视图时调用</td>\n</tr>\n<tr>\n<td>onActivityCreated()</td>\n<td>当Fragment的Activity的onCreate()方法执行完毕时调用</td>\n</tr>\n<tr>\n<td>onStart()</td>\n<td>当Fragment可见时调用</td>\n</tr>\n<tr>\n<td>onResume()</td>\n<td>当Fragment获得焦点时调用</td>\n</tr>\n<tr>\n<td>onPause()</td>\n<td>当Fragment失去焦点时或被其他Fragment覆盖时调用</td>\n</tr>\n<tr>\n<td>onStop()</td>\n<td>当Fragment不可见时调用</td>\n</tr>\n<tr>\n<td>onDestroyView()</td>\n<td>当Fragment销毁视图时调用</td>\n</tr>\n<tr>\n<td>onDestroy()</td>\n<td>当Fragment销毁时调用</td>\n</tr>\n<tr>\n<td>onDetach()</td>\n<td>当Fragment被分离时调用</td>\n</tr>\n</tbody></table>\n<h4 id=\"Intent\"><a href=\"#Intent\" class=\"headerlink\" title=\"Intent\"></a>Intent</h4><p>Intent是Android提供的用来协助组件间的交互和通信机制，描述一次操作的动作和数据</p>\n<ul>\n<li>显式Intent：指定目标组件，通过Intent对象启动目标组件</li>\n<li>隐式Intent：不指定目标组件，通过Intent对象启动匹配的组件</li>\n</ul>\n<h5 id=\"Intent-Flag\"><a href=\"#Intent-Flag\" class=\"headerlink\" title=\"Intent Flag\"></a>Intent Flag</h5><table>\n<thead>\n<tr>\n<th>Intent Flag</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Component</td>\n<td>指定来源和目标</td>\n</tr>\n<tr>\n<td>Action</td>\n<td>指定动作行为</td>\n</tr>\n<tr>\n<td>Category</td>\n<td>指定哪种组件来处理</td>\n</tr>\n<tr>\n<td>Data</td>\n<td>uri，指定数据源</td>\n</tr>\n<tr>\n<td>Type</td>\n<td>指定消息数据类型</td>\n</tr>\n<tr>\n<td>Extras</td>\n<td>拓展信息</td>\n</tr>\n<tr>\n<td>Flags</td>\n<td>指定运行模式</td>\n</tr>\n</tbody></table>\n<h5 id=\"IntentFilter-匹配规则\"><a href=\"#IntentFilter-匹配规则\" class=\"headerlink\" title=\"IntentFilter 匹配规则\"></a>IntentFilter 匹配规则</h5><table>\n<thead>\n<tr>\n<th>条件</th>\n<th>匹配规则</th>\n<th>使用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Action</td>\n<td>1. <code>&lt;intent-filter&gt;</code>中必须包含一个Action, Intent也必须指定一个Action<br>2. <code>&lt;intent-filter&gt;</code>中可以有一个或者多个Action, Intent匹配其中的一个Action即可</td>\n<td><code>Intent(&quot;xxxAction&quot;)</code></td>\n</tr>\n<tr>\n<td>Data</td>\n<td>1. <code>&lt;intent-filter&gt;</code>中描述了data, 必须在Intent中指定匹配的Data信息<br>2. <code>&lt;intent-filter&gt;</code>中没有描述data信息, Intent中可以不指定Data信息<br>3. <code>&lt;intent-filter&gt;</code>只指定了mimeType, 默认的URI的scheme是file或者content, 在Intent中必须同时设置mimeType和URI<br>4. <code>&lt;intent-filter&gt;</code>中有多个Data, Intent中只需要匹配一组即可</td>\n<td><code>intent.setData()</code></td>\n</tr>\n<tr>\n<td>Category</td>\n<td>1. Intent中未指定Category, <code>&lt;intent-filter&gt;</code>中也可以不指定Category<br>2. 要隐式启动一个Activity是就必须指定android.intent.category.DEFAULT的Category<br>3. Intent中指定了一个Category时, 会在具有Category的<code>&lt;intent-filter&gt;</code>中去找匹配组件</td>\n<td><code>intent.addCategory()</code><br><code>intent.removeCategory()</code><br><code>intent.categories</code></td>\n</tr>\n<tr>\n<td>整体匹配规则</td>\n<td>Action+Data+Category同时匹配, 才能启动Activity<br>Activity可以有多个intent-filter, Intent只需匹配任何一组<code>&lt;intent-filter&gt;</code>即可启动Activity</td>\n<td>-</td>\n</tr>\n<tr>\n<td>匹配过程</td>\n<td>1. 加载<code>&lt;intent-filter&gt;</code>列表<br>2. 依次去掉action、Data、Category匹配失败的<code>&lt;intent-filter&gt;</code><br>3. 剩余<code>&lt;intent-filter&gt;</code>按优先级排序</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<h3 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<ul>\n<li>无ui，可后台长时间运行</li>\n<li>启动后，切换应用仍会运行一段时间</li>\n<li>可用于应用处理网络事务、音频播放、数据同步等</li>\n<li>默认在主线程[UI线程]运行，除单独指定线程，并且不会单独在进程中运行</li>\n</ul>\n<h4 id=\"Service的创建\"><a href=\"#Service的创建\" class=\"headerlink\" title=\"Service的创建\"></a>Service的创建</h4><ul>\n<li>在AndroidManifest.xml中注册Service</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:name</td>\n<td>指定Service的完整类名</td>\n</tr>\n<tr>\n<td>android:enabled</td>\n<td>能否被实例化</td>\n</tr>\n<tr>\n<td>android:exported</td>\n<td>是否允许其他应用访问</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">service</span></span><br><span class=\"hljs-tag\"><span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">&quot;.MyService&quot;</span></span><br><span class=\"hljs-tag\"><span class=\"hljs-attr\">android:enabled</span>=<span class=\"hljs-string\">&quot;true&quot;</span></span><br><span class=\"hljs-tag\"><span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">&quot;true&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>在Kotlin中创建Service</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onBind</td>\n<td>当Service被绑定时调用</td>\n</tr>\n<tr>\n<td>onCreate</td>\n<td>当Service创建时调用</td>\n</tr>\n<tr>\n<td>onStartCommand</td>\n<td>当Service启动时调用</td>\n</tr>\n<tr>\n<td>onDestroy</td>\n<td>当Service销毁时调用</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * MyService类继承自Service，用于在后台执行长时间运行的操作</span><br><span class=\"hljs-comment\"> * 该服务不提供绑定功能，仅支持启动和停止</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyService</span> : <span class=\"hljs-type\">Service</span>() &#123; <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当其他组件想要通过bindService()绑定到服务时调用</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> intent 启动服务的Intent对象</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> IBinder对象，用于与服务通信，此处返回null表示不支持绑定</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onBind</span><span class=\"hljs-params\">(intent: <span class=\"hljs-type\">Intent</span>)</span></span>: IBinder? &#123; <br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当服务首次创建时调用，用于执行一次性设置操作</span><br><span class=\"hljs-comment\">     * 该方法只在服务生命周期中调用一次</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">()</span></span> &#123; <br>        <span class=\"hljs-keyword\">super</span>.onCreate()<br>        Log.d(TAG, <span class=\"hljs-string\">&quot;onCreate&quot;</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当其他组件通过startService()启动服务时调用</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> intent 启动服务时传递的Intent对象，可能为null</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> flags 附加数据，用于描述如何启动服务</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> startId 服务启动请求的唯一标识符</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 服务被杀死后的重启模式，返回super.onStartCommand()的默认值</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onStartCommand</span><span class=\"hljs-params\">(intent: <span class=\"hljs-type\">Intent</span>?, flags: <span class=\"hljs-type\">Int</span>, startId: <span class=\"hljs-type\">Int</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> &#123; <br>            Log.d(TAG, <span class=\"hljs-string\">&quot;onStartCommand&quot;</span>)<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">super</span>.onStartCommand(intent, flags, startId)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当服务被销毁时调用，用于清理资源和执行收尾工作</span><br><span class=\"hljs-comment\">     * 该方法在服务生命周期结束时调用</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> &#123; <br>        <span class=\"hljs-keyword\">super</span>.onDestroy()<br>        Log.d(TAG, <span class=\"hljs-string\">&quot;onDestroy&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"Service的启动方式\"><a href=\"#Service的启动方式\" class=\"headerlink\" title=\"Service的启动方式\"></a>Service的启动方式</h4><table>\n<thead>\n<tr>\n<th>启动方式</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>startService()</td>\n<td>适用于独立与其他组件长期运行的服务，如播放音乐、下载文件等 需要自身stopService()来停止服务</td>\n</tr>\n<tr>\n<td>bindService()</td>\n<td>适用于需要与其他组件进行通信的服务，如获取传感器数据、访问数据库等 需要所有绑定的组件调用unbindService()解除绑定才停止服务</td>\n</tr>\n</tbody></table>\n<h4 id=\"Service的生命周期\"><a href=\"#Service的生命周期\" class=\"headerlink\" title=\"Service的生命周期\"></a>Service的生命周期</h4><table>\n<thead>\n<tr>\n<th>回调方法</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>onCreate()</code></td>\n<td>系统会在服务首次创建时（在 <code>onStartCommand()</code> 或 <code>onBind()</code> 之前）调用此方法来执行一次性设置过程。如果服务已在运行，不会调用此方法。</td>\n</tr>\n<tr>\n<td><code>onDestroy()</code></td>\n<td>当服务不再使用且被销毁时，系统会调用此方法。用于清理线程、已注册的监听器或接收器等资源。是服务接收的最后一个回调。</td>\n</tr>\n<tr>\n<td><code>onStartCommand()</code></td>\n<td>当其他组件（例如 Activity）请求启动服务时，系统会通过调用 <code>startService()</code> 来调用此方法。执行此方法时，系统会启动服务，该服务可以在后台无限期运行。如果实现了此功能，需要在服务完成工作后通过 <code>stopSelf()</code> 或 <code>stopService()</code> 来停止服务。如果只想提供绑定，无需实现。</td>\n</tr>\n<tr>\n<td><code>onBind()</code></td>\n<td>当其他组件想要与服务绑定（例如执行 RPC）时，系统会通过调用 <code>bindService()</code> 来调用此方法。在实现此方法必须提供一个接口，使客户端通过返回 <code>IBinder</code> 与服务进行通信。如果不允许绑定，则应返回 <code>null</code>。</td>\n</tr>\n<tr>\n<td><code>onUnbind()</code></td>\n<td>当所有绑定的客户端都解绑（通过 <code>unbindService()</code>）时，系统会调用此方法。</td>\n</tr>\n</tbody></table>\n<h3 id=\"BroadcastReceiver\"><a href=\"#BroadcastReceiver\" class=\"headerlink\" title=\"BroadcastReceiver\"></a>BroadcastReceiver</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>Broadcast 是一种用于应用程序之间或程序内部的一种通信机制<br>BroadcastReceiver 捕获系统事件或用户的自定义事件，并根据事件执行对应的逻辑</p>\n<h4 id=\"创建BroadcastReceiver\"><a href=\"#创建BroadcastReceiver\" class=\"headerlink\" title=\"创建BroadcastReceiver\"></a>创建BroadcastReceiver</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 广播接收器类，用于接收和处理广播消息</span><br><span class=\"hljs-comment\"> * 继承自BroadcastReceiver，当接收到广播时会显示Toast提示</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyReceiver</span> : <span class=\"hljs-type\">BroadcastReceiver</span>() &#123; <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当接收到广播时调用此方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> context 上下文对象，提供访问应用程序环境信息的接口</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> intent 包含广播数据的Intent对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onReceive</span><span class=\"hljs-params\">(context: <span class=\"hljs-type\">Context</span>, intent: <span class=\"hljs-type\">Intent</span>)</span></span> &#123; <br>        <span class=\"hljs-comment\">// 显示广播接收成功的Toast消息提示</span><br>        Toast.makeText(context, <span class=\"hljs-string\">&quot;MyBroadcastReceiver: Broadcast Received&quot;</span>, Toast.LENGTH_SHORT).show()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"注册BroadcastReceiver\"><a href=\"#注册BroadcastReceiver\" class=\"headerlink\" title=\"注册BroadcastReceiver\"></a>注册BroadcastReceiver</h4><ul>\n<li><p>在AndroidManifest.xml中注册BroadcastReceiver[静态注册，程序未启动也能监听广播]</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\">广播接收器声明块<br>    <br>    该代码块声明了一个Android广播接收器组件，用于接收和处理特定的广播消息。<br>    <br>    组件属性说明：<br>    - android:name: 指定接收器的类名，&quot;.MyReceiver&quot;表示该类在当前应用包名下<br>    - android:enabled: 设置为true表示该接收器在应用安装后默认启用<br>    - android:exported: 设置为true表示该接收器可以接收来自其他应用或系统的广播<br>    <br>    意图过滤器配置：<br>    - android:priority: 设置广播接收优先级为100，数值越大优先级越高<br>    - action: 声明该接收器可以处理的广播动作，此处为自定义广播动作&quot;com.example.myapplication.MY_BROADCAST&quot; <br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">receiver</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">&quot;.MyReceiver&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:enabled</span>=<span class=\"hljs-string\">&quot;true&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span> <br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">intent-filter</span> <span class=\"hljs-attr\">android:priority</span>=<span class=\"hljs-string\">&quot;100&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">action</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">&quot;com.example.myapplication.MY_BROADCAST&quot;</span> /&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">intent-filter</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">receiver</span>&gt;</span><br></code></pre></td></tr></table></figure>\n</li>\n<li><p>在代码中注册BroadcastReceiver[动态注册]</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 主活动类，负责发送广播和注册/注销广播接收器</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() &#123; <br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> mBroadcastReceiver: MyReceiver? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> broadcastAction = <span class=\"hljs-string\">&quot;com.example.myapplication.MY_BROADCAST&quot;</span><br>    <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 活动创建时的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 保存的实例状态Bundle对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123; <br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br>        mBroadcastReceiver = MyReceiver()<br>        <span class=\"hljs-comment\">// 设置按钮点击监听器，用于发送广播</span><br>        findViewById&lt;Button&gt;(R.id.button).setOnClickListener(View.OnClickListener &#123; <br>            sendBroadcast(Intent(broadcastAction))<br>        &#125;)<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动恢复时的回调方法，用于注册广播接收器</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onResume</span><span class=\"hljs-params\">()</span></span> &#123; <br>    <span class=\"hljs-keyword\">super</span>.onResume()<br>    <span class=\"hljs-comment\">// 注册广播接收器以接收指定action的广播</span><br>    mBroadcastReceiver?.let &#123; <br>        registerReceiver(it, IntentFilter(broadcastAction), RECEIVER_EXPORTED)<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动销毁时的回调方法，用于注销广播接收器</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> &#123; <br>    <span class=\"hljs-keyword\">super</span>.onDestroy()<br>    <span class=\"hljs-comment\">// 注销广播接收器以避免内存泄漏</span><br>    mBroadcastReceiver?.let &#123; <br>        unregisterReceiver(it)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"Broadcast-分类\"><a href=\"#Broadcast-分类\" class=\"headerlink\" title=\"Broadcast 分类\"></a>Broadcast 分类</h4><table>\n<thead>\n<tr>\n<th>广播类型</th>\n<th>方法</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>标准广播</td>\n<td>sendBroadcast(Intent intent)</td>\n<td>异步广播，发送给所有注册的接收器，但无法将处理结果发送给下一个接收器，无法终止广播传播</td>\n</tr>\n<tr>\n<td>有序广播</td>\n<td>sendOrderedBroadcast(Intent intent, String receiverPermission)</td>\n<td>同步广播，同一时刻只有一个接收器收到，可以选择继续传播，拦截或修改广播</td>\n</tr>\n<tr>\n<td>本地广播</td>\n<td>LocalBroadcastManager.registerReceiver(BroadcastReceiver receiver, IntentFilter filter) <br>LocalBroadcastManager.sendBroadcast(Intent intent) <br>LocalBroadcastManager.unregisterReceiver(BroadcastReceiver receiver)</td>\n<td>exported&#x3D;false，只能动态注册，只能发送给本应用，注册为本地广播的接收器无法接受标准广播</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 隐式Intent</span><br>sendBroadcast(Intent(<span class=\"hljs-string\">&quot;BROADCAST_ACTION&quot;</span>))<br><span class=\"hljs-comment\">// 显式Intent</span><br><span class=\"hljs-keyword\">val</span> intent = Intent(<span class=\"hljs-keyword\">this</span>, MyReceiver::<span class=\"hljs-keyword\">class</span>.java)<br>intent.action = <span class=\"hljs-string\">&quot;BROADCAST_ACTION&quot;</span><br>sendBroadcast(intent)<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"ContentProvider\"><a href=\"#ContentProvider\" class=\"headerlink\" title=\"ContentProvider\"></a>ContentProvider</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>以标准化的方式在Android应用间共享数据，以相对安全的方式封装数据存储以及增删改查，提供对外统一接口供其他程序调用</p>\n<ul>\n<li>通过 <strong>uri</strong>[universal resource identifier ，通用资源标识符]访问数据</li>\n<li>content:&#x2F;&#x2F;authority&#x2F;path&#x2F;id<ul>\n<li>content:&#x2F;&#x2F;：通用前缀</li>\n<li>authority：内容提供者的唯一标识符，通常为包名+内容提供者的类名</li>\n<li>path：内容提供者的数据路径，通常为数据表名</li>\n<li>id：内容提供者的数据项ID，通常为数据项的行号</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"创建ContentProvider\"><a href=\"#创建ContentProvider\" class=\"headerlink\" title=\"创建ContentProvider\"></a>创建ContentProvider</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * MyContentProvider 是一个自定义的内容提供者类，用于管理应用程序数据的访问和操作。</span><br><span class=\"hljs-comment\"> * 它继承自 Android 的 ContentProvider 类，提供了对结构化数据的标准化访问接口。</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyContentProvider</span> : <span class=\"hljs-type\">ContentProvider</span>() &#123; <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 获取指定 URI 对应数据的 MIME 类型</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指向所需数据的统一资源标识符</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回对应数据的 MIME 类型字符串，如果无法识别则返回 null</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getType</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>)</span></span>: String? &#123; <br>        TODO(<span class=\"hljs-string\">&quot;Implement this to handle requests for the MIME type of the data at the given URI.&quot;</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 初始化内容提供者，在系统启动时调用</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 初始化成功返回 true，失败返回 false</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">()</span></span>: <span class=\"hljs-built_in\">Boolean</span> &#123; <br>        TODO(<span class=\"hljs-string\">&quot;Implement this to initialize your content provider on startup.&quot;</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 向内容提供者中插入新的数据行</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指定要插入数据的位置 URI</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> values 包含要插入数据的键值对集合</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回新插入数据行的 URI，插入失败则返回 null</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">insert</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, values: <span class=\"hljs-type\">ContentValues</span>?)</span></span>: Uri? &#123; <br>        TODO(<span class=\"hljs-string\">&quot;Implement this to handle requests to insert a new row.&quot;</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 删除指定条件的数据行</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指定要删除数据的位置 URI</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selection SQL WHERE 子句，用于指定删除条件，null 表示删除所有行</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selectionArgs WHERE 子句中占位符对应的参数值数组</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回实际删除的数据行数量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">delete</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, selection: <span class=\"hljs-type\">String</span>?, selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">String</span>&gt;?)</span></span>: <span class=\"hljs-built_in\">Int</span> &#123; <br>        TODO(<span class=\"hljs-string\">&quot;Implement this to handle requests to delete one or more rows.&quot;</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 查询满足条件的数据</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指定要查询数据的位置 URI</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> projection 要查询的列名数组，null 表示查询所有列</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selection SQL WHERE 子句，用于指定查询条件</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selectionArgs WHERE 子句中占位符对应的参数值数组</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> sortOrder 查询结果的排序方式</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回包含查询结果的 Cursor 对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">query</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, projection: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">String</span>&gt;?, selection: <span class=\"hljs-type\">String</span>?, selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">String</span>&gt;?, sortOrder: <span class=\"hljs-type\">String</span>?)</span></span>&#123; <br>        TODO(<span class=\"hljs-string\">&quot;Implement this to handle query requests from clients.&quot;</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 更新满足条件的数据行</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> uri 指定要更新数据的位置 URI</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> values 包含要更新数据的键值对集合</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selection SQL WHERE 子句，用于指定更新条件</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selectionArgs WHERE 子句中占位符对应的参数值数组</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回实际更新的数据行数量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">update</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, values: <span class=\"hljs-type\">ContentValues</span>?, selection: <span class=\"hljs-type\">String</span>?, selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">String</span>&gt;?)</span></span>: <span class=\"hljs-built_in\">Int</span> &#123; <br>        TODO(<span class=\"hljs-string\">&quot;Implement this to handle requests to update one or more rows.&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h4 id=\"注册ContentProvider\"><a href=\"#注册ContentProvider\" class=\"headerlink\" title=\"注册ContentProvider\"></a>注册ContentProvider</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">provider</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">&quot;.MyContentProvider&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:authorities</span>=<span class=\"hljs-string\">&quot;com.example.myapplication.MyContentProvider&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:enabled</span>=<span class=\"hljs-string\">&quot;true&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">&quot;false&quot;</span> /&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"ContentResolver\"><a href=\"#ContentResolver\" class=\"headerlink\" title=\"ContentResolver\"></a>ContentResolver</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 测试ContentResolver的基本操作方法</span><br><span class=\"hljs-comment\"> * </span><br><span class=\"hljs-comment\"> * 该函数演示了如何使用ContentResolver进行数据的增删改查操作，</span><br><span class=\"hljs-comment\"> * 包括插入、删除、更新和查询数据</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">testContentResolver</span><span class=\"hljs-params\">()</span></span> &#123; <br>    <span class=\"hljs-comment\">// 构造ContentProvider的URI地址</span><br>    <span class=\"hljs-keyword\">val</span> uri = Uri.parse(<span class=\"hljs-string\">&quot;content://com.example.myapplication.MyContentProvider/user&quot;</span>)<br>    <br>    <span class=\"hljs-comment\">// 创建要操作的数据内容值</span><br>    <span class=\"hljs-keyword\">val</span> value = ContentValues().apply &#123; <br>        put(<span class=\"hljs-string\">&quot;user_id&quot;</span>, <span class=\"hljs-number\">1</span>)<br>        put(<span class=\"hljs-string\">&quot;user_name&quot;</span>, <span class=\"hljs-string\">&quot;张三&quot;</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 向ContentProvider中插入一条用户数据</span><br>    contentResolver.insert(uri, value)<br><br>    <span class=\"hljs-comment\">// 删除user_id为1的用户数据</span><br>    contentResolver.delete(uri, <span class=\"hljs-string\">&quot;user_id=?&quot;</span>, arrayOf(<span class=\"hljs-string\">&quot;1&quot;</span>))<br><br>    <span class=\"hljs-comment\">// 更新user_id为1的用户数据</span><br>    contentResolver.update(uri, value, <span class=\"hljs-string\">&quot;user_id=?&quot;</span>, arrayOf(<span class=\"hljs-string\">&quot;1&quot;</span>))<br><br>    <span class=\"hljs-comment\">// 查询所有用户数据，按user_id升序排列</span><br>    <span class=\"hljs-keyword\">val</span> cursor = contentResolver.query(uri, <br>        <span class=\"hljs-literal\">null</span>, <br>        <span class=\"hljs-literal\">null</span>, <br>        <span class=\"hljs-literal\">null</span>, <br>        <span class=\"hljs-string\">&quot;user_id ASC&quot;</span>)<br><br>    <span class=\"hljs-comment\">// 遍历查询结果并处理每条数据</span><br>    <span class=\"hljs-keyword\">while</span> (cursor?.moveToNext() == <span class=\"hljs-literal\">true</span>) &#123; <br>        <span class=\"hljs-comment\">// 处理数据</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"三个辅助类\"><a href=\"#三个辅助类\" class=\"headerlink\" title=\"三个辅助类\"></a>三个辅助类</h4><ul>\n<li>ContentUris</li>\n<li>UriMatcher</li>\n<li>ContentObserver</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 通过ContentUris.withAppendedId方法将指定的ID追加到URI路径末尾</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> uri 原始URI</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> id 要追加的ID值</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@return</span> 返回追加ID后的新URI</span><br><span class=\"hljs-comment\"> */</span><br>ContentUris.withAppendedId(uri, id)<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 从URI中解析出ID值</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> uri 包含ID的URI</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@return</span> 返回解析出的ID值</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">val</span> id = ContentUris.parseId(uri)<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 创建UriMatcher实例用于URI匹配</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> code 当URI不匹配任何模式时返回的默认代码</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">val</span> uriMatcher = UriMatcher(UriMatcher.NO_MATCH)<br><br><span class=\"hljs-comment\">// 添加URI匹配模式：匹配&quot;user&quot;路径，匹配成功返回代码1</span><br>uriMatcher.addURI(<span class=\"hljs-string\">&quot;com.example.myapplication&quot;</span>, <span class=\"hljs-string\">&quot;user&quot;</span>, <span class=\"hljs-number\">1</span>)<br><br><span class=\"hljs-comment\">// 添加URI匹配模式：匹配&quot;user/#&quot;路径（#表示数字），匹配成功返回代码2</span><br>uriMatcher.addURI(<span class=\"hljs-string\">&quot;com.example.myapplication&quot;</span>, <span class=\"hljs-string\">&quot;user/#&quot;</span>, <span class=\"hljs-number\">2</span>)<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 自定义ContentObserver类，用于监听ContentProvider数据变化</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyContentObserver</span> : <span class=\"hljs-type\">ContentObserver</span>(<span class=\"hljs-literal\">null</span>) &#123; <br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 当被监听的URI对应的数据发生变化时调用</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> selfChange 如果为true表示数据变化是由当前进程引起的</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onChange</span><span class=\"hljs-params\">(selfChange: <span class=\"hljs-type\">Boolean</span>)</span></span> &#123; <br>        <span class=\"hljs-keyword\">super</span>.onChange(selfChange)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"基本组件\"><a href=\"#基本组件\" class=\"headerlink\" title=\"基本组件\"></a>基本组件</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3 id=\"TextView-文本显示控件\"><a href=\"#TextView-文本显示控件\" class=\"headerlink\" title=\"TextView 文本显示控件\"></a>TextView 文本显示控件</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4 id=\"布局属性\"><a href=\"#布局属性\" class=\"headerlink\" title=\"布局属性\"></a>布局属性</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">TextView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id&#x2F;textView: 创建一个id<br>@id&#x2F;textView: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>text</td>\n<td>显示的文本</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>textAllCaps</td>\n<td>是否将文本转换为大写</td>\n<td>true: 转换为大写<br>false: 不转换</td>\n</tr>\n<tr>\n<td>textSize</td>\n<td>文本的大小</td>\n<td>具体数值: 尺寸大小</td>\n</tr>\n<tr>\n<td>textColor</td>\n<td>文本的颜色</td>\n<td>@color&#x2F;colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>textStyle</td>\n<td>文本的样式</td>\n<td>normal: 正常样式<br>bold: 加粗样式<br>italic: 斜体样式<br>bold_italic: 加粗斜体样式</td>\n</tr>\n<tr>\n<td>autoLink</td>\n<td>是否自动链接文本</td>\n<td>web: 自动链接网址<br>email: 自动链接邮箱地址<br>phone: 自动链接电话号码</td>\n</tr>\n<tr>\n<td>textColorHighlight</td>\n<td>文本高亮颜色</td>\n<td>@color&#x2F;colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>drawableTop</td>\n<td>文本顶部图标</td>\n<td>@drawable&#x2F;icon: 图标资源</td>\n</tr>\n<tr>\n<td>drawablePadding</td>\n<td>图标和文本之间的间距</td>\n<td>具体数值: 间距大小</td>\n</tr>\n<tr>\n<td>gravity</td>\n<td>文本的对齐方式</td>\n<td>center: 居中对齐<br>center_vertical: 垂直居中对齐<br>center_horizontal: 水平居中对齐<br>left: 左对齐<br>right: 右对齐<br>top: 顶部对齐<br>bottom: 底部对齐</td>\n</tr>\n<tr>\n<td>letterSpacing</td>\n<td>字符间距</td>\n<td>具体数值: 间距大小</td>\n</tr>\n<tr>\n<td>lineSpacingExtra</td>\n<td>行间距</td>\n<td>具体数值: 间距大小</td>\n</tr>\n<tr>\n<td>maxLines</td>\n<td>文本的最大行数</td>\n<td>具体数值: 行数</td>\n</tr>\n<tr>\n<td>ellipsize</td>\n<td>文本超出显示范围时如何显示</td>\n<td>start: 显示开头省略号<br>middle: 显示中间省略号<br>end: 显示末尾省略号<br>marquee: 滚动显示</td>\n</tr>\n</tbody></table>\n<h3 id=\"Button-按钮\"><a href=\"#Button-按钮\" class=\"headerlink\" title=\"Button 按钮\"></a>Button 按钮</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4 id=\"布局属性-1\"><a href=\"#布局属性-1\" class=\"headerlink\" title=\"布局属性\"></a>布局属性</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageButton</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id&#x2F;button: 创建一个id<br>@id&#x2F;button: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>text</td>\n<td>显示的文本</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>background</td>\n<td>按钮的背景</td>\n<td>@drawable&#x2F;button_background: 背景资源</td>\n</tr>\n<tr>\n<td>padding</td>\n<td>按钮的内边距</td>\n<td>具体数值: 内边距大小</td>\n</tr>\n<tr>\n<td>gravity</td>\n<td>按钮的文本对齐方式</td>\n<td>center: 居中对齐<br>center_vertical: 垂直居中对齐<br>center_horizontal: 水平居中对齐<br>left: 左对齐<br>right: 右对齐<br>top: 顶部对齐<br>bottom: 底部对齐</td>\n</tr>\n<tr>\n<td>contentDescription</td>\n<td><code>ImageButton</code>按钮的描述</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>src</td>\n<td><code>ImageButton</code>按钮的图标</td>\n<td>@drawable&#x2F;icon: 图标资源</td>\n</tr>\n<tr>\n<td>drawableStart</td>\n<td>按钮的图标</td>\n<td>@drawable&#x2F;icon: 图标资源</td>\n</tr>\n<tr>\n<td>drawablePadding</td>\n<td>图标和文本之间的间距</td>\n<td>具体数值: 间距大小</td>\n</tr>\n<tr>\n<td>enable</td>\n<td>按钮是否可用</td>\n<td>true: 可用<br>false: 不可用</td>\n</tr>\n<tr>\n<td>clickable</td>\n<td>按钮是否可点击</td>\n<td>true: 可点击<br>false: 不可点击</td>\n</tr>\n</tbody></table>\n<h4 id=\"代码添加属性\"><a href=\"#代码添加属性\" class=\"headerlink\" title=\"代码添加属性\"></a>代码添加属性</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 1、设置按钮点击Toast提示</span><br>findViewById&lt;Button&gt;(R.id.button_click).setOnClickListener&#123;<br>    <span class=\"hljs-comment\">// 显示Toast提示</span><br>    Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">&quot;点击了按钮&quot;</span>, Toast.LENGTH_SHORT).show()<br>&#125;<br><br><span class=\"hljs-comment\">// 2、设置按钮长按Toast提示</span><br>findViewById&lt;Button&gt;(R.id.button_long_click).setOnLongClickListener&#123;<br>    <span class=\"hljs-comment\">// 显示Toast提示</span><br>    Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">&quot;长按了按钮&quot;</span>, Toast.LENGTH_SHORT).show()<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"EditText-文本输入框\"><a href=\"#EditText-文本输入框\" class=\"headerlink\" title=\"EditText 文本输入框\"></a>EditText 文本输入框</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4 id=\"布局属性-2\"><a href=\"#布局属性-2\" class=\"headerlink\" title=\"布局属性\"></a>布局属性</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">EditText</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id&#x2F;editText: 创建一个id<br>@id&#x2F;editText: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>hint</td>\n<td>输入框的提示文本</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>inputType</td>\n<td>输入框的类型</td>\n<td>text: 文本输入框<br>number: 数字输入框<br>phone: 电话输入框<br>datetime: 日期时间输入框<br>email: 邮箱输入框<br>textMultiLine: 多行文本输入框<br>textCapSentences: 首字母大写输入框<br>textCapWords: 单词首字母大写输入框<br>textCapCharacters: 全字母大写输入框<br>textNoSuggestions: 无建议输入框<br>textPassword: 密码输入框<br>textVisiblePassword: 可见密码输入框<br>textMultiLine: 多行文本输入框<br>textAutoCorrect: 自动修正输入框<br>textAutoComplete: 自动完成输入框<br>textWebEditText: 网页输入框<br>textUri: URI输入框<br>textEmailAddress: 邮箱地址输入框<br>textPostalAddress: 邮政编码输入框<br>textPersonName: 人名输入框<br>textShortMessage: 短消息输入框<br>textLongMessage: 长消息输入框<br>textFilter: 过滤输入框<br>textPhonetic: 音标输入框<br>textWebEmailAddress: 网页邮箱地址输入框<br>textWebPassword: 网页密码输入框</td>\n</tr>\n<tr>\n<td>maxLenght</td>\n<td>输入框的最大长度</td>\n<td>具体数值: 最大长度</td>\n</tr>\n<tr>\n<td>cursorVisible</td>\n<td>输入框的游标是否可见</td>\n<td>true: 可见<br>false: 不可见</td>\n</tr>\n<tr>\n<td>textColor</td>\n<td>输入框的文本颜色</td>\n<td>@color&#x2F;colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>textColorHint</td>\n<td>输入框的提示文本颜色</td>\n<td>@color&#x2F;colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>textColorHighlight</td>\n<td>输入框的文本高亮颜色</td>\n<td>@color&#x2F;colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>digits</td>\n<td>输入框只能输入的字符</td>\n<td>具体数值: 输入内容</td>\n</tr>\n<tr>\n<td>imeOptions</td>\n<td>输入框的键盘(回车)完成按钮</td>\n<td>done: 完成按钮<br>go: 跳转按钮<br>next: 下一个按钮<br>search: 搜索按钮<br>send: 发送按钮</td>\n</tr>\n</tbody></table>\n<h4 id=\"代码添加属性-1\"><a href=\"#代码添加属性-1\" class=\"headerlink\" title=\"代码添加属性\"></a>代码添加属性</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 1、设置输入过滤器，仅允许英文字符和数字输入</span><br><span class=\"hljs-keyword\">val</span> filter =InputFilter&#123; source: CharSequence?, start: <span class=\"hljs-built_in\">Int</span>, end: <span class=\"hljs-built_in\">Int</span>, dest: Spanned?, dstart: <span class=\"hljs-built_in\">Int</span>, dend: <span class=\"hljs-built_in\">Int</span> -&gt;<br>                <span class=\"hljs-keyword\">if</span>(!source.toString()<br>                        .matches(<span class=\"hljs-string\">&quot;[A-Za-z0-9]+&quot;</span>.toRegex())<br>                )<span class=\"hljs-keyword\">return</span><span class=\"hljs-symbol\">@InputFilter</span> <span class=\"hljs-string\">&quot;&quot;</span><br>                <span class=\"hljs-literal\">null</span><br>            &#125;<br><span class=\"hljs-comment\">// 将过滤器应用到指定的EditText控件</span><br>findViewById&lt;EditText&gt;(R.id.set_filters).filters = arrayOf&lt;InputFilter&gt;(filter)<br><br><span class=\"hljs-comment\">// 2、设置文本检查器</span><br><span class=\"hljs-keyword\">val</span> et = findViewById&lt;EditText&gt;(R.id.add_text_changed_listener)<br>et.addTextChangedListener(<span class=\"hljs-keyword\">object</span> : TextWatcher &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 文本改变前的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> s 当前文本内容</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> start 改变开始的位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> count 被改变的字符数量</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> after 改变后的字符数量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">beforeTextChanged</span><span class=\"hljs-params\">(s: <span class=\"hljs-type\">CharSequence</span>?, start: <span class=\"hljs-type\">Int</span>, count: <span class=\"hljs-type\">Int</span>, after: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">// 可留空，如无逻辑需要</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 文本改变时的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> s 当前文本内容</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> start 改变开始的位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> before 改变前的字符数量</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> count 改变后的字符数量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onTextChanged</span><span class=\"hljs-params\">(s: <span class=\"hljs-type\">CharSequence</span>?, start: <span class=\"hljs-type\">Int</span>, before: <span class=\"hljs-type\">Int</span>, count: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">// 可留空，如无逻辑需要</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 文本改变后的回调方法，用于验证输入内容是否符合要求</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> s 改变后的文本内容</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">afterTextChanged</span><span class=\"hljs-params\">(s: <span class=\"hljs-type\">Editable</span>?)</span></span> &#123;<br>        <span class=\"hljs-comment\">// 验证输入内容是否只包含#$%字符</span><br>        <span class=\"hljs-keyword\">if</span> (!s.toString().matches(<span class=\"hljs-string\">&quot;[#$%]+&quot;</span>.toRegex()))&#123;<br>            et.error = <span class=\"hljs-string\">&quot;仅允许#$%&quot;</span><br>        &#125;<br>    &#125;<br>&#125;)<br><br><span class=\"hljs-comment\">// 3、设置焦点监听</span><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置EditText焦点变化监听器</span><br><span class=\"hljs-comment\"> * 用于处理EditText获取焦点和失去焦点时的UI变化</span><br><span class=\"hljs-comment\"> * 参数v: 发生焦点变化的View对象</span><br><span class=\"hljs-comment\"> * 参数hasFocus: 表示View是否获得焦点的布尔值</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">val</span> setOnFocusChangeListenerEt = findViewById&lt;EditText&gt;(R.id.set_on_focus_change_listener)<br>setOnFocusChangeListenerEt.setOnFocusChangeListener(&#123; v, hasFocus -&gt;<br>    <span class=\"hljs-keyword\">if</span>(hasFocus)&#123;<br>        <span class=\"hljs-comment\">// 获取焦点时清空提示</span><br>        setOnFocusChangeListenerEt.setText(<span class=\"hljs-string\">&quot;&quot;</span>)<br>        setOnFocusChangeListenerEt.error = <span class=\"hljs-literal\">null</span><br>    &#125; <span class=\"hljs-keyword\">else</span>&#123;<br>        <span class=\"hljs-comment\">// 失去焦点时设置提示</span><br>        setOnFocusChangeListenerEt.error = <span class=\"hljs-string\">&quot;失去焦点了&quot;</span><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"ImageView-图片\"><a href=\"#ImageView-图片\" class=\"headerlink\" title=\"ImageView 图片\"></a>ImageView 图片</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4 id=\"布局属性-3\"><a href=\"#布局属性-3\" class=\"headerlink\" title=\"布局属性\"></a>布局属性</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id&#x2F;imageView: 创建一个id<br>@id&#x2F;imageView: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>adjustViewBounds</td>\n<td>图片是否适应控件</td>\n<td>true: 适应<br>false: 不适应</td>\n</tr>\n<tr>\n<td>contentDescription</td>\n<td>图片的描述</td>\n<td>文本内容</td>\n</tr>\n<tr>\n<td>maxHeight</td>\n<td>图片的最大高度</td>\n<td>具体数值: 最大高度</td>\n</tr>\n<tr>\n<td>maxWidth</td>\n<td>图片的最大宽度</td>\n<td>具体数值: 最大宽度</td>\n</tr>\n<tr>\n<td>src</td>\n<td>图片的资源</td>\n<td>@drawable&#x2F;image: 图片资源<br>@mipmap&#x2F;image: 图片资源</td>\n</tr>\n<tr>\n<td>background</td>\n<td>图片的背景</td>\n<td>@color&#x2F;colorPrimary: 颜色资源<br>#RRGGBB: 十六进制颜色值</td>\n</tr>\n<tr>\n<td>padding</td>\n<td>图片的内边距</td>\n<td>具体数值: 内边距大小</td>\n</tr>\n<tr>\n<td>cropToPadding</td>\n<td>图片是否剪切内边距</td>\n<td>true: 剪切<br>false: 不剪切</td>\n</tr>\n<tr>\n<td>scaleType</td>\n<td>图片的缩放类型</td>\n<td>fitXY: 填充父布局<br>fitStart: 适应内容并居左<br>fitCenter: 适应内容并居中<br>fitEnd: 适应内容并居右<br>center: 中心<br>centerCrop: 剪切并居中<br>centerInside: 适应内容并居中</td>\n</tr>\n</tbody></table>\n<h4 id=\"代码添加属性-2\"><a href=\"#代码添加属性-2\" class=\"headerlink\" title=\"代码添加属性\"></a>代码添加属性</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 创建一个图形变换矩阵，用于对ImageView进行缩放变换</span><br><span class=\"hljs-comment\">// 设置X轴缩放比例为0.04，Y轴缩放比例为0.08</span><br><span class=\"hljs-comment\">// 将变换矩阵应用到ID为matrix的ImageView控件上</span><br><span class=\"hljs-keyword\">val</span> matrix = android.graphics.Matrix()<br>matrix.setScale(<span class=\"hljs-number\">0.04f</span>, <span class=\"hljs-number\">0.08f</span>)<br>findViewById&lt;ImageView&gt;(R.id.matrix).imageMatrix = matrix<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"ProgressBar-进度条\"><a href=\"#ProgressBar-进度条\" class=\"headerlink\" title=\"ProgressBar 进度条\"></a>ProgressBar 进度条</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4 id=\"布局属性-4\"><a href=\"#布局属性-4\" class=\"headerlink\" title=\"布局属性\"></a>布局属性</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ProgressBar</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id&#x2F;progressBar: 创建一个id<br>@id&#x2F;progressBar: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 固定大小</td>\n</tr>\n<tr>\n<td>layout_margin</td>\n<td>控件的外边距</td>\n<td>具体数值: 边距大小</td>\n</tr>\n<tr>\n<td>style</td>\n<td>进度条样式</td>\n<td>?android:attr&#x2F;progressBarStyleHorizontal: 水平直条样式<br>？android:attr&#x2F;progressBarStyleSmall: 小尺寸圆形样式<br>？android:attr&#x2F;progressBarStyleLarge: 大尺寸圆形样式<br>？android:attr&#x2F;progressBarStyleInverse: 反向样式<br>？android:attr&#x2F;progressBarStyleSmallInverse: 小尺寸反向样式<br>？android:attr&#x2F;progressBarStyleLargeInverse: 大尺寸反向样式</td>\n</tr>\n<tr>\n<td>max</td>\n<td>进度条的最大值</td>\n<td>具体数值: 最大值</td>\n</tr>\n<tr>\n<td>progress</td>\n<td>进度条的当前进度</td>\n<td>具体数值: 当前进度</td>\n</tr>\n<tr>\n<td>secondaryProgress</td>\n<td>进度条的当前进度</td>\n<td>具体数值: 当前进度</td>\n</tr>\n<tr>\n<td>indeterminate</td>\n<td>进度条是否为不确定状态</td>\n<td>true: 不确定<br>false: 确定</td>\n</tr>\n<tr>\n<td>indeterminateDrawable</td>\n<td>进度条的不确定状态的图片</td>\n<td>@drawable&#x2F;image: 图片资源<br>@mipmap&#x2F;image: 图片资源</td>\n</tr>\n</tbody></table>\n<p>图片旋转样式</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    animated-rotate动画旋转组件</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    该组件用于创建一个旋转动画效果，将指定的drawable资源进行360度旋转</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    参数说明：</span><br><span class=\"hljs-comment\">    android:drawable - 指定要进行旋转动画的drawable资源引用</span><br><span class=\"hljs-comment\">    android:fromDegree - 动画开始时的旋转角度，单位为度</span><br><span class=\"hljs-comment\">    android:toDegree - 动画结束时的旋转角度，单位为度</span><br><span class=\"hljs-comment\">    android:pivotX - 旋转中心点的X轴坐标，50%表示在drawable宽度的中心位置</span><br><span class=\"hljs-comment\">    android:pivotY - 旋转中心点的Y轴坐标，50%表示在drawable高度的中心位置</span><br><span class=\"hljs-comment\">--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">animated-rotate</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:drawable</span>=<span class=\"hljs-string\">&quot;@drawable/p0&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:fromDegrees</span>=<span class=\"hljs-string\">&quot;0&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:pivotX</span>=<span class=\"hljs-string\">&quot;50%&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:pivotY</span>=<span class=\"hljs-string\">&quot;50%&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:toDegrees</span>=<span class=\"hljs-string\">&quot;360&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"代码添加属性-3\"><a href=\"#代码添加属性-3\" class=\"headerlink\" title=\"代码添加属性\"></a>代码添加属性</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> progress = findViewById&lt;ProgressBar&gt;(R.id.progress)<br><span class=\"hljs-comment\">// 启动一个后台线程来模拟进度更新</span><br>Thread&#123;<br>    <span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-number\">0</span><br>    <span class=\"hljs-keyword\">while</span> (p &lt; <span class=\"hljs-number\">100</span>)&#123;<br>        Thread.sleep(<span class=\"hljs-number\">100</span>) <span class=\"hljs-comment\">// 每100毫秒更新一次进度</span><br>        p++<br>        <span class=\"hljs-comment\">// 在主线程中更新进度条UI</span><br>        runOnUiThread &#123;<br>            progress.progress = p<br>            progress.secondaryProgress = (p + <span class=\"hljs-number\">5</span>)<br>        &#125;<br>    &#125;<br>&#125;.start()<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"ScrollView-滚动\"><a href=\"#ScrollView-滚动\" class=\"headerlink\" title=\"ScrollView 滚动\"></a>ScrollView 滚动</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4 id=\"布局属性-5\"><a href=\"#布局属性-5\" class=\"headerlink\" title=\"布局属性\"></a>布局属性</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ScrollView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">布局标签</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">......</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">布局标签</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ScrollView</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">HorizontalScrollView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">布局标签</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">......</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">布局标签</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">HorizontalScrollView</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id&#x2F;scrollView: 创建一个id<br>@id&#x2F;scrollView: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局</td>\n</tr>\n<tr>\n<td>fillViewport</td>\n<td>滚动视图是否填充父布局</td>\n<td>true: 填充<br>false: 不填充</td>\n</tr>\n<tr>\n<td>scrollbars</td>\n<td>滚动条样式</td>\n<td>none: 无<br>horizontal: 水平滚动条<br>vertical: 垂直滚动条</td>\n</tr>\n<tr>\n<td>scrollbarSize</td>\n<td>滚动条大小</td>\n<td>具体数值: 滚动条大小</td>\n</tr>\n<tr>\n<td>scrollbarFadeDuration</td>\n<td>滚动条淡出时间</td>\n<td>具体数值: 淡出时间</td>\n</tr>\n<tr>\n<td>layout_weight</td>\n<td>控件的权重</td>\n<td>具体数值: 权重大小</td>\n</tr>\n<tr>\n<td>scrollbarStyle</td>\n<td>滚动条样式</td>\n<td>insideOverlay: 覆盖在内容上方<br>insideInset: 嵌入内容内<br>outsideOverlay: 覆盖在内容上方<br>outsideInset: 嵌入内容内</td>\n</tr>\n<tr>\n<td>requiresFadingEdge</td>\n<td>需要淡出边缘效果</td>\n<td>vertical: 垂直<br>horizontal: 水平</td>\n</tr>\n<tr>\n<td>fadingEdgeLength</td>\n<td>淡出边缘长度</td>\n<td>具体数值: 淡出边缘长度</td>\n</tr>\n<tr>\n<td>overScrollMode</td>\n<td>滚动模式</td>\n<td>never: 不允许滚动<br>always: 允许滚动<br>ifContentScrolls: 内容滚动时允许滚动</td>\n</tr>\n</tbody></table>\n<h4 id=\"代码添加属性-4\"><a href=\"#代码添加属性-4\" class=\"headerlink\" title=\"代码添加属性\"></a>代码添加属性</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 在滚动视图中添加内容</span><br><br><span class=\"hljs-comment\">// 获取垂直线性布局容器</span><br><span class=\"hljs-keyword\">val</span> vsvc = findViewById&lt;LinearLayout&gt;(R.id.vsvc)<br><br><span class=\"hljs-comment\">// 循环创建50个TextView并添加到布局中</span><br><span class=\"hljs-keyword\">for</span> (i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">1</span> .. <span class=\"hljs-number\">50</span>)&#123;<br>    <span class=\"hljs-comment\">// 创建并配置TextView样式</span><br>    <span class=\"hljs-keyword\">val</span> textView = TextView(<span class=\"hljs-keyword\">this</span>).apply&#123;<br>        text = <span class=\"hljs-string\">&quot;动态添加的 TextView <span class=\"hljs-variable\">$i</span>&quot;</span><br>        textSize = <span class=\"hljs-number\">16f</span><br>        setTextColor(Color.BLACK)<br>        setPadding(<span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">10</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 设置布局参数，配置上下边距</span><br>    <span class=\"hljs-keyword\">val</span> params = LinearLayout.LayoutParams(<br>        LinearLayout.LayoutParams.MATCH_PARENT,<br>        LinearLayout.LayoutParams.WRAP_CONTENT<br>    ).apply &#123;<br>        topMargin = <span class=\"hljs-number\">5</span><br>    &#125;<br>    textView.layoutParams = params<br><br>    <span class=\"hljs-comment\">// 将TextView添加到父布局中</span><br>    vsvc.addView(textView)<br>&#125;<br><br><br><span class=\"hljs-comment\">// 获取水平滚动视图中的线性布局容器</span><br><span class=\"hljs-keyword\">val</span> hsvc = findViewById&lt;LinearLayout&gt;(R.id.hsvc)<br><br><span class=\"hljs-comment\">// 设置水平滚动视图的滚动监听器，用于监听滚动位置变化</span><br>findViewById&lt;HorizontalScrollView&gt;(R.id.hsv).setOnScrollChangeListener(&#123;v, scrollX, scrollY, oldScrollX, oldScrollY -&gt;<br>    Log.d(TAG, <span class=\"hljs-string\">&quot;ScrollX: <span class=\"hljs-variable\">$scrollX</span>, ScrollY: <span class=\"hljs-variable\">$scrollY</span>, oldScrollX: <span class=\"hljs-variable\">$oldScrollX</span>, oldScrollY: <span class=\"hljs-variable\">$oldScrollY</span>&quot;</span>)<br>&#125;)<br><br><span class=\"hljs-comment\">// 循环创建50个TextView并添加到水平滚动布局中</span><br><span class=\"hljs-keyword\">for</span>(i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">1</span> .. <span class=\"hljs-number\">50</span>)&#123;<br>    <span class=\"hljs-keyword\">val</span> textView = TextView(<span class=\"hljs-keyword\">this</span>).apply &#123;<br>        text = <span class=\"hljs-string\">&quot;第 <span class=\"hljs-variable\">$i</span> 个&quot;</span><br>        textSize = <span class=\"hljs-number\">16f</span><br>        setTextColor(Color.BLACK)<br>        setBackgroundColor(Color.WHITE)<br>        setPadding(<span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">10</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 设置TextView的布局参数，包括上下边距和右边距</span><br>    <span class=\"hljs-keyword\">val</span> params = LinearLayout.LayoutParams(<br>        LinearLayout.LayoutParams.WRAP_CONTENT,<br>        LinearLayout.LayoutParams.WRAP_CONTENT<br>    ).apply &#123;<br>        topMargin = <span class=\"hljs-number\">100</span><br>        rightMargin = <span class=\"hljs-number\">20</span><br>    &#125;<br>    textView.layoutParams = params<br>    hsvc.addView(textView)<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"RecyclerView-容器\"><a href=\"#RecyclerView-容器\" class=\"headerlink\" title=\"RecyclerView 容器\"></a>RecyclerView 容器</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h4 id=\"核心组件\"><a href=\"#核心组件\" class=\"headerlink\" title=\"核心组件\"></a>核心组件</h4><table>\n<thead>\n<tr>\n<th>组件</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Adapter</td>\n<td>数据与视图绑定，创建ViewHolder，绑定数据到视图</td>\n</tr>\n<tr>\n<td>ViewHolder</td>\n<td>缓存视图引用，存储item布局中的控件引用</td>\n</tr>\n<tr>\n<td>LayoutManager</td>\n<td>定义布局方式，如垂直或水平，以及如何排列item</td>\n</tr>\n<tr>\n<td>ItemDecoration</td>\n<td>定义item的装饰，如分割线，边框，背景颜色等</td>\n</tr>\n<tr>\n<td>ItemAnimator</td>\n<td>定义item的动画，如插入，删除，移动，改变大小等</td>\n</tr>\n</tbody></table>\n<h4 id=\"引入依赖\"><a href=\"#引入依赖\" class=\"headerlink\" title=\"引入依赖\"></a>引入依赖</h4><ol>\n<li>在模组的 build.gradle文件中添加以下依赖项：</li>\n</ol>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs gradle\"><span class=\"hljs-comment\">// 添加RecyclerView依赖</span><br><span class=\"hljs-keyword\">dependencies</span> &#123;<br>    implementation(libs.androidx.recyclerview)<br>&#125;<br><span class=\"hljs-comment\">// 若添加失败尝试添加以下依赖项</span><br><span class=\"hljs-keyword\">dependencies</span> &#123;<br>    implementation(<span class=\"hljs-string\">&quot;androidx.recyclerview:recyclerview:1.3.2&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>在项目级gradle.properties文件中添加网络代理<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs properties\"><span class=\"hljs-attr\">android.useAndroidX</span>=<span class=\"hljs-string\">true</span><br><span class=\"hljs-attr\">android.enableJetifier</span>=<span class=\"hljs-string\">true</span><br><br><span class=\"hljs-attr\">systemProp.http.proxyHost</span>=<span class=\"hljs-string\">http://127.0.0.1:端口号</span><br></code></pre></td></tr></table></figure></li>\n<li>sync now</li>\n</ol>\n<h4 id=\"布局属性-6\"><a href=\"#布局属性-6\" class=\"headerlink\" title=\"布局属性\"></a>布局属性</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">androidx.recyclerview.widget.RecyclerView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">属性名</span>=<span class=\"hljs-string\">&quot;属性值&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">......</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>控件的id</td>\n<td>@+id&#x2F;recyclerView: 创建一个id<br>@id&#x2F;recyclerView: 引用一个id</td>\n</tr>\n<tr>\n<td>layout_width</td>\n<td>控件的宽度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局</td>\n</tr>\n<tr>\n<td>layout_height</td>\n<td>控件的高度</td>\n<td>match_parent: 填充父布局<br>wrap_content: 适应内容<br>具体数值: 填充父布局</td>\n</tr>\n</tbody></table>\n<h4 id=\"RecyclerView的使用\"><a href=\"#RecyclerView的使用\" class=\"headerlink\" title=\"RecyclerView的使用\"></a>RecyclerView的使用</h4><ol>\n<li>添加依赖</li>\n<li>布局Activity</li>\n<li>创建Item布局<ol>\n<li>recycler_img_item.xml <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">LinearLayout</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;match_parent&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:orientation</span>=<span class=\"hljs-string\">&quot;horizontal&quot;</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">&quot;@drawable/p0&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">&quot;@drawable/p0&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">&quot;@drawable/p0&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">&quot;@drawable/p0&quot;</span>/&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">LinearLayout</span>&gt;</span><br></code></pre></td></tr></table></figure></li>\n<li>recycler_text_item.xml <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">LinearLayout</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;match_parent&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:orientation</span>=<span class=\"hljs-string\">&quot;horizontal&quot;</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ImageView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;80dp&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:src</span>=<span class=\"hljs-string\">&quot;@drawable/p0&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">LinearLayout</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:orientation</span>=<span class=\"hljs-string\">&quot;vertical&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_marginLeft</span>=<span class=\"hljs-string\">&quot;20dp&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">TextView</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">&quot;@+id/item_title&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:text</span>=<span class=\"hljs-string\">&quot;我是标题&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textColor</span>=<span class=\"hljs-string\">&quot;#FF000000&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textStyle</span>=<span class=\"hljs-string\">&quot;bold&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textSize</span>=<span class=\"hljs-string\">&quot;18sp&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">TextView</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">&quot;@+id/item_text&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:layout_marginTop</span>=<span class=\"hljs-string\">&quot;20dp&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textColor</span>=<span class=\"hljs-string\">&quot;#FF000000&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:textSize</span>=<span class=\"hljs-string\">&quot;18dp&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">LinearLayout</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">LinearLayout</span>&gt;</span><br></code></pre></td></tr></table></figure></li>\n</ol>\n</li>\n<li>实现Adapter &amp; ViewHolder <figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置Activity的内容视图，并初始化RecyclerView及其相关组件。</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> layoutResID 布局资源ID，用于设置Activity的界面布局。</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">setContentView</span><span class=\"hljs-params\">(layoutResID: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>    <span class=\"hljs-keyword\">super</span>.setContentView(layoutResID)<br><br>    <span class=\"hljs-keyword\">val</span> recyclerView = findViewById&lt;RecyclerView&gt;(R.id.recyclerView)<br>    <span class=\"hljs-comment\">// 设置RecyclerView的布局管理器为垂直方向的瀑布流布局，列数为1（即线性布局效果）</span><br>    recyclerView?.setLayoutManager(<br>        StaggeredGridLayoutManager(<br>            <span class=\"hljs-number\">1</span>,<br>            StaggeredGridLayoutManager.VERTICAL<br>        )<br>    )<br>    <span class=\"hljs-comment\">// 初始化数据源，添加101个字符串项</span><br>    <span class=\"hljs-keyword\">val</span> <span class=\"hljs-keyword\">data</span> = mutableListOf&lt;String?&gt;()<br>    <span class=\"hljs-keyword\">for</span> (i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0.</span><span class=\"hljs-number\">.100</span>) &#123;<br>        <span class=\"hljs-keyword\">data</span>.add(<span class=\"hljs-string\">&quot;Item <span class=\"hljs-variable\">$i</span>&quot;</span>)<br>    &#125;<br>    <span class=\"hljs-comment\">// 创建并设置适配器</span><br>    <span class=\"hljs-keyword\">val</span> adapter = MyAdapter(<span class=\"hljs-keyword\">data</span>)<br>    recyclerView?.setAdapter(adapter)<br>    <span class=\"hljs-comment\">// 添加分割线装饰</span><br>    recyclerView?.addItemDecoration(DividerItemDecoration(<span class=\"hljs-keyword\">this</span>, LinearLayoutManager.VERTICAL))<br>    <span class=\"hljs-comment\">// 设置默认的动画效果</span><br>    recyclerView?.itemAnimator = DefaultItemAnimator()<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * RecyclerView的适配器类，用于绑定不同类型的数据到视图上。</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@property</span> data 数据源列表，包含要显示的字符串数据。</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyAdapter</span>(<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> <span class=\"hljs-keyword\">data</span>: MutableList&lt;String?&gt;) :<br>    RecyclerView.Adapter&lt;MyAdapter.ViewHolder?&gt;()&#123;<br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span>&#123;<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> VIEW_TYPE_TEXT = <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> VIEW_TYPE_IMG = <span class=\"hljs-number\">2</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 根据位置返回不同的视图类型。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> position 当前项在数据集中的位置。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回视图类型标识符（VIEW_TYPE_TEXT 或 VIEW_TYPE_IMG）。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getItemViewType</span><span class=\"hljs-params\">(position: <span class=\"hljs-type\">Int</span>)</span></span>: <span class=\"hljs-built_in\">Int</span>&#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">if</span> (position % <span class=\"hljs-number\">2</span> == <span class=\"hljs-number\">0</span>) VIEW_TYPE_TEXT <span class=\"hljs-keyword\">else</span> VIEW_TYPE_IMG<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 创建一个新的ViewHolder实例。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> parent 父容器ViewGroup。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> viewType 视图类型标识符。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 返回新创建的ViewHolder对象。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreateViewHolder</span><span class=\"hljs-params\">(parent: <span class=\"hljs-type\">ViewGroup</span>, viewType: <span class=\"hljs-type\">Int</span>)</span></span>: MyAdapter.ViewHolder &#123;<br>        <span class=\"hljs-keyword\">val</span> view : View<br>        <span class=\"hljs-comment\">// 根据视图类型加载不同的布局文件</span><br>        <span class=\"hljs-keyword\">if</span>(viewType == VIEW_TYPE_TEXT)&#123;<br>            view = LayoutInflater.from(parent.getContext())<br>                .inflate(R.layout.recycler_text_item, parent, <span class=\"hljs-literal\">false</span>)<br>            view.tag = VIEW_TYPE_TEXT<br>        &#125; <span class=\"hljs-keyword\">else</span>&#123;<br>            view = LayoutInflater.from(parent.getContext())<br>                .inflate(R.layout.recycler_img_item, parent, <span class=\"hljs-literal\">false</span>)<br>            view.tag = VIEW_TYPE_IMG<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> ViewHolder(view, <span class=\"hljs-keyword\">data</span>, <span class=\"hljs-keyword\">this</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 将数据绑定到指定位置的ViewHolder上。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> holder 要绑定数据的ViewHolder。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> position 数据在列表中的位置。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onBindViewHolder</span><span class=\"hljs-params\">(holder: <span class=\"hljs-type\">ViewHolder</span>, position: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        holder.setText(<span class=\"hljs-keyword\">data</span>.<span class=\"hljs-keyword\">get</span>(position))<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 返回数据集合的大小。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 数据集合的元素数量。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getItemCount</span><span class=\"hljs-params\">()</span></span>: <span class=\"hljs-built_in\">Int</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">data</span>.size<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * ViewHolder类，用于持有RecyclerView中每个子项的视图引用。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@property</span> itemView 子项的根视图。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@property</span> dataList 数据源列表。</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@property</span> adapter 所属的适配器实例。</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ViewHolder</span>(itemView: View, <span class=\"hljs-keyword\">var</span> dataList: MutableList&lt;String?&gt;, <span class=\"hljs-keyword\">val</span> adapter: MyAdapter) : RecyclerView.ViewHolder(itemView)&#123;<br>        <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">         * 设置文本内容并处理点击事件。</span><br><span class=\"hljs-comment\">         *</span><br><span class=\"hljs-comment\">         * <span class=\"hljs-doctag\">@param</span> text 要设置的文本内容。</span><br><span class=\"hljs-comment\">         */</span><br>        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">setText</span><span class=\"hljs-params\">(text: <span class=\"hljs-type\">String</span>?)</span></span>&#123;<br>            <span class=\"hljs-keyword\">if</span>(itemView.tag == VIEW_TYPE_TEXT)&#123;<br>                itemView.findViewById&lt;TextView&gt;(R.id.item_text).text = text<br>                <span class=\"hljs-comment\">// 文本类型项点击时移除第一个元素</span><br>                itemView.setOnClickListener &#123;<br>                    <span class=\"hljs-keyword\">if</span> (dataList.isNotEmpty())&#123;<br>                        dataList.removeAt(<span class=\"hljs-number\">0</span>)<br>                        adapter.notifyItemRemoved(<span class=\"hljs-number\">0</span>)<br>                    &#125;<br>                &#125;<br>            &#125;<span class=\"hljs-keyword\">else</span> &#123;<br>                <span class=\"hljs-comment\">// 图片类型项点击时更新第一个元素的内容</span><br>                itemView.setOnClickListener &#123;<br>                    dataList[<span class=\"hljs-number\">0</span>] =  <span class=\"hljs-string\">&quot;Item <span class=\"hljs-subst\">$&#123;(<span class=\"hljs-number\">0.</span><span class=\"hljs-number\">.100</span>).random()&#125;</span>&quot;</span><br>                    adapter.notifyItemChanged(<span class=\"hljs-number\">0</span>)<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>在Activity &amp; Fragment中调用</li>\n</ol>\n<h2 id=\"布局\"><a href=\"#布局\" class=\"headerlink\" title=\"布局\"></a>布局</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>Android的布局过程是ui构建的核心环节，本质是 <strong>视图树(View Hierarchy)</strong> 中每个 <strong>节点(View)</strong> 确定自身以及其子元素尺寸和位置的过程</p>\n<h3 id=\"测量和布局\"><a href=\"#测量和布局\" class=\"headerlink\" title=\"测量和布局\"></a>测量和布局</h3><ol>\n<li>测量 Measure<ul>\n<li>遍历子视图<ul>\n<li>跳过View.GONE</li>\n<li>对其他子视图调用 measureChildWithMargins()</li>\n</ul>\n</li>\n<li>计算最大子视图尺寸<ul>\n<li>宽度：measureWidth + marginLeft + marginRight 的最大值</li>\n<li>高度：measureHeight + marginTop + marginBottom 的最大值</li>\n</ul>\n</li>\n<li>处理自身尺寸<ul>\n<li>最终宽度 &#x3D; max(子视图最大宽度，背景最小宽度，建议最小宽度) + paddingLeft + paddingRight</li>\n<li>最终高度 &#x3D; max(子视图最大高度，背景最小高度，建议最小高度) + paddingTop + paddingBottom</li>\n<li>结果还需满足父视图传入的MeasureSpec</li>\n</ul>\n</li>\n<li>处理特殊子视图：设置了layout_gravity需重新测量调整位置</li>\n</ul>\n</li>\n<li>布局 Layout<ul>\n<li>确定布局区域 </li>\n<li>遍历子视图</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"FrameLayout\"><a href=\"#FrameLayout\" class=\"headerlink\" title=\"FrameLayout\"></a>FrameLayout</h3><p>核心价值在于通过<strong>layout_gravity</strong>实现子视图的精准叠加定位</p>\n<h4 id=\"自身属性\"><a href=\"#自身属性\" class=\"headerlink\" title=\"自身属性\"></a>自身属性</h4><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_width</td>\n<td>视图宽度</td>\n<td>match_parent:匹配父视图宽度<br>wrap_content:包裹内容宽度<br>具体数值:具体数值</td>\n</tr>\n<tr>\n<td>android:layout_height</td>\n<td>视图高度</td>\n<td>match_parent:匹配父视图高度<br>wrap_content:包裹内容高度<br>具体数值:具体数值</td>\n</tr>\n<tr>\n<td>android:layout_gravity</td>\n<td>视图对齐方式</td>\n<td>left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐<br>可以通过竖杠连接多个值</td>\n</tr>\n<tr>\n<td>android:background</td>\n<td>视图背景</td>\n<td>颜色值:颜色值<br>图片:图片路径</td>\n</tr>\n<tr>\n<td>android:foreground</td>\n<td>视图前景</td>\n<td>颜色值:颜色值<br>图片:图片路径</td>\n</tr>\n<tr>\n<td>android:foregroundGravity</td>\n<td>视图前景对齐方式</td>\n<td>left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐</td>\n</tr>\n</tbody></table>\n<h4 id=\"子视图属性\"><a href=\"#子视图属性\" class=\"headerlink\" title=\"子视图属性\"></a>子视图属性</h4><p>子视图默认排列在FrameLayout的左上角，且允许堆叠<br>最终位置为对其方式并加上边距值后的位置</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_gravity</td>\n<td>子视图对齐方式</td>\n<td>left:左对齐<br>right:右对齐<br>center:居中对齐<br>top:顶部对齐<br>bottom:底部对齐</td>\n</tr>\n<tr>\n<td>android:layout_marginStart</td>\n<td>子视图左边距</td>\n<td>单位:dp</td>\n</tr>\n<tr>\n<td>android:layout_marginEnd</td>\n<td>子视图右边距</td>\n<td>单位:dp</td>\n</tr>\n<tr>\n<td>android:layout_marginTop</td>\n<td>子视图上边距</td>\n<td>单位:dp</td>\n</tr>\n<tr>\n<td>android:layout_marginBottom</td>\n<td>子视图下边距</td>\n<td>单位:dp</td>\n</tr>\n</tbody></table>\n<h3 id=\"LinearLayout\"><a href=\"#LinearLayout\" class=\"headerlink\" title=\"LinearLayout\"></a>LinearLayout</h3><p>核心优势在于<strong>方向性排列</strong>和<strong>权重分配</strong>，适合构建列表、表单等结构性界面，但嵌套或频繁使用layout_weight属性可能会导致<strong>性能问题</strong>。</p>\n<h4 id=\"自身属性-1\"><a href=\"#自身属性-1\" class=\"headerlink\" title=\"自身属性\"></a>自身属性</h4><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>android:orientation</strong></td>\n<td>排列方向</td>\n<td>horizontal：水平排列<br>vertical：垂直排列</td>\n</tr>\n<tr>\n<td>android:layout_width</td>\n<td>宽度</td>\n<td>match_parent：填充父布局<br>wrap_content：内容自适应<br>具体数值</td>\n</tr>\n<tr>\n<td>android:layout_height</td>\n<td>高度</td>\n<td>match_parent：填充父布局<br>wrap_content：内容自适应<br>具体数值</td>\n</tr>\n<tr>\n<td>android:background</td>\n<td>背景</td>\n<td>颜色值</td>\n</tr>\n<tr>\n<td>android:gravity</td>\n<td>子视图对齐方式</td>\n<td>center：居中<br>center_vertical：垂直居中<br>center_horizontal：水平居中<br>left：左对齐<br>right：右对齐<br>top：上对齐<br>bottom：下对齐</td>\n</tr>\n<tr>\n<td>android:layout_gravity</td>\n<td>子视图在父容器对齐方式</td>\n<td>center：居中<br>center_vertical：垂直居中<br>center_horizontal：水平居中<br>left：左对齐<br>right：右对齐<br>top：上对齐<br>bottom：下对齐</td>\n</tr>\n<tr>\n<td>android:layout_marginTop</td>\n<td>设置子视图与父容器顶部的距离</td>\n<td>单位：dp</td>\n</tr>\n<tr>\n<td>android:layout_marginBottom</td>\n<td>设置子视图与父容器底部的距离</td>\n<td>单位：dp</td>\n</tr>\n<tr>\n<td>android:layout_marginLeft</td>\n<td>设置子视图与父容器左侧的距离</td>\n<td>单位：dp</td>\n</tr>\n<tr>\n<td>android:layout_marginRight</td>\n<td>设置子视图与父容器右侧的距离</td>\n<td>单位：dp</td>\n</tr>\n<tr>\n<td><em><strong>android:divider</strong></em></td>\n<td>设置ListView的分割线</td>\n<td>drawable资源文件</td>\n</tr>\n<tr>\n<td>android:showDividers</td>\n<td>设置ListView的分割线显示位置</td>\n<td>none：不显示；beginning：开头；middle：中间；end：结尾</td>\n</tr>\n<tr>\n<td><strong>android:weightSum</strong></td>\n<td>设置LinearLayout的权重和</td>\n<td>float类型</td>\n</tr>\n</tbody></table>\n<ul>\n<li>分割线示例<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>?&gt;</span><br><br>    这是一个Android Drawable资源文件，用于定义分割线<br><br>    主要功能：<br>    - 创建一个1x1像素的红色矩形drawable<br>    - 用于创建分割线<br><br>    属性说明：<br>    - android:shape=&quot;rectangle&quot;: 指定形状为矩形<br>    - android:width=&quot;1dp&quot; 和 android:height=&quot;1dp&quot;: 设置形状尺寸为1x1像素<br>    - android:color=&quot;#FF0000&quot;: 设置填充颜色为纯红色<br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">shape</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:shape</span>=<span class=\"hljs-string\">&quot;rectangle&quot;</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">size</span> <span class=\"hljs-attr\">android:width</span>=<span class=\"hljs-string\">&quot;1dp&quot;</span> <span class=\"hljs-attr\">android:height</span>=<span class=\"hljs-string\">&quot;1dp&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">solid</span> <span class=\"hljs-attr\">android:color</span>=<span class=\"hljs-string\">&quot;#FF0000&quot;</span>/&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">shape</span>&gt;</span><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"子视图属性-1\"><a href=\"#子视图属性-1\" class=\"headerlink\" title=\"子视图属性\"></a>子视图属性</h4><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_gravity</td>\n<td>设置子视图在父视图中的对齐方式</td>\n<td>left:左对齐<br>right:右对齐<br>center:居中对齐<br>fill:填充父视图</td>\n</tr>\n<tr>\n<td>android:layout_weight</td>\n<td>设置子视图在父视图中的权重</td>\n<td>根据父视图的weightSum值来分配空间，默认weightSum为4，<strong>需要将layout_width或layout_height设置为0dp</strong></td>\n</tr>\n</tbody></table>\n<h3 id=\"RelativeLayout\"><a href=\"#RelativeLayout\" class=\"headerlink\" title=\"RelativeLayout\"></a>RelativeLayout</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>是基于相对位置关系的布局容器，通过定义子视图相对于父容器或同级视图的位置来组织界面元素</p>\n<h4 id=\"子视图属性-2\"><a href=\"#子视图属性-2\" class=\"headerlink\" title=\"子视图属性\"></a>子视图属性</h4><ol>\n<li>对齐父容器边</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>描述</th>\n<th>属性</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_alignParentStart</td>\n<td>设置视图与父容器起始边对齐</td>\n<td>true:启用左对齐<br>false:禁用左对齐</td>\n</tr>\n<tr>\n<td>android:layout_alignParentEnd</td>\n<td>设置视图与父容器结束边对齐</td>\n<td>true:启用右对齐<br>false:禁用右对齐</td>\n</tr>\n<tr>\n<td>android:layout_alignParentTop</td>\n<td>设置视图与父容器顶部对齐</td>\n<td>true:启用顶部对齐<br>false:禁用顶部对齐</td>\n</tr>\n<tr>\n<td>android:layout_alignParentBottom</td>\n<td>设置视图与父容器底部对齐</td>\n<td>true:启用底部对齐<br>false:禁用底部对齐</td>\n</tr>\n</tbody></table>\n<ol start=\"2\">\n<li>方向位置</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>描述</th>\n<th>属性</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_toRightOf&#x2F; android:layout_toEndOf</td>\n<td>设置视图相对于某个视图的右侧对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_toLeftOf&#x2F; android:layout_toStartOf</td>\n<td>设置视图相对于某个视图的左侧对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_below</td>\n<td>设置视图相对于某个视图的底部对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_above</td>\n<td>设置视图相对于某个视图的顶部对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n<ol start=\"3\">\n<li>边缘对齐</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>描述</th>\n<th>属性</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_alignTop</td>\n<td>设置视图与某个视图的顶部对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_alignBottom</td>\n<td>设置视图与某个视图的底部对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_alignLeft</td>\n<td>设置视图与某个视图的左侧对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_alignRight</td>\n<td>设置视图与某个视图的右侧对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>android:layout_baseline</td>\n<td>设置视图的基线与指定视图的基线对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n<ol start=\"4\">\n<li>居中控制</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>描述</th>\n<th>属性</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_centerInParent</td>\n<td>设置视图在父容器中居中显示</td>\n<td>true:启用居中显示<br>false:禁用居中显示</td>\n</tr>\n<tr>\n<td>layout_centerHorizontal</td>\n<td>垂直居中</td>\n<td>true:启用垂直居中<br>false:禁用垂直居中</td>\n</tr>\n<tr>\n<td>layout_centerVertical</td>\n<td>水平居中</td>\n<td>true:启用水平居中<br>false:禁用水平居中</td>\n</tr>\n</tbody></table>\n<h3 id=\"ConstraintLayout\"><a href=\"#ConstraintLayout\" class=\"headerlink\" title=\"ConstraintLayout\"></a>ConstraintLayout</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>用于构建复杂界面的灵活布局容器，通过 <strong>约束关系(Constraint)</strong> 精准控制子视图的相对位置和尺寸，相比传统布局能有效减少嵌套层级，<strong>提升性能</strong></p>\n<h4 id=\"子视图属性-3\"><a href=\"#子视图属性-3\" class=\"headerlink\" title=\"子视图属性\"></a>子视图属性</h4><ol>\n<li><p>基本约束属性</p>\n<ul>\n<li><p>水平方向</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintLeft_toLeftOf</td>\n<td>左对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintLeft_toRightOf</td>\n<td>设置视图左侧在目标右侧</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintRight_toLeftOf</td>\n<td>设置视图右侧在目标左侧</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintRight_toRightOf</td>\n<td>右对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintStart_toStartOf</td>\n<td>起始边对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintStart_toEndOf</td>\n<td>起始边在目标结束边</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintEnd_toStartOf</td>\n<td>结束边在目标起始边</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintEnd_toEndOf</td>\n<td>结束边对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n</li>\n<li><p>垂直方向</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintTop_toTopOf</td>\n<td>顶部对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintTop_toBottomOf</td>\n<td>顶部在目标底部</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintBottom_toTopOf</td>\n<td>底部在目标顶部</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n<tr>\n<td>app:layout_constraintBottom_toBottomOf</td>\n<td>底部对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n</li>\n<li><p>特殊对齐</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintBaseline_toBaselineOf</td>\n<td>文本基线对齐</td>\n<td>@+id&#x2F;viewId:指定某个视图的id</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n<li><p>边距尺寸约束</p>\n<ul>\n<li><p>常规边距</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>android:layout_marginStart</td>\n<td>设置视图起始边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginEnd</td>\n<td>设置视图结束边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginTop</td>\n<td>顶部边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginBottom</td>\n<td>底部边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginLeft</td>\n<td>左侧边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n<tr>\n<td>android:layout_marginRight</td>\n<td>右侧边距</td>\n<td>0dp:无边距<br>1dp:1dp边距</td>\n</tr>\n</tbody></table>\n</li>\n<li><p>目标隐藏时的边距(约束目标变为GONE时生效)</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_goneMarginRight</td>\n<td>目标隐藏时右侧边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 &#x3D; 目标宽度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginLeft</td>\n<td>目标隐藏时左侧边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 &#x3D; 目标宽度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginTop</td>\n<td>顶部边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 &#x3D; 目标高度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginBottom</td>\n<td>底部边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 &#x3D; 目标高度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginStart</td>\n<td>启动边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 &#x3D; 宽度 + 目标margin</strong></td>\n</tr>\n<tr>\n<td>app:layout_goneMarginEnd</td>\n<td>结束边距</td>\n<td>0dp:无边距<br>1dp:1dp边距<br>若目标隐藏时不移动，则<strong>设置值 &#x3D; 宽度 + 目标margin</strong></td>\n</tr>\n</tbody></table>\n</li>\n<li><p>特殊尺寸值：0dp(即MATCH_CONSTRAINT，根据约束条件拓展)；wrap_content(自适应内容，可配合强制约束)</p>\n</li>\n<li><p>比例与限制</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintDimensionRatio</td>\n<td>宽高比</td>\n<td>1:1:宽高比为1:1</td>\n</tr>\n<tr>\n<td>app:layout_constrainedWidth</td>\n<td>强制宽度限制</td>\n<td>true:宽度限制<br>false:宽度不限制</td>\n</tr>\n<tr>\n<td>app:layout_constrainedHeight</td>\n<td>强制高度限制</td>\n<td>true:高度限制<br>false:高度不限制</td>\n</tr>\n<tr>\n<td>android:minWidth</td>\n<td>设置视图最小宽度</td>\n<td>0dp:无最小宽度</td>\n</tr>\n<tr>\n<td>android:minHeight</td>\n<td>设置视图最小高度</td>\n<td>0dp:无最小高度</td>\n</tr>\n<tr>\n<td>android:maxWidth</td>\n<td>设置视图最大宽度</td>\n<td>0dp:无最大宽度</td>\n</tr>\n<tr>\n<td>android:maxHeight</td>\n<td>设置视图最大高度</td>\n<td>0dp:无最大高度</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n<li><p>链式布局</p>\n</li>\n</ol>\n<p>第一个元素的app:layout_constraintLeft_toLeftOf属性为parent，最后一个元素的app:layout_constraintRight_toRightOf属性为parent，中间的元素的app:layout_constraintLeft_toRightOf属性为前一个元素，app:layout_constraintRight_toLeftOf属性为后一个元素，即<strong>双向连接</strong></p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintHorizontal_chainStyle</td>\n<td>水平链式布局样式</td>\n<td>spread:均分<br>packed:均分且居中紧凑<br>spread_inside:均分且两侧紧贴父容器</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--链式布局--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--spread--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        Button控件button5的布局定义</span><br><span class=\"hljs-comment\">        该按钮参与水平链式约束，与button6、button7形成水平链条</span><br><span class=\"hljs-comment\">        左侧对齐父容器左侧，右侧对齐到button6的左侧</span><br><span class=\"hljs-comment\">        顶部位置在ratio控件的下方</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">&quot;@+id/button5&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:text</span>=<span class=\"hljs-string\">&quot;button5&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintHorizontal_chainStyle</span>=<span class=\"hljs-string\">&quot;spread&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintLeft_toLeftOf</span>=<span class=\"hljs-string\">&quot;parent&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintRight_toLeftOf</span>=<span class=\"hljs-string\">&quot;@+id/button6&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"hljs-string\">&quot;@id/ratio&quot;</span>/&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        Button控件button6的布局定义</span><br><span class=\"hljs-comment\">        该按钮是水平链条的中间元素</span><br><span class=\"hljs-comment\">        左侧对齐到button5的右侧，右侧对齐到button7的左侧</span><br><span class=\"hljs-comment\">        顶部位置与button5对齐</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">&quot;@+id/button6&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:text</span>=<span class=\"hljs-string\">&quot;button6&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintLeft_toRightOf</span>=<span class=\"hljs-string\">&quot;@+id/button5&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintRight_toLeftOf</span>=<span class=\"hljs-string\">&quot;@id/button7&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"hljs-string\">&quot;@id/button5&quot;</span>/&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        Button控件button7的布局定义</span><br><span class=\"hljs-comment\">        该按钮是水平链条的最后一个元素</span><br><span class=\"hljs-comment\">        左侧对齐到button6的右侧，右侧对齐到父容器右侧</span><br><span class=\"hljs-comment\">        顶部位置与button5对齐</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">&quot;@+id/button7&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:text</span>=<span class=\"hljs-string\">&quot;button7&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"hljs-string\">&quot;@id/button5&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintLeft_toRightOf</span>=<span class=\"hljs-string\">&quot;@id/button6&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:layout_constraintRight_toRightOf</span>=<span class=\"hljs-string\">&quot;parent&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>权重分配</li>\n</ol>\n<p>通过结合链式布局和权重属性，实现权重分配，父容器默认权重总和为4</p>\n<p>此外，也可以通过结合layout_constraintLeft_toLeftOf、layout_constraintRight_toRightOf属性和偏移，实现按比例确定位置</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n<th>参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>app:layout_constraintHorizontal_weight</td>\n<td>水平权重分配</td>\n<td>0:不分配权重<br>1:分配权重</td>\n</tr>\n<tr>\n<td>app:layout_constraintVertical_weight</td>\n<td>垂直权重分配</td>\n<td>0:不分配权重<br>1:分配权重</td>\n</tr>\n<tr>\n<td>app:layout_constraintHorizontal_bias</td>\n<td>水平偏移</td>\n<td>0:不偏移<br>0.5:居中</td>\n</tr>\n</tbody></table>\n<ol start=\"5\">\n<li>参考线标签</li>\n</ol>\n<p>可以通过参考线标签，进一步实现复杂布局</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    Guideline控件用于在ConstraintLayout中创建参考线，帮助布局对齐</span><br><span class=\"hljs-comment\">    android:id: 控件的唯一标识符</span><br><span class=\"hljs-comment\">    android:layout_width: 布局宽度，wrap_content表示根据内容自适应</span><br><span class=\"hljs-comment\">    android:layout_height: 布局高度，wrap_content表示根据内容自适应</span><br><span class=\"hljs-comment\">    android:orientation: 参考线方向，vertical表示垂直方向</span><br><span class=\"hljs-comment\">    app:layout_constraintGuide_begin: 参考线距离父容器开始位置的距离，100dp表示距离左边100dp处</span><br><span class=\"hljs-comment\">--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">androidx.constraintlayout.widget.Guideline</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:id</span>=<span class=\"hljs-string\">&quot;@+id/guideline&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:orientation</span>=<span class=\"hljs-string\">&quot;vertical&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">app:layout_constraintGuide_begin</span>=<span class=\"hljs-string\">&quot;100dp&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><table>\n<thead>\n<tr>\n<th>特性</th>\n<th>LinearLayout</th>\n<th>FrameLayout</th>\n<th>RelativeLayout</th>\n<th>ConstraintLayout</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>布局逻辑</td>\n<td>线性方向排列</td>\n<td>视图堆叠</td>\n<td>相对其他视图&#x2F;父容器定位</td>\n<td>视图间约束关系</td>\n</tr>\n<tr>\n<td>嵌套</td>\n<td>易嵌套过深</td>\n<td>极少嵌套</td>\n<td>可减少嵌套</td>\n<td>显著减少嵌套</td>\n</tr>\n<tr>\n<td>性能</td>\n<td>嵌套多层时差</td>\n<td>最优（简单）</td>\n<td>较差（两次测量）</td>\n<td>最优（复杂布局）</td>\n</tr>\n<tr>\n<td>适用场景</td>\n<td>简单列表&#x2F;等分</td>\n<td>叠加视图</td>\n<td>中等复杂的相对定位</td>\n<td>高复杂度布局</td>\n</tr>\n<tr>\n<td>学习曲线</td>\n<td>简单</td>\n<td>简单</td>\n<td>中等</td>\n<td>较高</td>\n</tr>\n</tbody></table>\n<h2 id=\"创建自定义组件\"><a href=\"#创建自定义组件\" class=\"headerlink\" title=\"创建自定义组件\"></a>创建自定义组件</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">返回目录</a></p>\n<ol>\n<li>在res目录下的values文件夹中创建attrs.xml文件</li>\n<li>在attrs.xml文件的<resources>标签中添加如下内容：<code>declare-styleable</code>标签中的<code>name</code>属性定义了自定义组件的名称，<code>attr</code>标签中的<code>name</code>属性定义了属性的名称，<code>format</code>属性定义了属性的类型</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    定义自定义控件IconTextView的样式属性</span><br><span class=\"hljs-comment\">    该样式集合用于支持在XML布局文件中配置IconTextView控件的各种属性</span><br><span class=\"hljs-comment\">--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">declare-styleable</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;IconTextView&quot;</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 图标资源引用，用于设置控件显示的图标 --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">attr</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;iconSrc&quot;</span> <span class=\"hljs-attr\">format</span>=<span class=\"hljs-string\">&quot;reference&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 显示文本内容，用于设置控件显示的文字 --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">attr</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">format</span>=<span class=\"hljs-string\">&quot;string&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 文本颜色，用于设置文字的显示颜色 --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">attr</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;textColor&quot;</span> <span class=\"hljs-attr\">format</span>=<span class=\"hljs-string\">&quot;color&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 文本大小，用于设置文字的显示尺寸 --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">attr</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;textSize&quot;</span> <span class=\"hljs-attr\">format</span>=<span class=\"hljs-string\">&quot;dimension&quot;</span>/&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">declare-styleable</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>在主文件夹中创建自定义类IconTextView.kt</li>\n<li>重写其中的onMeasure()、onLayout()方法</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">IconTextView</span> <span class=\"hljs-meta\">@JvmOverloads</span> <span class=\"hljs-keyword\">constructor</span>(context: Context, attrs: AttributeSet? = <span class=\"hljs-literal\">null</span>) :<br>    ViewGroup(context, attrs)&#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 图标控件实例</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> mIcon: ImageView? = <span class=\"hljs-literal\">null</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 文本控件实例</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> mText: TextView? = <span class=\"hljs-literal\">null</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 初始化函数，在构造函数中调用</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">init</span>&#123;<br>        <span class=\"hljs-keyword\">init</span>(context, attrs)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 初始化控件方法</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> context 上下文对象，用于创建视图控件</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> attrs 属性集合，包含布局文件中定义的属性</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">init</span><span class=\"hljs-params\">(context: <span class=\"hljs-type\">Context</span>, attrs: <span class=\"hljs-type\">AttributeSet</span>?)</span></span>&#123;<br>        <span class=\"hljs-comment\">// 创建图标和文本控件实例</span><br>        mIcon = ImageView(context)<br>        mText = TextView(context)<br><br>        <span class=\"hljs-comment\">// 将子视图添加到容器中</span><br>        addView(mIcon)<br>        addView(mText)<br><br>        <span class=\"hljs-comment\">// 解析自定义属性</span><br>        attrs?.let &#123; parseAttributes(context, it) &#125;<br><br><br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">parseAttributes</span><span class=\"hljs-params\">(context: <span class=\"hljs-type\">Context</span>, attrs: <span class=\"hljs-type\">AttributeSet</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">val</span> typedArray = context.obtainStyledAttributes(attrs, R.styleable.IconTextView)<br><br>        <span class=\"hljs-comment\">// 解析图标资源</span><br>        <span class=\"hljs-keyword\">val</span> iconResId = typedArray.getResourceId(R.styleable.IconTextView_iconSrc, -<span class=\"hljs-number\">1</span>)<br>        <span class=\"hljs-keyword\">if</span> (iconResId != -<span class=\"hljs-number\">1</span>) &#123;<br>            mIcon?.setImageResource(iconResId)<br>        &#125;<br><br>        <span class=\"hljs-comment\">// 解析文本内容</span><br>        <span class=\"hljs-keyword\">val</span> text = typedArray.getString(R.styleable.IconTextView_text)<br>        mText?.text = text<br><br>        <span class=\"hljs-comment\">// 解析文本颜色</span><br>        <span class=\"hljs-keyword\">val</span> textColor = typedArray.getColor(R.styleable.IconTextView_textColor,<br>            mText?.currentTextColor ?: <span class=\"hljs-number\">0xFF000000</span>.toInt())<br>        mText?.setTextColor(textColor)<br><br>        <span class=\"hljs-comment\">// 解析文本大小</span><br>        <span class=\"hljs-keyword\">val</span> textSize = typedArray.getDimension(R.styleable.IconTextView_textSize, -<span class=\"hljs-number\">1f</span>)<br>        <span class=\"hljs-keyword\">if</span> (textSize != -<span class=\"hljs-number\">1f</span>) &#123;<br>            mText?.textSize = textSize / context.resources.displayMetrics.scaledDensity<br>        &#125;<br><br>        typedArray.recycle()<br>    &#125;<br><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 重写onMeasure:测量自定义视图的尺寸</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> widthMeasureSpec 宽度测量规格，包含宽度值和测量模式</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> heightMeasureSpec 高度测量规格，包含高度值和测量模式</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onMeasure</span><span class=\"hljs-params\">(widthMeasureSpec: <span class=\"hljs-type\">Int</span>, heightMeasureSpec: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">// 测量图标和文本组件的实际尺寸</span><br>        mIcon!!.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)<br>        mText!!.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)<br><br>        <span class=\"hljs-comment\">// 计算内容区域的宽度和高度</span><br>        <span class=\"hljs-keyword\">var</span> width = mIcon!!.measuredWidth + mText!!.measuredWidth<br>        <span class=\"hljs-keyword\">var</span> height = max(mIcon!!.measuredHeight, mText!!.measuredHeight)<br><br>        <span class=\"hljs-comment\">// 添加内边距到总尺寸</span><br>        width += paddingLeft + paddingRight<br>        height += paddingTop + paddingBottom<br><br>        <span class=\"hljs-comment\">// 根据测量规格解析最终尺寸并设置</span><br>        setMeasuredDimension(<br>            resolveSize(width, widthMeasureSpec),<br>            resolveSize(height, heightMeasureSpec)<br>        )<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 重写onLayout:布局回调方法，用于确定子视图的位置</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> changed 布局是否发生变化</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> l 左边界位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> t 上边界位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> r 右边界位置</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> b 下边界位置</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onLayout</span><span class=\"hljs-params\">(changed: <span class=\"hljs-type\">Boolean</span>, l: <span class=\"hljs-type\">Int</span>, t: <span class=\"hljs-type\">Int</span>, r: <span class=\"hljs-type\">Int</span>, b: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">val</span> paddingLeft = paddingLeft<br>        <span class=\"hljs-keyword\">val</span> paddingTop = paddingTop<br><br>        <span class=\"hljs-comment\">// 布局图标视图，位置在左上角</span><br>        mIcon!!.layout(<br>            paddingLeft,<br>            paddingTop,<br>            paddingLeft + mIcon!!.measuredWidth,<br>            paddingTop + mIcon!!.measuredHeight<br>        )<br><br>        <span class=\"hljs-comment\">// 布局文本视图，位置在图标右侧</span><br>        mText!!.layout(<br>            paddingLeft + mIcon!!.measuredWidth,<br>            paddingTop,<br>            paddingLeft + mIcon!!.measuredWidth + mText!!.measuredWidth,<br>            paddingTop + mText!!.measuredHeight<br>        )<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>在布局文件中使用自定义控件IconTextView</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">com.kei.helloworld.IconTextView</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_width</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:layout_height</span>=<span class=\"hljs-string\">&quot;wrap_content&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:iconSrc</span>=<span class=\"hljs-string\">&quot;@mipmap/ic_launcher_round&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:text</span>=<span class=\"hljs-string\">&quot;HelloWorld!!!&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:textColor</span>=<span class=\"hljs-string\">&quot;#FFFF0000&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">app:textSize</span>=<span class=\"hljs-string\">&quot;30sp&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"属性动画\"><a href=\"#属性动画\" class=\"headerlink\" title=\"属性动画\"></a>属性动画</h2><h3 id=\"动画框架\"><a href=\"#动画框架\" class=\"headerlink\" title=\"动画框架\"></a>动画框架</h3><table>\n<thead>\n<tr>\n<th>特性</th>\n<th>ViewPropertyAnimator</th>\n<th>ObjextAnimator</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>目标对象</td>\n<td>仅限View</td>\n<td>任意对象</td>\n</tr>\n<tr>\n<td>多属性动画</td>\n<td>链式调用且自动合并</td>\n<td>需手动优化</td>\n</tr>\n<tr>\n<td>灵活性</td>\n<td>易嵌套过深</td>\n<td>极少嵌套</td>\n</tr>\n<tr>\n<td>性能</td>\n<td>低</td>\n<td>高</td>\n</tr>\n<tr>\n<td>使用场景</td>\n<td>View的简单、高性能动画</td>\n<td>界面复杂动画、非View对象动画</td>\n</tr>\n</tbody></table>\n<h3 id=\"常用API\"><a href=\"#常用API\" class=\"headerlink\" title=\"常用API\"></a>常用API</h3><table>\n<thead>\n<tr>\n<th>API</th>\n<th>作用</th>\n<th>对应属性动画中的方法</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>setTranslationX</td>\n<td>设置X轴偏移</td>\n<td>translationX()<br>translationXBy()</td>\n</tr>\n<tr>\n<td>setTranslationY</td>\n<td>设置Y轴偏移</td>\n<td>translationY()<br>translationYBy()</td>\n</tr>\n<tr>\n<td>setTranslationZ</td>\n<td>设置Z轴偏移</td>\n<td>translationZ()<br>translationZBy()</td>\n</tr>\n<tr>\n<td>setX</td>\n<td>设置X轴绝对位置</td>\n<td>x()<br>xBy()</td>\n</tr>\n<tr>\n<td>setY</td>\n<td>设置Y轴绝对位置</td>\n<td>y()<br>yBy()</td>\n</tr>\n<tr>\n<td>setZ</td>\n<td>设置Z轴绝对位置</td>\n<td>z()<br>zBy()</td>\n</tr>\n<tr>\n<td>setRotation</td>\n<td>设置平面旋转</td>\n<td>rotation()<br>rotationBy()</td>\n</tr>\n<tr>\n<td>setRotationX</td>\n<td>设置沿x轴旋转</td>\n<td>rotationX()<br>rotationXBy()</td>\n</tr>\n<tr>\n<td>setRotationY</td>\n<td>设置沿y轴旋转</td>\n<td>rotationY()<br>rotationYBy()</td>\n</tr>\n<tr>\n<td>setScaleX</td>\n<td>设置X轴缩放</td>\n<td>scaleX()<br>scaleXBy()</td>\n</tr>\n<tr>\n<td>setScaleY</td>\n<td>设置Y轴缩放</td>\n<td>scaleY()<br>scaleYBy()</td>\n</tr>\n<tr>\n<td>setAlpha</td>\n<td>设置透明度</td>\n<td>alpha()<br>alphaBy()</td>\n</tr>\n</tbody></table>\n<h3 id=\"ViewPropertyAnimator\"><a href=\"#ViewPropertyAnimator\" class=\"headerlink\" title=\"ViewPropertyAnimator\"></a>ViewPropertyAnimator</h3><ol>\n<li>获取组件对象</li>\n<li>通过某些事件监听触发动画效果(示例使用了点击事件)</li>\n<li>组件对象调用animate()方法然后链式调用设置动画效果</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 获取蓝色视图组件</span><br><span class=\"hljs-keyword\">val</span> blueView = findViewById&lt;View&gt;(R.id.view3)<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置ViewPropertyAnimator按钮的点击事件监听器</span><br><span class=\"hljs-comment\"> * 该函数会在用户点击按钮时触发动画效果</span><br><span class=\"hljs-comment\"> */</span><br>findViewById&lt;Button&gt;(R.id.viewPropertyAnimator).setOnClickListener &#123;<br>    <span class=\"hljs-comment\">// 执行blueView的组合动画：平移、透明度变化和缩放</span><br>    blueView.animate().translationX(<span class=\"hljs-number\">500.0F</span>)<br>        .alpha(<span class=\"hljs-number\">0.5F</span>)<br>        .scaleX(<span class=\"hljs-number\">0.5F</span>)<br>        .scaleY(<span class=\"hljs-number\">0.5F</span>)<br>        .setDuration(<span class=\"hljs-number\">2000</span>)<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"ObjectAnimator\"><a href=\"#ObjectAnimator\" class=\"headerlink\" title=\"ObjectAnimator\"></a>ObjectAnimator</h3><ol>\n<li>获取组件对象</li>\n<li>通过某些事件监听触发动画效果(示例使用了点击事件)</li>\n<li>创建AnimatorSet()对象</li>\n<li>通过AnimatorSet()对象调用playTogether()方法添加多个属性动画</li>\n<li>ObjectAnimator()对象调用ofFloat()方法创建属性动画</li>\n<li>AnimatorSet()对象调用setDuration()方法设置动画持续时间</li>\n<li>AnimatorSet()对象interpolator属性可以为动画设置动画插值器</li>\n<li>AnimatorSet()对象调用start()方法开始执行动画</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 获取蓝色视图组件</span><br><span class=\"hljs-keyword\">val</span> blueView = findViewById&lt;View&gt;(R.id.view3)<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置ObjectAnimator按钮的点击事件监听器</span><br><span class=\"hljs-comment\"> * 该函数会在用户点击按钮时触发动画效果</span><br><span class=\"hljs-comment\"> */</span><br>findViewById&lt;Button&gt;(R.id.objectAnimator).setOnClickListener &#123;<br>    <span class=\"hljs-comment\">// 创建动画集合，用于同时播放多个属性动画</span><br>    <span class=\"hljs-keyword\">val</span> <span class=\"hljs-keyword\">set</span> = AnimatorSet()<br>    <span class=\"hljs-keyword\">set</span>.playTogether(<br>        ObjectAnimator.ofFloat(blueView, <span class=\"hljs-string\">&quot;translationX&quot;</span>, <span class=\"hljs-number\">600.0F</span>),<br>        ObjectAnimator.ofFloat(blueView, <span class=\"hljs-string\">&quot;scaleY&quot;</span>, <span class=\"hljs-number\">0.5F</span>),<br>        ObjectAnimator.ofFloat(blueView, <span class=\"hljs-string\">&quot;alpha&quot;</span>, <span class=\"hljs-number\">0.5F</span>)<br>    )<br>    <span class=\"hljs-comment\">// 设置动画持续时间为2000毫秒</span><br>    <span class=\"hljs-keyword\">set</span>.setDuration(<span class=\"hljs-number\">2000</span>)<br>    <span class=\"hljs-comment\">// 设置动画插值器为加速减速插值器</span><br>    <span class=\"hljs-keyword\">set</span>.interpolator = AccelerateDecelerateInterpolator()<br>    <span class=\"hljs-comment\">// 开始执行动画</span><br>    <span class=\"hljs-keyword\">set</span>.start()<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"动画插值器\"><a href=\"#动画插值器\" class=\"headerlink\" title=\"动画插值器\"></a>动画插值器</h4><p>插值器控制动画的<strong>变化速率</strong>，将**线性时间进度(0.0-1.0)**转换为非线性进度值，实现加速、减速、弹跳等效果</p>\n<table>\n<thead>\n<tr>\n<th>插值器类型</th>\n<th>效果描述</th>\n<th>适用场景</th>\n<th>函数代码</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>AccelerateDecelerateInterpolator</td>\n<td>默认插值器，先加速后减速</td>\n<td>自然运动</td>\n<td>new AccelerateDecelerateInterpolator()</td>\n</tr>\n<tr>\n<td>LinearInterpolator</td>\n<td>匀速插值器</td>\n<td>匀速运动</td>\n<td>new LinearInterpolator()</td>\n</tr>\n<tr>\n<td>AccelerateInterpolator</td>\n<td>持续加速</td>\n<td>物体下落</td>\n<td>new AccelerateInterpolator()</td>\n</tr>\n<tr>\n<td>DecelerateInterpolator</td>\n<td>持续减速</td>\n<td>物体上升</td>\n<td>new DecelerateInterpolator()</td>\n</tr>\n<tr>\n<td>BounceInterpolator</td>\n<td>结束时弹跳</td>\n<td>落地反弹</td>\n<td>new BounceInterpolator()</td>\n</tr>\n<tr>\n<td>OvershootInterpolator</td>\n<td>超越终点后回弹</td>\n<td>按钮点击反馈</td>\n<td>new OvershootInterpolator()</td>\n</tr>\n<tr>\n<td>PathInterpolator</td>\n<td>自定义曲线轨迹</td>\n<td>轨迹运动</td>\n<td>new PathInterpolator(0.4F, 0.5F, 0F, 1.0F)</td>\n</tr>\n</tbody></table>\n<h3 id=\"xmlAnimator\"><a href=\"#xmlAnimator\" class=\"headerlink\" title=\"xmlAnimator\"></a>xmlAnimator</h3><ol>\n<li>获取组件对象</li>\n<li>通过某些事件监听触发动画效果(示例使用了点击事件)</li>\n<li>创建AnimatorInflater()对象，并调用loadAnimator()方法加载XML定义的属性动画资源</li>\n<li>AnimatorInflater()对象调用addListener()方法添加状态监听器，重写监听方法</li>\n<li>AnimatorInflater()对象调用setTarget()方法设置动画目标对象</li>\n<li>AnimatorInflater()对象调用start()方法开始执行动画</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 获取蓝色视图组件</span><br><span class=\"hljs-keyword\">val</span> blueView = findViewById&lt;View&gt;(R.id.view3)<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 设置XML动画按钮的点击监听器</span><br><span class=\"hljs-comment\"> * 该函数为按钮添加点击事件处理，加载并执行XML定义的属性动画</span><br><span class=\"hljs-comment\"> * 监听动画的各种状态并在状态变化时显示对应的Toast提示</span><br><span class=\"hljs-comment\"> */</span><br>findViewById&lt;Button&gt;(R.id.xmlAnimator).setOnClickListener &#123;<br>    <span class=\"hljs-comment\">// 加载XML中定义的属性动画资源</span><br>    <span class=\"hljs-keyword\">val</span> anim = AnimatorInflater.loadAnimator(<br>        <span class=\"hljs-keyword\">this</span>,<br>        R.animator.text_animator<br>    )<br><br>    <span class=\"hljs-comment\">// 为动画添加状态监听器，监听动画的开始、结束、重复和取消事件</span><br>    anim.addListener(<span class=\"hljs-keyword\">object</span> : Animator.AnimatorListener&#123;<br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onAnimationCancel</span><span class=\"hljs-params\">(animation: <span class=\"hljs-type\">Animator</span>)</span></span> &#123;<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span><span class=\"hljs-symbol\">@ActivityAnimation</span>, <span class=\"hljs-string\">&quot;onAnimationCancel&quot;</span>, Toast.LENGTH_SHORT).show()<br>        &#125;<br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onAnimationEnd</span><span class=\"hljs-params\">(animation: <span class=\"hljs-type\">Animator</span>)</span></span> &#123;<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span><span class=\"hljs-symbol\">@ActivityAnimation</span>, <span class=\"hljs-string\">&quot;onAnimationEnd&quot;</span>, Toast.LENGTH_SHORT).show()<br>        &#125;<br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onAnimationRepeat</span><span class=\"hljs-params\">(animation: <span class=\"hljs-type\">Animator</span>)</span></span> &#123;<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span><span class=\"hljs-symbol\">@ActivityAnimation</span>, <span class=\"hljs-string\">&quot;onAnimationRepeat&quot;</span>, Toast.LENGTH_SHORT).show()<br>        &#125;<br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onAnimationStart</span><span class=\"hljs-params\">(animation: <span class=\"hljs-type\">Animator</span>)</span></span> &#123;<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span><span class=\"hljs-symbol\">@ActivityAnimation</span>, <span class=\"hljs-string\">&quot;onAnimationStart&quot;</span>, Toast.LENGTH_SHORT).show()<br>        &#125;<br>    &#125;)<br>    <span class=\"hljs-comment\">// 设置动画的目标视图</span><br>    anim.setTarget(blueView)<br>    <span class=\"hljs-comment\">// 启动动画</span><br>    anim.start()<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"动画属性资源的定义\"><a href=\"#动画属性资源的定义\" class=\"headerlink\" title=\"动画属性资源的定义\"></a>动画属性资源的定义</h4><ol>\n<li>在res目录下创建<strong>animator文件夹</strong></li>\n<li>创建<strong>XML文件</strong>，并添加以下内容</li>\n<li>set标签中的ordering属性控制<strong>动画播放顺序</strong></li>\n<li>set标签下的objectAnimator标签定义了属性<strong>动画效果</strong></li>\n<li>其中duration属性控制<strong>动画持续时间</strong>，propertyName属性控制<strong>动画属性名称</strong>，valueFrom属性控制动画<strong>起始值</strong>，valueTo属性控制动画<strong>结束值</strong></li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>?&gt;</span><br><span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    AnimatorSet配置文件</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    该XML文件定义了一个属性动画集合，用于按顺序播放多个动画效果</span><br><span class=\"hljs-comment\"></span><br><span class=\"hljs-comment\">    属性说明：</span><br><span class=\"hljs-comment\">    xmlns:android - Android命名空间声明，必需项</span><br><span class=\"hljs-comment\">    android:ordering - 动画播放顺序控制属性</span><br><span class=\"hljs-comment\">        值为&quot;sequentially&quot;表示动画将按顺序依次播放</span><br><span class=\"hljs-comment\">        可选值还包括&quot;together&quot;表示同时播放所有动画</span><br><span class=\"hljs-comment\">--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">set</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">android:ordering</span>=<span class=\"hljs-string\">&quot;sequentially&quot;</span>&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        透明度动画函数</span><br><span class=\"hljs-comment\">        功能：在1000毫秒内将对象的透明度从1.0渐变到0.5</span><br><span class=\"hljs-comment\">        参数：</span><br><span class=\"hljs-comment\">            android:duration - 动画持续时间，单位为毫秒</span><br><span class=\"hljs-comment\">            android:propertyName - 动画属性名称，此处为透明度alpha</span><br><span class=\"hljs-comment\">            android:valueFrom - 属性起始值，完全不透明</span><br><span class=\"hljs-comment\">            android:valueTo - 属性结束值，半透明状态</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">objectAnimator</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:duration</span>=<span class=\"hljs-string\">&quot;1000&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:propertyName</span>=<span class=\"hljs-string\">&quot;alpha&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueFrom</span>=<span class=\"hljs-string\">&quot;1.0&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueTo</span>=<span class=\"hljs-string\">&quot;0.5&quot;</span>/&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        水平位移动画函数</span><br><span class=\"hljs-comment\">        功能：在1000毫秒内将对象沿X轴从位置0移动到位置600</span><br><span class=\"hljs-comment\">        参数：</span><br><span class=\"hljs-comment\">            android:duration - 动画持续时间，单位为毫秒</span><br><span class=\"hljs-comment\">            android:propertyName - 动画属性名称，此处为水平位移translationX</span><br><span class=\"hljs-comment\">            android:valueFrom - X轴起始位置坐标</span><br><span class=\"hljs-comment\">            android:valueTo - X轴结束位置坐标</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">objectAnimator</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:duration</span>=<span class=\"hljs-string\">&quot;1000&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:propertyName</span>=<span class=\"hljs-string\">&quot;translationX&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueFrom</span>=<span class=\"hljs-string\">&quot;0.0&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueTo</span>=<span class=\"hljs-string\">&quot;600.0&quot;</span>/&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">        旋转变换动画函数</span><br><span class=\"hljs-comment\">        功能：在1000毫秒内将对象绕中心点旋转360度</span><br><span class=\"hljs-comment\">        参数：</span><br><span class=\"hljs-comment\">            android:duration - 动画持续时间，单位为毫秒</span><br><span class=\"hljs-comment\">            android:propertyName - 动画属性名称，此处为旋转角度rotation</span><br><span class=\"hljs-comment\">            android:valueFrom - 起始旋转角度，0度</span><br><span class=\"hljs-comment\">            android:valueTo - 结束旋转角度，360度</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">objectAnimator</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:propertyName</span>=<span class=\"hljs-string\">&quot;rotation&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueFrom</span>=<span class=\"hljs-string\">&quot;0&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:valueTo</span>=<span class=\"hljs-string\">&quot;360&quot;</span></span><br><span class=\"hljs-tag\">        <span class=\"hljs-attr\">android:duration</span>=<span class=\"hljs-string\">&quot;1000&quot;</span>/&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">set</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"数据储存\"><a href=\"#数据储存\" class=\"headerlink\" title=\"数据储存\"></a>数据储存</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3 id=\"SharedPreferences\"><a href=\"#SharedPreferences\" class=\"headerlink\" title=\"SharedPreferences\"></a>SharedPreferences</h3><h4 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h4><ul>\n<li>核心概念​​：SharedPreferences 是 Android 系统提供的一个​​轻量级存储类​​，用于以 ​<strong>​键值对（Key-Value）​</strong>​ 的形式存储简单的数据。它本质上将一个 XML 文件保存在设备的私有目录中，从而实现了数据的持久化</li>\n<li>存储位置​​：**&#x2F;data&#x2F;data&#x2F;&lt;你的应用包名&gt;&#x2F;shared_prefs&#x2F;**目录下。每个 SharedPreferences 文件都是一个 <strong>.xml</strong> 文件</li>\n<li>​数据类型​​：支持存储<strong>基本数据类型</strong>，包括 String（字符串）、<code>Int</code>（整型）、<code>Boolean</code>（布尔型）、<code>Float</code>（浮点型）、<code>Long</code>（长整型）以及 <code>Set&lt;String&gt;</code>（字符串集合）</li>\n<li>模式​​：通常使用 <strong>MODE_PRIVATE模式</strong>，这意味着该文件仅供你的应用自身访问，确保了数据的安全性。其他允许跨应用访问的模式（如 MODE_WORLD_READABLE）由于安全风险，已被废弃</li>\n</ul>\n<h4 id=\"存储数据\"><a href=\"#存储数据\" class=\"headerlink\" title=\"存储数据\"></a>存储数据</h4><ol>\n<li>创建SharedPreferences对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 在 Activity 或 Fragment 中</span><br><span class=\"hljs-keyword\">val</span> sharedPref = getSharedPreferences(<span class=\"hljs-string\">&quot;user_preferences&quot;</span>, Context.MODE_PRIVATE)<br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>​参数1 &quot;user_preferences&quot;​​：自定义的文件名。系统会自动添加 .xml后缀。文件最终会是 user_preferences.xml</li>\n<li>​参数2 Context.MODE_PRIVATE​​：固定模式，表示私有文件。</li>\n</ul>\n<ol start=\"2\">\n<li>获取edit对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> editor = sharedPref.edit()<br></code></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>写入数据</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">editor.putInt(<span class=\"hljs-string\">&quot;Integer&quot;</span>, <span class=\"hljs-number\">1</span>)<span class=\"hljs-comment\">// 存储整型数据</span><br>editor.putLong(<span class=\"hljs-string\">&quot;Long&quot;</span>, <span class=\"hljs-number\">1L</span>)<span class=\"hljs-comment\">// 存储长整型数据</span><br>editor.putFloat(<span class=\"hljs-string\">&quot;Float&quot;</span>, <span class=\"hljs-number\">1.0f</span>)<span class=\"hljs-comment\">// 存储浮点型数据</span><br>editor.putBoolean(<span class=\"hljs-string\">&quot;Boolean&quot;</span>, <span class=\"hljs-literal\">true</span>)<span class=\"hljs-comment\">// 存储布尔型数据</span><br>editor.putString(<span class=\"hljs-string\">&quot;username&quot;</span>, <span class=\"hljs-string\">&quot;admin&quot;</span>)<span class=\"hljs-comment\">// 存储字符串数据</span><br><span class=\"hljs-keyword\">val</span> setData: Set&lt;String&gt; = setOf(<span class=\"hljs-string\">&quot;one&quot;</span>, <span class=\"hljs-string\">&quot;two&quot;</span>, <span class=\"hljs-string\">&quot;three&quot;</span>)<br>editor.putStringSet(<span class=\"hljs-string\">&quot;StringSet&quot;</span>, setData)<span class=\"hljs-comment\">// 存储字符串集合数据</span><br><br>editor.apply() <span class=\"hljs-comment\">// 提交数据</span><br></code></pre></td></tr></table></figure>\n\n\n<ul>\n<li><strong>​键（Key）​​：</strong> 是一个字符串，作为数据的唯一标识符，比如 &quot;user_nickname&quot;。之后要靠这个键来读取数据。</li>\n<li><strong>​值（Value）​​：</strong> 你要存储的具体数据。</li>\n<li>apply()vs commit()​​：<ul>\n<li>apply()：​<strong>​强烈推荐使用</strong>​​。它是异步的，立即返回，不会阻塞你的用户界面（UI），性能更好</li>\n<li>commit()​​：是同步的，会等待数据完全写入磁盘后才返回。如果在主线程频繁使用，可能会引起应用无响应（ANR），通常只在需要立即知道写入是否成功的特殊场景下使用</li>\n</ul>\n</li>\n</ul>\n<p>步骤2和步骤3可以合并为：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">sharedPref.edit()&#123;<br>    putInt(<span class=\"hljs-string\">&quot;Integer&quot;</span>, <span class=\"hljs-number\">1</span>)<span class=\"hljs-comment\">// 存储整型数据</span><br>    putLong(<span class=\"hljs-string\">&quot;Long&quot;</span>, <span class=\"hljs-number\">1L</span>)<span class=\"hljs-comment\">// 存储长整型数据</span><br>    putFloat(<span class=\"hljs-string\">&quot;Float&quot;</span>, <span class=\"hljs-number\">1.0f</span>)<span class=\"hljs-comment\">// 存储浮点型数据</span><br>    putBoolean(<span class=\"hljs-string\">&quot;Boolean&quot;</span>, <span class=\"hljs-literal\">true</span>)<span class=\"hljs-comment\">// 存储布尔型数据</span><br>    putString(<span class=\"hljs-string\">&quot;username&quot;</span>, <span class=\"hljs-string\">&quot;admin&quot;</span>)<span class=\"hljs-comment\">// 存储字符串数据</span><br>    <span class=\"hljs-keyword\">val</span> setData: Set&lt;String&gt; = setOf(<span class=\"hljs-string\">&quot;one&quot;</span>, <span class=\"hljs-string\">&quot;two&quot;</span>, <span class=\"hljs-string\">&quot;three&quot;</span>)<br>    putStringSet(<span class=\"hljs-string\">&quot;StringSet&quot;</span>, setData)<span class=\"hljs-comment\">// 存储字符串集合数据</span><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"读取数据\"><a href=\"#读取数据\" class=\"headerlink\" title=\"读取数据\"></a>读取数据</h4><ol>\n<li>创建SharedPreferences对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> sharedPref = getSharedPreferences(<span class=\"hljs-string\">&quot;user_preferences&quot;</span>, Context.MODE_PRIVATE)<br></code></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>获取数据</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> username = sharedPref.getString(<span class=\"hljs-string\">&quot;username&quot;</span>, <span class=\"hljs-string\">&quot;&quot;</span>)<br><span class=\"hljs-keyword\">val</span> age = sharedPref.getInt(<span class=\"hljs-string\">&quot;age&quot;</span>, <span class=\"hljs-number\">0</span>)<br><span class=\"hljs-keyword\">val</span> setData = sharedPref.getStringSet(<span class=\"hljs-string\">&quot;StringSet&quot;</span>, <span class=\"hljs-literal\">null</span>)<br><span class=\"hljs-keyword\">val</span> male = sharedPref.getBoolean(<span class=\"hljs-string\">&quot;male&quot;</span>, <span class=\"hljs-literal\">true</span>)<br></code></pre></td></tr></table></figure>\n<ul>\n<li><strong>参数1 &quot;username&quot;​​：</strong> 键，用于获取数据。</li>\n<li><strong>参数2 &quot;&quot;：</strong> 默认值，如果获取的数据不存在，则返回这个默认值。</li>\n</ul>\n<ol start=\"3\">\n<li>更新ui</li>\n</ol>\n<h4 id=\"删除数据\"><a href=\"#删除数据\" class=\"headerlink\" title=\"删除数据\"></a>删除数据</h4><ol>\n<li>创建SharedPreferences对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> sharedPref = getSharedPreferences(<span class=\"hljs-string\">&quot;user_preferences&quot;</span>, Context.MODE_PRIVATE)<br></code></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>创建edit对象</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">val</span> editor = sharedPref.edit()<br></code></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>删除数据</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 删除单个数据</span><br>editor.remove(<span class=\"hljs-string\">&quot;username&quot;</span>)<br><span class=\"hljs-comment\">// 删除所有数据</span><br>editor.clear()<br><br>editor.apply()<br></code></pre></td></tr></table></figure>\n\n<p>步骤2和步骤3可以合并为：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">sharedPref.edit()&#123;<br>    remove(<span class=\"hljs-string\">&quot;username&quot;</span>)<br>    clear()<br>&#125;<br><br></code></pre></td></tr></table></figure>\n<h4 id=\"完整代码实践\"><a href=\"#完整代码实践\" class=\"headerlink\" title=\"完整代码实践\"></a>完整代码实践</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> com.kei.datebaseandnetwork<br><br><span class=\"hljs-keyword\">import</span> android.content.Context<br><span class=\"hljs-keyword\">import</span> android.os.Bundle<br><span class=\"hljs-keyword\">import</span> android.util.Log<br><span class=\"hljs-keyword\">import</span> android.widget.Toast<br><span class=\"hljs-keyword\">import</span> androidx.activity.ComponentActivity<br><span class=\"hljs-keyword\">import</span> androidx.activity.enableEdgeToEdge<br><span class=\"hljs-keyword\">import</span> androidx.appcompat.app.AppCompatActivity<br><span class=\"hljs-keyword\">import</span> androidx.core.content.edit<br><span class=\"hljs-keyword\">import</span> androidx.core.view.ViewCompat<br><span class=\"hljs-keyword\">import</span> androidx.core.view.WindowInsetsCompat<br><span class=\"hljs-keyword\">import</span> com.kei.datebaseandnetwork.databinding.ActivitySharedPrefBinding<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ActivitySharedPref</span> : <span class=\"hljs-type\">ComponentActivity</span>() &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * SharedPreferences文件名常量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> prefsName = <span class=\"hljs-string\">&quot;kei_prefs&quot;</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 视图绑定对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> binding: ActivitySharedPrefBinding<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 日志标签常量</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> TAG = <span class=\"hljs-string\">&quot;SharedPrefActivity&quot;</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Activity创建时的回调方法</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 保存的实例状态Bundle对象，用于恢复之前保存的状态数据</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        <span class=\"hljs-comment\">// 初始化视图绑定并设置布局</span><br>        binding = ActivitySharedPrefBinding.inflate(layoutInflater)<br>        setContentView(binding.root)<br><br>        <span class=\"hljs-comment\">// 为按钮设置点击事件监听器</span><br>        binding.submit.setOnClickListener &#123; saveData() &#125;<br>        binding.read.setOnClickListener &#123; readData() &#125;<br>        binding.clear.setOnClickListener &#123; clearData() &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 保存用户输入的数据到SharedPreferences中</span><br><span class=\"hljs-comment\">     * 该函数从界面输入框获取用户名、年龄、邮箱和配置信息，验证数据完整性后进行加密存储</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * 无参数</span><br><span class=\"hljs-comment\">     * 无返回值</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">saveData</span><span class=\"hljs-params\">()</span></span>&#123;<br>        <span class=\"hljs-comment\">// 获取用户输入的各个字段数据</span><br>        <span class=\"hljs-keyword\">val</span> username = binding.inputName.text.toString()<br>        <span class=\"hljs-keyword\">val</span> age = binding.inputAge.text.toString()<br>        <span class=\"hljs-keyword\">val</span> email = binding.inputEmail.text.toString()<br>        <span class=\"hljs-keyword\">val</span> config = binding.inputConfig.text.toString()<br><br>        <span class=\"hljs-comment\">// 验证所有字段都不为空</span><br>        <span class=\"hljs-keyword\">if</span>(username.isNotEmpty() &amp;&amp; age.isNotEmpty() &amp;&amp; email.isNotEmpty() &amp;&amp; config.isNotEmpty())&#123;<br>            <span class=\"hljs-keyword\">val</span> prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)<br>            <span class=\"hljs-comment\">// edit() 方法自带commit()方法</span><br>            prefs.edit()&#123;<br>                putString(<span class=\"hljs-string\">&quot;username&quot;</span>, username)<br>                putInt(<span class=\"hljs-string\">&quot;age&quot;</span>, age.toInt())<br>                putString(<span class=\"hljs-string\">&quot;email&quot;</span>, email)<br>                <span class=\"hljs-comment\">// 处理配置信息，按分号分割并加密存储</span><br>                <span class=\"hljs-keyword\">val</span> configs = config.split(<span class=\"hljs-string\">&quot;;&quot;</span>)<br>                <span class=\"hljs-keyword\">val</span> setValue : MutableSet&lt;String&gt; = mutableSetOf()<br>                configs.forEach &#123;<br>                    <span class=\"hljs-keyword\">val</span> value = SimpleEncryptor(TAG).encrypt(it)<br>                    setValue.add(value)<br>                &#125;<br>                Log.i(TAG, <span class=\"hljs-string\">&quot;encryptor user config:value = <span class=\"hljs-variable\">$setValue</span>&quot;</span>)<br>                putStringSet(<span class=\"hljs-string\">&quot;configs&quot;</span>, setValue)<br>            &#125;<br>            binding.result.text = <span class=\"hljs-string\">&quot;数据保存成功&quot;</span><br>        &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>            Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">&quot;信息输入错误&quot;</span>, Toast.LENGTH_SHORT).show()<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 读取用户数据并显示在界面中</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * 该函数从SharedPreferences中读取用户的个人信息和配置信息，</span><br><span class=\"hljs-comment\">     * 对加密的配置信息进行解密处理，最后将所有信息格式化显示在界面上。</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * 注意：该函数不接收参数，无返回值</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">readData</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-comment\">// 从SharedPreferences中读取用户基本信息</span><br>        <span class=\"hljs-keyword\">val</span> prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)<br>        <span class=\"hljs-keyword\">val</span> username = prefs.getString(<span class=\"hljs-string\">&quot;username&quot;</span>, <span class=\"hljs-string\">&quot;&quot;</span>)<br>        <span class=\"hljs-keyword\">val</span> age = prefs.getInt(<span class=\"hljs-string\">&quot;age&quot;</span>, <span class=\"hljs-number\">0</span>)<br>        <span class=\"hljs-keyword\">val</span> email = prefs.getString(<span class=\"hljs-string\">&quot;email&quot;</span>, <span class=\"hljs-string\">&quot;&quot;</span>)<br>        <span class=\"hljs-keyword\">val</span> configs = prefs.getStringSet(<span class=\"hljs-string\">&quot;configs&quot;</span>, <span class=\"hljs-literal\">null</span>)<br><br>        <span class=\"hljs-comment\">// 解密配置信息</span><br>        <span class=\"hljs-keyword\">val</span> userConfig: MutableList&lt;String&gt; = mutableListOf()<br>        configs?.forEach &#123;<br>            <span class=\"hljs-keyword\">val</span> decryptValue = SimpleEncryptor(TAG).decrypt(it)<br>            Log.i(TAG, <span class=\"hljs-string\">&quot;decrypt value, before = <span class=\"hljs-variable\">$it</span>, after = <span class=\"hljs-variable\">$decryptValue</span>&quot;</span>)<br>            userConfig.add(decryptValue)<br>        &#125;<br><br>        <span class=\"hljs-comment\">// 将用户信息显示在界面中</span><br>        binding.result.text = <span class=\"hljs-string\">&quot;用户名：<span class=\"hljs-variable\">$username</span>\\n年龄：<span class=\"hljs-variable\">$age</span>\\n邮箱：<span class=\"hljs-variable\">$email</span>\\n配置信息：<span class=\"hljs-subst\">$&#123;userConfig.joinToString(<span class=\"hljs-string\">&quot;, &quot;</span>)&#125;</span>&quot;</span><br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">clearData</span><span class=\"hljs-params\">()</span></span>&#123;<br>        <span class=\"hljs-keyword\">val</span> prefs = getSharedPreferences(prefsName, Context.MODE_PRIVATE)<br>        prefs.edit()&#123;<br>            clear()<br>        &#125;<br>        binding.result.text = <span class=\"hljs-string\">&quot;数据已清空&quot;</span><br>    &#125;<br><br><br><br>    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SimpleEncryptor</span>(tag: String) &#123;<br>        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">encrypt</span><span class=\"hljs-params\">(input: <span class=\"hljs-type\">String</span>)</span></span>: String &#123;<br>            <span class=\"hljs-comment\">// 示例简单加密：反转字符串（仅作演示）</span><br>            <span class=\"hljs-keyword\">return</span> input.reversed()<br>        &#125;<br><br>        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">decrypt</span><span class=\"hljs-params\">(input: <span class=\"hljs-type\">String</span>)</span></span>: String &#123;<br>            <span class=\"hljs-comment\">// 示例简单解密：反转字符串（仅作演示）</span><br>            <span class=\"hljs-keyword\">return</span> input.reversed()<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"SQLite数据库\"><a href=\"#SQLite数据库\" class=\"headerlink\" title=\"SQLite数据库\"></a>SQLite数据库</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>SQLite是一种基于文件的关系型数据库，用于存储和检索数据。具有<strong>轻量级、独立性、跨平台、事务性</strong>的特点</p>\n<h4 id=\"SQLite数据库操作\"><a href=\"#SQLite数据库操作\" class=\"headerlink\" title=\"SQLite数据库操作\"></a>SQLite数据库操作</h4><table>\n<thead>\n<tr>\n<th>操作</th>\n<th>方法</th>\n<th>参数说明</th>\n<th>返回值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>插入</td>\n<td>long insert()</td>\n<td>@NotNull String table: 要插入数据的表名 <br> @Nullable String nullColumnHack: 插入数据时忽略的列名 <br> @Nullable ContentValues values: 要插入的数据</td>\n<td>新插入记录的行号，失败时返回-1</td>\n</tr>\n<tr>\n<td>更新</td>\n<td>int update()</td>\n<td>@NotNull String table: 要更新的表名 <br> @Nullable ContentValues values: 要更新的数据 <br> @Nullable String whereClause: 更新条件 <br> @Nullable String[] whereArgs: 更新条件参数</td>\n<td>更新记录的行数</td>\n</tr>\n<tr>\n<td>删除</td>\n<td>int delete()</td>\n<td>@NotNull String table: 要删除数据的表名 <br> @Nullable String whereClause: 删除条件 <br> @Nullable String[] whereArgs: 删除条件参数</td>\n<td>删除记录的行数</td>\n</tr>\n</tbody></table>\n<h4 id=\"SQLite使用步骤\"><a href=\"#SQLite使用步骤\" class=\"headerlink\" title=\"SQLite使用步骤\"></a>SQLite使用步骤</h4><p>以实现简单的笔记管理功能为例，介绍SQLite数据库操作</p>\n<ol>\n<li>定义数据模型 在app&#x2F;src&#x2F;main&#x2F;java&#x2F;你的包名&#x2F;目录下创建 <strong>Note.kt</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">data</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Note</span>(<br>    <span class=\"hljs-keyword\">val</span> id: <span class=\"hljs-built_in\">Long</span>? = <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// 主键</span><br>    <span class=\"hljs-keyword\">val</span> title: String, <span class=\"hljs-comment\">// 标题</span><br>    <span class=\"hljs-keyword\">val</span> content: String, <span class=\"hljs-comment\">// 内容</span><br>    <span class=\"hljs-keyword\">val</span> createTime: <span class=\"hljs-built_in\">Long</span> = System.currentTimeMillis() <span class=\"hljs-comment\">// 创建时间</span><br>)<br></code></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>创建数据库帮助类 在相同的目录下创建 <strong>NoteDatabaseHelper.kt</strong> 这是最关键的一步。我们需要创建一个继承自SQLiteOpenHelper的类，它负责<strong>数据库的创建</strong>和<strong>版本管理</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NoteDbHelper</span>(context: Context) : SQLiteOpenHelper(<br>    context,<br>    DATABASE_NAME,<br>    <span class=\"hljs-literal\">null</span>,<br>    DATABASE_VERSION<br>)&#123;<br>    <span class=\"hljs-comment\">// 定义数据库结构信息</span><br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span> &#123;<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> DATABASE_NAME = <span class=\"hljs-string\">&quot;notes.db&quot;</span> <span class=\"hljs-comment\">// 数据库名称</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> DATABASE_VERSION = <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\">// 数据库版本</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> TABLE_NAME = <span class=\"hljs-string\">&quot;notes&quot;</span> <span class=\"hljs-comment\">// 表名</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_ID = <span class=\"hljs-string\">&quot;_id&quot;</span> <span class=\"hljs-comment\">// 推荐使用 _id 作为主键列名</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_TITLE = <span class=\"hljs-string\">&quot;title&quot;</span> <span class=\"hljs-comment\">// 标题列名</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_CONTENT = <span class=\"hljs-string\">&quot;content&quot;</span> <span class=\"hljs-comment\">// 内容列名</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_CREATE_TIME = <span class=\"hljs-string\">&quot;create_time&quot;</span> <span class=\"hljs-comment\">// 创建时间列名</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">// 当数据库第一次被创建时调用，用于建表</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(db: <span class=\"hljs-type\">SQLiteDatabase</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">val</span> createTableQuery = <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">            CREATE TABLE <span class=\"hljs-variable\">$TABLE_NAME</span> (</span><br><span class=\"hljs-string\">                <span class=\"hljs-variable\">$COLUMN_ID</span> INTEGER PRIMARY KEY AUTOINCREMENT,</span><br><span class=\"hljs-string\">                <span class=\"hljs-variable\">$COLUMN_TITLE</span> TEXT NOT NULL,</span><br><span class=\"hljs-string\">                <span class=\"hljs-variable\">$COLUMN_CONTENT</span> TEXT,</span><br><span class=\"hljs-string\">                <span class=\"hljs-variable\">$COLUMN_CREATE_TIME</span> INTEGER</span><br><span class=\"hljs-string\">            )</span><br><span class=\"hljs-string\">        &quot;&quot;&quot;</span>.trimIndent()<br>        db?.execSQL(createTableQuery)<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 当数据库需要升级时调用（例如版本号增加）</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onUpgrade</span><span class=\"hljs-params\">(db: <span class=\"hljs-type\">SQLiteDatabase</span>?, oldVersion: <span class=\"hljs-type\">Int</span>, newVersion: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        db?.execSQL(<span class=\"hljs-string\">&quot;DROP TABLE IF EXISTS <span class=\"hljs-variable\">$TABLE_NAME</span>&quot;</span>)<br>        onCreate(db)<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 插入一条新笔记</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">addNote</span><span class=\"hljs-params\">(title: <span class=\"hljs-type\">String</span>, content: <span class=\"hljs-type\">String</span>)</span></span>: <span class=\"hljs-built_in\">Long</span> &#123;<br>        <span class=\"hljs-keyword\">val</span> db = writableDatabase<br>        <span class=\"hljs-keyword\">val</span> values = ContentValues().apply &#123;<br>            put(COLUMN_TITLE, title)<br>            put(COLUMN_CONTENT, content)<br>            put(COLUMN_CREATE_TIME, System.currentTimeMillis())<br>        &#125;<br>        <span class=\"hljs-comment\">// 插入操作，返回新行的ID，如果失败返回-1</span><br>        <span class=\"hljs-keyword\">return</span> db.insert(TABLE_NAME, <span class=\"hljs-literal\">null</span>, values)<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 获取所有笔记，按创建时间倒序排列</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getAllNotes</span><span class=\"hljs-params\">()</span></span>: List&lt;Note&gt; &#123;<br>        <span class=\"hljs-keyword\">val</span> notes = mutableListOf&lt;Note&gt;()<br>        <span class=\"hljs-keyword\">val</span> db = readableDatabase<br>        <span class=\"hljs-comment\">// 查询语句，? 是占位符</span><br>        <span class=\"hljs-keyword\">val</span> cursor = db.query(<br>            TABLE_NAME,<br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// 选择所有列</span><br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// WHERE 子句</span><br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// WHERE 子句的参数</span><br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// GROUP BY</span><br>            <span class=\"hljs-literal\">null</span>, <span class=\"hljs-comment\">// HAVING</span><br>            <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$COLUMN_CREATE_TIME</span> DESC&quot;</span> <span class=\"hljs-comment\">// ORDER BY 按时间降序</span><br>        )<br><br>        cursor.use &#123;<br>            <span class=\"hljs-comment\">// 遍历游标（Cursor），提取数据</span><br>            <span class=\"hljs-keyword\">while</span> (it.moveToNext()) &#123;<br>                <span class=\"hljs-keyword\">val</span> id = it.getLong(it.getColumnIndexOrThrow(COLUMN_ID))<br>                <span class=\"hljs-keyword\">val</span> title = it.getString(it.getColumnIndexOrThrow(COLUMN_TITLE))<br>                <span class=\"hljs-keyword\">val</span> content = it.getString(it.getColumnIndexOrThrow(COLUMN_CONTENT))<br>                <span class=\"hljs-keyword\">val</span> createTime = it.getLong(it.getColumnIndexOrThrow(COLUMN_CREATE_TIME))<br>                notes.add(Note(id, title, content, createTime))<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> notes<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 更新一条笔记</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">updateNote</span><span class=\"hljs-params\">(note: <span class=\"hljs-type\">Note</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> &#123;<br>        <span class=\"hljs-keyword\">val</span> db = writableDatabase<br>        <span class=\"hljs-keyword\">val</span> values = ContentValues().apply &#123;<br>            put(COLUMN_TITLE, note.title)<br>            put(COLUMN_CONTENT, note.content)<br>        &#125;<br>        <span class=\"hljs-comment\">// 更新操作，返回受影响的行数</span><br>        <span class=\"hljs-keyword\">return</span> db.update(<br>            TABLE_NAME,<br>            values,<br>            <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$COLUMN_ID</span> = ?&quot;</span>, <span class=\"hljs-comment\">// 通过ID定位要更新的笔记</span><br>            arrayOf(note.id.toString())<br>        )<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 根据ID删除一条笔记</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">deleteNoteById</span><span class=\"hljs-params\">(id: <span class=\"hljs-type\">Long</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> &#123;<br>        <span class=\"hljs-keyword\">val</span> db = writableDatabase<br>        <span class=\"hljs-comment\">// 删除操作，返回被删除的行数</span><br>        <span class=\"hljs-keyword\">return</span> db.delete(<br>            TABLE_NAME,<br>            <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$COLUMN_ID</span> = ?&quot;</span>,<br>            arrayOf(id.toString())<br>        )<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>使用数据库帮助类 在app&#x2F;src&#x2F;main&#x2F;java&#x2F;你的包名&#x2F;目录下创建 <strong>NoteActivity.kt</strong> 实例化NoteDbHelper，并调用其方法进行增删改查</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NoteActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() &#123;<br>    <br>    <span class=\"hljs-comment\">// 实例化数据库帮助类</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> dbHelper: NoteDbHelper<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_note)<br><br>        <span class=\"hljs-comment\">// 初始化数据库帮助类</span><br>        dbHelper = NoteDbHelper(<span class=\"hljs-keyword\">this</span>)<br><br>        <span class=\"hljs-comment\">// 1. 插入一条新笔记</span><br>        <span class=\"hljs-keyword\">val</span> newNoteId = dbHelper.addNote(<span class=\"hljs-string\">&quot;我的第一篇笔记&quot;</span>, <span class=\"hljs-string\">&quot;这是使用SQLite存储的内容！&quot;</span>)<br>        Log.d(<span class=\"hljs-string\">&quot;SQLiteDemo&quot;</span>, <span class=\"hljs-string\">&quot;新笔记ID: <span class=\"hljs-variable\">$newNoteId</span>&quot;</span>)<br><br>        <span class=\"hljs-comment\">// 2. 查询所有笔记</span><br>        <span class=\"hljs-keyword\">val</span> allNotes = dbHelper.getAllNotes()<br>        <span class=\"hljs-keyword\">for</span> (note <span class=\"hljs-keyword\">in</span> allNotes) &#123;<br>            Log.d(<span class=\"hljs-string\">&quot;SQLiteDemo&quot;</span>, <span class=\"hljs-string\">&quot;笔记: [ID:<span class=\"hljs-subst\">$&#123;note.id&#125;</span>] <span class=\"hljs-subst\">$&#123;note.title&#125;</span> - <span class=\"hljs-subst\">$&#123;note.content&#125;</span>&quot;</span>)<br>        &#125;<br><br>        <span class=\"hljs-comment\">// 假设我们要更新刚插入的笔记 (需要知道其ID)</span><br>        <span class=\"hljs-keyword\">if</span> (newNoteId != -<span class=\"hljs-number\">1L</span>) &#123;<br>            <span class=\"hljs-keyword\">val</span> noteToUpdate = Note(newNoteId, <span class=\"hljs-string\">&quot;修改后的标题&quot;</span>, <span class=\"hljs-string\">&quot;更新后的内容&quot;</span>)<br>            <span class=\"hljs-keyword\">val</span> rowsUpdated = dbHelper.updateNote(noteToUpdate)<br>            Log.d(<span class=\"hljs-string\">&quot;SQLiteDemo&quot;</span>, <span class=\"hljs-string\">&quot;更新了 <span class=\"hljs-variable\">$rowsUpdated</span> 行&quot;</span>)<br>        &#125;<br><br>        <span class=\"hljs-comment\">// 删除笔记的示例（谨慎操作）</span><br>        <span class=\"hljs-comment\">// val rowsDeleted = dbHelper.deleteNoteById(newNoteId)</span><br>        <span class=\"hljs-comment\">// Log.d(&quot;SQLiteDemo&quot;, &quot;删除了 $rowsDeleted 行&quot;)</span><br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> &#123;<br>        dbHelper.close() <span class=\"hljs-comment\">// 记得在不用时关闭数据库连接</span><br>        <span class=\"hljs-keyword\">super</span>.onDestroy()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n\n<ul>\n<li>在实际开发中，可以通过各种事件监听来实现对数据库的操作，如点击按钮、输入框等。</li>\n<li>在实际开发中，通常使用<strong>Room数据库框架</strong>来操作数据库，Room是一个基于SQLite的ORM框架，可以更轻松地操作数据库。</li>\n</ul>\n<h3 id=\"文件存储\"><a href=\"#文件存储\" class=\"headerlink\" title=\"文件存储\"></a>文件存储</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>Android系统提供了两种主要的文件存储方式<br><strong>​内部存储</strong>​​是每个应用独有的沙盒环境，位于&#x2F;data&#x2F;data&#x2F;&lt;应用包名&gt;&#x2F;目录下，为应用数据提供了最高级别的保护<br>​<strong>​外部存储</strong>​​可能是SD卡或设备的内置共享存储空间，适合存储需要共享或体积较大的文件</p>\n<h4 id=\"内部存储\"><a href=\"#内部存储\" class=\"headerlink\" title=\"内部存储\"></a>内部存储</h4><p>创建一个 FileStorageActivity.kt 文件用于演示文件操作，并添加以下代码：</p>\n<ul>\n<li>文件写入操作</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FileStorageActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() &#123;<br>    <br>    <span class=\"hljs-comment\">// 写入文件</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">writeToInternalStorage</span><span class=\"hljs-params\">(filename: <span class=\"hljs-type\">String</span>, content: <span class=\"hljs-type\">String</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            <span class=\"hljs-comment\">// 打开文件输出流</span><br>            <span class=\"hljs-keyword\">val</span> outputStream: FileOutputStream = openFileOutput(filename, Context.MODE_PRIVATE)<br>            <br>            <span class=\"hljs-comment\">// 将字符串转换为字节并写入</span><br>            outputStream.write(content.toByteArray())<br>            <br>            <span class=\"hljs-comment\">// 关闭流释放资源</span><br>            outputStream.close()<br>            <br>            Log.d(<span class=\"hljs-string\">&quot;FileIO&quot;</span>, <span class=\"hljs-string\">&quot;文件写入成功: <span class=\"hljs-variable\">$filename</span>&quot;</span>)<br>        &#125; <span class=\"hljs-keyword\">catch</span> (e: Exception) &#123;<br>            Log.e(<span class=\"hljs-string\">&quot;FileIO&quot;</span>, <span class=\"hljs-string\">&quot;文件写入失败&quot;</span>, e)<br>            e.printStackTrace()<br>        &#125;<br>    &#125;<br>    <br>    <span class=\"hljs-comment\">// 使用示例</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">saveUserData</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-keyword\">val</span> userData = <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">            &#123;</span><br><span class=\"hljs-string\">                &quot;name&quot;: &quot;张三&quot;,</span><br><span class=\"hljs-string\">                &quot;email&quot;: &quot;zhangsan@example.com&quot;,</span><br><span class=\"hljs-string\">                &quot;preferences&quot;: &#123;&quot;theme&quot;: &quot;dark&quot;&#125;</span><br><span class=\"hljs-string\">            &#125;</span><br><span class=\"hljs-string\">        &quot;&quot;&quot;</span>.trimIndent()<br>        <br>        writeToInternalStorage(<span class=\"hljs-string\">&quot;user_config.json&quot;</span>, userData)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<p>​代码说明：​​</p>\n<ul>\n<li><p>openFileOutput()是Context类的方法，第一个参数是<strong>文件名</strong>，第二个参数是<strong>操作模式</strong></p>\n</li>\n<li><p>MODE_PRIVATE表示<strong>覆盖</strong>原文件，MODE_APPEND表示<strong>追加</strong>内容</p>\n</li>\n<li><p>必须使用try-catch处理可能的IOException</p>\n</li>\n<li><p>操作完成后务必<strong>关闭</strong>流释放资源</p>\n</li>\n<li><p>文件读取操作</p>\n</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 仍然在FileStorageActivity.kt中的FileStorageActivity类中添加以下方法</span><br><br><span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">readFromInternalStorage</span><span class=\"hljs-params\">(filename: <span class=\"hljs-type\">String</span>)</span></span>: String &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">try</span> &#123;<br>        <span class=\"hljs-comment\">// 打开文件输入流</span><br>        <span class=\"hljs-keyword\">val</span> inputStream: FileInputStream = openFileInput(filename)<br>        <br>        <span class=\"hljs-comment\">// 使用缓冲读取器提高读取效率</span><br>        <span class=\"hljs-keyword\">val</span> reader = BufferedReader(InputStreamReader(inputStream))<br>        <span class=\"hljs-keyword\">val</span> content = StringBuilder()<br>        <span class=\"hljs-keyword\">var</span> line: String?<br>        <br>        <span class=\"hljs-comment\">// 逐行读取内容</span><br>        <span class=\"hljs-keyword\">while</span> (reader.readLine().also &#123; line = it &#125; != <span class=\"hljs-literal\">null</span>) &#123;<br>            content.append(line).append(<span class=\"hljs-string\">&quot;\\n&quot;</span>)<br>        &#125;<br>        <br>        <span class=\"hljs-comment\">// 关闭资源</span><br>        reader.close()<br>        inputStream.close()<br>        <br>        <span class=\"hljs-comment\">// 返回读取的内容</span><br>        content.toString()<br>    &#125; <span class=\"hljs-keyword\">catch</span> (e: FileNotFoundException) &#123;<br>        Log.e(<span class=\"hljs-string\">&quot;FileIO&quot;</span>, <span class=\"hljs-string\">&quot;文件不存在: <span class=\"hljs-variable\">$filename</span>&quot;</span>, e)<br>        <span class=\"hljs-string\">&quot;&quot;</span> <span class=\"hljs-comment\">// 返回空字符串表示文件不存在</span><br>    &#125; <span class=\"hljs-keyword\">catch</span> (e: Exception) &#123;<br>        Log.e(<span class=\"hljs-string\">&quot;FileIO&quot;</span>, <span class=\"hljs-string\">&quot;文件读取失败&quot;</span>, e)<br>        <span class=\"hljs-string\">&quot;&quot;</span><br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 使用示例</span><br><span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">loadUserConfig</span><span class=\"hljs-params\">()</span></span> &#123;<br>    <span class=\"hljs-keyword\">val</span> config = readFromInternalStorage(<span class=\"hljs-string\">&quot;user_config.json&quot;</span>)<br>    <span class=\"hljs-keyword\">if</span> (config.isNotEmpty()) &#123;<br>        <span class=\"hljs-comment\">// 处理配置数据</span><br>        Log.d(<span class=\"hljs-string\">&quot;FileIO&quot;</span>, <span class=\"hljs-string\">&quot;加载的配置: <span class=\"hljs-variable\">$config</span>&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>​代码说明：​​</p>\n<ul>\n<li>使用BufferedReader和InputStreamReader组合提高读取效率</li>\n<li>逐行读取适合文本文件，避免内存溢出</li>\n<li>需要处理文件不存在的特殊情况</li>\n</ul>\n<h4 id=\"序列化存储\"><a href=\"#序列化存储\" class=\"headerlink\" title=\"序列化存储\"></a>序列化存储</h4><table>\n<thead>\n<tr>\n<th>方案</th>\n<th>使用场景</th>\n<th>优缺点</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>Serializable</code></td>\n<td>将简单的对象持久化存储</td>\n<td>优点：实现简单；<br>缺点：效率低，不适合跨进程高频传输</td>\n</tr>\n<tr>\n<td><code>Parcelable</code></td>\n<td>跨进程通信使用（如Intent、AIDL等）</td>\n<td>优点：效率高，Android专用；<br>缺点：实现较为复杂</td>\n</tr>\n<tr>\n<td><code>JSON</code></td>\n<td>网络传输，将复杂对象信息存储到文件</td>\n<td>优点：跨平台，可读性好，兼容性强；<br>缺点：体积大</td>\n</tr>\n</tbody></table>\n<h3 id=\"ContentProvider-1\"><a href=\"#ContentProvider-1\" class=\"headerlink\" title=\"ContentProvider\"></a>ContentProvider</h3><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<p>ContentProvider是Android四大组件之一，它充当了一个​​标准化的<strong>数据安全中间层</strong>​​，允许你的应用将私有数据安全地<strong>共享</strong>给其他应用，或者去访问系统（如联系人、相册）或其他应用提供的数据它抽象了数据的底层存储细节（无论是SQLite数据库、文件还是网络数据），为所有数据访问提供了<strong>统一的接口</strong></p>\n<h4 id=\"工作原理\"><a href=\"#工作原理\" class=\"headerlink\" title=\"工作原理\"></a>工作原理</h4><ul>\n<li><p><strong>​ContentProvider（内容提供者）​​：</strong> 数据提供方，负责封装对数据的增删改查等操作。你需要继承ContentProvider类并实现其核心方法</p>\n</li>\n<li><p><strong>​ContentResolver（内容解析器）​​：</strong> 数据访问方。在任何需要访问数据的地方（如Activity），你通过ContentResolver（通过getContentResolver()获取）来调用统一的方法（query, insert, update, delete），由它去找到并调用正确的ContentProvider<br>。这实现了数据访问方式的统一</p>\n</li>\n<li><p><strong>​URI（统一资源标识符）​​：</strong> 这是数据的“地址”，用于唯一标识ContentProvider和其中的数据。它遵循标准格式：content:&#x2F;&#x2F;authority&#x2F;path&#x2F;id</p>\n<ul>\n<li><strong>content:&#x2F;&#x2F;：</strong> 固定前缀，表示该URI用于ContentProvider</li>\n<li><strong>authority：</strong> 授权标识，通常为应用的包名加上特定标识，用于在系统中唯一指定一个ContentProvider</li>\n<li><strong>path：</strong> 路径，通常用于指定要操作的数据表（如users）</li>\n<li><strong>id（可选）：</strong> 特定记录的ID（如&#x2F;users&#x2F;5表示ID为5的用户）</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ContentProvider的使用\"><a href=\"#ContentProvider的使用\" class=\"headerlink\" title=\"ContentProvider的使用\"></a>ContentProvider的使用</h4><ol>\n<li>​创建数据库契约类​​（定义数据库结构常量）：文件位置​​：app&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;example&#x2F;yourAppName&#x2F;目录下，新建Kotlin文件，例如NoteContract.kt 集中定义<strong>数据库名、表名、列名</strong>等常量，避免硬编码和拼写错误。</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// NoteContract.kt</span><br><span class=\"hljs-keyword\">object</span> NoteContract &#123;<br>    <span class=\"hljs-comment\">// ContentProvider的授权标识，通常使用应用包名</span><br>    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> AUTHORITY = <span class=\"hljs-string\">&quot;com.example.notepad.provider&quot;</span><br><br>    <span class=\"hljs-comment\">// 定义Note数据表的模型</span><br>    <span class=\"hljs-keyword\">object</span> NoteEntry &#123;<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> TABLE_NAME = <span class=\"hljs-string\">&quot;notes&quot;</span><br>        <span class=\"hljs-comment\">// 必须包含 _id 列，这是Adapter等组件所期望的</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> _ID = <span class=\"hljs-string\">&quot;_id&quot;</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_TITLE = <span class=\"hljs-string\">&quot;title&quot;</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_CONTENT = <span class=\"hljs-string\">&quot;content&quot;</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> COLUMN_CREATED_TIME = <span class=\"hljs-string\">&quot;created_time&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>​创建数据库帮助类​​（SQLiteOpenHelper）：在同目录下新建Kotlin文件，例如NoteDatabaseHelper.kt 管理数据库的<strong>创建和版本升级</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// NoteDatabaseHelper.kt</span><br><span class=\"hljs-keyword\">import</span> android.content.Context<br><span class=\"hljs-keyword\">import</span> android.database.sqlite.SQLiteDatabase<br><span class=\"hljs-keyword\">import</span> android.database.sqlite.SQLiteOpenHelper<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NoteDatabaseHelper</span>(context: Context) : SQLiteOpenHelper(<br>    context,<br>    DATABASE_NAME,<br>    <span class=\"hljs-literal\">null</span>,<br>    DATABASE_VERSION<br>) &#123;<br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span> &#123;<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> DATABASE_NAME = <span class=\"hljs-string\">&quot;notes.db&quot;</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> DATABASE_VERSION = <span class=\"hljs-number\">1</span><br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(db: <span class=\"hljs-type\">SQLiteDatabase</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">// 执行创建表的SQL语句</span><br>        <span class=\"hljs-keyword\">val</span> SQL_CREATE_NOTES_TABLE = <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">            CREATE TABLE <span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry.TABLE_NAME&#125;</span> (</span><br><span class=\"hljs-string\">                <span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry._ID&#125;</span> INTEGER PRIMARY KEY AUTOINCREMENT,</span><br><span class=\"hljs-string\">                <span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry.COLUMN_TITLE&#125;</span> TEXT NOT NULL,</span><br><span class=\"hljs-string\">                <span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry.COLUMN_CONTENT&#125;</span> TEXT,</span><br><span class=\"hljs-string\">                <span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry.COLUMN_CREATED_TIME&#125;</span> INTEGER DEFAULT (strftime(&#x27;%s&#x27;,&#x27;now&#x27;))</span><br><span class=\"hljs-string\">            )</span><br><span class=\"hljs-string\">        &quot;&quot;&quot;</span>.trimIndent()<br>        db.execSQL(SQL_CREATE_NOTES_TABLE)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onUpgrade</span><span class=\"hljs-params\">(db: <span class=\"hljs-type\">SQLiteDatabase</span>, oldVersion: <span class=\"hljs-type\">Int</span>, newVersion: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">// 简单处理：删除旧表，创建新表。实际项目需做数据迁移。</span><br>        db.execSQL(<span class=\"hljs-string\">&quot;DROP TABLE IF EXISTS <span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry.TABLE_NAME&#125;</span>&quot;</span>)<br>        onCreate(db)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>实现自定义ContentProvider：在同目录下新建Kotlin文件，例如NoteProvider.kt 这是<strong>最核心</strong>的一步，我们需要创建一个类继承ContentProvider，并实现其<strong>六个核心方法</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// NoteProvider.kt</span><br><span class=\"hljs-keyword\">import</span> android.content.*<br><span class=\"hljs-keyword\">import</span> android.database.Cursor<br><span class=\"hljs-keyword\">import</span> android.net.Uri<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NoteProvider</span> : <span class=\"hljs-type\">ContentProvider</span>() &#123;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> dbHelper: NoteDatabaseHelper<br><br>    <span class=\"hljs-comment\">// UriMatcher用于匹配不同的URI请求</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> uriMatcher = UriMatcher(UriMatcher.NO_MATCH).apply &#123;<br>        <span class=\"hljs-comment\">// 注册URI模式</span><br>        <span class=\"hljs-comment\">// content://com.example.notepad.provider/notes -&gt; 操作整个notes表</span><br>        addURI(NoteContract.AUTHORITY, <span class=\"hljs-string\">&quot;notes&quot;</span>, NOTES)<br>        <span class=\"hljs-comment\">// content://com.example.notepad.provider/notes/5 -&gt; 操作ID为5的单条笔记</span><br>        addURI(NoteContract.AUTHORITY, <span class=\"hljs-string\">&quot;notes/#&quot;</span>, NOTE_ID)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span> &#123;<br>        <span class=\"hljs-comment\">// 定义匹配码</span><br>        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> NOTES = <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> NOTE_ID = <span class=\"hljs-number\">2</span><br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">()</span></span>: <span class=\"hljs-built_in\">Boolean</span> &#123;<br>        <span class=\"hljs-comment\">// 初始化数据库帮助类</span><br>        dbHelper = NoteDatabaseHelper(context!!)<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">// 返回true表示Provider初始化成功</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">// 查询数据</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">query</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        uri: <span class=\"hljs-type\">Uri</span>,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        projection: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">out</span> <span class=\"hljs-type\">String</span>&gt;?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        selection: <span class=\"hljs-type\">String</span>?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">out</span> <span class=\"hljs-type\">String</span>&gt;?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        sortOrder: <span class=\"hljs-type\">String</span>?</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">    )</span></span>: Cursor? &#123;<br>        <span class=\"hljs-keyword\">val</span> db = dbHelper.readableDatabase<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) &#123;<br>            NOTES -&gt; &#123;<br>                <span class=\"hljs-comment\">// 查询所有笔记</span><br>                db.query(<br>                    NoteContract.NoteEntry.TABLE_NAME,<br>                    projection,<br>                    selection,<br>                    selectionArgs,<br>                    <span class=\"hljs-literal\">null</span>,<br>                    <span class=\"hljs-literal\">null</span>,<br>                    sortOrder ?: <span class=\"hljs-string\">&quot;<span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry.COLUMN_CREATED_TIME&#125;</span> DESC&quot;</span><br>                )<br>            &#125;<br>            NOTE_ID -&gt; &#123;<br>                <span class=\"hljs-comment\">// 查询单条笔记，从URI中提取ID</span><br>                <span class=\"hljs-keyword\">val</span> id = uri.lastPathSegment<br>                db.query(<br>                    NoteContract.NoteEntry.TABLE_NAME,<br>                    projection,<br>                    <span class=\"hljs-string\">&quot;<span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry._ID&#125;</span> = ?&quot;</span>,<br>                    arrayOf(id),<br>                    <span class=\"hljs-literal\">null</span>,<br>                    <span class=\"hljs-literal\">null</span>,<br>                    sortOrder<br>                )<br>            &#125;<br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">&quot;Unknown URI: <span class=\"hljs-variable\">$uri</span>&quot;</span>)<br>        &#125;.apply &#123;<br>            <span class=\"hljs-comment\">// 设置通知URI，当该URI对应的数据变化时，Cursor会知道</span><br>            setNotificationUri(context?.contentResolver, uri)<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 插入数据</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">insert</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, values: <span class=\"hljs-type\">ContentValues</span>?)</span></span>: Uri? &#123;<br>        <span class=\"hljs-keyword\">val</span> db = dbHelper.writableDatabase<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) &#123;<br>            NOTES -&gt; &#123;<br>                <span class=\"hljs-keyword\">val</span> id = db.insert(NoteContract.NoteEntry.TABLE_NAME, <span class=\"hljs-literal\">null</span>, values)<br>                <span class=\"hljs-keyword\">if</span> (id &gt; <span class=\"hljs-number\">0</span>) &#123;<br>                    <span class=\"hljs-comment\">// 插入成功，构造新插入数据的URI</span><br>                    <span class=\"hljs-keyword\">val</span> newUri = ContentUris.withAppendedId(uri, id)<br>                    <span class=\"hljs-comment\">// 通知所有监听此URI的数据观察者，数据已变更</span><br>                    context?.contentResolver?.notifyChange(newUri, <span class=\"hljs-literal\">null</span>)<br>                    newUri<br>                &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                    <span class=\"hljs-keyword\">throw</span> SQLException(<span class=\"hljs-string\">&quot;Failed to insert row into <span class=\"hljs-variable\">$uri</span>&quot;</span>)<br>                &#125;<br>            &#125;<br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">&quot;Insertion not supported for <span class=\"hljs-variable\">$uri</span>&quot;</span>)<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 更新数据</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">update</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        uri: <span class=\"hljs-type\">Uri</span>,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        values: <span class=\"hljs-type\">ContentValues</span>?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        selection: <span class=\"hljs-type\">String</span>?,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">        selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">out</span> <span class=\"hljs-type\">String</span>&gt;?</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">    )</span></span>: <span class=\"hljs-built_in\">Int</span> &#123;<br>        <span class=\"hljs-keyword\">val</span> db = dbHelper.writableDatabase<br>        <span class=\"hljs-keyword\">val</span> count = <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) &#123;<br>            NOTES -&gt; db.update(NoteContract.NoteEntry.TABLE_NAME, values, selection, selectionArgs)<br>            NOTE_ID -&gt; &#123;<br>                <span class=\"hljs-keyword\">val</span> id = uri.lastPathSegment<br>                db.update(<br>                    NoteContract.NoteEntry.TABLE_NAME,<br>                    values,<br>                    <span class=\"hljs-string\">&quot;<span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry._ID&#125;</span> = ?&quot;</span>,<br>                    arrayOf(id)<br>                )<br>            &#125;<br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">&quot;Update not supported for <span class=\"hljs-variable\">$uri</span>&quot;</span>)<br>        &#125;<br>        <span class=\"hljs-comment\">// 如果更新了数据，通知变化</span><br>        <span class=\"hljs-keyword\">if</span> (count &gt; <span class=\"hljs-number\">0</span>) &#123;<br>            context?.contentResolver?.notifyChange(uri, <span class=\"hljs-literal\">null</span>)<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> count<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 删除数据</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">delete</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>, selection: <span class=\"hljs-type\">String</span>?, selectionArgs: <span class=\"hljs-type\">Array</span>&lt;<span class=\"hljs-type\">out</span> <span class=\"hljs-type\">String</span>&gt;?)</span></span>: <span class=\"hljs-built_in\">Int</span> &#123;<br>        <span class=\"hljs-keyword\">val</span> db = dbHelper.writableDatabase<br>        <span class=\"hljs-keyword\">val</span> count = <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) &#123;<br>            NOTES -&gt; db.delete(NoteContract.NoteEntry.TABLE_NAME, selection, selectionArgs)<br>            NOTE_ID -&gt; &#123;<br>                <span class=\"hljs-keyword\">val</span> id = uri.lastPathSegment<br>                db.delete(<br>                    NoteContract.NoteEntry.TABLE_NAME,<br>                    <span class=\"hljs-string\">&quot;<span class=\"hljs-subst\">$&#123;NoteContract.NoteEntry._ID&#125;</span> = ?&quot;</span>,<br>                    arrayOf(id)<br>                )<br>            &#125;<br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">&quot;Deletion not supported for <span class=\"hljs-variable\">$uri</span>&quot;</span>)<br>        &#125;<br>        <span class=\"hljs-keyword\">if</span> (count &gt; <span class=\"hljs-number\">0</span>) &#123;<br>            context?.contentResolver?.notifyChange(uri, <span class=\"hljs-literal\">null</span>)<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> count<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 返回指定URI的MIME类型</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getType</span><span class=\"hljs-params\">(uri: <span class=\"hljs-type\">Uri</span>)</span></span>: String? &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">when</span> (uriMatcher.match(uri)) &#123;<br>            NOTES -&gt; <span class=\"hljs-string\">&quot;vnd.android.cursor.dir/vnd.<span class=\"hljs-subst\">$&#123;NoteContract.AUTHORITY&#125;</span>.note&quot;</span><br>            NOTE_ID -&gt; <span class=\"hljs-string\">&quot;vnd.android.cursor.item/vnd.<span class=\"hljs-subst\">$&#123;NoteContract.AUTHORITY&#125;</span>.note&quot;</span><br>            <span class=\"hljs-keyword\">else</span> -&gt; <span class=\"hljs-keyword\">throw</span> IllegalArgumentException(<span class=\"hljs-string\">&quot;Unknown URI: <span class=\"hljs-variable\">$uri</span>&quot;</span>)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>在AndroidManifest.xml中注册Provider：app&#x2F;src&#x2F;main&#x2F;AndroidManifest.xml</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">manifest</span> <span class=\"hljs-attr\">xmlns:android</span>=<span class=\"hljs-string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class=\"hljs-tag\">    <span class=\"hljs-attr\">package</span>=<span class=\"hljs-string\">&quot;com.example.notepad&quot;</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">application</span> <span class=\"hljs-attr\">...</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">activity</span> <span class=\"hljs-attr\">...</span>&gt;</span> ... <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">activity</span>&gt;</span><br><br>        <span class=\"hljs-comment\">&lt;!-- 注册ContentProvider --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">provider</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">&quot;.NoteProvider&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:authorities</span>=<span class=\"hljs-string\">&quot;com.example.notepad.provider&quot;</span></span><br><span class=\"hljs-tag\">            <span class=\"hljs-attr\">android:exported</span>=<span class=\"hljs-string\">&quot;true&quot;</span> /&gt;</span><br>            <span class=\"hljs-comment\">&lt;!-- </span><br><span class=\"hljs-comment\">                android:name: 你的ContentProvider类的完整路径。</span><br><span class=\"hljs-comment\">                android:authorities: 授权标识，必须与代码中定义的AUTHORITY完全一致。</span><br><span class=\"hljs-comment\">                android:exported: 是否允许其他应用访问。true表示允许。</span><br><span class=\"hljs-comment\">            --&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">application</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">manifest</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>在应用内或其他应用中通过ContentResolver访问数据（在Activity中）：</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 例如在您的 MainActivity.kt 中</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() &#123;<br>    <span class=\"hljs-comment\">// 定义基础URI</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> baseUri = Uri.parse(<span class=\"hljs-string\">&quot;content://<span class=\"hljs-subst\">$&#123;NoteContract.AUTHORITY&#125;</span>/notes&quot;</span>)<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br><br>        <span class=\"hljs-comment\">// 示例1：插入一条新笔记</span><br>        <span class=\"hljs-keyword\">val</span> values = ContentValues().apply &#123;<br>            put(NoteContract.NoteEntry.COLUMN_TITLE, <span class=\"hljs-string\">&quot;我的第一条笔记&quot;</span>)<br>            put(NoteContract.NoteEntry.COLUMN_CONTENT, <span class=\"hljs-string\">&quot;这是通过ContentProvider保存的内容。&quot;</span>)<br>        &#125;<br>        <span class=\"hljs-keyword\">val</span> newUri = contentResolver.insert(baseUri, values)<br>        Log.d(<span class=\"hljs-string\">&quot;NoteApp&quot;</span>, <span class=\"hljs-string\">&quot;新笔记插入成功，URI: <span class=\"hljs-variable\">$newUri</span>&quot;</span>)<br><br>        <span class=\"hljs-comment\">// 示例2：查询所有笔记</span><br>        <span class=\"hljs-keyword\">val</span> cursor = contentResolver.query(baseUri, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">null</span>)<br>        cursor?.use &#123;<br>            <span class=\"hljs-keyword\">while</span> (it.moveToNext()) &#123;<br>                <span class=\"hljs-keyword\">val</span> id = it.getLong(it.getColumnIndexOrThrow(NoteContract.NoteEntry._ID))<br>                <span class=\"hljs-keyword\">val</span> title = it.getString(it.getColumnIndexOrThrow(NoteContract.NoteEntry.COLUMN_TITLE))<br>                <span class=\"hljs-keyword\">val</span> content = it.getString(it.getColumnIndexOrThrow(NoteContract.NoteEntry.COLUMN_CONTENT))<br>                Log.d(<span class=\"hljs-string\">&quot;NoteApp&quot;</span>, <span class=\"hljs-string\">&quot;ID: <span class=\"hljs-variable\">$id</span>, Title: <span class=\"hljs-variable\">$title</span>, Content: <span class=\"hljs-variable\">$content</span>&quot;</span>)<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"异步交互\"><a href=\"#异步交互\" class=\"headerlink\" title=\"异步交互\"></a>异步交互</h2><h3 id=\"handler\"><a href=\"#handler\" class=\"headerlink\" title=\"handler\"></a>handler</h3><h4 id=\"核心组件和职责\"><a href=\"#核心组件和职责\" class=\"headerlink\" title=\"核心组件和职责\"></a>核心组件和职责</h4><table>\n<thead>\n<tr>\n<th>组件</th>\n<th>职责</th>\n<th>类比</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Handler</td>\n<td><strong>​​发送​​</strong> 和 <strong>​​处理​​</strong> 消息</td>\n<td>公司的<strong>​​快递员</strong>​​，既负责把包裹寄出，也负责接收并处理送来的包裹。</td>\n</tr>\n<tr>\n<td>Message</td>\n<td>消息的载体，可以在线程间传递数据</td>\n<td>​<strong>​包裹</strong>​​，里面装着要传递的信息或任务</td>\n</tr>\n<tr>\n<td>MessageQueue</td>\n<td>一个按时间排序的​<strong>​消息队列</strong>​​，用于存储所有通过 Handler 发送的消息</td>\n<td>​<strong>​快递分拣中心</strong>​​，所有寄出的包裹都暂时存放在这里，排队等待发货</td>\n</tr>\n<tr>\n<td>Looper</td>\n<td>运行 MessageQueue 的线程，不断循环，从 MessageQueue 中依次取出消息，并分发给对应的 Handler 处理</td>\n<td><strong>分拣员&#x2F;送货员</strong>​​，不停地从分拣中心取包裹，并按照地址交给对应的快递员</td>\n</tr>\n</tbody></table>\n<p>一个线程通常只有一个 MessageQueue和一个 Looper，但可以有多个 Handler对象</p>\n<h4 id=\"使用步骤\"><a href=\"#使用步骤\" class=\"headerlink\" title=\"使用步骤\"></a>使用步骤</h4><h5 id=\"使用-sendMessage\"><a href=\"#使用-sendMessage\" class=\"headerlink\" title=\"使用 sendMessage\"></a>使用 sendMessage</h5><p>在 Activity 或 Fragment 中（通常在主线程），创建 Handler 并指定如何处理消息。</p>\n<ul>\n<li>步骤1：创建Handler对象，关联主线程Looper对象，并重写handleMessage方法</li>\n<li>步骤2：重写handleMessage方法，处理消息</li>\n<li>步骤3：创建线程模拟耗时操作</li>\n<li>步骤4：构造消息对象发送到主线程</li>\n</ul>\n<p>完整类实现</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> com.kei.handlerdemo<br><br><span class=\"hljs-keyword\">import</span> android.os.Bundle<br><span class=\"hljs-keyword\">import</span> android.os.Handler<br><span class=\"hljs-keyword\">import</span> android.os.Looper<br><span class=\"hljs-keyword\">import</span> android.os.Message<br><span class=\"hljs-keyword\">import</span> android.widget.TextView<br><span class=\"hljs-keyword\">import</span> androidx.activity.ComponentActivity<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 发送消息Activity</span><br><span class=\"hljs-comment\"> * 用于演示如何在子线程中执行耗时操作，并通过Handler将结果传递到主线程更新UI</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SendMessageActivity</span> : <span class=\"hljs-type\">ComponentActivity</span>() &#123;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> textView: TextView<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 主线程Handler，用于处理来自子线程的消息</span><br><span class=\"hljs-comment\">     * 使用Looper.getMainLooper()确保Handler在主线程中处理消息</span><br><span class=\"hljs-comment\">     * Looper能够自动处理到达的消息，并调用handleMessage方法进行处理</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-comment\">// 步骤1： 创建Handler对象，关联主线程Looper对象，并重写handleMessage方法</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> mainHandler = <span class=\"hljs-keyword\">object</span> : Handler(Looper.getMainLooper())&#123;<br>        <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">         * 处理从子线程发送过来的消息</span><br><span class=\"hljs-comment\">         * <span class=\"hljs-doctag\">@param</span> msg 从子线程发送过来的消息对象</span><br><span class=\"hljs-comment\">         */</span><br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">handleMessage</span><span class=\"hljs-params\">(msg: <span class=\"hljs-type\">Message</span>)</span></span>&#123;<br>            <span class=\"hljs-comment\">// 步骤2：在这里处理消息，此方法运行在主线程，可以安全更新ui</span><br>            <span class=\"hljs-comment\">// 根据消息类型处理不同的业务逻辑</span><br>            <span class=\"hljs-keyword\">when</span> (msg.what)&#123;<br>                <span class=\"hljs-number\">1</span> -&gt; &#123;<br>                    <span class=\"hljs-comment\">// 从msg.obj中获取数据</span><br>                    <span class=\"hljs-comment\">// 更新textView显示加载结果</span><br>                    textView.text = msg.obj <span class=\"hljs-keyword\">as</span> String<br>                &#125;<br>                <span class=\"hljs-number\">2</span> -&gt; &#123;<br>                    <span class=\"hljs-comment\">// 也可以使用arg1，arg2等传递简单整型数据</span><br>                    <span class=\"hljs-comment\">// 处理进度信息（当前未使用）</span><br>                    <span class=\"hljs-keyword\">val</span> progress = msg.arg1<br>                    <span class=\"hljs-comment\">// 例如处理更新进度条</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Activity创建时的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 用于恢复Activity状态的Bundle对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_send_message)<br>        <br>        <span class=\"hljs-comment\">// 初始化textView控件</span><br>        textView = findViewById(R.id.textView)<br><br>        <span class=\"hljs-comment\">// 创建并启动一个子线程来模拟耗时操作</span><br>        Thread&#123;<br>            <span class=\"hljs-comment\">// 步骤3：模拟耗时操作，睡眠2秒</span><br>            Thread.sleep(<span class=\"hljs-number\">2000</span>)<br>            <span class=\"hljs-keyword\">val</span> result = <span class=\"hljs-string\">&quot;数据加载完成&quot;</span><br><br>            <span class=\"hljs-comment\">// 步骤4：构造消息对象并发送到主线程</span><br>            <span class=\"hljs-keyword\">val</span> message = mainHandler.obtainMessage() <span class=\"hljs-comment\">// 使用obtainMessage() 复用消息对象</span><br>            message.what = <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\">// 消息标识</span><br>            message.obj = result <span class=\"hljs-comment\">// 消息内容</span><br>            mainHandler.sendMessage(message) <span class=\"hljs-comment\">// 发送消息</span><br>        &#125;.start()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h5 id=\"使用-post\"><a href=\"#使用-post\" class=\"headerlink\" title=\"使用 post\"></a>使用 post</h5><ul>\n<li>步骤1: 创建Handler对象（关联主线程Looper）</li>\n<li>步骤2: 在子线程中执行耗时操作</li>\n<li>步骤3：使用post()方法，将UI更新操作直接投递到主线程执行</li>\n</ul>\n<p>完整类实现</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> com.kei.handlerdemo<br><br><span class=\"hljs-keyword\">import</span> android.os.Bundle<br><span class=\"hljs-keyword\">import</span> android.os.Handler<br><span class=\"hljs-keyword\">import</span> android.os.Looper<br><span class=\"hljs-keyword\">import</span> android.widget.TextView<br><span class=\"hljs-keyword\">import</span> androidx.activity.ComponentActivity<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * PostActivity类用于演示Handler的post和postDelayed方法的使用</span><br><span class=\"hljs-comment\"> * 通过子线程执行耗时操作后，使用Handler.post()方法将UI更新操作切换到主线程执行</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PostActivity</span>: <span class=\"hljs-type\">ComponentActivity</span>() &#123;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> textView: TextView<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 主线程Handler，用于将Runnable切换到主线程执行</span><br><span class=\"hljs-comment\">     * 使用Looper.getMainLooper()确保Handler在主线程中处理消息</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> mainHandler = Handler(Looper.getMainLooper())<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Activity创建时的回调方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> savedInstanceState 用于恢复Activity状态的Bundle对象</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br><br>        setContentView(R.layout.activity_post)<br><br>        textView = findViewById(R.id.tv_post)<br><br>        <span class=\"hljs-comment\">// 创建并启动一个子线程来模拟耗时操作</span><br>        Thread&#123;<br>            <span class=\"hljs-comment\">// 模拟耗时操作，睡眠2秒</span><br>            Thread.sleep(<span class=\"hljs-number\">2000</span>)<br>            <span class=\"hljs-keyword\">val</span> result = <span class=\"hljs-string\">&quot;数据加载完成&quot;</span><br><br>            <span class=\"hljs-comment\">// 使用Handler.post()将UI更新操作切换到主线程执行</span><br>            mainHandler.post &#123;<br>                textView.text = result<br>            &#125;<br>        &#125;.start()<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 延迟任务方法，使用Handler.postDelayed()延迟执行UI更新操作</span><br><span class=\"hljs-comment\">     * 在指定延迟时间后将Runnable切换到主线程执行</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">delayTask</span><span class=\"hljs-params\">()</span></span>&#123;<br>        mainHandler.postDelayed(&#123;<br>            textView.text = <span class=\"hljs-string\">&quot;延迟2秒执行&quot;</span><br>        &#125;, <span class=\"hljs-number\">2000</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h5 id=\"安全的最佳实践\"><a href=\"#安全的最佳实践\" class=\"headerlink\" title=\"安全的最佳实践\"></a>安全的最佳实践</h5><ul>\n<li>将 Handler 定义为静态内部类，并不再持有外部类的强引用</li>\n<li>使用 WeakReference 弱引用 Activity</li>\n<li>在处理消息前，先判断 Activity 是否还存在</li>\n<li>在 Activity 销毁时，移除所有未处理的消息和回调</li>\n</ul>\n<p>完整类实现</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> com.kei.handlerdemo<br><br><span class=\"hljs-keyword\">import</span> android.os.Bundle<br><span class=\"hljs-keyword\">import</span> android.os.Handler<br><span class=\"hljs-keyword\">import</span> android.os.Looper<br><span class=\"hljs-keyword\">import</span> android.os.Message<br><span class=\"hljs-keyword\">import</span> android.widget.TextView<br><span class=\"hljs-keyword\">import</span> androidx.appcompat.app.AppCompatActivity<br><span class=\"hljs-keyword\">import</span> java.lang.ref.WeakReference<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SafeHandlerActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() &#123;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> textView: TextView<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> safeHandler: SafeHandler <span class=\"hljs-comment\">// 使用安全的 Handler</span><br><br>    <span class=\"hljs-comment\">// 1. 将 Handler 定义为静态内部类，并不再持有外部类的强引用</span><br>    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SafeHandler</span>(activity: SafeHandlerActivity) : Handler(Looper.getMainLooper()) &#123;<br>        <span class=\"hljs-comment\">// 2. 使用 WeakReference 弱引用 Activity</span><br>        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> activityWeakReference: WeakReference&lt;SafeHandlerActivity&gt; = WeakReference(activity)<br><br>        <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">handleMessage</span><span class=\"hljs-params\">(msg: <span class=\"hljs-type\">Message</span>)</span></span> &#123;<br>            <span class=\"hljs-comment\">// 3. 在处理消息前，先判断 Activity 是否还存在</span><br>            <span class=\"hljs-keyword\">val</span> activity = activityWeakReference.<span class=\"hljs-keyword\">get</span>()<br>            <span class=\"hljs-keyword\">if</span> (activity != <span class=\"hljs-literal\">null</span>) &#123; <span class=\"hljs-comment\">// 如果 Activity 没被回收</span><br>                <span class=\"hljs-comment\">// 安全地更新 UI</span><br>                <span class=\"hljs-keyword\">when</span> (msg.what) &#123;<br>                    MSG_UPDATE_TEXT -&gt; &#123;<br>                        activity.textView.text = msg.obj <span class=\"hljs-keyword\">as</span>? String<br>                    &#125;<br>                    <span class=\"hljs-comment\">// 处理其他类型的消息...</span><br>                &#125;<br>            &#125;<br>            <span class=\"hljs-comment\">// 如果 Activity 为 null（已被回收），则不执行任何操作</span><br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_safe_handler)<br>        textView = findViewById(R.id.tv_safe_handler)<br><br>        <span class=\"hljs-comment\">// 初始化安全的 Handler</span><br>        safeHandler = SafeHandler(<span class=\"hljs-keyword\">this</span>)<br><br>        <span class=\"hljs-comment\">// 在子线程中工作</span><br>        Thread &#123;<br>            <span class=\"hljs-comment\">// 模拟耗时任务</span><br>            Thread.sleep(<span class=\"hljs-number\">1500</span>)<br>            <span class=\"hljs-keyword\">val</span> result = <span class=\"hljs-string\">&quot;数据加载完毕！&quot;</span><br><br>            <span class=\"hljs-comment\">// 创建并发送消息</span><br>            <span class=\"hljs-keyword\">val</span> message = safeHandler.obtainMessage().apply &#123;<br>                what = MSG_UPDATE_TEXT<br>                obj = result<br>            &#125;<br>            safeHandler.sendMessage(message)<br>        &#125;.start()<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 4. 在 Activity 销毁时，移除所有未处理的消息和回调</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onDestroy()<br>        safeHandler.removeCallbacksAndMessages(<span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">// 参数为 null 表示移除所有</span><br>    &#125;<br><br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span> &#123;<br>        <span class=\"hljs-comment\">// 定义消息类型常量，便于管理</span><br>        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> MSG_UPDATE_TEXT = <span class=\"hljs-number\">1</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"Coroutines-协程\"><a href=\"#Coroutines-协程\" class=\"headerlink\" title=\"Coroutines 协程\"></a>Coroutines 协程</h3><p><strong>Kotlin协程</strong>是处理异步操作的推荐方案，它能帮你用更直观的代码替代复杂的回调，并高效管理后台任务</p>\n<h4 id=\"协程使用步骤\"><a href=\"#协程使用步骤\" class=\"headerlink\" title=\"协程使用步骤\"></a>协程使用步骤</h4><ol>\n<li>前置工作：添加依赖</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">dependencies &#123;<br>    <span class=\"hljs-comment\">// 协程核心库</span><br>    implementation(<span class=\"hljs-string\">&quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.10.2&quot;</span>)<br>    <span class=\"hljs-comment\">// 为ViewModel提供viewModelScope</span><br>    implementation(<span class=\"hljs-string\">&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.9.4&quot;</span>)<br>    <span class=\"hljs-comment\">// 为Activity/Fragment提供lifecycleScope</span><br>    implementation(libs.androidx.lifecycle.runtime.ktx.v280)<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>在ViewModel中使用协程 文件位置：app&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;yourpackage&#x2F;MyViewModel.kt 创建一个MyViewModel类，从网络获取数据并更新ui</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyViewModel</span>(<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> repository: MyRepository) : ViewModel() &#123;<br><br>    <span class=\"hljs-comment\">// 使用LiveData暴露UI状态</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> _data = MutableLiveData&lt;String&gt;()<br>    <span class=\"hljs-keyword\">val</span> <span class=\"hljs-keyword\">data</span>: LiveData&lt;String&gt; = _data<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> _isLoading = MutableLiveData&lt;<span class=\"hljs-built_in\">Boolean</span>&gt;()<br>    <span class=\"hljs-keyword\">val</span> isLoading: LiveData&lt;<span class=\"hljs-built_in\">Boolean</span>&gt; = _isLoading<br><br>    <span class=\"hljs-comment\">// 触发数据获取</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">fetchData</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-comment\">// 在viewModelScope内启动协程</span><br>        viewModelScope.launch &#123;<br>            _isLoading.value = <span class=\"hljs-literal\">true</span><br>            <span class=\"hljs-keyword\">try</span> &#123;<br>                <span class=\"hljs-comment\">// 执行挂起函数，获取数据</span><br>                <span class=\"hljs-keyword\">val</span> result = repository.fetchDataFromNetwork()<br>                _data.value = result<br>            &#125; <span class=\"hljs-keyword\">catch</span> (e: Exception) &#123;<br>                <span class=\"hljs-comment\">// 处理错误</span><br>                _data.value = <span class=\"hljs-string\">&quot;Error: <span class=\"hljs-subst\">$&#123;e.message&#125;</span>&quot;</span><br>            &#125; <span class=\"hljs-keyword\">finally</span> &#123;<br>                _isLoading.value = <span class=\"hljs-literal\">false</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 假设的Repository，包含挂起函数</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyRepository</span> &#123;<br>    <span class=\"hljs-comment\">// 声明为挂起函数，表明其内部执行耗时操作</span><br>    <span class=\"hljs-keyword\">suspend</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">fetchDataFromNetwork</span><span class=\"hljs-params\">()</span></span>: String &#123;<br>        <span class=\"hljs-comment\">// 使用withContext确保耗时操作在IO线程池进行，保证主线程安全</span><br>        <span class=\"hljs-keyword\">return</span> withContext(Dispatchers.IO) &#123;<br>            <span class=\"hljs-comment\">// 模拟网络请求，如使用Retrofit（Retrofit本身已支持挂起函数）</span><br>            kotlinx.coroutines.delay(<span class=\"hljs-number\">2000</span>) <span class=\"hljs-comment\">// 模拟2秒网络延迟</span><br>            <span class=\"hljs-string\">&quot;Hello from Network!&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ul>\n<li><p><strong>viewModelScope.launch​​:</strong> 在ViewModel的作用域内<strong>启动一个新的协程</strong>，默认在​​主线程​​开始执行。这使得你可以在协程内直接更新UI状态（如设置_isLoading.value）</p>\n</li>\n<li><p>​<strong>​withContext(Dispatchers.IO)​​:</strong> 这是一个关键的<strong>挂起函数</strong>。它将协程的执行上下文切换到为I&#x2F;O操作优化的线程池，执行耗时的网络或数据库操作。操作完成后，协程会自动切回原来的线程（此处是主线程）这使得fetchDataFromNetwork函数是​​主线程安全​​的，意味着你可以安全地从主线程调用它。</p>\n</li>\n</ul>\n<ol start=\"3\">\n<li>在Activity&#x2F;Fragment中处理UI交互 文件位置：app&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;yourpackage&#x2F;MyActivity.kt</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyActivity</span> : <span class=\"hljs-type\">AppCompatActivity</span>() &#123; <br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> viewModel: MyViewModel <span class=\"hljs-keyword\">by</span> viewModels()<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br><br>        <span class=\"hljs-comment\">// 观察LiveData，当数据变化时更新UI</span><br>        viewModel.<span class=\"hljs-keyword\">data</span>.observe(<span class=\"hljs-keyword\">this</span>) &#123; <span class=\"hljs-keyword\">data</span> -&gt;<br>            <span class=\"hljs-comment\">// 更新TextView等UI组件</span><br>            textView.text = <span class=\"hljs-keyword\">data</span><br>        &#125;<br><br>        viewModel.isLoading.observe(<span class=\"hljs-keyword\">this</span>) &#123; isLoading -&gt;<br>            progressBar.visibility = <span class=\"hljs-keyword\">if</span> (isLoading) View.VISIBLE <span class=\"hljs-keyword\">else</span> View.GONE<br>        &#125;<br><br>        <span class=\"hljs-comment\">// 点击按钮触发数据获取</span><br>        button.setOnClickListener &#123;<br>            viewModel.fetchData()<br>        &#125;<br><br>        <span class=\"hljs-comment\">// 使用lifecycleScope执行与界面生命周期相关的协程任务</span><br>        lifecycleScope.launchWhenResumed &#123;<br>            <span class=\"hljs-comment\">// 此协程只会在Activity处于Resumed状态时执行</span><br>            <span class=\"hljs-comment\">// 适合执行一些需要界面完全可见才进行的操作</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>处理并行任务</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">// 在ViewModel或Repository中</span><br><span class=\"hljs-keyword\">suspend</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">fetchDataInParallel</span><span class=\"hljs-params\">()</span></span>: List&lt;String&gt; =<br>    kotlinx.coroutines.coroutineScope &#123; <span class=\"hljs-comment\">// 创建一个协程作用域</span><br>        <span class=\"hljs-keyword\">val</span> deferredOne = async &#123; repository.fetchFromSource1() &#125; <span class=\"hljs-comment\">// 启动第一个异步任务</span><br>        <span class=\"hljs-keyword\">val</span> deferredTwo = async &#123; repository.fetchFromSource2() &#125; <span class=\"hljs-comment\">// 启动第二个异步任务</span><br><br>        <span class=\"hljs-comment\">// 等待两个任务都完成并返回结果</span><br>        <span class=\"hljs-keyword\">val</span> result1 = deferredOne.await()<br>        <span class=\"hljs-keyword\">val</span> result2 = deferredTwo.await()<br>        listOf(result1, result2)<br>    &#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"网络通信\"><a href=\"#网络通信\" class=\"headerlink\" title=\"网络通信\"></a>网络通信</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3 id=\"OkHttp\"><a href=\"#OkHttp\" class=\"headerlink\" title=\"OkHttp\"></a>OkHttp</h3><p><strong>OkHttp</strong>是一个<strong>开源</strong>的<strong>HTTP客户端</strong>，<strong>用于</strong>在Android和Java应用程序中执行网络请求。</p>\n<h4 id=\"OkHttp使用步骤\"><a href=\"#OkHttp使用步骤\" class=\"headerlink\" title=\"OkHttp使用步骤\"></a>OkHttp使用步骤</h4><ol>\n<li>添加网络权限和依赖</li>\n</ol>\n<p>在 AndroidManifest.xml 文件中添加网络权限：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!-- 添加网络权限 --&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">uses-permission</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">&quot;android.permission.INTERNET&quot;</span>/&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">uses-permission</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n\n<p>在 gradle&#x2F;libs.versions.toml 中定义 OkHttp 版本和依赖：</p>\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs toml\"><span class=\"hljs-section\">[versions]</span><br><span class=\"hljs-attr\">okhttp</span> = <span class=\"hljs-string\">&quot;5.3.0&quot;</span><br><br><span class=\"hljs-section\">[libraries]</span><br><span class=\"hljs-attr\">okhttp</span> = &#123; group = <span class=\"hljs-string\">&quot;com.squareup.okhttp3&quot;</span>, name = <span class=\"hljs-string\">&quot;okhttp&quot;</span>, version.ref = <span class=\"hljs-string\">&quot;okhttp&quot;</span>&#125;<br></code></pre></td></tr></table></figure>\n\n<p>在 app&#x2F;build.gradle.kts 中引入依赖：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\">dependencies &#123;<br>    <span class=\"hljs-comment\">// 添加OkHttp依赖</span><br>    implementation(libs.okhttp)<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>创建网络服务类</li>\n</ol>\n<p>创建 NetworkService.kt 类，包含 GET 和 POST 请求方法：</p>\n<ul>\n<li>初始化 OkHttpClient 实例</li>\n<li>实现 GET 请求方法 makeGetRequest</li>\n<li>实现 POST 请求方法 makePostRequest</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 网络请求服务类</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NetworkService</span> &#123;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> client = OkHttpClient() <span class=\"hljs-comment\">// 创建OkHttpClient实例，用于发送网络请求</span><br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 发送GET请求的示例方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> url 请求的URL地址</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> callback 回调函数，用于处理请求结果</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">makeGetRequest</span><span class=\"hljs-params\">(url: <span class=\"hljs-type\">String</span>, callback: (<span class=\"hljs-type\">String</span>?, <span class=\"hljs-type\">IOException</span>?) -&gt; <span class=\"hljs-type\">Unit</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">// 1. 构建请求对象</span><br>        <span class=\"hljs-keyword\">val</span> request = Request.Builder()<br>            .url(url) <span class=\"hljs-comment\">// 设置请求URL</span><br>            .build()  <span class=\"hljs-comment\">// 构建Request对象</span><br><br>        <span class=\"hljs-comment\">// 2. 创建Call对象并异步执行</span><br>        client.newCall(request).enqueue(<span class=\"hljs-keyword\">object</span> : Callback &#123;<br>            <span class=\"hljs-comment\">// 3. 处理请求失败的情况</span><br>            <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onFailure</span><span class=\"hljs-params\">(call: <span class=\"hljs-type\">Call</span>, e: <span class=\"hljs-type\">IOException</span>)</span></span> &#123;<br>                <span class=\"hljs-comment\">// 请求失败，通过回调传递异常信息</span><br>                callback(<span class=\"hljs-literal\">null</span>, e)<br>            &#125;<br><br>            <span class=\"hljs-comment\">// 4. 处理请求成功的情况</span><br>            <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onResponse</span><span class=\"hljs-params\">(call: <span class=\"hljs-type\">Call</span>, response: <span class=\"hljs-type\">Response</span>)</span></span> &#123;<br>                <span class=\"hljs-comment\">// 5. 检查HTTP响应状态码是否成功(200-299)</span><br>                <span class=\"hljs-keyword\">if</span> (response.isSuccessful) &#123;<br>                    <span class=\"hljs-comment\">// 请求成功，通过回调传递响应体内容</span><br>                    response.body?.let &#123; responseBody -&gt;<br>                        callback(responseBody.string(), <span class=\"hljs-literal\">null</span>)<br>                    &#125; ?: run &#123;<br>                        callback(<span class=\"hljs-string\">&quot;&quot;</span>, <span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">// 如果body为null，返回空字符串</span><br>                    &#125;<br>                &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                    <span class=\"hljs-comment\">// 请求失败，创建异常并传递错误码</span><br>                    callback(<span class=\"hljs-literal\">null</span>, IOException(<span class=\"hljs-string\">&quot;请求失败，错误码：<span class=\"hljs-subst\">$&#123;response.code&#125;</span>&quot;</span>).also &#123; <br>                        it.printStackTrace() <br>                    &#125;)<br>                &#125;<br>            &#125;<br>        &#125;)<br>    &#125;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 发送POST请求的示例方法</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> url 请求的URL地址</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> jsonBody POST请求体中的JSON数据</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> callback 回调函数，用于处理请求结果</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">makePostRequest</span><span class=\"hljs-params\">(url: <span class=\"hljs-type\">String</span>, jsonBody: <span class=\"hljs-type\">String</span>, callback: (<span class=\"hljs-type\">String</span>?, <span class=\"hljs-type\">IOException</span>?) -&gt; <span class=\"hljs-type\">Unit</span>)</span></span>&#123;<br>        <span class=\"hljs-comment\">// 1. 定义请求体的媒体类型为JSON</span><br>        <span class=\"hljs-keyword\">val</span> json = <span class=\"hljs-string\">&quot;application/json; charset=utf-8&quot;</span>.toMediaType()<br>        <br>        <span class=\"hljs-comment\">// 2. 将字符串转换为RequestBody对象</span><br>        <span class=\"hljs-keyword\">val</span> body = jsonBody.toRequestBody(json)<br><br>        <span class=\"hljs-comment\">// 3. 构建POST请求对象</span><br>        <span class=\"hljs-keyword\">val</span> request = Request.Builder()<br>            .url(url) <span class=\"hljs-comment\">// 设置请求URL</span><br>            .post(body) <span class=\"hljs-comment\">// 设置请求方法为POST，并附带请求体</span><br>            .build() <span class=\"hljs-comment\">// 构建Request对象</span><br><br>        <span class=\"hljs-comment\">// 4. 创建Call对象并异步执行</span><br>        client.newCall(request).enqueue(<span class=\"hljs-keyword\">object</span> : Callback&#123;<br>            <span class=\"hljs-comment\">// 5. 处理请求失败的情况</span><br>            <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onFailure</span><span class=\"hljs-params\">(call: <span class=\"hljs-type\">Call</span>, e: <span class=\"hljs-type\">IOException</span>)</span></span> &#123;<br>                <span class=\"hljs-comment\">// 请求失败，通过回调传递异常信息</span><br>                callback(<span class=\"hljs-literal\">null</span>, e)<br>            &#125;<br><br>            <span class=\"hljs-comment\">// 6. 处理请求成功的情况</span><br>            <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onResponse</span><span class=\"hljs-params\">(call: <span class=\"hljs-type\">Call</span>, response: <span class=\"hljs-type\">Response</span>)</span></span> &#123;<br>                <span class=\"hljs-comment\">// 7. 检查HTTP响应状态码是否成功(200-299)</span><br>                <span class=\"hljs-keyword\">if</span>(response.isSuccessful)&#123;<br>                    <span class=\"hljs-comment\">// 请求成功，通过回调传递响应体内容</span><br>                    response.body?.let &#123; responseBody -&gt;<br>                        callback(responseBody.string(), <span class=\"hljs-literal\">null</span>)<br>                    &#125; ?: run &#123;<br>                        callback(<span class=\"hljs-string\">&quot;&quot;</span>, <span class=\"hljs-literal\">null</span>) <span class=\"hljs-comment\">// 如果body为null，返回空字符串</span><br>                    &#125;<br>                &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                    <span class=\"hljs-comment\">// 请求失败，创建异常并传递错误码</span><br>                    callback(<span class=\"hljs-literal\">null</span>, IOException(<span class=\"hljs-string\">&quot;请求失败，错误码：<span class=\"hljs-subst\">$&#123;response.code&#125;</span>&quot;</span>).also &#123; <br>                        it.printStackTrace() <br>                    &#125;)<br>                &#125;<br>            &#125;<br>        &#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>在 Activity 中使用网络服务</li>\n</ol>\n<p>在 MainActivity.kt 中：</p>\n<ul>\n<li>启用 ViewBinding 功能以访问 UI 元素</li>\n<li>创建 NetworkService 实例</li>\n<li>在按钮点击事件中调用相应的网络请求方法</li>\n<li>处理网络请求结果并在主线程中更新 UI</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span> : <span class=\"hljs-type\">ComponentActivity</span>() &#123;<br><br>    <span class=\"hljs-comment\">// 延迟初始化绑定器</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">lateinit</span> <span class=\"hljs-keyword\">var</span> binding: ActivityMainBinding<br><br>    <span class=\"hljs-comment\">// 创建网络服务实例</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> networkService = NetworkService()<br><br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br><br>        <span class=\"hljs-comment\">// 1. inflate XML 布局文件，创建 View 对象</span><br>        binding = ActivityMainBinding.inflate(layoutInflater)<br><br>        <span class=\"hljs-comment\">// 2. 将根视图设置为 Activity 的内容视图</span><br>        setContentView(binding.root)<br><br>        <span class=\"hljs-comment\">// 3. 现在可以通过 binding 访问布局中的所有视图组件</span><br>        binding.btnGet.setOnClickListener &#123;<br>            networkService.makeGetRequest(<span class=\"hljs-string\">&quot;https://httpbin.org/get&quot;</span>) &#123; response: String?, error: IOException? -&gt;<br>                runOnUiThread &#123;<br>                    <span class=\"hljs-keyword\">if</span> (error != <span class=\"hljs-literal\">null</span>)&#123;<br>                        Log.e(<span class=\"hljs-string\">&quot;NetworkDemo&quot;</span>, <span class=\"hljs-string\">&quot;Get请求失败：<span class=\"hljs-subst\">$&#123;error.message&#125;</span>&quot;</span>)<br>                        Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">&quot;Get请求失败：<span class=\"hljs-subst\">$&#123;error.message&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()<br>                        binding.tvResult.text = <span class=\"hljs-string\">&quot;Get请求失败：<span class=\"hljs-subst\">$&#123;error.message&#125;</span>&quot;</span><br>                    &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                        Log.d(<span class=\"hljs-string\">&quot;NetworkDemo&quot;</span>, <span class=\"hljs-string\">&quot;Get请求成功：<span class=\"hljs-subst\">$&#123;response&#125;</span>&quot;</span>)<br>                        Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">&quot;Get请求成功:<span class=\"hljs-subst\">$&#123;response&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()<br>                        binding.tvResult.text = <span class=\"hljs-string\">&quot;Get请求成功：<span class=\"hljs-subst\">$&#123;response&#125;</span>&quot;</span><br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        binding.btnPost.setOnClickListener &#123;<br>            <span class=\"hljs-keyword\">val</span> jsonBody = <span class=\"hljs-string\">&quot;&quot;&quot;</span><br><span class=\"hljs-string\">                &#123;</span><br><span class=\"hljs-string\">                    &quot;name&quot;: &quot;John Doe&quot;,</span><br><span class=\"hljs-string\">                    &quot;age&quot;: 30</span><br><span class=\"hljs-string\">                &#125;</span><br><span class=\"hljs-string\">            &quot;&quot;&quot;</span>.trimIndent()<br><br>            networkService.makePostRequest(<span class=\"hljs-string\">&quot;https://httpbin.org/post&quot;</span>, jsonBody) &#123; response: String?, error: IOException? -&gt;<br>                runOnUiThread &#123;<br>                    <span class=\"hljs-keyword\">if</span> (error != <span class=\"hljs-literal\">null</span>)&#123;<br>                        Log.e(<span class=\"hljs-string\">&quot;NetworkDemo&quot;</span>, <span class=\"hljs-string\">&quot;Post请求失败：<span class=\"hljs-subst\">$&#123;error.message&#125;</span>&quot;</span>)<br>                        Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">&quot;Post请求失败：<span class=\"hljs-subst\">$&#123;error.message&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()<br>                        binding.tvResult.text = <span class=\"hljs-string\">&quot;Post请求失败：<span class=\"hljs-subst\">$&#123;error.message&#125;</span>&quot;</span><br>                    &#125;<span class=\"hljs-keyword\">else</span>&#123;<br>                        Log.d(<span class=\"hljs-string\">&quot;NetworkDemo&quot;</span>, <span class=\"hljs-string\">&quot;Post请求成功：<span class=\"hljs-subst\">$&#123;response&#125;</span>&quot;</span>)<br>                        Toast.makeText(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">&quot;Post请求成功,<span class=\"hljs-subst\">$&#123;response&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()<br>                        binding.tvResult.text = <span class=\"hljs-string\">&quot;Post请求成功：<span class=\"hljs-subst\">$&#123;response&#125;</span>&quot;</span><br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"后台服务\"><a href=\"#后台服务\" class=\"headerlink\" title=\"后台服务\"></a>后台服务</h2><p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3 id=\"基本特征\"><a href=\"#基本特征\" class=\"headerlink\" title=\"基本特征\"></a>基本特征</h3><ul>\n<li><strong>无 UI 界面：</strong> 在后台运行，不与用户直接交互。</li>\n<li><strong>生命周期独立：</strong> 不受 Activity 生命周期直接影响（启动它的 Activity 销毁后，Service 可以继续运行）。</li>\n<li><strong>运行在主线程：</strong> 这一点至关重要！默认情况下，Service 与你的应用运行在同一个进程的主线程（UI 线程）中。因此，你不能直接在 Service 中执行<strong>耗时操作</strong>（如网络请求、大量文件读写），否则会阻塞主线程，导致应用无响应（ANR）。必须在 Service 内部<strong>创建子线程</strong>来处理这些任务</li>\n</ul>\n<h3 id=\"启动方式\"><a href=\"#启动方式\" class=\"headerlink\" title=\"启动方式\"></a>启动方式</h3><h4 id=\"通过startService-启动\"><a href=\"#通过startService-启动\" class=\"headerlink\" title=\"通过startService()启动\"></a>通过startService()启动</h4><ul>\n<li><strong>生命周期</strong>流程：<strong>onCreate()→ onStartCommand()→ (运行中) → onDestroy()</strong></li>\n<li>onStartCommand()的返回值：这个返回值决定了服务被系统意外杀死后如何重启，非常重要<ul>\n<li>START_STICKY：服务被杀死后会被系统<strong>重新创建</strong>，但之前的 Intent 数据会<strong>丢失</strong>（传入 null）。适合<strong>音乐播放</strong>等持续任务</li>\n<li>START_NOT_STICKY：服务被杀死后<strong>不会自动重启</strong>。适合一次性的任务，如<strong>下载</strong>单个文件</li>\n<li>START_REDELIVER_INTENT：服务被杀死后会被<strong>重启</strong>，并且最后一个 Intent 会被<strong>重新传递</strong>。适合必须完成的任务，如<strong>支付</strong>回调</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"通过bindService-启动\"><a href=\"#通过bindService-启动\" class=\"headerlink\" title=\"通过bindService()启动\"></a>通过bindService()启动</h4><p>这种方式允许组件（如 Activity）与 Service 进行双向通信。</p>\n<ul>\n<li><strong>生命周期</strong>流程：onCreate()→ onBind()→ (运行中，与绑定者交互) → onUnbind()→ onDestroy()</li>\n<li>通信桥梁 IBinder：服务通过 onBind()方法返回一个 IBinder对象，绑定组件通过这个对象来调用服务内部的方法，实现交互</li>\n</ul>\n<h4 id=\"混合启动方式\"><a href=\"#混合启动方式\" class=\"headerlink\" title=\"混合启动方式\"></a>混合启动方式</h4><p>一个 Service 可以同时被 startService()启动并被 bindService()绑定。这时，必须同时调用 stopService()和<strong>所有绑定组件</strong>的 unbindService()，服务才会销毁</p>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><h4 id=\"startService-启动方式示例\"><a href=\"#startService-启动方式示例\" class=\"headerlink\" title=\"startService()启动方式示例\"></a>startService()启动方式示例</h4><p>以开启后台日志服务为例：</p>\n<ol>\n<li>创建后台日志服务类LoggingService.kt，继承 Service类，需要重写onCreate()、onStartCommand()、onDestroy()方法，onBind()方法可返回null</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LoggingService</span>: <span class=\"hljs-type\">Service</span>() &#123;<br><br>    <span class=\"hljs-keyword\">companion</span> <span class=\"hljs-keyword\">object</span>&#123;<br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> TAG = <span class=\"hljs-string\">&quot;LoggingService&quot;</span><br>        <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> EXTRA_MESSAGE = <span class=\"hljs-string\">&quot;extra_massage&quot;</span> <span class=\"hljs-comment\">// 用于Intent传递数据的键</span><br>    &#125;<br><br>    <span class=\"hljs-comment\">// 服务创建时被调用（仅调用一次）</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate()<br>        Log.d(TAG, <span class=\"hljs-string\">&quot;日志服务已创建&quot;</span>)<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 核心方法，每次startService都会调用</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onStartCommand</span><span class=\"hljs-params\">(intent: <span class=\"hljs-type\">Intent</span>?, flags: <span class=\"hljs-type\">Int</span>, startId: <span class=\"hljs-type\">Int</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> &#123;<br>        Log.d(TAG, <span class=\"hljs-string\">&quot;收到启动命令，startID：<span class=\"hljs-variable\">$startId</span>&quot;</span>)<br><br>        <span class=\"hljs-comment\">// 1.从Intent中获取要记录的消息</span><br>        <span class=\"hljs-keyword\">val</span> message = intent?.getStringExtra(EXTRA_MESSAGE)?: <span class=\"hljs-string\">&quot;默认消息&quot;</span><br><br>        <span class=\"hljs-comment\">// 2.开启新线程执行耗时操作，避免阻塞主线程</span><br>        thread(start = <span class=\"hljs-literal\">true</span>) &#123;<br>            <span class=\"hljs-comment\">// 模拟耗时的保存操作</span><br>            Log.d(TAG, <span class=\"hljs-string\">&quot;后台线程开始工作：<span class=\"hljs-subst\">$&#123;Thread.currentThread().name&#125;</span>&quot;</span>)<br>            Thread.sleep(<span class=\"hljs-number\">3000</span>)<br>            Log.i(<span class=\"hljs-string\">&quot;APP_LOG&quot;</span>, <span class=\"hljs-string\">&quot;消息已记录：<span class=\"hljs-variable\">$message</span>&quot;</span>)<br><br>            <span class=\"hljs-comment\">// 3.任务完成后，服务自行停止</span><br>            stopSelf(startId)<br>            Log.d(TAG, <span class=\"hljs-string\">&quot;任务完成，服务已停止&quot;</span>)<br>        &#125;<br><br>        <span class=\"hljs-comment\">// 4.返回值，如果服务被杀死，希望系统重新创建并重传最后的Intent</span><br>        <span class=\"hljs-keyword\">return</span> START_REDELIVER_INTENT<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 必须实现的方法，但对于startService方式可返回null</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onBind</span><span class=\"hljs-params\">(intent: <span class=\"hljs-type\">Intent</span>?)</span></span>: IBinder? = <span class=\"hljs-literal\">null</span><br><br>    <span class=\"hljs-comment\">// 服务销毁时清理资源</span><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDestroy</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onDestroy()<br>        Log.d(TAG, <span class=\"hljs-string\">&quot;日志服务已销毁&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>在AndroidManifest.xml中注册服务，manifest&#x2F;application标签内添加如下内容：</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-comment\">&lt;!--注册LoggingService--&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">service</span> <span class=\"hljs-attr\">android:name</span>=<span class=\"hljs-string\">&quot;.LoggingService&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>在需要使用服务时，调用startService()方法启动服务，并传递Intent对象，Intent对象中可以携带数据</li>\n</ol>\n<p>示例在主活动中通过按钮点击启动服务：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainActivity</span> : <span class=\"hljs-type\">ComponentActivity</span>() &#123;<br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(savedInstanceState: <span class=\"hljs-type\">Bundle</span>?)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br><br>        <span class=\"hljs-comment\">// 启动服务按钮</span><br>        findViewById&lt;Button&gt;(R.id.btn_start_service).setOnClickListener &#123;<br>            <span class=\"hljs-comment\">// 1. 创建Intent, 指定要启动的服务</span><br>            <span class=\"hljs-keyword\">val</span> intent = Intent(<span class=\"hljs-keyword\">this</span>, LoggingService::<span class=\"hljs-keyword\">class</span>.java).apply&#123;<br>                <span class=\"hljs-comment\">// 2.通过Intent传递数据给服务</span><br>                putExtra(LoggingService.EXTRA_MESSAGE, <span class=\"hljs-string\">&quot;这是一条来自 Activity 的消息，时间：<span class=\"hljs-subst\">$&#123;System.currentTimeMillis()&#125;</span>&quot;</span>)<br>            &#125;<br><br>            <span class=\"hljs-comment\">// 3.启动服务</span><br>            startService(intent)<br>        &#125;<br><br>        <span class=\"hljs-comment\">// 停止服务按钮</span><br>        findViewById&lt;Button&gt;(R.id.btn_stop_service).setOnClickListener &#123;<br>            <span class=\"hljs-comment\">// 停止服务的Intent</span><br>            <span class=\"hljs-keyword\">val</span> stopIntent = Intent(<span class=\"hljs-keyword\">this</span>, LoggingService::<span class=\"hljs-keyword\">class</span>.java)<br>            stopService(stopIntent)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"title":"单调栈","date":"2025-09-27T10:30:00.000Z","_content":"\n# 单调栈\n\n## 例题一：每日温度\n\n### 题目描述\n给定一个整数数组 temperatures ，表示每天的温度，返回一个数组 answer ，其中 answer[i] 是指对于第 i 天，下一个更高温度出现在几天后。如果气温在这之后都不会升高，请在该位置用 0 来代替。\n\n \n\n示例 1:\n\n输入: temperatures = [73,74,75,71,69,72,76,73]\n输出: [1,1,4,2,1,1,0,0]\n\n示例 2:\n\n输入: temperatures = [30,40,50,60]\n输出: [1,1,1,0]\n\n示例 3:\n\n输入: temperatures = [30,60,90]\n输出: [1,1,0]\n\n### 解题思路\n* 从前往后考虑\n    * 对于当前天，我们只有在**遍历**到下一个更高温度的时候，才更新结果\n    * 那么，对于下一天，如果温度比当前天高，我们需要立刻更新结果；如果温度比当前天低，我们需要**保留**下来\n    * 对于下一个更高天，我们需要依次处理保存下来的天\n    * 对此我们可以想到，可以利用**单调栈**来储存保留的天的索引\n    * 将当前天与栈顶元素比较，如果栈顶更低，**弹出栈顶**就可以获得栈顶的索引，当前与栈顶索引差值就是所求的n天之后；否则，**入栈等待**下一个更高温度\n\n* 从后往前考虑\n    * 对于当前天，往前遍历，每一个低于当前天的，都需要处理比较，更新差值\n    * 往前遍历，若遇到一个高于当前天的，则可以弹出所有栈元素，并将此天入栈\n    * 此时，此天作为最大值，按照前面步骤继续处理，即可获得结果\n\n* 无论从前往后还是从后往前，**单调栈**的核心就是及时**弹出无用数据，保持栈中元素有序**\n\n### 代码实现\n* 从前往后\n    ~~~python\n    class Solution:\n        def dailyTemperatures(self, temperatures: List[int]) -> List[int]:\n            n = len(temperatures)\n            ans = [0] * n\n            stack = [] # 栈用于记录标\n            # 从前往后\n            for i in range(n):\n                t = temperatures[i]\n                # 一旦当前大于栈顶元素，就要处理栈顶元素，进行弹出比较，并更新列表\n                while stack and t > temperatures[stack[-1]]:\n                    x = stack.pop()\n                    ans[x] = i - x \n                stack.append(i)\n            return ans\n    ~~~\n\n* 从后往前\n    ~~~python\n    class Solution:\n        def dailyTemperatures(self, temperatures: List[int]) -> List[int]:\n            n = len(temperatures)\n            ans = [0] * n\n            stack = [] # 栈用于记录标\n            for i in range(-1, -n - 1, -1): # 从后往前遍历\n                t = temperatures[i] # 当前下标的温度\n                while stack and t >= temperatures[stack[-1]]: # 当栈中还有小于当前温度的下标，则弹出\n                    stack.pop() # 弹出后栈下标向前移动，直到比当前温度更大的下标\n                if stack: # 栈不为空，即当前栈顶对应温度大于当前天，需比较更新列表\n                    ans[i] = stack[-1] - i # 当前与栈中最大温度下标的差值就是所求的\n                stack.append(i)\n            return ans\n    ~~~\n\n### 复杂度分析\n* 从前往后\n    * 时间复杂度：O(n)，其中 n 为 temperatures 的长度。每个元素只进栈一次，出栈一次\n    * 空间复杂度：O(n)\n* 从后往前\n    * 时间复杂度：O(n)，原因同上\n    * 空间复杂度：O(n)\n\n\n\n## 例题二：接雨水\n\n### 题目描述\n给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。\n\n![图](../assert/algorithm/rainwatertrap2.png)\n\n示例 1：\n\n输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]\n输出：6\n解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 \n\n示例 2：\n\n输入：height = [4,2,0,3,2,5]\n输出：9\n\n### 解题思路\n* 对于求解下一个比当前高或低的索引类型的问题，我们都可以使用**单调栈**来解决\n* 与上一题类似，我们无论从前往后或从后往前都可以得到下一次更高的索引差\n* 我们以弹出栈的索引为 k 作为底，栈顶索引 i 为左边界，当前索引 j 为右边界\n![示意图](../assert/algorithm/rainwatertrap.png)\n* 则雨水的高度为左右边界高的较小值与底高度差值，即 **min(height[i], height[j]) - height[k]**\n* 雨水的长度为 **j - i - 1**\n* 故雨水容量为 **min(height[i], height[j]) - height[k] * (j - i - 1)**\n\n### 代码实现\n~~~python\nclass Solution:\n    def trap(self, height: List[int]) -> int:\n        # 遇到上一个更大更小问题，可以使用单调栈解决\n        ans = 0\n        stack = [] # 栈用于存放下标\n        for i, h in enumerate(height):\n            while stack and h > height[stack[-1]]:\n                # 弹出栈顶下标的高度作为底\n                bottom_h = height[stack.pop()]\n                # 栈弹空了说明没有左边界，立刻跳出循环\n                if not stack:\n                    break\n                # 栈顶为左边界\n                left = stack[-1]\n                # 左右边界高的较小值减去底高度，得到雨水的高度\n                dh = min(height[left], h) - bottom_h\n                # 累加雨水容量\n                ans += dh * (i - left -1)\n            stack.append(i)\n        return ans\n~~~\n\n### 复杂度分析\n* 时间复杂度：O(n)，其中 n 为 height 的长度。每个元素进栈一次，出栈一次\n* 空间复杂度：O(n)\n","source":"_posts/monotonic_stack.md","raw":"---\ntitle: \"单调栈\"\ndate: 2025-09-27 18:30:00\ntags:\n    - 算法\n    - 栈\ncategories:\n    - 算法笔记\n---\n\n# 单调栈\n\n## 例题一：每日温度\n\n### 题目描述\n给定一个整数数组 temperatures ，表示每天的温度，返回一个数组 answer ，其中 answer[i] 是指对于第 i 天，下一个更高温度出现在几天后。如果气温在这之后都不会升高，请在该位置用 0 来代替。\n\n \n\n示例 1:\n\n输入: temperatures = [73,74,75,71,69,72,76,73]\n输出: [1,1,4,2,1,1,0,0]\n\n示例 2:\n\n输入: temperatures = [30,40,50,60]\n输出: [1,1,1,0]\n\n示例 3:\n\n输入: temperatures = [30,60,90]\n输出: [1,1,0]\n\n### 解题思路\n* 从前往后考虑\n    * 对于当前天，我们只有在**遍历**到下一个更高温度的时候，才更新结果\n    * 那么，对于下一天，如果温度比当前天高，我们需要立刻更新结果；如果温度比当前天低，我们需要**保留**下来\n    * 对于下一个更高天，我们需要依次处理保存下来的天\n    * 对此我们可以想到，可以利用**单调栈**来储存保留的天的索引\n    * 将当前天与栈顶元素比较，如果栈顶更低，**弹出栈顶**就可以获得栈顶的索引，当前与栈顶索引差值就是所求的n天之后；否则，**入栈等待**下一个更高温度\n\n* 从后往前考虑\n    * 对于当前天，往前遍历，每一个低于当前天的，都需要处理比较，更新差值\n    * 往前遍历，若遇到一个高于当前天的，则可以弹出所有栈元素，并将此天入栈\n    * 此时，此天作为最大值，按照前面步骤继续处理，即可获得结果\n\n* 无论从前往后还是从后往前，**单调栈**的核心就是及时**弹出无用数据，保持栈中元素有序**\n\n### 代码实现\n* 从前往后\n    ~~~python\n    class Solution:\n        def dailyTemperatures(self, temperatures: List[int]) -> List[int]:\n            n = len(temperatures)\n            ans = [0] * n\n            stack = [] # 栈用于记录标\n            # 从前往后\n            for i in range(n):\n                t = temperatures[i]\n                # 一旦当前大于栈顶元素，就要处理栈顶元素，进行弹出比较，并更新列表\n                while stack and t > temperatures[stack[-1]]:\n                    x = stack.pop()\n                    ans[x] = i - x \n                stack.append(i)\n            return ans\n    ~~~\n\n* 从后往前\n    ~~~python\n    class Solution:\n        def dailyTemperatures(self, temperatures: List[int]) -> List[int]:\n            n = len(temperatures)\n            ans = [0] * n\n            stack = [] # 栈用于记录标\n            for i in range(-1, -n - 1, -1): # 从后往前遍历\n                t = temperatures[i] # 当前下标的温度\n                while stack and t >= temperatures[stack[-1]]: # 当栈中还有小于当前温度的下标，则弹出\n                    stack.pop() # 弹出后栈下标向前移动，直到比当前温度更大的下标\n                if stack: # 栈不为空，即当前栈顶对应温度大于当前天，需比较更新列表\n                    ans[i] = stack[-1] - i # 当前与栈中最大温度下标的差值就是所求的\n                stack.append(i)\n            return ans\n    ~~~\n\n### 复杂度分析\n* 从前往后\n    * 时间复杂度：O(n)，其中 n 为 temperatures 的长度。每个元素只进栈一次，出栈一次\n    * 空间复杂度：O(n)\n* 从后往前\n    * 时间复杂度：O(n)，原因同上\n    * 空间复杂度：O(n)\n\n\n\n## 例题二：接雨水\n\n### 题目描述\n给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。\n\n![图](../assert/algorithm/rainwatertrap2.png)\n\n示例 1：\n\n输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]\n输出：6\n解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 \n\n示例 2：\n\n输入：height = [4,2,0,3,2,5]\n输出：9\n\n### 解题思路\n* 对于求解下一个比当前高或低的索引类型的问题，我们都可以使用**单调栈**来解决\n* 与上一题类似，我们无论从前往后或从后往前都可以得到下一次更高的索引差\n* 我们以弹出栈的索引为 k 作为底，栈顶索引 i 为左边界，当前索引 j 为右边界\n![示意图](../assert/algorithm/rainwatertrap.png)\n* 则雨水的高度为左右边界高的较小值与底高度差值，即 **min(height[i], height[j]) - height[k]**\n* 雨水的长度为 **j - i - 1**\n* 故雨水容量为 **min(height[i], height[j]) - height[k] * (j - i - 1)**\n\n### 代码实现\n~~~python\nclass Solution:\n    def trap(self, height: List[int]) -> int:\n        # 遇到上一个更大更小问题，可以使用单调栈解决\n        ans = 0\n        stack = [] # 栈用于存放下标\n        for i, h in enumerate(height):\n            while stack and h > height[stack[-1]]:\n                # 弹出栈顶下标的高度作为底\n                bottom_h = height[stack.pop()]\n                # 栈弹空了说明没有左边界，立刻跳出循环\n                if not stack:\n                    break\n                # 栈顶为左边界\n                left = stack[-1]\n                # 左右边界高的较小值减去底高度，得到雨水的高度\n                dh = min(height[left], h) - bottom_h\n                # 累加雨水容量\n                ans += dh * (i - left -1)\n            stack.append(i)\n        return ans\n~~~\n\n### 复杂度分析\n* 时间复杂度：O(n)，其中 n 为 height 的长度。每个元素进栈一次，出栈一次\n* 空间复杂度：O(n)\n","slug":"monotonic_stack","published":1,"updated":"2025-09-27T10:30:27.655Z","_id":"cmg22ta0g0003wotlb4vj1mx0","comments":1,"layout":"post","photos":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h1><span id=\"%E5%8D%95%E8%B0%83%E6%A0%88\">单调栈</span></h1><h2><span id=\"%E4%BE%8B%E9%A2%98%E4%B8%80%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6\">例题一：每日温度</span></h2><h3><span id=\"%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0\">题目描述</span></h3><p>给定一个整数数组 temperatures ，表示每天的温度，返回一个数组 answer ，其中 answer[i] 是指对于第 i 天，下一个更高温度出现在几天后。如果气温在这之后都不会升高，请在该位置用 0 来代替。</p>\n<p>示例 1:</p>\n<p>输入: temperatures = [73,74,75,71,69,72,76,73]<br>输出: [1,1,4,2,1,1,0,0]</p>\n<p>示例 2:</p>\n<p>输入: temperatures = [30,40,50,60]<br>输出: [1,1,1,0]</p>\n<p>示例 3:</p>\n<p>输入: temperatures = [30,60,90]<br>输出: [1,1,0]</p>\n<h3><span id=\"%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF\">解题思路</span></h3><ul>\n<li><p>从前往后考虑</p>\n<ul>\n<li>对于当前天，我们只有在<strong>遍历</strong>到下一个更高温度的时候，才更新结果</li>\n<li>那么，对于下一天，如果温度比当前天高，我们需要立刻更新结果；如果温度比当前天低，我们需要<strong>保留</strong>下来</li>\n<li>对于下一个更高天，我们需要依次处理保存下来的天</li>\n<li>对此我们可以想到，可以利用<strong>单调栈</strong>来储存保留的天的索引</li>\n<li>将当前天与栈顶元素比较，如果栈顶更低，<strong>弹出栈顶</strong>就可以获得栈顶的索引，当前与栈顶索引差值就是所求的n天之后；否则，<strong>入栈等待</strong>下一个更高温度</li>\n</ul>\n</li>\n<li><p>从后往前考虑</p>\n<ul>\n<li>对于当前天，往前遍历，每一个低于当前天的，都需要处理比较，更新差值</li>\n<li>往前遍历，若遇到一个高于当前天的，则可以弹出所有栈元素，并将此天入栈</li>\n<li>此时，此天作为最大值，按照前面步骤继续处理，即可获得结果</li>\n</ul>\n</li>\n<li><p>无论从前往后还是从后往前，<strong>单调栈</strong>的核心就是及时<strong>弹出无用数据，保持栈中元素有序</strong></p>\n</li>\n</ul>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><ul>\n<li><p>从前往后</p>\n  <figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">dailyTemperatures</span>(<span class=\"hljs-params\">self, temperatures: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]</span>) -&gt; <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]:<br>        n = <span class=\"hljs-built_in\">len</span>(temperatures)<br>        ans = [<span class=\"hljs-number\">0</span>] * n<br>        stack = [] <span class=\"hljs-comment\"># 栈用于记录标</span><br>        <span class=\"hljs-comment\"># 从前往后</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(n):<br>            t = temperatures[i]<br>            <span class=\"hljs-comment\"># 一旦当前大于栈顶元素，就要处理栈顶元素，进行弹出比较，并更新列表</span><br>            <span class=\"hljs-keyword\">while</span> stack <span class=\"hljs-keyword\">and</span> t &gt; temperatures[stack[-<span class=\"hljs-number\">1</span>]]:<br>                x = stack.pop()<br>                ans[x] = i - x <br>            stack.append(i)<br>        <span class=\"hljs-keyword\">return</span> ans<br></code></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>从后往前</p>\n  <figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">dailyTemperatures</span>(<span class=\"hljs-params\">self, temperatures: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]</span>) -&gt; <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]:<br>        n = <span class=\"hljs-built_in\">len</span>(temperatures)<br>        ans = [<span class=\"hljs-number\">0</span>] * n<br>        stack = [] <span class=\"hljs-comment\"># 栈用于记录标</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(-<span class=\"hljs-number\">1</span>, -n - <span class=\"hljs-number\">1</span>, -<span class=\"hljs-number\">1</span>): <span class=\"hljs-comment\"># 从后往前遍历</span><br>            t = temperatures[i] <span class=\"hljs-comment\"># 当前下标的温度</span><br>            <span class=\"hljs-keyword\">while</span> stack <span class=\"hljs-keyword\">and</span> t &gt;= temperatures[stack[-<span class=\"hljs-number\">1</span>]]: <span class=\"hljs-comment\"># 当栈中还有小于当前温度的下标，则弹出</span><br>                stack.pop() <span class=\"hljs-comment\"># 弹出后栈下标向前移动，直到比当前温度更大的下标</span><br>            <span class=\"hljs-keyword\">if</span> stack: <span class=\"hljs-comment\"># 栈不为空，即当前栈顶对应温度大于当前天，需比较更新列表</span><br>                ans[i] = stack[-<span class=\"hljs-number\">1</span>] - i <span class=\"hljs-comment\"># 当前与栈中最大温度下标的差值就是所求的</span><br>            stack.append(i)<br>        <span class=\"hljs-keyword\">return</span> ans<br></code></pre></td></tr></tbody></table></figure></li>\n</ul>\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><ul>\n<li>从前往后<ul>\n<li>时间复杂度：O(n)，其中 n 为 temperatures 的长度。每个元素只进栈一次，出栈一次</li>\n<li>空间复杂度：O(n)</li>\n</ul>\n</li>\n<li>从后往前<ul>\n<li>时间复杂度：O(n)，原因同上</li>\n<li>空间复杂度：O(n)</li>\n</ul>\n</li>\n</ul>\n<h2><span id=\"%E4%BE%8B%E9%A2%98%E4%BA%8C%E6%8E%A5%E9%9B%A8%E6%B0%B4\">例题二：接雨水</span></h2><h3><span id=\"%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0\">题目描述</span></h3><p>给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。</p>\n<p><img src=\"/../assert/algorithm/rainwatertrap2.png\" alt=\"图\"></p>\n<p>示例 1：</p>\n<p>输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]<br>输出：6<br>解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 </p>\n<p>示例 2：</p>\n<p>输入：height = [4,2,0,3,2,5]<br>输出：9</p>\n<h3><span id=\"%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF\">解题思路</span></h3><ul>\n<li>对于求解下一个比当前高或低的索引类型的问题，我们都可以使用<strong>单调栈</strong>来解决</li>\n<li>与上一题类似，我们无论从前往后或从后往前都可以得到下一次更高的索引差</li>\n<li>我们以弹出栈的索引为 k 作为底，栈顶索引 i 为左边界，当前索引 j 为右边界<br><img src=\"/../assert/algorithm/rainwatertrap.png\" alt=\"示意图\"></li>\n<li>则雨水的高度为左右边界高的较小值与底高度差值，即 <strong>min(height[i], height[j]) - height[k]</strong></li>\n<li>雨水的长度为 <strong>j - i - 1</strong></li>\n<li>故雨水容量为 <strong>min(height[i], height[j]) - height[k] * (j - i - 1)</strong></li>\n</ul>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">trap</span>(<span class=\"hljs-params\">self, height: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]</span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        <span class=\"hljs-comment\"># 遇到上一个更大更小问题，可以使用单调栈解决</span><br>        ans = <span class=\"hljs-number\">0</span><br>        stack = [] <span class=\"hljs-comment\"># 栈用于存放下标</span><br>        <span class=\"hljs-keyword\">for</span> i, h <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(height):<br>            <span class=\"hljs-keyword\">while</span> stack <span class=\"hljs-keyword\">and</span> h &gt; height[stack[-<span class=\"hljs-number\">1</span>]]:<br>                <span class=\"hljs-comment\"># 弹出栈顶下标的高度作为底</span><br>                bottom_h = height[stack.pop()]<br>                <span class=\"hljs-comment\"># 栈弹空了说明没有左边界，立刻跳出循环</span><br>                <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> stack:<br>                    <span class=\"hljs-keyword\">break</span><br>                <span class=\"hljs-comment\"># 栈顶为左边界</span><br>                left = stack[-<span class=\"hljs-number\">1</span>]<br>                <span class=\"hljs-comment\"># 左右边界高的较小值减去底高度，得到雨水的高度</span><br>                dh = <span class=\"hljs-built_in\">min</span>(height[left], h) - bottom_h<br>                <span class=\"hljs-comment\"># 累加雨水容量</span><br>                ans += dh * (i - left -<span class=\"hljs-number\">1</span>)<br>            stack.append(i)<br>        <span class=\"hljs-keyword\">return</span> ans<br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><ul>\n<li>时间复杂度：O(n)，其中 n 为 height 的长度。每个元素进栈一次，出栈一次</li>\n<li>空间复杂度：O(n)</li>\n</ul>\n</body></html>","excerpt":"","more":"<h1 id=\"单调栈\"><a href=\"#单调栈\" class=\"headerlink\" title=\"单调栈\"></a>单调栈</h1><h2 id=\"例题一：每日温度\"><a href=\"#例题一：每日温度\" class=\"headerlink\" title=\"例题一：每日温度\"></a>例题一：每日温度</h2><h3 id=\"题目描述\"><a href=\"#题目描述\" class=\"headerlink\" title=\"题目描述\"></a>题目描述</h3><p>给定一个整数数组 temperatures ，表示每天的温度，返回一个数组 answer ，其中 answer[i] 是指对于第 i 天，下一个更高温度出现在几天后。如果气温在这之后都不会升高，请在该位置用 0 来代替。</p>\n<p>示例 1:</p>\n<p>输入: temperatures &#x3D; [73,74,75,71,69,72,76,73]<br>输出: [1,1,4,2,1,1,0,0]</p>\n<p>示例 2:</p>\n<p>输入: temperatures &#x3D; [30,40,50,60]<br>输出: [1,1,1,0]</p>\n<p>示例 3:</p>\n<p>输入: temperatures &#x3D; [30,60,90]<br>输出: [1,1,0]</p>\n<h3 id=\"解题思路\"><a href=\"#解题思路\" class=\"headerlink\" title=\"解题思路\"></a>解题思路</h3><ul>\n<li><p>从前往后考虑</p>\n<ul>\n<li>对于当前天，我们只有在<strong>遍历</strong>到下一个更高温度的时候，才更新结果</li>\n<li>那么，对于下一天，如果温度比当前天高，我们需要立刻更新结果；如果温度比当前天低，我们需要<strong>保留</strong>下来</li>\n<li>对于下一个更高天，我们需要依次处理保存下来的天</li>\n<li>对此我们可以想到，可以利用<strong>单调栈</strong>来储存保留的天的索引</li>\n<li>将当前天与栈顶元素比较，如果栈顶更低，<strong>弹出栈顶</strong>就可以获得栈顶的索引，当前与栈顶索引差值就是所求的n天之后；否则，<strong>入栈等待</strong>下一个更高温度</li>\n</ul>\n</li>\n<li><p>从后往前考虑</p>\n<ul>\n<li>对于当前天，往前遍历，每一个低于当前天的，都需要处理比较，更新差值</li>\n<li>往前遍历，若遇到一个高于当前天的，则可以弹出所有栈元素，并将此天入栈</li>\n<li>此时，此天作为最大值，按照前面步骤继续处理，即可获得结果</li>\n</ul>\n</li>\n<li><p>无论从前往后还是从后往前，<strong>单调栈</strong>的核心就是及时<strong>弹出无用数据，保持栈中元素有序</strong></p>\n</li>\n</ul>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><ul>\n<li><p>从前往后</p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">dailyTemperatures</span>(<span class=\"hljs-params\">self, temperatures: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]</span>) -&gt; <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]:<br>        n = <span class=\"hljs-built_in\">len</span>(temperatures)<br>        ans = [<span class=\"hljs-number\">0</span>] * n<br>        stack = [] <span class=\"hljs-comment\"># 栈用于记录标</span><br>        <span class=\"hljs-comment\"># 从前往后</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(n):<br>            t = temperatures[i]<br>            <span class=\"hljs-comment\"># 一旦当前大于栈顶元素，就要处理栈顶元素，进行弹出比较，并更新列表</span><br>            <span class=\"hljs-keyword\">while</span> stack <span class=\"hljs-keyword\">and</span> t &gt; temperatures[stack[-<span class=\"hljs-number\">1</span>]]:<br>                x = stack.pop()<br>                ans[x] = i - x <br>            stack.append(i)<br>        <span class=\"hljs-keyword\">return</span> ans<br></code></pre></td></tr></table></figure>\n</li>\n<li><p>从后往前</p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">dailyTemperatures</span>(<span class=\"hljs-params\">self, temperatures: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]</span>) -&gt; <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]:<br>        n = <span class=\"hljs-built_in\">len</span>(temperatures)<br>        ans = [<span class=\"hljs-number\">0</span>] * n<br>        stack = [] <span class=\"hljs-comment\"># 栈用于记录标</span><br>        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(-<span class=\"hljs-number\">1</span>, -n - <span class=\"hljs-number\">1</span>, -<span class=\"hljs-number\">1</span>): <span class=\"hljs-comment\"># 从后往前遍历</span><br>            t = temperatures[i] <span class=\"hljs-comment\"># 当前下标的温度</span><br>            <span class=\"hljs-keyword\">while</span> stack <span class=\"hljs-keyword\">and</span> t &gt;= temperatures[stack[-<span class=\"hljs-number\">1</span>]]: <span class=\"hljs-comment\"># 当栈中还有小于当前温度的下标，则弹出</span><br>                stack.pop() <span class=\"hljs-comment\"># 弹出后栈下标向前移动，直到比当前温度更大的下标</span><br>            <span class=\"hljs-keyword\">if</span> stack: <span class=\"hljs-comment\"># 栈不为空，即当前栈顶对应温度大于当前天，需比较更新列表</span><br>                ans[i] = stack[-<span class=\"hljs-number\">1</span>] - i <span class=\"hljs-comment\"># 当前与栈中最大温度下标的差值就是所求的</span><br>            stack.append(i)<br>        <span class=\"hljs-keyword\">return</span> ans<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"复杂度分析\"><a href=\"#复杂度分析\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><ul>\n<li>从前往后<ul>\n<li>时间复杂度：O(n)，其中 n 为 temperatures 的长度。每个元素只进栈一次，出栈一次</li>\n<li>空间复杂度：O(n)</li>\n</ul>\n</li>\n<li>从后往前<ul>\n<li>时间复杂度：O(n)，原因同上</li>\n<li>空间复杂度：O(n)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"例题二：接雨水\"><a href=\"#例题二：接雨水\" class=\"headerlink\" title=\"例题二：接雨水\"></a>例题二：接雨水</h2><h3 id=\"题目描述-1\"><a href=\"#题目描述-1\" class=\"headerlink\" title=\"题目描述\"></a>题目描述</h3><p>给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。</p>\n<p><img src=\"/../assert/algorithm/rainwatertrap2.png\" alt=\"图\"></p>\n<p>示例 1：</p>\n<p>输入：height &#x3D; [0,1,0,2,1,0,1,3,2,1,2,1]<br>输出：6<br>解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 </p>\n<p>示例 2：</p>\n<p>输入：height &#x3D; [4,2,0,3,2,5]<br>输出：9</p>\n<h3 id=\"解题思路-1\"><a href=\"#解题思路-1\" class=\"headerlink\" title=\"解题思路\"></a>解题思路</h3><ul>\n<li>对于求解下一个比当前高或低的索引类型的问题，我们都可以使用<strong>单调栈</strong>来解决</li>\n<li>与上一题类似，我们无论从前往后或从后往前都可以得到下一次更高的索引差</li>\n<li>我们以弹出栈的索引为 k 作为底，栈顶索引 i 为左边界，当前索引 j 为右边界<br><img src=\"/../assert/algorithm/rainwatertrap.png\" alt=\"示意图\"></li>\n<li>则雨水的高度为左右边界高的较小值与底高度差值，即 <strong>min(height[i], height[j]) - height[k]</strong></li>\n<li>雨水的长度为 <strong>j - i - 1</strong></li>\n<li>故雨水容量为 <strong>min(height[i], height[j]) - height[k] * (j - i - 1)</strong></li>\n</ul>\n<h3 id=\"代码实现-1\"><a href=\"#代码实现-1\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">trap</span>(<span class=\"hljs-params\">self, height: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]</span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        <span class=\"hljs-comment\"># 遇到上一个更大更小问题，可以使用单调栈解决</span><br>        ans = <span class=\"hljs-number\">0</span><br>        stack = [] <span class=\"hljs-comment\"># 栈用于存放下标</span><br>        <span class=\"hljs-keyword\">for</span> i, h <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(height):<br>            <span class=\"hljs-keyword\">while</span> stack <span class=\"hljs-keyword\">and</span> h &gt; height[stack[-<span class=\"hljs-number\">1</span>]]:<br>                <span class=\"hljs-comment\"># 弹出栈顶下标的高度作为底</span><br>                bottom_h = height[stack.pop()]<br>                <span class=\"hljs-comment\"># 栈弹空了说明没有左边界，立刻跳出循环</span><br>                <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> stack:<br>                    <span class=\"hljs-keyword\">break</span><br>                <span class=\"hljs-comment\"># 栈顶为左边界</span><br>                left = stack[-<span class=\"hljs-number\">1</span>]<br>                <span class=\"hljs-comment\"># 左右边界高的较小值减去底高度，得到雨水的高度</span><br>                dh = <span class=\"hljs-built_in\">min</span>(height[left], h) - bottom_h<br>                <span class=\"hljs-comment\"># 累加雨水容量</span><br>                ans += dh * (i - left -<span class=\"hljs-number\">1</span>)<br>            stack.append(i)<br>        <span class=\"hljs-keyword\">return</span> ans<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-1\"><a href=\"#复杂度分析-1\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><ul>\n<li>时间复杂度：O(n)，其中 n 为 height 的长度。每个元素进栈一次，出栈一次</li>\n<li>空间复杂度：O(n)</li>\n</ul>\n"},{"title":"位运算","date":"2025-10-11T12:46:00.000Z","_content":"\n# 位运算\n\n## 目录\n- [位运算](#位运算)\n  - [目录](#目录)\n  - [仅含置位位的最小整数](#仅含置位位的最小整数)\n    - [题目描述](#题目描述)\n    - [解题思路](#解题思路)\n    - [代码实现](#代码实现)\n    - [复杂度分析](#复杂度分析)\n  - [使两个整数相等的位更改次数](#使两个整数相等的位更改次数)\n    - [题目描述](#题目描述-1)\n    - [解题思路](#解题思路-1)\n    - [代码实现](#代码实现-1)\n    - [复杂度分析](#复杂度分析-1)\n\n\n## 仅含置位位的最小整数\n\n### 题目描述\n给你一个正整数 n。\n\n返回 大于等于 n 且二进制表示仅包含 置位 位的 最小 整数 x 。\n\n置位 位指的是二进制表示中值为 1 的位。\n\n \n\n示例 1：\n\n输入： n = 5\n\n输出： 7\n\n解释：\n\n7 的二进制表示是 \"111\"。\n\n示例 2：\n\n输入： n = 10\n\n输出： 15\n\n解释：\n\n15 的二进制表示是 \"1111\"。\n\n示例 3：\n\n输入： n = 3\n\n输出： 3\n\n解释：\n\n3 的二进制表示是 \"11\"。\n\n \n\n提示：\n\n1 <= n <= 1000\n\n### 解题思路\n1. 朴素思路，从1开始遍历，直到第一个大于n的仅含置位位的整数，即遍历2的i次方减去1\n2. 进阶思路，直接计算n的二进制位数m，2的m次方减1，即为所求\n\n### 代码实现\n~~~python\n# 朴素思路\nclass Solution:\n    def smallestNumber(self, n: int) -> int:\n        i = 1\n        while(True):\n            # num >> i 即num除以2的i次方\n            x = (1 << i) - 1 # 左移位，即2的i次方\n            if x >= n:\n                return x\n            i += 1\n\n# 进阶思路\nclass Solution:\n    def smallestNumber(self, n: int) -> int:\n        return (1 << n.bit_length()) - 1\n~~~\n\n### 复杂度分析\n1. 朴素思路需要遍历 log(n)次，时间复杂度为 O(log(n))\n2. 进阶思路只需要计算n的二进制位数，时间复杂度为 O(1)\n\n\n## 使两个整数相等的位更改次数\n\n### 题目描述\n给你两个正整数 n 和 k。\n\n你可以选择 n 的 二进制表示 中任意一个值为 1 的位，并将其改为 0。\n\n返回使得 n 等于 k 所需要的更改次数。如果无法实现，返回 -1。\n\n \n\n示例 1：\n\n输入： n = 13, k = 4\n\n输出： 2\n\n解释：\n最初，n 和 k 的二进制表示分别为 n = (1101)2 和 k = (0100)2，\n\n我们可以改变 n 的第一位和第四位。结果整数为 n = (0100)2 = k。\n\n示例 2：\n\n输入： n = 21, k = 21\n\n输出： 0\n\n解释：\nn 和 k 已经相等，因此不需要更改。\n\n示例 3：\n\n输入： n = 14, k = 13\n\n输出： -1\n\n解释：\n无法使 n 等于 k。\n\n \n\n提示：\n\n1 <= n, k <= 106\n\n### 解题思路\n1. n只能改1为0，使用位运算思路\n2. 比如n = 14(1110)，k = 13(1101)，化为集合形式，n = {3,2,1}，k = {3,2,0}，k不是n的子集，则无法实现\n3. 比如n = 13(1101)，k = 4(0100)，化为集合形式，n = {3,2,0}，k = {2}，k是n的子集，n可以化为k\n4. 判断子集关系可以用以下方法\n    1. n & k == k\n    2. n | k == n\n5. 最后计算需要修改的位数，即异或运算的值\n\n### 代码实现\n~~~python\nclass Solution:\n    def minChanges(self, n: int, k: int) -> int:\n        # if n & k != k: # 只有k在n的子集中，才能使n改为k，即与运算等于k，或者或运算等于n\n        if n | k != n: \n            return -1\n        else:\n            return (n ^ k).bit_count() # 需要更改的数字为异或值\n~~~\n\n### 复杂度分析\n时间复杂度为 O(1)\n\n\n\n","source":"_posts/bit_calculate.md","raw":"---\ntitle: \"位运算\"\ndate: 2025-10-11 20:46:00\ntags: \n    - 算法\n    - 位运算\ncategories:\n    - 算法笔记\n---\n\n# 位运算\n\n## 目录\n- [位运算](#位运算)\n  - [目录](#目录)\n  - [仅含置位位的最小整数](#仅含置位位的最小整数)\n    - [题目描述](#题目描述)\n    - [解题思路](#解题思路)\n    - [代码实现](#代码实现)\n    - [复杂度分析](#复杂度分析)\n  - [使两个整数相等的位更改次数](#使两个整数相等的位更改次数)\n    - [题目描述](#题目描述-1)\n    - [解题思路](#解题思路-1)\n    - [代码实现](#代码实现-1)\n    - [复杂度分析](#复杂度分析-1)\n\n\n## 仅含置位位的最小整数\n\n### 题目描述\n给你一个正整数 n。\n\n返回 大于等于 n 且二进制表示仅包含 置位 位的 最小 整数 x 。\n\n置位 位指的是二进制表示中值为 1 的位。\n\n \n\n示例 1：\n\n输入： n = 5\n\n输出： 7\n\n解释：\n\n7 的二进制表示是 \"111\"。\n\n示例 2：\n\n输入： n = 10\n\n输出： 15\n\n解释：\n\n15 的二进制表示是 \"1111\"。\n\n示例 3：\n\n输入： n = 3\n\n输出： 3\n\n解释：\n\n3 的二进制表示是 \"11\"。\n\n \n\n提示：\n\n1 <= n <= 1000\n\n### 解题思路\n1. 朴素思路，从1开始遍历，直到第一个大于n的仅含置位位的整数，即遍历2的i次方减去1\n2. 进阶思路，直接计算n的二进制位数m，2的m次方减1，即为所求\n\n### 代码实现\n~~~python\n# 朴素思路\nclass Solution:\n    def smallestNumber(self, n: int) -> int:\n        i = 1\n        while(True):\n            # num >> i 即num除以2的i次方\n            x = (1 << i) - 1 # 左移位，即2的i次方\n            if x >= n:\n                return x\n            i += 1\n\n# 进阶思路\nclass Solution:\n    def smallestNumber(self, n: int) -> int:\n        return (1 << n.bit_length()) - 1\n~~~\n\n### 复杂度分析\n1. 朴素思路需要遍历 log(n)次，时间复杂度为 O(log(n))\n2. 进阶思路只需要计算n的二进制位数，时间复杂度为 O(1)\n\n\n## 使两个整数相等的位更改次数\n\n### 题目描述\n给你两个正整数 n 和 k。\n\n你可以选择 n 的 二进制表示 中任意一个值为 1 的位，并将其改为 0。\n\n返回使得 n 等于 k 所需要的更改次数。如果无法实现，返回 -1。\n\n \n\n示例 1：\n\n输入： n = 13, k = 4\n\n输出： 2\n\n解释：\n最初，n 和 k 的二进制表示分别为 n = (1101)2 和 k = (0100)2，\n\n我们可以改变 n 的第一位和第四位。结果整数为 n = (0100)2 = k。\n\n示例 2：\n\n输入： n = 21, k = 21\n\n输出： 0\n\n解释：\nn 和 k 已经相等，因此不需要更改。\n\n示例 3：\n\n输入： n = 14, k = 13\n\n输出： -1\n\n解释：\n无法使 n 等于 k。\n\n \n\n提示：\n\n1 <= n, k <= 106\n\n### 解题思路\n1. n只能改1为0，使用位运算思路\n2. 比如n = 14(1110)，k = 13(1101)，化为集合形式，n = {3,2,1}，k = {3,2,0}，k不是n的子集，则无法实现\n3. 比如n = 13(1101)，k = 4(0100)，化为集合形式，n = {3,2,0}，k = {2}，k是n的子集，n可以化为k\n4. 判断子集关系可以用以下方法\n    1. n & k == k\n    2. n | k == n\n5. 最后计算需要修改的位数，即异或运算的值\n\n### 代码实现\n~~~python\nclass Solution:\n    def minChanges(self, n: int, k: int) -> int:\n        # if n & k != k: # 只有k在n的子集中，才能使n改为k，即与运算等于k，或者或运算等于n\n        if n | k != n: \n            return -1\n        else:\n            return (n ^ k).bit_count() # 需要更改的数字为异或值\n~~~\n\n### 复杂度分析\n时间复杂度为 O(1)\n\n\n\n","slug":"bit_calculate","published":1,"updated":"2025-10-22T05:43:50.210Z","comments":1,"layout":"post","photos":[],"_id":"cmholdtpp0000lsu75mnj9w03","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><html><head></head><body><h1><span id=\"%E4%BD%8D%E8%BF%90%E7%AE%97\">位运算</span></h1><h2><span id=\"%E7%9B%AE%E5%BD%95\">目录</span></h2><ul>\n<li><a href=\"#%E4%BD%8D%E8%BF%90%E7%AE%97\">位运算</a><ul>\n<li><a href=\"#%E7%9B%AE%E5%BD%95\">目录</a></li>\n<li><a href=\"#%E4%BB%85%E5%90%AB%E7%BD%AE%E4%BD%8D%E4%BD%8D%E7%9A%84%E6%9C%80%E5%B0%8F%E6%95%B4%E6%95%B0\">仅含置位位的最小整数</a><ul>\n<li><a href=\"#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0\">题目描述</a></li>\n<li><a href=\"#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF\">解题思路</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</a></li>\n<li><a href=\"#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BD%BF%E4%B8%A4%E4%B8%AA%E6%95%B4%E6%95%B0%E7%9B%B8%E7%AD%89%E7%9A%84%E4%BD%8D%E6%9B%B4%E6%94%B9%E6%AC%A1%E6%95%B0\">使两个整数相等的位更改次数</a><ul>\n<li><a href=\"#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1\">题目描述</a></li>\n<li><a href=\"#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-1\">解题思路</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1\">代码实现</a></li>\n<li><a href=\"#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90-1\">复杂度分析</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2><span id=\"%E4%BB%85%E5%90%AB%E7%BD%AE%E4%BD%8D%E4%BD%8D%E7%9A%84%E6%9C%80%E5%B0%8F%E6%95%B4%E6%95%B0\">仅含置位位的最小整数</span></h2><h3><span id=\"%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0\">题目描述</span></h3><p>给你一个正整数 n。</p>\n<p>返回 大于等于 n 且二进制表示仅包含 置位 位的 最小 整数 x 。</p>\n<p>置位 位指的是二进制表示中值为 1 的位。</p>\n<p>示例 1：</p>\n<p>输入： n = 5</p>\n<p>输出： 7</p>\n<p>解释：</p>\n<p>7 的二进制表示是 \"111\"。</p>\n<p>示例 2：</p>\n<p>输入： n = 10</p>\n<p>输出： 15</p>\n<p>解释：</p>\n<p>15 的二进制表示是 \"1111\"。</p>\n<p>示例 3：</p>\n<p>输入： n = 3</p>\n<p>输出： 3</p>\n<p>解释：</p>\n<p>3 的二进制表示是 \"11\"。</p>\n<p>提示：</p>\n<p>1 &lt;= n &lt;= 1000</p>\n<h3><span id=\"%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF\">解题思路</span></h3><ol>\n<li>朴素思路，从1开始遍历，直到第一个大于n的仅含置位位的整数，即遍历2的i次方减去1</li>\n<li>进阶思路，直接计算n的二进制位数m，2的m次方减1，即为所求</li>\n</ol>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 朴素思路</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">smallestNumber</span>(<span class=\"hljs-params\">self, n: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        i = <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">while</span>(<span class=\"hljs-literal\">True</span>):<br>            <span class=\"hljs-comment\"># num &gt;&gt; i 即num除以2的i次方</span><br>            x = (<span class=\"hljs-number\">1</span> &lt;&lt; i) - <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\"># 左移位，即2的i次方</span><br>            <span class=\"hljs-keyword\">if</span> x &gt;= n:<br>                <span class=\"hljs-keyword\">return</span> x<br>            i += <span class=\"hljs-number\">1</span><br><br><span class=\"hljs-comment\"># 进阶思路</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">smallestNumber</span>(<span class=\"hljs-params\">self, n: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-number\">1</span> &lt;&lt; n.bit_length()) - <span class=\"hljs-number\">1</span><br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><ol>\n<li>朴素思路需要遍历 log(n)次，时间复杂度为 O(log(n))</li>\n<li>进阶思路只需要计算n的二进制位数，时间复杂度为 O(1)</li>\n</ol>\n<h2><span id=\"%E4%BD%BF%E4%B8%A4%E4%B8%AA%E6%95%B4%E6%95%B0%E7%9B%B8%E7%AD%89%E7%9A%84%E4%BD%8D%E6%9B%B4%E6%94%B9%E6%AC%A1%E6%95%B0\">使两个整数相等的位更改次数</span></h2><h3><span id=\"%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0\">题目描述</span></h3><p>给你两个正整数 n 和 k。</p>\n<p>你可以选择 n 的 二进制表示 中任意一个值为 1 的位，并将其改为 0。</p>\n<p>返回使得 n 等于 k 所需要的更改次数。如果无法实现，返回 -1。</p>\n<p>示例 1：</p>\n<p>输入： n = 13, k = 4</p>\n<p>输出： 2</p>\n<p>解释：<br>最初，n 和 k 的二进制表示分别为 n = (1101)2 和 k = (0100)2，</p>\n<p>我们可以改变 n 的第一位和第四位。结果整数为 n = (0100)2 = k。</p>\n<p>示例 2：</p>\n<p>输入： n = 21, k = 21</p>\n<p>输出： 0</p>\n<p>解释：<br>n 和 k 已经相等，因此不需要更改。</p>\n<p>示例 3：</p>\n<p>输入： n = 14, k = 13</p>\n<p>输出： -1</p>\n<p>解释：<br>无法使 n 等于 k。</p>\n<p>提示：</p>\n<p>1 &lt;= n, k &lt;= 106</p>\n<h3><span id=\"%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF\">解题思路</span></h3><ol>\n<li>n只能改1为0，使用位运算思路</li>\n<li>比如n = 14(1110)，k = 13(1101)，化为集合形式，n = {3,2,1}，k = {3,2,0}，k不是n的子集，则无法实现</li>\n<li>比如n = 13(1101)，k = 4(0100)，化为集合形式，n = {3,2,0}，k = {2}，k是n的子集，n可以化为k</li>\n<li>判断子集关系可以用以下方法<ol>\n<li>n &amp; k == k</li>\n<li>n | k == n</li>\n</ol>\n</li>\n<li>最后计算需要修改的位数，即异或运算的值</li>\n</ol>\n<h3><span id=\"%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</span></h3><figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">minChanges</span>(<span class=\"hljs-params\">self, n: <span class=\"hljs-built_in\">int</span>, k: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        <span class=\"hljs-comment\"># if n &amp; k != k: # 只有k在n的子集中，才能使n改为k，即与运算等于k，或者或运算等于n</span><br>        <span class=\"hljs-keyword\">if</span> n | k != n: <br>            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">else</span>:<br>            <span class=\"hljs-keyword\">return</span> (n ^ k).bit_count() <span class=\"hljs-comment\"># 需要更改的数字为异或值</span><br></code></pre></td></tr></tbody></table></figure>\n\n<h3><span id=\"%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</span></h3><p>时间复杂度为 O(1)</p>\n</body></html>","excerpt":"","more":"<h1 id=\"位运算\"><a href=\"#位运算\" class=\"headerlink\" title=\"位运算\"></a>位运算</h1><h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><ul>\n<li><a href=\"#%E4%BD%8D%E8%BF%90%E7%AE%97\">位运算</a><ul>\n<li><a href=\"#%E7%9B%AE%E5%BD%95\">目录</a></li>\n<li><a href=\"#%E4%BB%85%E5%90%AB%E7%BD%AE%E4%BD%8D%E4%BD%8D%E7%9A%84%E6%9C%80%E5%B0%8F%E6%95%B4%E6%95%B0\">仅含置位位的最小整数</a><ul>\n<li><a href=\"#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0\">题目描述</a></li>\n<li><a href=\"#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF\">解题思路</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">代码实现</a></li>\n<li><a href=\"#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90\">复杂度分析</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BD%BF%E4%B8%A4%E4%B8%AA%E6%95%B4%E6%95%B0%E7%9B%B8%E7%AD%89%E7%9A%84%E4%BD%8D%E6%9B%B4%E6%94%B9%E6%AC%A1%E6%95%B0\">使两个整数相等的位更改次数</a><ul>\n<li><a href=\"#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1\">题目描述</a></li>\n<li><a href=\"#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-1\">解题思路</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1\">代码实现</a></li>\n<li><a href=\"#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90-1\">复杂度分析</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"仅含置位位的最小整数\"><a href=\"#仅含置位位的最小整数\" class=\"headerlink\" title=\"仅含置位位的最小整数\"></a>仅含置位位的最小整数</h2><h3 id=\"题目描述\"><a href=\"#题目描述\" class=\"headerlink\" title=\"题目描述\"></a>题目描述</h3><p>给你一个正整数 n。</p>\n<p>返回 大于等于 n 且二进制表示仅包含 置位 位的 最小 整数 x 。</p>\n<p>置位 位指的是二进制表示中值为 1 的位。</p>\n<p>示例 1：</p>\n<p>输入： n &#x3D; 5</p>\n<p>输出： 7</p>\n<p>解释：</p>\n<p>7 的二进制表示是 &quot;111&quot;。</p>\n<p>示例 2：</p>\n<p>输入： n &#x3D; 10</p>\n<p>输出： 15</p>\n<p>解释：</p>\n<p>15 的二进制表示是 &quot;1111&quot;。</p>\n<p>示例 3：</p>\n<p>输入： n &#x3D; 3</p>\n<p>输出： 3</p>\n<p>解释：</p>\n<p>3 的二进制表示是 &quot;11&quot;。</p>\n<p>提示：</p>\n<p>1 &lt;&#x3D; n &lt;&#x3D; 1000</p>\n<h3 id=\"解题思路\"><a href=\"#解题思路\" class=\"headerlink\" title=\"解题思路\"></a>解题思路</h3><ol>\n<li>朴素思路，从1开始遍历，直到第一个大于n的仅含置位位的整数，即遍历2的i次方减去1</li>\n<li>进阶思路，直接计算n的二进制位数m，2的m次方减1，即为所求</li>\n</ol>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># 朴素思路</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">smallestNumber</span>(<span class=\"hljs-params\">self, n: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        i = <span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">while</span>(<span class=\"hljs-literal\">True</span>):<br>            <span class=\"hljs-comment\"># num &gt;&gt; i 即num除以2的i次方</span><br>            x = (<span class=\"hljs-number\">1</span> &lt;&lt; i) - <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\"># 左移位，即2的i次方</span><br>            <span class=\"hljs-keyword\">if</span> x &gt;= n:<br>                <span class=\"hljs-keyword\">return</span> x<br>            i += <span class=\"hljs-number\">1</span><br><br><span class=\"hljs-comment\"># 进阶思路</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">smallestNumber</span>(<span class=\"hljs-params\">self, n: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-number\">1</span> &lt;&lt; n.bit_length()) - <span class=\"hljs-number\">1</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析\"><a href=\"#复杂度分析\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><ol>\n<li>朴素思路需要遍历 log(n)次，时间复杂度为 O(log(n))</li>\n<li>进阶思路只需要计算n的二进制位数，时间复杂度为 O(1)</li>\n</ol>\n<h2 id=\"使两个整数相等的位更改次数\"><a href=\"#使两个整数相等的位更改次数\" class=\"headerlink\" title=\"使两个整数相等的位更改次数\"></a>使两个整数相等的位更改次数</h2><h3 id=\"题目描述-1\"><a href=\"#题目描述-1\" class=\"headerlink\" title=\"题目描述\"></a>题目描述</h3><p>给你两个正整数 n 和 k。</p>\n<p>你可以选择 n 的 二进制表示 中任意一个值为 1 的位，并将其改为 0。</p>\n<p>返回使得 n 等于 k 所需要的更改次数。如果无法实现，返回 -1。</p>\n<p>示例 1：</p>\n<p>输入： n &#x3D; 13, k &#x3D; 4</p>\n<p>输出： 2</p>\n<p>解释：<br>最初，n 和 k 的二进制表示分别为 n &#x3D; (1101)2 和 k &#x3D; (0100)2，</p>\n<p>我们可以改变 n 的第一位和第四位。结果整数为 n &#x3D; (0100)2 &#x3D; k。</p>\n<p>示例 2：</p>\n<p>输入： n &#x3D; 21, k &#x3D; 21</p>\n<p>输出： 0</p>\n<p>解释：<br>n 和 k 已经相等，因此不需要更改。</p>\n<p>示例 3：</p>\n<p>输入： n &#x3D; 14, k &#x3D; 13</p>\n<p>输出： -1</p>\n<p>解释：<br>无法使 n 等于 k。</p>\n<p>提示：</p>\n<p>1 &lt;&#x3D; n, k &lt;&#x3D; 106</p>\n<h3 id=\"解题思路-1\"><a href=\"#解题思路-1\" class=\"headerlink\" title=\"解题思路\"></a>解题思路</h3><ol>\n<li>n只能改1为0，使用位运算思路</li>\n<li>比如n &#x3D; 14(1110)，k &#x3D; 13(1101)，化为集合形式，n &#x3D; {3,2,1}，k &#x3D; {3,2,0}，k不是n的子集，则无法实现</li>\n<li>比如n &#x3D; 13(1101)，k &#x3D; 4(0100)，化为集合形式，n &#x3D; {3,2,0}，k &#x3D; {2}，k是n的子集，n可以化为k</li>\n<li>判断子集关系可以用以下方法<ol>\n<li>n &amp; k &#x3D;&#x3D; k</li>\n<li>n | k &#x3D;&#x3D; n</li>\n</ol>\n</li>\n<li>最后计算需要修改的位数，即异或运算的值</li>\n</ol>\n<h3 id=\"代码实现-1\"><a href=\"#代码实现-1\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Solution</span>:<br>    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">minChanges</span>(<span class=\"hljs-params\">self, n: <span class=\"hljs-built_in\">int</span>, k: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:<br>        <span class=\"hljs-comment\"># if n &amp; k != k: # 只有k在n的子集中，才能使n改为k，即与运算等于k，或者或运算等于n</span><br>        <span class=\"hljs-keyword\">if</span> n | k != n: <br>            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span><br>        <span class=\"hljs-keyword\">else</span>:<br>            <span class=\"hljs-keyword\">return</span> (n ^ k).bit_count() <span class=\"hljs-comment\"># 需要更改的数字为异或值</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-1\"><a href=\"#复杂度分析-1\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>时间复杂度为 O(1)</p>\n"},{"title":"MyCalendarApp 开发文档","date":"2025-10-28T00:26:38.143Z","_content":"\n# MyCalendarApp\n\n## 目录\n\n- [MyCalendarApp](#mycalendarapp)\n  - [目录](#目录)\n  - [kizitonwose/CalendarView 框架的使用](#kizitonwosecalendarview-框架的使用)\n    - [基本使用](#基本使用)\n    - [周视图功能细分](#周视图功能细分)\n      - [添加星期标题](#添加星期标题)\n      - [添加日期选择功能](#添加日期选择功能)\n      - [添加今日默认背景](#添加今日默认背景)\n      - [周的滚动切换](#周的滚动切换)\n      - [添加年月标题](#添加年月标题)\n  - [日程添加](#日程添加)\n    - [点击按钮打开日程添加表单](#点击按钮打开日程添加表单)\n    - [日程列表实现](#日程列表实现)\n    - [日程修改实现](#日程修改实现)\n\n\n## kizitonwose/CalendarView 框架的使用\n\n[回到目录](#目录)\n\n### 基本使用\n\n[回到上一级](#kizitonwosecalendarview-框架的使用)\n\n1. 添加依赖\n在 gradle/libs.versions.toml 中：\n\n~~~toml\n[versions]\nkizitonwose-calendar = \"2.9.0\"\n\n[libraries]\nkizitonwose-calendar = { module = \"com.kizitonwose.calendar:view\", version.ref = \"kizitonwose-calendar\" }\n~~~\n\n在 app/build.gradle.kts 中：\n\n~~~kotlin\ndependencies {\n    implementation(libs.kizitonwose.calendar)\n}\n~~~\n\n2. 创建日视图布局资源\n\n在layout中创建日视图布局资源，例如 calendar_day_layout.xml 来为日历中的每一天创建一个布局\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:tools=\"http://schemas.android.com/tools\">\n\n    <TextView\n        android:id=\"@+id/calendarDayText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:gravity=\"center\"\n        tools:text=\"22\"/>\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n~~~\n\n3. 创建 ViewContainer 类\n\n为每个视图类型创建容器类来持有视图元素\n\n月视图容器 (MonthDayViewContainer.kt)：\n\n~~~kotlin\nclass MonthDayViewContainer(view: View) : ViewContainer(view) {\n    val textView: TextView = view.findViewById(R.id.calendarDayText)\n}\n~~~\n\n周视图容器 (DayViewContainer.kt)：\n\n~~~kotlin\nclass DayViewContainer(view: View) : ViewContainer(view) {\n    val textView: TextView = view.findViewById<TextView>(R.id.calendarDayText)\n}\n~~~\n\n4. 创建 ViewBinder 类\n\n创建绑定器类来控制如何显示日历中的每一天\n\n月视图绑定器 (MonthDayViewBinder.kt)：\n\n~~~kotlin\nclass MonthDayViewBinder : MonthDayBinder<MonthDayViewContainer> {\n    override fun create(view: View) = MonthDayViewContainer(view)\n\n    override fun bind(container: MonthDayViewContainer, data: CalendarDay) {\n        container.textView.text = data.date.dayOfMonth.toString()\n        \n        // 根据日期是否属于当前月份设置不同的透明度\n        if (data.position == DayPosition.MonthDate) {\n            container.textView.alpha = 1f\n        } else {\n            container.textView.alpha = 0.3f\n        }\n    }\n}\n~~~\n\n周视图绑定器 (WeekViewBinder.kt)：\n\n~~~kotlin\nclass WeekViewBinder: WeekDayBinder<DayViewContainer> {\n    override fun create(view: View): DayViewContainer = DayViewContainer(view)\n\n    override fun bind(\n        container: DayViewContainer,\n        data: WeekDay\n    ) {\n        container.textView.text = data.date.dayOfMonth.toString()\n    }\n}\n~~~\n\n5. 创建 Fragment 布局\n\n月视图布局 (fragment_month_view.xml)：\n\n~~~xml\n<com.kizitonwose.calendar.view.CalendarView\n    android:id=\"@+id/month_calendar_view\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    app:cv_dayViewResource=\"@layout/calendar_day_layout\"/>\n~~~\n\n周视图布局 (fragment_week_view.xml)：\n\n~~~xml\n<com.kizitonwose.calendar.view.WeekCalendarView\n    android:id=\"@+id/week_calendar_view\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    app:cv_dayViewResource=\"@layout/calendar_day_layout\"/>\n~~~\n\n6. 实现 Fragment 逻辑\n\n月视图 Fragment (MonthViewFragment.kt)：\n\n~~~kotlin\nclass MonthViewFragment : Fragment() {\n    private var _binding: FragmentMonthViewBinding? = null\n    private val binding get() = _binding!!\n\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        _binding = FragmentMonthViewBinding.inflate(inflater, container, false)\n        return binding.root\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        setupMonthView()\n    }\n\n    private fun setupMonthView() {\n        val currentDate = LocalDate.now()\n        val currentMonth = YearMonth.now()\n        val startMonth = currentMonth.minusMonths(100)\n        val endMonth = currentMonth.plusMonths(100)\n        val firstDayOfWeek = firstDayOfWeekFromLocale()\n\n        binding.monthCalendarView.dayBinder = MonthDayViewBinder()\n        binding.monthCalendarView.setup(startMonth, endMonth, firstDayOfWeek)\n        binding.monthCalendarView.scrollToMonth(currentMonth)\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        _binding = null\n    }\n}\n~~~\n\n周视图 Fragment (WeekViewFragment.kt)：\n\n~~~kotlin\nclass WeekViewFragment: Fragment() {\n    private var _binding: FragmentWeekViewBinding? = null\n    private val binding get() = _binding!!\n\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        _binding = FragmentWeekViewBinding.inflate(inflater, container, false)\n        return binding.root\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        setupWeekView()\n    }\n\n    private fun setupWeekView(){\n        val currentDate = LocalDate.now()\n        \n        val weekCalendarView = binding.weekCalendarView\n        weekCalendarView.dayBinder = WeekViewBinder()\n        \n        val currentMonth = YearMonth.now()\n        val startMonth = currentMonth.minusMonths(100)\n        val endMonth = currentMonth.plusMonths(100) \n        val firstDayOfWeek = firstDayOfWeekFromLocale()\n        \n        weekCalendarView.setup(startMonth.atDay(1), endMonth.atEndOfMonth(), firstDayOfWeek)\n        weekCalendarView.scrollToWeek(currentDate)\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        _binding = null\n    }\n}\n~~~\n\n至此，就完成了基于kizitonwose/CalendarView的日历视图的基本使用\n\n### 周视图功能细分\n\n[回到上一级](#kizitonwosecalendarview-框架的使用)\n\n#### 添加星期标题\n\n1. 在layout中创建calendar_day_title_text.xml定义**单个**星期标题的样式\n\n~~~xml\n<TextView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:layout_weight=\"1\"\n    android:layout_gravity=\"center\"\n    android:gravity=\"center\"\n    android:padding=\"8dp\"\n    android:textSize=\"12sp\" />\n~~~\n\n2. 同目录下创建calendar_day_titles_container.xml，使用**水平线性布局**，包含七个上一步创建的星期标题，代表一周七天\n\n~~~xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:weightSum=\"7\"\n    android:orientation=\"horizontal\">\n\n    <include layout=\"@layout/calendar_day_title_text\"/>\n    <!-- 重复6次 -->\n</LinearLayout>\n~~~\n\n3. 将上一步的容器引入fragment_week_view.xml中\n\n~~~xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:orientation=\"vertical\">\n\n    <include\n        android:id=\"@+id/titlesContainer\"\n        layout=\"@layout/calendar_day_titles_container\" />\n\n    <!-- 周视图日历控件，用于显示一周的日期 -->\n    <com.kizitonwose.calendar.view.WeekCalendarView\n        android:id=\"@+id/week_calendar_view\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:cv_dayViewResource=\"@layout/calendar_day_layout\"/>\n\n</LinearLayout>\n~~~\n\n4. 在 WeekViewFragment.kt 中，通过 setDayOfWeekTitles() 方法动态设置星期标题文本\n\n~~~kotlin\n...\nprivate fun setupWeekView(){\n        ...\n        \n        val weekCalendarView = binding.weekCalendarView\n        weekCalendarView.dayBinder = weekViewBinder\n        \n        // 获取标题容器并设置星期标题\n        setDayOfWeekTitles()\n        \n        ...\n    }\n\nprivate fun setDayOfWeekTitles() {\n    // 获取标题容器\n    val titlesContainer = binding.root.findViewById<ViewGroup>(R.id.titlesContainer)\n    \n    // 遍历每个标题容器并设置文本\n    titlesContainer.children\n        .map { it as TextView }\n        .forEachIndexed { index, textView ->\n            val dayOfWeek = daysOfWeek()[index]\n            val title = dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.getDefault())\n            textView.text = title\n            textView.gravity = Gravity.CENTER\n        }\n}\n~~~\n\n至此，添加星期标题功能完成\n\n#### 添加日期选择功能\n\n1. 在presentation/calendarContainer/下的DayViewContainer.kt中**添加**点击监听器\n\n~~~kotlin\nclass DayViewContainer(view: View) : ViewContainer(view) {\n    ...\n\n    // 添加一个函数来设置点击监听器\n    fun setOnClickListener(listener: (View) -> Unit) {\n        textView.setOnClickListener(listener)\n    }\n\n    ...\n}\n~~~\n\n其中listener参数是一个**函数类型**，是以View为参数，且返回值为Unit(void,即无返回值)的函数\n\n2. 在presentation/calendarBinder/WeekViewBinder.kt中**设置**点击监听器\n\n~~~kotlin\nclass WeekViewBinder: WeekDayBinder<DayViewContainer> {\n    \n    ...\n\n    override fun bind(\n        container: DayViewContainer,\n        data: WeekDay\n    ) {\n        container.textView.text = data.date.dayOfMonth.toString()\n\n        // 设置点击监听器\n        container.setOnClickListener {\n            selectedDate = data.date\n            onDateClickListener?.invoke(data)\n        }\n\n        ...\n    }\n}\n~~~\n\n其中`?.invoke` 是一个**可选调用**，用于调用一个可能为 null 的函数。如果函数不为 null，则调用它，否则不执行任何操作。\n这里只有点击日期时才触发点击回调data，并更新选中日期的视觉效果\n\n3. 在 presentation/ui/calendar/WeekViewFragment.kt 中设置点击回调\n\n~~~kotlin\nclass WeekViewFragment: Fragment() {\n    \n    ...\n\n    private fun setupWeekView(){\n        val currentDate = LocalDate.now()\n        \n        // 步骤3：在Fragment中设置点击回调\n        val weekViewBinder = WeekViewBinder()\n        weekViewBinder.onDateClickListener = { weekDay ->\n            // 处理点击事件\n            Toast.makeText(context, \"Clicked: ${weekDay.date}\", Toast.LENGTH_SHORT).show()\n            // 更新选中日期的视觉效果\n            weekViewBinder.selectDate(weekDay.date)\n            // 通知日历重新绘制以更新选中状态\n            binding.weekCalendarView.notifyCalendarChanged()\n        }\n        \n        val weekCalendarView = binding.weekCalendarView\n        weekCalendarView.dayBinder = weekViewBinder\n        \n        ...\n\n    }\n}\n~~~\n\n4. 在presentation/calendarBinder/WeekViewBinder.kt中添加选中日期的追踪\n\n~~~kotlin\nclass WeekViewBinder: WeekDayBinder<DayViewContainer> {\n\n    ...\n\n    override fun bind(\n        container: DayViewContainer,\n        data: WeekDay\n    ) {\n        container.textView.text = data.date.dayOfMonth.toString()\n\n        // 设置点击监听器\n        container.setOnClickListener {\n            selectedDate = data.date\n            onDateClickListener?.invoke(data)\n        }\n\n        // 更新选中的视觉效果\n        if (selectedDate == data.date) {\n            container.textView.setBackgroundResource(R.drawable.modern_selected_date_ripple)\n            // 选中日期使用白色文字以便在洋红色背景上清晰可见\n            container.textView.setTextColor(Color.WHITE)\n        } else {\n            container.textView.background = null\n            // 非选中日期使用黑色文字\n            container.textView.setTextColor(Color.BLACK)\n        }\n    }\n}\n~~~\n\n这里的背景资源需要自行创建\n\n#### 添加今日默认背景\n\n[回到上一级](#周视图功能细分)\n\n1. 在presentation/calendarBinder/WeekViewBinder.kt的bind()方法中获取今天的日期\n\n~~~kotlin\nval today = LocalDate.now()\n~~~\n\n2. 在presentation/calendarBinder/WeekViewBinder.kt的bind()方法中判断当前日期是否为今天，如果是则设置背景\n\n完整方法\n~~~kotlin\noverride fun bind(\n        container: DayViewContainer,\n        data: WeekDay\n    ) {\n        container.textView.text = data.date.dayOfMonth.toString()\n\n        // 设置点击监听器\n        container.setOnClickListener {\n            selectedDate = data.date\n            onDateClickListener?.invoke(data)\n        }\n\n        // 获取今天的日期\n        val today = LocalDate.now()\n        \n        // 更新选中的视觉效果\n        if (selectedDate == data.date) {\n            container.textView.setBackgroundResource(R.drawable.modern_selected_date_ripple)\n            // 选中日期使用白色文字以便在洋红色背景上清晰可见\n            container.textView.setTextColor(Color.WHITE)\n        } else if (data.date == today) {\n            // 今天的日期使用与选中日期相同形状的背景高亮显示\n            container.textView.setBackgroundResource(R.drawable.modern_today_background)\n            container.textView.setTextColor(Color.BLACK)\n        } else {\n            container.textView.background = null\n            // 非选中日期使用黑色文字\n            container.textView.setTextColor(Color.BLACK)\n        }\n    }\n~~~\n\n背景资源需要自行创建\n\n#### 周的滚动切换\n\n[回到上一级](#周视图功能细分)\n\n1. 在WeekViewFragment.kt中的setupWeekView()方法内添加滚动监听器，并实现更新逻辑\n\n* 添加**滚动监听器**\n~~~kotlin\nprivate fun setupWeekView(){\n        ...\n        \n        val weekCalendarView = binding.weekCalendarView\n        weekCalendarView.dayBinder = weekViewBinder\n\n        // 添加滚动监听器以同步星期标题\n        weekCalendarView.weekScrollListener = { weekStart ->\n            // 更新星期标题以匹配当前周\n            updateDayOfWeekTitles(weekStart.days.first().date)\n            // 更新年月标题\n            // updateMonthYearHeader(weekStart.days.first().date)\n        }\n\n        // 获取标题容器并设置星期标题\n        setDayOfWeekTitles()\n        \n        ...\n    }\n~~~\n\n* 实现更新逻辑 **updateDayOfWeekTitles()**\n~~~kotlin\n/**\n     * 更新星期标题\n     *\n     * @param date 当前周的起始日期\n     */\n    private fun updateDayOfWeekTitles(date: LocalDate) {\n        val titlesContainer = binding.root.findViewById<ViewGroup>(R.id.titlesContainer)\n\n        // 计算指定日期所在周到起始日期\n        val firstDayOfWeek = firstDayOfWeekFromLocale()\n        val weekStart = date.minusDays(date.dayOfWeek.ordinal.toLong())\n            .plusDays(firstDayOfWeek.ordinal.toLong())\n            .minusDays(if (firstDayOfWeek.ordinal <= date.dayOfWeek.ordinal) 0 else 7)\n\n        // 更新每个标题党文本\n        titlesContainer.children\n            .map { it as TextView }\n            .forEachIndexed { index, textView ->\n                val currentDay = weekStart.plusDays(index.toLong())\n                val title = currentDay.dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.getDefault())\n                textView.text = title\n            }\n    }\n~~~\n\n其中,计算逻辑：\n  1. date.dayOfWeek.ordinal：获取指定日期是星期几（星期一为0，星期日为6）\n  2. date.minusDays(date.dayOfWeek.ordinal.toLong())：从指定日期减去对应的天数，得到该周的星期一\n  3. plusDays(firstDayOfWeek.ordinal.toLong())：加上本地化星期起始日的偏移量\n  4. minusDays(if (firstDayOfWeek.ordinal <= date.dayOfWeek.ordinal) 0 else 7)：如果本地化星期起始日在指定日期的星期几之前或当天，则不需要调整否则需要减去7天以得到正确的周起始日\n\n2. 在fragment_week_view.xml中的周视图日历控件中添加属性，优化滑动效果\n\n~~~xml\n<!-- 将app:cv_scrollPaged=\"true\"添加到WeekCalendarView控件中 -->\n<com.kizitonwose.calendar.view.WeekCalendarView\n        android:id=\"@+id/week_calendar_view\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:cv_dayViewResource=\"@layout/calendar_day_layout\"\n        app:cv_scrollPaged=\"true\"/>\n~~~\n\n#### 添加年月标题\n\n[回到上一级](#周视图功能细分)\n\n1. 首先需要修改 fragment_week_view.xml 文件，添加年月标题：\n\n~~~xml\n<!-- 添加年月标题 -->\n    <TextView\n        android:id=\"@+id/monthYearHeader\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:gravity=\"center\"\n        android:textSize=\"18sp\"\n        android:textStyle=\"bold\"\n        android:padding=\"8dp\"\n        android:textColor=\"@color/black\"\n        tools:text=\"2023年10月\" />\n~~~\n\n2. 在 WeekViewFragment.kt 中添加年月标题的处理逻辑：\n\n* 在类中添加年月标题变量声明\n~~~kotlin\n// 添加年月标题变量声明\nprivate lateinit var monthYearHeader: TextView\n~~~\n\n* 在 setupWeekView() 方法中初始化年月标题变量\n~~~kotlin\n// 初始化年月标题\nmonthYearHeader = binding.root.findViewById<TextView>(R.id.monthYearHeader)\n~~~\n\n* 在 setupWeekView() 方法中的滚动监听器中同步更新年月标题\n~~~kotlin\n// 添加滚动监听器以同步星期标题\nweekCalendarView.weekScrollListener = { weekStart ->\n    // 更新星期标题以匹配当前周\n    updateDayOfWeekTitles(weekStart.days.first().date)\n    // 更新年月标题\n    updateMonthYearHeader(weekStart.days.first().date)\n    }\n~~~\n\n3. 实现更新逻辑 **updateMonthYearHeader()**\n\n~~~kotlin\n/**\n * 更新年月标题\n *\n * @param date 当前周的起始日期\n */\nprivate fun updateMonthYearHeader(date: LocalDate) {\n    val formatter = DateTimeFormatter.ofPattern(\"yyyy年MM月\")\n    val monthYearText = date.format(formatter)\n\n    // 如果文本没变化，不更新\n    if (monthYearHeader.text.toString() == monthYearText){\n        return\n    }\n\n    monthYearHeader.text = monthYearText\n}\n~~~\n\n## 日程添加\n\n[回到目录](#目录)\n\n### 点击按钮打开日程添加表单\n\n[回到上一级](#日程添加)\n\n1. 在layout中准备表单界面 dialog_add_event.xml\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\n<!-- 添加日程表格 -->\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\"\n    android:padding=\"16dp\">\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"添加日程\"\n        android:textSize=\"20sp\"\n        android:textStyle=\"bold\"\n        android:gravity=\"center\"\n        android:layout_marginBottom=\"16dp\"/>\n\n    <com.google.android.material.textfield.TextInputLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\">\n\n        <com.google.android.material.textfield.TextInputEditText\n            android:id=\"@+id/editTextDate\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"日期\"\n            android:focusable=\"false\"\n            android:clickable=\"true\"/>\n    </com.google.android.material.textfield.TextInputLayout>\n\n    <com.google.android.material.textfield.TextInputLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\">\n\n        <com.google.android.material.textfield.TextInputEditText\n            android:id=\"@+id/editTextTitle\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"日程标题\"/>\n    </com.google.android.material.textfield.TextInputLayout>\n\n    <com.google.android.material.textfield.TextInputLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\">\n\n        <com.google.android.material.textfield.TextInputEditText\n            android:id=\"@+id/editTextContent\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"日程内容\"\n            android:minLines=\"3\"/>\n    </com.google.android.material.textfield.TextInputLayout>\n\n    <com.google.android.material.textfield.TextInputLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"16dp\">\n\n        <com.google.android.material.textfield.TextInputEditText\n            android:id=\"@+id/editTextReminder\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"提醒时间\"\n            android:focusable=\"false\"\n            android:clickable=\"true\"/>\n    </com.google.android.material.textfield.TextInputLayout>\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\"\n        android:gravity=\"end\">\n\n        <Button\n            android:id=\"@+id/buttonCancel\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"取消\"\n            style=\"@style/Widget.MaterialComponents.Button.TextButton\"/>\n\n        <Button\n            android:id=\"@+id/buttonConfirm\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"确认\"\n            style=\"@style/Widget.MaterialComponents.Button.TextButton\"/>\n    </LinearLayout>\n\n</LinearLayout>\n~~~\n\n* 其中，TextInputLayout 相比于传统的 EditText 增加了很多功能\n  * 浮动标签：提示词在输入内容后不会消失，而是显示于左上方中\n  * 错误提示：可以方便地显示错误信息，帮助用户理解输入要求\n  * 辅助文本：支持显示帮助文本或字符计数等辅助信息\n  * 图标支持：可以在文本框内添加前缀、后缀图标\n* 每个 TextInputLayout 都围起一个 TextInputEditText 子元素\n  * 属性 focusable=\"false\" 表明该元素不能获得焦点，即不通过键盘直接输入\n  * 属性 clickable=\"true\" 表明该元素可以通过点击触发，通过触发事件，间接输入到输入框中\n\n2. 在MainActivity中添加点击按钮打开表单的逻辑\n\n   1. 在onCreate()方法中调用 **setupFloatingActionButton()** 方法\n   2. 在MainActivity类内实现 **setupFloatingActionButton()** 方法\n\n        ~~~kotlin\n        private fun setupFloatingActionButton() {\n            binding.fabAddEvent.setOnClickListener {\n                showAddEventDialog()\n            }\n        }\n        ~~~\n        * 绑定FAB按钮触发点击事件\n        * 通过点击事件触发显示表单方法 **showAddEventDialog()**\n\n   3. 实现 showAddEventDialog() 方法\n      1. 创建对话框\n        ~~~kotlin\n            private fun showAddEventDialog() {\n                \n                // 1. 创建对话框\n                val builder = AlertDialog.Builder(this)\n                val inflater = layoutInflater\n                val dialogView = inflater.inflate(R.layout.dialog_add_event, null)\n                builder.setView(dialogView)\n\n                val dialog = builder.create()\n        ~~~\n        * 使用 AlertDialog.Builder 创建**对话框构建器**\n        * 通过 layoutInflater 加载 dialog_add_event.xml 布局文件\n        * 将加载的视图设置为对话框的内容视图\n        * 通过 builder.create() 创建**实际的对话框对象**\n\n      2. 获取对话框中的UI组件\n      ~~~kotlin\n              // 2. 查找对话框中的UI组件\n              val editTextDate = dialogView.findViewById<TextInputEditText>(R.id.editTextDate)\n              val editTextTitle = dialogView.findViewById<TextInputEditText>(R.id.editTextTitle)\n              val editTextContent = dialogView.findViewById<TextInputEditText>(R.id.editTextContent)\n              val editTextReminder = dialogView.findViewById<TextInputEditText>(R.id.editTextReminder)\n              val buttonCancel = dialogView.findViewById<Button>(R.id.buttonCancel)\n              val buttonConfirm = dialogView.findViewById<Button>(R.id.buttonConfirm)\n      ~~~\n      3. 设置默认日期和日期选择器\n      ~~~kotlin\n              // 3. 设置默认日期为今天，若有选择的日期，则使用选择的日期\n              val selectedDate = getSelectedDate()\n              val defaultDate = selectedDate ?: LocalDate.now() // 若无选择日期，则使用今天\n              val formatter = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\") // 日期格式\n              editTextDate.setText(defaultDate.format(formatter)) // 设置默认日期\n\n              // 设置日期选择器\n              editTextDate.setOnClickListener {\n                  showDatePicker(editTextDate)\n              }\n\n              // 设置提醒时间选择器\n              editTextReminder.setOnClickListener {\n                  showTimePicker(editTextReminder)\n              }\n      ~~~\n      4. 设置按钮并显示对话框\n      ~~~kotlin\n              // 设置取消按钮\n              buttonCancel.setOnClickListener {\n                  dialog.dismiss()\n              }\n\n              // 设置确认按钮\n              buttonConfirm.setOnClickListener {\n                  val title = editTextTitle.text.toString()\n                  val content = editTextContent.text.toString()\n                  val date = editTextDate.text.toString()\n                  val reminder = editTextReminder.text.toString()\n\n                  // 处理添加事件逻辑\n                  Toast.makeText(this, \"日程已添加\", Toast.LENGTH_SHORT).show()\n                  dialog.dismiss()\n              }\n              \n              // 显示对话框\n              dialog.show()\n          }\n      ~~~\n\n   4. 实现 showDatePicker() 方法和 showTimePicker() 方法\n      1. 实现 showTimePicker() 方法\n      ~~~kotlin\n          private fun showTimePicker(editTextReminder: TextInputEditText) {\n              // 创建时间选择器对象\n              val timePicker = TimePickerDialog(\n                  this,\n                  {_, hourOfDay, minute ->\n                      val selectedTime = String.format(\"%02d:%02d\", hourOfDay, minute) // 将时间格式化为HH:mm\n                      editTextReminder.setText(selectedTime) // 设置选中的时间\n                  },\n                  9, // 默认选中的时间为9:00\n                  0,\n                  true // 是否使用24小时制\n              )\n              timePicker.show()\n          }\n      ~~~\n\n      2. 实现 showDatePicker() 方法\n\n      ~~~kotlin\n          private fun showDatePicker(editTextDate: TextInputEditText) {\n              val today = LocalDate.now()\n              val datePicker = DatePickerDialog(\n                  this,\n                  {_, year, month, dayOfMonth ->\n                      val selectedDate = LocalDate.of(year, month + 1, dayOfMonth) // 创建选中日期的 LocalDate 对象（需要将月份+1，因为DatePicker的月份是从0开始的）\n                      val formatter = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\") // 日期格式\n                      editTextDate.setText(selectedDate.format(formatter)) // 显示选中的日期\n                  },\n                  today.year, \n                  today.monthValue - 1, // month: today.monthValue - 1 - 日期选择器的初始月份设置为当前月份（需要减1，因为DatePicker的月份是从0开始的）\n                  today.dayOfMonth\n              )\n              datePicker.show()\n          }\n      ~~~\n\n   5. 实现 getSelectedDate() 方法\n   ~~~kotlin\n       private fun getSelectedDate(): LocalDate?{\n           val viewPager = binding.viewPager\n           val currentFragment = supportFragmentManager.findFragmentByTag(\"f\" + viewPager.currentItem)\n\n           return when(currentFragment){\n               is DayViewFragment -> {\n                   // 从日视图中获取选中日期\n                   null\n               }\n               is WeekViewFragment -> {\n                   // 从周视图中获取选中日期\n                   currentFragment.getSelectedDate()\n               }\n               is MonthViewFragment -> {\n                   // 从月视图中获取选中日期\n                   currentFragment.getSelectedDate()\n               }\n               else -> null\n           }\n       }\n   ~~~\n   * 首先通过 binding.viewPager 获取应用中的**ViewPager组件**\n   * 通过 viewPager.currentItem 获取当前显示页面的**索引**\n   * 使用 supportFragmentManager.findFragmentByTag(\"f\" + viewPager.currentItem) 根据标签查找当前Fragment\n     * ViewPager2会自动为每个页面的Fragment分配标签，格式为 **\"f\"+页面索引**\n     * 这样就可以获取到当前显示的具体Fragment实例\n\n3. 在 MonthViewFragment 和 WeekViewFragment 中添加 getSelectedDate() 方法\n\n   * MonthViewFragment 的 getSelectedDate() 方法实现如下：\n\n   ~~~kotlin\n       fun getSelectedDate(): LocalDate?{\n           val monthViewBinder = binding.monthCalendarView.dayBinder as? MonthDayViewBinder // 将 dayBinder 安全转换为 MonthDayViewBinder\n           return  monthViewBinder?.getSelectedDate()\n       }\n   ~~~\n\n\n   * WeekViewFragment 的 getSelectedDate() 方法实现如下：\n   ~~~kotlin\n       fun getSelectedDate(): LocalDate?{\n           // 获取 WeekViewBinder 实例并返回其选中的日期\n           val weekViewBinder = binding.weekCalendarView.dayBinder as? WeekViewBinder // 将 dayBinder 安全转换为WeekViewBinder\n           return weekViewBinder?.getSelectedDate()\n       }\n   ~~~\n\n4. 在 WeekViewBinder 和 MonthDayViewBinder 中分别实现在其fragment中调用的 getSelectedDate() 方法\n\n* WeekViewBinder 的 getSelectedDate() 方法实现如下：\n\n~~~kotlin\n    fun getSelectedDate(): LocalDate?{\n        return selectedDate\n    }\n~~~\n\n* MonthDayViewBinder 的 getSelectedDate() 方法实现如下：\n\n~~~kotlin\n    fun getSelectedDate(): LocalDate?{\n        return selectedDate\n    }\n~~~\n\n至此，我们可以通过按钮打开添加日程的表单，并选择日期和时间，添加内容\n\n### 日程列表实现\n\n1. 创建日程卡片视图 item_event_card.xml\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- 日程卡片布局 -->\n<com.google.android.material.card.MaterialCardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_margin=\"8dp\"\n    app:cardCornerRadius=\"12dp\"\n    app:cardElevation=\"4dp\"\n    app:strokeWidth=\"0dp\">\n\n    <androidx.constraintlayout.widget.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"16dp\">\n\n        <!-- 事件颜色标识 -->\n        <View\n            android:id=\"@+id/eventColorIndicator\"\n            android:layout_width=\"6dp\"\n            android:layout_height=\"0dp\"\n            android:background=\"@color/magenta_500\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"/>\n\n        <!-- 事件标题 -->\n        <TextView\n            android:id=\"@+id/eventTitle\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"12dp\"\n            android:layout_marginEnd=\"8dp\"\n            android:text=\"事件标题\"\n            android:textAppearance=\"@style/TextAppearance.Material3.TitleMedium\"\n            android:textColor=\"?attr/colorOnSurface\"\n            app:layout_constraintEnd_toStartOf=\"@+id/editEventButton\"\n            app:layout_constraintStart_toEndOf=\"@+id/eventColorIndicator\"\n            app:layout_constraintTop_toTopOf=\"parent\"/>\n\n        <!-- 事件内容摘要 -->\n        <TextView\n            android:id=\"@+id/eventContent\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"4dp\"\n            android:ellipsize=\"end\"\n            android:maxLines=\"1\"\n            android:text=\"事件内容摘要，超出十个字显示省略号\"\n            android:textAppearance=\"@style/TextAppearance.Material3.BodyMedium\"\n            android:textColor=\"?attr/colorOnSurface\"\n            app:layout_constraintEnd_toEndOf=\"@+id/eventTitle\"\n            app:layout_constraintStart_toStartOf=\"@+id/eventTitle\"\n            app:layout_constraintTop_toBottomOf=\"@+id/eventTitle\"/>\n\n        <!-- 时间信息 -->\n        <TextView\n            android:id=\"@+id/eventTime\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"持续时间\"\n            android:textAppearance=\"@style/TextAppearance.Material3.BodySmall\"\n            android:textColor=\"?attr/colorOnSurfaceVariant\"\n            app:layout_constraintEnd_toEndOf=\"@+id/eventTitle\"\n            app:layout_constraintStart_toStartOf=\"@+id/eventTitle\"\n            app:layout_constraintTop_toBottomOf=\"@+id/eventContent\"/>\n\n        <!-- 提醒时间 -->\n        <TextView\n            android:id=\"@+id/eventReminder\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"4dp\"\n            android:drawableStart=\"@drawable/ic_notification\"\n            android:drawablePadding=\"4dp\"\n            android:text=\"提前15分钟提醒\"\n            android:textAppearance=\"@style/TextAppearance.Material3.BodySmall\"\n            android:textColor=\"?attr/colorOnSurfaceVariant\"\n            app:layout_constraintEnd_toEndOf=\"@+id/eventTitle\"\n            app:layout_constraintStart_toStartOf=\"@+id/eventTitle\"\n            app:layout_constraintTop_toBottomOf=\"@+id/eventTime\" />\n\n        <!-- 编辑按钮 -->\n        <ImageButton\n            android:id=\"@+id/editEventButton\"\n            android:layout_width=\"36dp\"\n            android:layout_height=\"36dp\"\n            android:layout_marginEnd=\"8dp\"\n            android:background=\"?attr/selectableItemBackgroundBorderless\"\n            android:contentDescription=\"编辑事件\"\n            android:src=\"@drawable/ic_edit\"\n            app:layout_constraintEnd_toStartOf=\"@+id/eventCompletedCheckbox\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:tint=\"?attr/colorOnSurfaceVariant\" />\n\n        <!-- 完成状态复选框 -->\n        <CheckBox\n            android:id=\"@+id/eventCompletedCheckbox\"\n            android:layout_width=\"36dp\"\n            android:layout_height=\"36dp\"\n            android:layout_marginEnd=\"8dp\"\n            app:layout_constraintEnd_toStartOf=\"@+id/deleteEventButton\"\n            app:layout_constraintTop_toTopOf=\"parent\" />\n\n        <!-- 删除按钮 -->\n        <ImageButton\n            android:id=\"@+id/deleteEventButton\"\n            android:layout_width=\"36dp\"\n            android:layout_height=\"36dp\"\n            android:background=\"?attr/selectableItemBackgroundBorderless\"\n            android:contentDescription=\"删除事件\"\n            android:src=\"@drawable/ic_delete\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:tint=\"?attr/colorError\" />\n    </androidx.constraintlayout.widget.ConstraintLayout>\n</com.google.android.material.card.MaterialCardView>\n~~~\n* **MaterialCardView** 是 Google Material Design 组件库中的一个核心 UI 组件，它是一个现代化的**卡片视图**实现\n\n2. 修改日视图 fragment_day_view.xml\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!--\n    日视图 Fragment 的布局文件\n    包含标题和日视图内容区域\n-->\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:orientation=\"vertical\">\n\n    <!-- 日视图标题文本 -->\n    <TextView\n        android:id=\"@+id/dayHeaderText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"16dp\"\n        android:text=\"日视图\"\n        android:textAlignment=\"center\"\n        android:textAppearance=\"@style/TextAppearance.Material3.HeadlineSmall\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"/>\n\n    <!-- 无事件提示 -->\n    <TextView\n        android:id=\"@+id/noEventText\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"32dp\"\n        android:text=\"今天暂无事件\"\n        android:textAppearance=\"@style/TextAppearance.Material3.BodyLarge\"\n        android:textColor=\"?attr/colorOnSurfaceVariant\"\n        android:visibility=\"gone\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/dayHeaderText\"/>\n\n    <!-- 事件列表 -->\n    <androidx.recyclerview.widget.RecyclerView\n        android:id=\"@+id/eventRecyclerView\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        android:layout_marginTop=\"16dp\"\n        android:clipToPadding=\"false\"\n        android:paddingBottom=\"16dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/dayHeaderText\"/>\n</androidx.constraintlayout.widget.ConstraintLayout>\n~~~\n\n* RecyclerView 是 Android 中一个非常重要的 UI 组件，用于在有限的窗口中展示大量数据列表\n* RecyclerView 需要 Adapter 类适配器为其绑定数据源\n* Adapter 的内部类 ViewHolder 可以持有RecyclerView 的子项视图\n\n3. 创建适配器为 RecyclerView 绑定数据\n\n~~~kotlin\n/**\n * 事件卡片适配器类\n * 用于在 RecyclerView 中显示日程事件列表，每个事件以卡片形式展示\n *\n * @param events 初始事件列表\n * @param onEditClick 编辑按钮点击回调函数\n * @param onDeleteClick 删除按钮点击回调函数\n * @param onCompleteToggle 完成状态切换回调函数\n */\nclass EventCardAdapter(\n    private var events: List<CalendarEvent>, // 事件列表数据\n    private val onEditClick: (CalendarEvent) -> Unit, // 编辑事件回调\n    private val onDeleteClick: (CalendarEvent) -> Unit, // 删除事件回调\n    private val onCompleteToggle: (CalendarEvent, Boolean) -> Unit // 完成状态切换回调\n): RecyclerView.Adapter<EventCardAdapter.EventViewHolder>() {\n    /**\n     * 创建 ViewHolder 实例\n     *\n     * @param parent 父 ViewGroup\n     * @param viewType 视图类型\n     * @return 返回新创建的 EventViewHolder 实例\n     */\n    override fun onCreateViewHolder(\n        parent: ViewGroup,\n        viewType: Int\n    ): EventCardAdapter.EventViewHolder {\n        val view = LayoutInflater.from(parent.context)\n            .inflate(R.layout.item_event_card, parent, false) // 从布局文件创建视图\n        return EventViewHolder(view)\n    }\n\n    /**\n     * 绑定数据到 ViewHolder\n     *\n     * @param holder 要绑定数据的 ViewHolder\n     * @param position 数据在列表中的位置\n     */\n    override fun onBindViewHolder(holder: EventCardAdapter.EventViewHolder, position: Int) {\n        holder.bind(events[position]) // 绑定指定位置的数据到 ViewHolder\n    }\n\n    /**\n     * 获取事件列表的大小\n     *\n     * @return 返回事件列表的大小\n     */\n    override fun getItemCount(): Int {\n        return events.size // 返回事件列表大小\n    }\n\n    /**\n     * 更新事件列表数据\n     *\n     * @param newEvents 新的事件列表\n     */\n    fun updateEvents(newEvents: List<CalendarEvent>){\n        events = newEvents\n        notifyDataSetChanged() // 通知数据变更，刷新界面\n    }\n\n    /**\n     * 事件卡片 ViewHolder 类\n     * 用于持有和管理事件卡片中的各个 UI 元素\n     */\n    inner class EventViewHolder(itemView: View): RecyclerView.ViewHolder(itemView){\n        private val colorIndicator: View = itemView.findViewById(R.id.eventColorIndicator) // 事件颜色指示器\n        private val titleText: TextView = itemView.findViewById(R.id.eventTitle) // 事件标题文本\n        private val contentText: TextView = itemView.findViewById(R.id.eventContent) // 事件内容文本\n        private val timeText: TextView = itemView.findViewById(R.id.eventTime) // 事件时间文本\n        private val reminders: TextView = itemView.findViewById(R.id.eventReminder) // 提醒时间文本\n        private val editButton: ImageButton = itemView.findViewById(R.id.editEventButton) // 编辑按钮\n        private val completeCheckbox: CheckBox = itemView.findViewById(R.id.eventCompletedCheckbox) // 完成状态复选框\n        private val deleteButton: ImageButton = itemView.findViewById(R.id.deleteEventButton) // 删除按钮\n\n        /**\n         * 绑定事件数据到视图元素\n         *\n         * @param event 要绑定的事件数据\n         */\n        fun bind(event: CalendarEvent){\n            // 设置事件颜色\n            colorIndicator.setBackgroundColor(event.eventColor) // 根据事件颜色设置指示器背景色\n\n            // 设置事件标题\n            titleText.text = event.title // 显示事件标题\n\n            // 设置内容摘要(超过十个字省略后面的字)\n            contentText.text = if (event.content.length > 10){\n                \"${event.content.take(10)}...\" // 截取前10个字符并添加省略号\n            }else{\n                event.content // 内容不足10个字符则完整显示\n            }\n\n            // 设置时间\n            val startTime = formatTime(event.startTime) // 格式化开始时间\n            val endTime = formatTime(event.endTime) // 格式化结束时间\n            timeText.text = \"$startTime - $endTime\" // 显示时间范围\n\n            // 设置提醒时间\n            reminders.text = formatReminderTime(event.reminderTime) // 显示提醒时间\n\n            // 设置完成状态\n            completeCheckbox.isChecked = event.isCompleted // 根据事件状态设置复选框选中状态\n\n            // 设置点击事件\n            editButton.setOnClickListener { onEditClick(event) } // 点击编辑按钮触发回调\n            deleteButton.setOnClickListener { onDeleteClick(event) } // 点击删除按钮触发回调\n            completeCheckbox.setOnCheckedChangeListener { _, isChecked ->\n                onCompleteToggle(event, isChecked) // 切换完成状态时触发回调\n            }\n        }\n\n        /**\n         * 格式化时间戳为 HH:mm 格式的字符串\n         *\n         * @param timeStamp 时间戳\n         * @return 格式化后的时间字符串，如果时间戳为0则返回\"无\"\n         */\n        private fun formatTime(timeStamp: Long): String{\n            return if (timeStamp == 0L){\n                \"无\" // 时间戳为0时显示\"无\"\n            }else{\n                val date = Date(timeStamp)\n                val format = SimpleDateFormat(\"HH:mm\", Locale.getDefault()) // 使用 HH:mm 格式\n                format.format(date) // 格式化时间戳\n            }\n        }\n\n        /**\n         * 格式化提醒时间戳为 HH:mm 格式的字符串\n         *\n         * @param timeStamp 提醒时间戳\n         * @return 格式化后的提醒时间字符串，如果时间戳为0则返回\"无\"\n         */\n        private fun formatReminderTime(timeStamp: Long): String{\n            return if (timeStamp == 0L){\n                \"无\" // 时间戳为0时显示\"无\"\n            }else{\n                val date = Date(timeStamp)\n                val format = SimpleDateFormat(\"HH:mm\", Locale.getDefault()) // 使用 HH:mm 格式\n                format.format(date) // 格式化时间戳\n            }\n        }\n    }\n}\n~~~\n* 实现 ViewHolder 模式\n* 绑定数据到视图\n* 处理用户交互（增加、修改、删除）\n\n4. 准备图标按钮需要的矢量图标资源\n\n* 删除按钮图标 ic_delete.xml\n\n~~~xml\n<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"24dp\"\n    android:height=\"24dp\"\n    android:viewportWidth=\"24\"\n    android:viewportHeight=\"24\"\n    android:tint=\"?attr/colorError\">\n    <path\n        android:fillColor=\"@android:color/white\"\n        android:pathData=\"M6,19c0,1.1 0.9,2 2,2h8c1.1,0 2,-0.9 2,-2V7H6v12zM19,4h-3.5l-1,-1h-5l-1,1H5v2h14V4z\"/>\n</vector>\n~~~\n\n* 编辑按钮图标 ic_edit.xml\n\n~~~xml\n<!-- res/drawable/ic_edit.xml -->\n<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"24dp\"\n    android:height=\"24dp\"\n    android:viewportWidth=\"24\"\n    android:viewportHeight=\"24\">\n    <path\n        android:fillColor=\"#FF000000\"\n        android:pathData=\"M3,17.25V21h3.75L17.81,9.94l-3.75,-3.75L3,17.25zM20.71,7.04c0.39,-0.39 0.39,-1.02 0,-1.41l-2.34,-2.34c-0.39,-0.39 -1.02,-0.39 -1.41,0l-1.83,1.83 3.75,3.75 1.83,-1.83z\"/>\n</vector>\n~~~\n\n* 确认完成图标 ic_notification.xml\n\n~~~xml\n<!-- res/drawable/ic_notification.xml -->\n<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"24dp\"\n    android:height=\"24dp\"\n    android:viewportWidth=\"24\"\n    android:viewportHeight=\"24\"\n    android:tint=\"?attr/colorOnSurfaceVariant\">\n    <path\n        android:fillColor=\"@android:color/white\"\n        android:pathData=\"M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.89,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32L13.5,4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z\"/>\n</vector>\n~~~\n\n5. 修改日视图 DayViewFragment.kt 以初始化适配器，并启动数据库，为适配器设置数据源\n\n~~~kotlin\n/**\n * 日视图 Fragment\n * 负责显示和管理日历的日视图，显示特定日期的详细信息\n */\nclass DayViewFragment: Fragment() {\n    private var _binding: FragmentDayViewBinding? = null\n    private val binding get() = _binding!!\n\n    private lateinit var dayTitle: TextView\n    private lateinit var noEventsText: TextView\n    private lateinit var eventsRecyclerView: RecyclerView\n    private lateinit var eventAdapter: EventCardAdapter\n\n    /**\n     * 事件更新观察者\n     * 当收到事件更新通知时，重新加载当天的事件列表\n     */\n    private val eventUpdateObserver = Observer<Boolean> { _ ->\n        // 当收到事件更新时，刷新日程列表\n        loadEventsForDate()\n    }\n\n    /**\n     * 创建 Fragment 的视图层次结构\n     *\n     * @param inflater 用于 inflate 视图的 LayoutInflater\n     * @param container 此 Fragment 的父 ViewGroup\n     * @param savedInstanceState 保存的状态信息，如果 Fragment 是重新创建的，则不为 null\n     * @return 返回此 Fragment 的根视图\n     */\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        _binding = FragmentDayViewBinding.inflate(inflater, container, false)\n        val view = _binding!!.root\n\n        dayTitle = binding.dayHeaderText\n        noEventsText = binding.noEventText\n        eventsRecyclerView = binding.eventRecyclerView\n\n        return view\n    }\n\n    /**\n     * 设置 RecyclerView 及其适配器\n     * 初始化事件列表的显示组件\n     */\n    private fun setupRecyclerView() {\n        eventAdapter = EventCardAdapter(\n            events = emptyList(),\n            onEditClick = { event ->\n                editEvent(event)\n            },\n            onDeleteClick = { event ->\n                deleteEvent(event)\n            },\n            onCompleteToggle = { event, isCompleted ->\n                toggleEventCompletion(event, isCompleted)\n            }\n        )\n\n        eventsRecyclerView.apply {\n            layoutManager = LinearLayoutManager(context)\n            adapter = eventAdapter\n        }\n    }\n\n    /**\n     * 加载指定日期的事件\n     * 触发从数据库加载事件数据的操作\n     */\n    private fun loadEventsForDate(){\n        loadEventFromDatabase()\n    }\n\n    /**\n     * 更新事件列表显示\n     * 根据事件列表是否为空来控制空提示文本的显示\n     *\n     * @param events 要显示的事件列表\n     */\n    private fun updateEventList(events: List<CalendarEvent>){\n        eventAdapter.updateEvents(events)\n        noEventsText.visibility = if (events.isEmpty()) View.VISIBLE else View.GONE\n    }\n\n    /**\n     * 从数据库加载事件数据\n     * 异步查询数据库获取当天的所有事件，并更新UI显示\n     */\n    private fun loadEventFromDatabase(){\n        lifecycleScope.launch {\n            try {\n                // 获取数据库实例\n                val database = CalendarDatabase.getInstance(requireContext())\n                val eventDao = database.eventDao()\n\n                // 计算当天的开始和结束日期\n                val currentDate = LocalDate.now()\n                val startOfDay = currentDate.atStartOfDay()\n                val endOfDay = currentDate.atTime(23, 59, 59)\n\n                val startTimeStamp = startOfDay.toInstant(ZoneOffset.UTC).toEpochMilli()\n                val endTimeStamp = endOfDay.toInstant(ZoneOffset.UTC).toEpochMilli()\n\n                // 查询数据库并获取事件\n                val events = eventDao.getEventsInRange(startTimeStamp, endTimeStamp)\n\n                // 更新UI\n                updateEventList(events)\n            } catch (e: Exception){\n                // 处理异常\n                Toast.makeText(context, \"加载事件失败：${e.message}\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n\n    /**\n     * 编辑指定事件\n     *\n     * @param event 需要编辑的事件对象\n     */\n    private fun editEvent(event: CalendarEvent) {\n        // 添加编辑事件逻辑\n    }\n    \n    /**\n     * 删除指定事件\n     *\n     * @param event 需要删除的事件对象\n     */\n    private fun deleteEvent(event: CalendarEvent) {\n        // 添加删除事件逻辑\n    }\n    \n    /**\n     * 切换事件完成状态\n     *\n     * @param event 需要切换状态的事件对象\n     * @param isCompleted 事件的完成状态\n     */\n    private fun toggleEventCompletion(event: CalendarEvent, isCompleted: Boolean) {\n        // 添加切换事件完成状态逻辑\n    }\n\n    /**\n     * 当 Fragment 的视图创建完成后调用\n     * 在这里进行视图相关的初始化操作\n     *\n     * @param view 此 Fragment 的根视图\n     * @param savedInstanceState 保存的状态信息\n     */\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        // 观察事件更新\n        EventUpdateManager.getInstance().eventUpdated.observe(\n            viewLifecycleOwner,\n            eventUpdateObserver\n        )\n\n        \n        // 初始化 ViewModel\n        val database = CalendarDatabase.getInstance(requireContext())\n        val eventDao = database.eventDao()\n        \n        setupRecyclerView()\n        \n        // 加载初始数据\n        loadEventsForDate()\n        setupDayView()\n    }\n\n    /**\n     * 设置日视图的相关配置\n     * 包括设置当前日期标题等\n     */\n    private fun setupDayView(){\n        val currentDate = LocalDate.now()\n        // 设置日视图头部显示的日期文本\n        binding.dayHeaderText.text = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\").format(currentDate)\n    }\n\n    /**\n     * 当 Fragment 的视图被销毁时调用\n     * 清理资源，避免内存泄漏\n     */\n    override fun onDestroyView() {\n        super.onDestroyView()\n        _binding = null\n    }\n}\n~~~\n* 初始化界面组件\n* 设置 RecyclerView 和适配器\n* 从数据库加载当天事件数据\n* 更新界面显示\n* 使用 Room 数据库查询当天事件\n* 计算查询时间范围（当天开始到结束）\n* 异步加载数据并更新 UI\n* 处理空数据状态显示\n* 声明观察者，并在 **OnViewCreated** 中激活观察者，通过 **EventUpdateManager.getInstance().eventUpdated.observe()** 来监听 **eventUpdated** 的改变\n\n6. 创建事件管理类 EventUpdateManager.kt 使用 LiveData 机制，监听数据更新，刷新UI\n\n~~~kotlin\n/**\n * 事件更新管理器\n * 使用单例模式管理事件更新通知，防止频繁更新UI\n */\nclass EventUpdateManager private constructor(){\n    private val _eventUpdated = MutableLiveData<Boolean>()\n    val eventUpdated: LiveData<Boolean> = _eventUpdated\n\n    /**\n     * 上次通知时间戳\n     * 用于防抖处理，避免过于频繁的更新通知\n     */\n    private var lastNotifyTime = 0L\n    \n    /**\n     * 防抖间隔时间（毫秒）\n     * 两次通知之间的最小时间间隔\n     */\n    private val debounceInterval = 500L\n\n    /**\n     * 通知事件已添加\n     * 通过防抖机制控制通知频率，避免短时间内重复通知\n     */\n    fun notifyEventAdded(){\n        val currentTime = System.currentTimeMillis()\n        // 如果当前时间间隔小于防抖间隔，则不执行通知\n        if (currentTime - lastNotifyTime > debounceInterval){\n            _eventUpdated.value = true\n            lastNotifyTime = currentTime\n        }\n    }\n\n    companion object{\n        @Volatile\n        private var INSTANCE: EventUpdateManager? = null\n\n        /**\n         * 获取 EventUpdateManager 的单例实例\n         *\n         * @return EventUpdateManager 的单例对象\n         */\n        fun getInstance(): EventUpdateManager{\n            return INSTANCE ?: synchronized(this){\n                val instance = EventUpdateManager()\n                INSTANCE = instance\n                instance\n            }\n        }\n    }\n}\n~~~\n* 使用 **LiveData 机制**，可变的_eventUpdated 属性保存事件更新状态，不可变的eventUpdated 属性提供外部访问\n* 当事件变化调用 notifyEventAdded() 方法时，LiveData机制会通知所有**活跃的观察者**\n* 观察者调用相关方法，更新UI\n\n7. 在主活动 MainActivity.kt 中 **saveEventToDatabase** 方法中，当操作完成后，调用 EventUpdateManager.getInstance().notifyEventAdded() 方法通知事件已添加，通过 LiveData 机制，更新UI\n\n~~~kotlin\n// 在主线程中显示成功消息\nwithContext(Dispatchers.Main){\n    Toast.makeText(this@MainActivity, \"日程已添加，ID：$eventId\", Toast.LENGTH_SHORT).show()\n\n    // 通知日程列表刷新\n    EventUpdateManager.getInstance().notifyEventAdded()\n\n}\n~~~\n\n### 日程修改实现\n\n* 该步骤要实现 **DayViewFragment.kt** 中的 **editEvent()** 方法\n* 该方法的传递逻辑为 *editEvent() -> setupRecyclerView() -> onViewCreated()* \n* 通过 EventCardAdapter 类中的 editButton.setOnClickListener() 方法触发调用\n\n~~~kotlin\n/**\n * 编辑指定事件\n *\n * @param event 需要编辑的事件对象\n */\nprivate fun editEvent(event: CalendarEvent) {\n    // 添加编辑事件逻辑\n\n}\n~~~\n\n1. 创建对话框\n\n~~~kotlin\n// 创建对话框\nval dialogView = LayoutInflater.from(context).inflate(R.layout.dialog_add_event, null)\nval dialogBuilder = AlertDialog.Builder(requireContext())\ndialogBuilder.setView(dialogView)\n~~~\n\n2. 获取对话框的视图元素\n\n~~~kotlin\n// 获取对话框的视图元素\nval dialogTitle = dialogView.findViewById<TextView>(R.id.dialogTitle)\nval eventIdText = dialogView.findViewById<TextView>(R.id.eventIdText)\nval editTextDate = dialogView.findViewById<TextInputEditText>(R.id.editTextDate)\nval editTextTitle = dialogView.findViewById<TextInputEditText>(R.id.editTextTitle)\nval editTextContent = dialogView.findViewById<TextInputEditText>(R.id.editTextContent)\nval editTextReminder = dialogView.findViewById<TextInputEditText>(R.id.editTextReminder)\nval buttonCancel = dialogView.findViewById<Button>(R.id.buttonCancel)\nval buttonConfirm = dialogView.findViewById<Button>(R.id.buttonConfirm)\n~~~\n\n3. 对话框视图信息回显\n\n~~~kotlin\n// 回显事件信息 - 将当前事件的信息显示在对话框中供用户编辑\neventIdText.text = event.id.toString()\neditTextTitle.setText(event.title)\neditTextContent.setText(event.content)\n\n// 格式化显示日期 - 将事件开始时间格式化为\"yyyy年MM月dd日\"格式显示\nval eventDate = Date(event.startTime)\nval dateFormat = SimpleDateFormat(\"yyyy年MM月dd日\", Locale.getDefault())\neditTextDate.setText(dateFormat.format(eventDate))\n\n// 格式化并显示提醒时间 - 如果事件设置了提醒时间，则格式化为\"HH:mm\"格式显示\nval timeFormatter = SimpleDateFormat(\"HH:mm\", Locale.getDefault())\nif (event.reminderTime != 0L){\n    editTextReminder.setText(timeFormatter.format(Date(event.reminderTime)))\n}\n~~~\n\n4. 设置日期选择器和时间选择器\n\n~~~kotlin\n// 设置日期选择器 - 点击日期输入框时弹出日期选择器\neditTextDate.setOnClickListener {\n    showDatePicker(editTextDate)\n}\n\n// 设置提醒时间选择器 - 点击提醒时间输入框时弹出时间选择器\neditTextReminder.setOnClickListener {\n    showTimePicker(editTextReminder)\n}\n~~~\n\n* 日期选择器\n\n~~~kotlin\nprivate fun showDatePicker(editTextDate: TextInputEditText) {\n    val today = LocalDate.now()\n    val datePicker = DatePickerDialog(\n        requireContext(),\n        {_, year, month, dayOfMonth ->\n            val selectedDate = LocalDate.of(year, month + 1, dayOfMonth)\n            val formatter = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\")\n            editTextDate.setText(selectedDate.format(formatter))\n        },\n        today.year,\n        today.monthValue - 1,\n        today.dayOfMonth\n    )\n    datePicker.show()\n}\n~~~\n\n* 时间选择器\n\n~~~kotlin\nprivate fun showTimePicker(editTextReminder: TextInputEditText) {\n    val timePicker = TimePickerDialog(\n        requireContext(),\n        {_, hourOfDay, minute ->\n            val selectedTime = String.format(\"%02d:%02d\", hourOfDay, minute)\n            editTextReminder.setText(selectedTime)\n        },\n        9,\n        0,\n        true\n    )\n    timePicker.show()\n}\n~~~\n\n5. 创建并显示对话框\n\n~~~kotlin\nval dialog = dialogBuilder.create()\n~~~\n\n6. 设置取消按钮事件\n\n~~~kotlin\nbuttonCancel.setOnClickListener {\n    dialog.dismiss()\n}\n~~~\n\n7. 设置确认按钮事件\n\n~~~kotlin\nbuttonConfirm.setOnClickListener {\n    // 添加修改事件逻辑\n    try {\n        // 事件逻辑\n    } catch (e: Exception) {\n        // 失败处理\n    }\n}\n~~~\n\n* 使用协程作用于执行数据库的耗时操作\n\n~~~kotlin\nlifecycleScope.launch {\n    // 修改数据库相关操作\n}\n~~~\n\n* 获取数据库实例和事件数据访问对象\n\n~~~kotlin\nval database = CalendarDatabase.getInstance(requireContext())\nval eventDao = database.eventDao()\n~~~\n\n* 获取修改的数据并解析\n\n~~~kotlin\n// 获取用户输入的数据\nval title = editTextTitle.text.toString()\nval content = editTextContent.text.toString()\nval reminder = editTextReminder.text.toString()\n\n// 解析日期 - 将用户输入的日期字符串转换为LocalDate对象\nval dateFormatter = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\")\nval localDate = LocalDate.parse(editTextDate.text.toString(), dateFormatter)\n// 计算事件开始时间和结束时间的时间戳\nval startTime = localDate.atStartOfDay(ZoneId.systemDefault()).toInstant().toEpochMilli()\nval endTime = localDate.atTime(23, 59, 59).atZone(ZoneId.systemDefault()).toInstant().toEpochMilli()\n\n// 解析提醒时间 - 如果设置了提醒时间，则计算提醒时间的时间戳\nval reminderTime = if (reminder.isNotEmpty()){\n    val timeFormatter = DateTimeFormatter.ofPattern(\"HH:mm\")\n    val localTime = LocalTime.parse(reminder, timeFormatter)\n    val reminderDateTime = localDate.atTime(localTime)\n    reminderDateTime.atZone((ZoneId.systemDefault())).toInstant().toEpochMilli()\n}else {\n    0L // 如果未设置提醒时间，则设为0\n}\n~~~\n\n* 创建修改事件对象，校验关键信息非空，并提交修改\n\n~~~kotlin\n// 更新事件对象 - 使用新的数据创建更新后的事件对象\nval updatedEvent = event.copy(\n    title = title,\n    content = content,\n    startTime = startTime,\n    endTime = endTime,\n    reminderTime = reminderTime\n)\n\n// 验证必填字段 - 检查标题是否为空\nif (title.isEmpty()){\n    editTextTitle.error = \"请输入日程标题\"\n    return@launch\n}\n\n// 验证必填字段 - 检查日期是否为空\nif (content.isEmpty()){\n    editTextDate.error = \"请选择日程日期\"\n    return@launch\n}\n\n// 更新事件到数据库\neventDao.updateEvent(updatedEvent)\n~~~\n\n* 通知观察者，刷新视图\n\n~~~kotlin\nEventUpdateManager.getInstance().notifyEventAdded()\n~~~\n\n* 关闭对话框并显示成功提示\n\n~~~kotlin\ndialog.dismiss()\nToast.makeText(context, \"修改成功\", Toast.LENGTH_SHORT).show()\n~~~\n\n* 捕获异常并显示错误提示\n\n~~~kotlin\nToast.makeText(context, \"修改失败：${e.message}\", Toast.LENGTH_SHORT).show()\n~~~\n\n8. 展示对话框\n\n~~~kotlin\ndialog.show()\n~~~\n\n至此，我们可以通过点击修改按钮，弹出修改事件对话框，并完成修改事件操作\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/my_calendar_app.md","raw":"---\ntitle: \"MyCalendarApp 开发文档\"\ndate: \ntags:\n    - Android\ncategories:\n    - 项目开发\n---\n\n# MyCalendarApp\n\n## 目录\n\n- [MyCalendarApp](#mycalendarapp)\n  - [目录](#目录)\n  - [kizitonwose/CalendarView 框架的使用](#kizitonwosecalendarview-框架的使用)\n    - [基本使用](#基本使用)\n    - [周视图功能细分](#周视图功能细分)\n      - [添加星期标题](#添加星期标题)\n      - [添加日期选择功能](#添加日期选择功能)\n      - [添加今日默认背景](#添加今日默认背景)\n      - [周的滚动切换](#周的滚动切换)\n      - [添加年月标题](#添加年月标题)\n  - [日程添加](#日程添加)\n    - [点击按钮打开日程添加表单](#点击按钮打开日程添加表单)\n    - [日程列表实现](#日程列表实现)\n    - [日程修改实现](#日程修改实现)\n\n\n## kizitonwose/CalendarView 框架的使用\n\n[回到目录](#目录)\n\n### 基本使用\n\n[回到上一级](#kizitonwosecalendarview-框架的使用)\n\n1. 添加依赖\n在 gradle/libs.versions.toml 中：\n\n~~~toml\n[versions]\nkizitonwose-calendar = \"2.9.0\"\n\n[libraries]\nkizitonwose-calendar = { module = \"com.kizitonwose.calendar:view\", version.ref = \"kizitonwose-calendar\" }\n~~~\n\n在 app/build.gradle.kts 中：\n\n~~~kotlin\ndependencies {\n    implementation(libs.kizitonwose.calendar)\n}\n~~~\n\n2. 创建日视图布局资源\n\n在layout中创建日视图布局资源，例如 calendar_day_layout.xml 来为日历中的每一天创建一个布局\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:tools=\"http://schemas.android.com/tools\">\n\n    <TextView\n        android:id=\"@+id/calendarDayText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:gravity=\"center\"\n        tools:text=\"22\"/>\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n~~~\n\n3. 创建 ViewContainer 类\n\n为每个视图类型创建容器类来持有视图元素\n\n月视图容器 (MonthDayViewContainer.kt)：\n\n~~~kotlin\nclass MonthDayViewContainer(view: View) : ViewContainer(view) {\n    val textView: TextView = view.findViewById(R.id.calendarDayText)\n}\n~~~\n\n周视图容器 (DayViewContainer.kt)：\n\n~~~kotlin\nclass DayViewContainer(view: View) : ViewContainer(view) {\n    val textView: TextView = view.findViewById<TextView>(R.id.calendarDayText)\n}\n~~~\n\n4. 创建 ViewBinder 类\n\n创建绑定器类来控制如何显示日历中的每一天\n\n月视图绑定器 (MonthDayViewBinder.kt)：\n\n~~~kotlin\nclass MonthDayViewBinder : MonthDayBinder<MonthDayViewContainer> {\n    override fun create(view: View) = MonthDayViewContainer(view)\n\n    override fun bind(container: MonthDayViewContainer, data: CalendarDay) {\n        container.textView.text = data.date.dayOfMonth.toString()\n        \n        // 根据日期是否属于当前月份设置不同的透明度\n        if (data.position == DayPosition.MonthDate) {\n            container.textView.alpha = 1f\n        } else {\n            container.textView.alpha = 0.3f\n        }\n    }\n}\n~~~\n\n周视图绑定器 (WeekViewBinder.kt)：\n\n~~~kotlin\nclass WeekViewBinder: WeekDayBinder<DayViewContainer> {\n    override fun create(view: View): DayViewContainer = DayViewContainer(view)\n\n    override fun bind(\n        container: DayViewContainer,\n        data: WeekDay\n    ) {\n        container.textView.text = data.date.dayOfMonth.toString()\n    }\n}\n~~~\n\n5. 创建 Fragment 布局\n\n月视图布局 (fragment_month_view.xml)：\n\n~~~xml\n<com.kizitonwose.calendar.view.CalendarView\n    android:id=\"@+id/month_calendar_view\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    app:cv_dayViewResource=\"@layout/calendar_day_layout\"/>\n~~~\n\n周视图布局 (fragment_week_view.xml)：\n\n~~~xml\n<com.kizitonwose.calendar.view.WeekCalendarView\n    android:id=\"@+id/week_calendar_view\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    app:cv_dayViewResource=\"@layout/calendar_day_layout\"/>\n~~~\n\n6. 实现 Fragment 逻辑\n\n月视图 Fragment (MonthViewFragment.kt)：\n\n~~~kotlin\nclass MonthViewFragment : Fragment() {\n    private var _binding: FragmentMonthViewBinding? = null\n    private val binding get() = _binding!!\n\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        _binding = FragmentMonthViewBinding.inflate(inflater, container, false)\n        return binding.root\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        setupMonthView()\n    }\n\n    private fun setupMonthView() {\n        val currentDate = LocalDate.now()\n        val currentMonth = YearMonth.now()\n        val startMonth = currentMonth.minusMonths(100)\n        val endMonth = currentMonth.plusMonths(100)\n        val firstDayOfWeek = firstDayOfWeekFromLocale()\n\n        binding.monthCalendarView.dayBinder = MonthDayViewBinder()\n        binding.monthCalendarView.setup(startMonth, endMonth, firstDayOfWeek)\n        binding.monthCalendarView.scrollToMonth(currentMonth)\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        _binding = null\n    }\n}\n~~~\n\n周视图 Fragment (WeekViewFragment.kt)：\n\n~~~kotlin\nclass WeekViewFragment: Fragment() {\n    private var _binding: FragmentWeekViewBinding? = null\n    private val binding get() = _binding!!\n\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        _binding = FragmentWeekViewBinding.inflate(inflater, container, false)\n        return binding.root\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        setupWeekView()\n    }\n\n    private fun setupWeekView(){\n        val currentDate = LocalDate.now()\n        \n        val weekCalendarView = binding.weekCalendarView\n        weekCalendarView.dayBinder = WeekViewBinder()\n        \n        val currentMonth = YearMonth.now()\n        val startMonth = currentMonth.minusMonths(100)\n        val endMonth = currentMonth.plusMonths(100) \n        val firstDayOfWeek = firstDayOfWeekFromLocale()\n        \n        weekCalendarView.setup(startMonth.atDay(1), endMonth.atEndOfMonth(), firstDayOfWeek)\n        weekCalendarView.scrollToWeek(currentDate)\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        _binding = null\n    }\n}\n~~~\n\n至此，就完成了基于kizitonwose/CalendarView的日历视图的基本使用\n\n### 周视图功能细分\n\n[回到上一级](#kizitonwosecalendarview-框架的使用)\n\n#### 添加星期标题\n\n1. 在layout中创建calendar_day_title_text.xml定义**单个**星期标题的样式\n\n~~~xml\n<TextView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:layout_weight=\"1\"\n    android:layout_gravity=\"center\"\n    android:gravity=\"center\"\n    android:padding=\"8dp\"\n    android:textSize=\"12sp\" />\n~~~\n\n2. 同目录下创建calendar_day_titles_container.xml，使用**水平线性布局**，包含七个上一步创建的星期标题，代表一周七天\n\n~~~xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:weightSum=\"7\"\n    android:orientation=\"horizontal\">\n\n    <include layout=\"@layout/calendar_day_title_text\"/>\n    <!-- 重复6次 -->\n</LinearLayout>\n~~~\n\n3. 将上一步的容器引入fragment_week_view.xml中\n\n~~~xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:orientation=\"vertical\">\n\n    <include\n        android:id=\"@+id/titlesContainer\"\n        layout=\"@layout/calendar_day_titles_container\" />\n\n    <!-- 周视图日历控件，用于显示一周的日期 -->\n    <com.kizitonwose.calendar.view.WeekCalendarView\n        android:id=\"@+id/week_calendar_view\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:cv_dayViewResource=\"@layout/calendar_day_layout\"/>\n\n</LinearLayout>\n~~~\n\n4. 在 WeekViewFragment.kt 中，通过 setDayOfWeekTitles() 方法动态设置星期标题文本\n\n~~~kotlin\n...\nprivate fun setupWeekView(){\n        ...\n        \n        val weekCalendarView = binding.weekCalendarView\n        weekCalendarView.dayBinder = weekViewBinder\n        \n        // 获取标题容器并设置星期标题\n        setDayOfWeekTitles()\n        \n        ...\n    }\n\nprivate fun setDayOfWeekTitles() {\n    // 获取标题容器\n    val titlesContainer = binding.root.findViewById<ViewGroup>(R.id.titlesContainer)\n    \n    // 遍历每个标题容器并设置文本\n    titlesContainer.children\n        .map { it as TextView }\n        .forEachIndexed { index, textView ->\n            val dayOfWeek = daysOfWeek()[index]\n            val title = dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.getDefault())\n            textView.text = title\n            textView.gravity = Gravity.CENTER\n        }\n}\n~~~\n\n至此，添加星期标题功能完成\n\n#### 添加日期选择功能\n\n1. 在presentation/calendarContainer/下的DayViewContainer.kt中**添加**点击监听器\n\n~~~kotlin\nclass DayViewContainer(view: View) : ViewContainer(view) {\n    ...\n\n    // 添加一个函数来设置点击监听器\n    fun setOnClickListener(listener: (View) -> Unit) {\n        textView.setOnClickListener(listener)\n    }\n\n    ...\n}\n~~~\n\n其中listener参数是一个**函数类型**，是以View为参数，且返回值为Unit(void,即无返回值)的函数\n\n2. 在presentation/calendarBinder/WeekViewBinder.kt中**设置**点击监听器\n\n~~~kotlin\nclass WeekViewBinder: WeekDayBinder<DayViewContainer> {\n    \n    ...\n\n    override fun bind(\n        container: DayViewContainer,\n        data: WeekDay\n    ) {\n        container.textView.text = data.date.dayOfMonth.toString()\n\n        // 设置点击监听器\n        container.setOnClickListener {\n            selectedDate = data.date\n            onDateClickListener?.invoke(data)\n        }\n\n        ...\n    }\n}\n~~~\n\n其中`?.invoke` 是一个**可选调用**，用于调用一个可能为 null 的函数。如果函数不为 null，则调用它，否则不执行任何操作。\n这里只有点击日期时才触发点击回调data，并更新选中日期的视觉效果\n\n3. 在 presentation/ui/calendar/WeekViewFragment.kt 中设置点击回调\n\n~~~kotlin\nclass WeekViewFragment: Fragment() {\n    \n    ...\n\n    private fun setupWeekView(){\n        val currentDate = LocalDate.now()\n        \n        // 步骤3：在Fragment中设置点击回调\n        val weekViewBinder = WeekViewBinder()\n        weekViewBinder.onDateClickListener = { weekDay ->\n            // 处理点击事件\n            Toast.makeText(context, \"Clicked: ${weekDay.date}\", Toast.LENGTH_SHORT).show()\n            // 更新选中日期的视觉效果\n            weekViewBinder.selectDate(weekDay.date)\n            // 通知日历重新绘制以更新选中状态\n            binding.weekCalendarView.notifyCalendarChanged()\n        }\n        \n        val weekCalendarView = binding.weekCalendarView\n        weekCalendarView.dayBinder = weekViewBinder\n        \n        ...\n\n    }\n}\n~~~\n\n4. 在presentation/calendarBinder/WeekViewBinder.kt中添加选中日期的追踪\n\n~~~kotlin\nclass WeekViewBinder: WeekDayBinder<DayViewContainer> {\n\n    ...\n\n    override fun bind(\n        container: DayViewContainer,\n        data: WeekDay\n    ) {\n        container.textView.text = data.date.dayOfMonth.toString()\n\n        // 设置点击监听器\n        container.setOnClickListener {\n            selectedDate = data.date\n            onDateClickListener?.invoke(data)\n        }\n\n        // 更新选中的视觉效果\n        if (selectedDate == data.date) {\n            container.textView.setBackgroundResource(R.drawable.modern_selected_date_ripple)\n            // 选中日期使用白色文字以便在洋红色背景上清晰可见\n            container.textView.setTextColor(Color.WHITE)\n        } else {\n            container.textView.background = null\n            // 非选中日期使用黑色文字\n            container.textView.setTextColor(Color.BLACK)\n        }\n    }\n}\n~~~\n\n这里的背景资源需要自行创建\n\n#### 添加今日默认背景\n\n[回到上一级](#周视图功能细分)\n\n1. 在presentation/calendarBinder/WeekViewBinder.kt的bind()方法中获取今天的日期\n\n~~~kotlin\nval today = LocalDate.now()\n~~~\n\n2. 在presentation/calendarBinder/WeekViewBinder.kt的bind()方法中判断当前日期是否为今天，如果是则设置背景\n\n完整方法\n~~~kotlin\noverride fun bind(\n        container: DayViewContainer,\n        data: WeekDay\n    ) {\n        container.textView.text = data.date.dayOfMonth.toString()\n\n        // 设置点击监听器\n        container.setOnClickListener {\n            selectedDate = data.date\n            onDateClickListener?.invoke(data)\n        }\n\n        // 获取今天的日期\n        val today = LocalDate.now()\n        \n        // 更新选中的视觉效果\n        if (selectedDate == data.date) {\n            container.textView.setBackgroundResource(R.drawable.modern_selected_date_ripple)\n            // 选中日期使用白色文字以便在洋红色背景上清晰可见\n            container.textView.setTextColor(Color.WHITE)\n        } else if (data.date == today) {\n            // 今天的日期使用与选中日期相同形状的背景高亮显示\n            container.textView.setBackgroundResource(R.drawable.modern_today_background)\n            container.textView.setTextColor(Color.BLACK)\n        } else {\n            container.textView.background = null\n            // 非选中日期使用黑色文字\n            container.textView.setTextColor(Color.BLACK)\n        }\n    }\n~~~\n\n背景资源需要自行创建\n\n#### 周的滚动切换\n\n[回到上一级](#周视图功能细分)\n\n1. 在WeekViewFragment.kt中的setupWeekView()方法内添加滚动监听器，并实现更新逻辑\n\n* 添加**滚动监听器**\n~~~kotlin\nprivate fun setupWeekView(){\n        ...\n        \n        val weekCalendarView = binding.weekCalendarView\n        weekCalendarView.dayBinder = weekViewBinder\n\n        // 添加滚动监听器以同步星期标题\n        weekCalendarView.weekScrollListener = { weekStart ->\n            // 更新星期标题以匹配当前周\n            updateDayOfWeekTitles(weekStart.days.first().date)\n            // 更新年月标题\n            // updateMonthYearHeader(weekStart.days.first().date)\n        }\n\n        // 获取标题容器并设置星期标题\n        setDayOfWeekTitles()\n        \n        ...\n    }\n~~~\n\n* 实现更新逻辑 **updateDayOfWeekTitles()**\n~~~kotlin\n/**\n     * 更新星期标题\n     *\n     * @param date 当前周的起始日期\n     */\n    private fun updateDayOfWeekTitles(date: LocalDate) {\n        val titlesContainer = binding.root.findViewById<ViewGroup>(R.id.titlesContainer)\n\n        // 计算指定日期所在周到起始日期\n        val firstDayOfWeek = firstDayOfWeekFromLocale()\n        val weekStart = date.minusDays(date.dayOfWeek.ordinal.toLong())\n            .plusDays(firstDayOfWeek.ordinal.toLong())\n            .minusDays(if (firstDayOfWeek.ordinal <= date.dayOfWeek.ordinal) 0 else 7)\n\n        // 更新每个标题党文本\n        titlesContainer.children\n            .map { it as TextView }\n            .forEachIndexed { index, textView ->\n                val currentDay = weekStart.plusDays(index.toLong())\n                val title = currentDay.dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.getDefault())\n                textView.text = title\n            }\n    }\n~~~\n\n其中,计算逻辑：\n  1. date.dayOfWeek.ordinal：获取指定日期是星期几（星期一为0，星期日为6）\n  2. date.minusDays(date.dayOfWeek.ordinal.toLong())：从指定日期减去对应的天数，得到该周的星期一\n  3. plusDays(firstDayOfWeek.ordinal.toLong())：加上本地化星期起始日的偏移量\n  4. minusDays(if (firstDayOfWeek.ordinal <= date.dayOfWeek.ordinal) 0 else 7)：如果本地化星期起始日在指定日期的星期几之前或当天，则不需要调整否则需要减去7天以得到正确的周起始日\n\n2. 在fragment_week_view.xml中的周视图日历控件中添加属性，优化滑动效果\n\n~~~xml\n<!-- 将app:cv_scrollPaged=\"true\"添加到WeekCalendarView控件中 -->\n<com.kizitonwose.calendar.view.WeekCalendarView\n        android:id=\"@+id/week_calendar_view\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:cv_dayViewResource=\"@layout/calendar_day_layout\"\n        app:cv_scrollPaged=\"true\"/>\n~~~\n\n#### 添加年月标题\n\n[回到上一级](#周视图功能细分)\n\n1. 首先需要修改 fragment_week_view.xml 文件，添加年月标题：\n\n~~~xml\n<!-- 添加年月标题 -->\n    <TextView\n        android:id=\"@+id/monthYearHeader\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:gravity=\"center\"\n        android:textSize=\"18sp\"\n        android:textStyle=\"bold\"\n        android:padding=\"8dp\"\n        android:textColor=\"@color/black\"\n        tools:text=\"2023年10月\" />\n~~~\n\n2. 在 WeekViewFragment.kt 中添加年月标题的处理逻辑：\n\n* 在类中添加年月标题变量声明\n~~~kotlin\n// 添加年月标题变量声明\nprivate lateinit var monthYearHeader: TextView\n~~~\n\n* 在 setupWeekView() 方法中初始化年月标题变量\n~~~kotlin\n// 初始化年月标题\nmonthYearHeader = binding.root.findViewById<TextView>(R.id.monthYearHeader)\n~~~\n\n* 在 setupWeekView() 方法中的滚动监听器中同步更新年月标题\n~~~kotlin\n// 添加滚动监听器以同步星期标题\nweekCalendarView.weekScrollListener = { weekStart ->\n    // 更新星期标题以匹配当前周\n    updateDayOfWeekTitles(weekStart.days.first().date)\n    // 更新年月标题\n    updateMonthYearHeader(weekStart.days.first().date)\n    }\n~~~\n\n3. 实现更新逻辑 **updateMonthYearHeader()**\n\n~~~kotlin\n/**\n * 更新年月标题\n *\n * @param date 当前周的起始日期\n */\nprivate fun updateMonthYearHeader(date: LocalDate) {\n    val formatter = DateTimeFormatter.ofPattern(\"yyyy年MM月\")\n    val monthYearText = date.format(formatter)\n\n    // 如果文本没变化，不更新\n    if (monthYearHeader.text.toString() == monthYearText){\n        return\n    }\n\n    monthYearHeader.text = monthYearText\n}\n~~~\n\n## 日程添加\n\n[回到目录](#目录)\n\n### 点击按钮打开日程添加表单\n\n[回到上一级](#日程添加)\n\n1. 在layout中准备表单界面 dialog_add_event.xml\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\n<!-- 添加日程表格 -->\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\"\n    android:padding=\"16dp\">\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"添加日程\"\n        android:textSize=\"20sp\"\n        android:textStyle=\"bold\"\n        android:gravity=\"center\"\n        android:layout_marginBottom=\"16dp\"/>\n\n    <com.google.android.material.textfield.TextInputLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\">\n\n        <com.google.android.material.textfield.TextInputEditText\n            android:id=\"@+id/editTextDate\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"日期\"\n            android:focusable=\"false\"\n            android:clickable=\"true\"/>\n    </com.google.android.material.textfield.TextInputLayout>\n\n    <com.google.android.material.textfield.TextInputLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\">\n\n        <com.google.android.material.textfield.TextInputEditText\n            android:id=\"@+id/editTextTitle\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"日程标题\"/>\n    </com.google.android.material.textfield.TextInputLayout>\n\n    <com.google.android.material.textfield.TextInputLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\">\n\n        <com.google.android.material.textfield.TextInputEditText\n            android:id=\"@+id/editTextContent\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"日程内容\"\n            android:minLines=\"3\"/>\n    </com.google.android.material.textfield.TextInputLayout>\n\n    <com.google.android.material.textfield.TextInputLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"16dp\">\n\n        <com.google.android.material.textfield.TextInputEditText\n            android:id=\"@+id/editTextReminder\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"提醒时间\"\n            android:focusable=\"false\"\n            android:clickable=\"true\"/>\n    </com.google.android.material.textfield.TextInputLayout>\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\"\n        android:gravity=\"end\">\n\n        <Button\n            android:id=\"@+id/buttonCancel\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"取消\"\n            style=\"@style/Widget.MaterialComponents.Button.TextButton\"/>\n\n        <Button\n            android:id=\"@+id/buttonConfirm\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"确认\"\n            style=\"@style/Widget.MaterialComponents.Button.TextButton\"/>\n    </LinearLayout>\n\n</LinearLayout>\n~~~\n\n* 其中，TextInputLayout 相比于传统的 EditText 增加了很多功能\n  * 浮动标签：提示词在输入内容后不会消失，而是显示于左上方中\n  * 错误提示：可以方便地显示错误信息，帮助用户理解输入要求\n  * 辅助文本：支持显示帮助文本或字符计数等辅助信息\n  * 图标支持：可以在文本框内添加前缀、后缀图标\n* 每个 TextInputLayout 都围起一个 TextInputEditText 子元素\n  * 属性 focusable=\"false\" 表明该元素不能获得焦点，即不通过键盘直接输入\n  * 属性 clickable=\"true\" 表明该元素可以通过点击触发，通过触发事件，间接输入到输入框中\n\n2. 在MainActivity中添加点击按钮打开表单的逻辑\n\n   1. 在onCreate()方法中调用 **setupFloatingActionButton()** 方法\n   2. 在MainActivity类内实现 **setupFloatingActionButton()** 方法\n\n        ~~~kotlin\n        private fun setupFloatingActionButton() {\n            binding.fabAddEvent.setOnClickListener {\n                showAddEventDialog()\n            }\n        }\n        ~~~\n        * 绑定FAB按钮触发点击事件\n        * 通过点击事件触发显示表单方法 **showAddEventDialog()**\n\n   3. 实现 showAddEventDialog() 方法\n      1. 创建对话框\n        ~~~kotlin\n            private fun showAddEventDialog() {\n                \n                // 1. 创建对话框\n                val builder = AlertDialog.Builder(this)\n                val inflater = layoutInflater\n                val dialogView = inflater.inflate(R.layout.dialog_add_event, null)\n                builder.setView(dialogView)\n\n                val dialog = builder.create()\n        ~~~\n        * 使用 AlertDialog.Builder 创建**对话框构建器**\n        * 通过 layoutInflater 加载 dialog_add_event.xml 布局文件\n        * 将加载的视图设置为对话框的内容视图\n        * 通过 builder.create() 创建**实际的对话框对象**\n\n      2. 获取对话框中的UI组件\n      ~~~kotlin\n              // 2. 查找对话框中的UI组件\n              val editTextDate = dialogView.findViewById<TextInputEditText>(R.id.editTextDate)\n              val editTextTitle = dialogView.findViewById<TextInputEditText>(R.id.editTextTitle)\n              val editTextContent = dialogView.findViewById<TextInputEditText>(R.id.editTextContent)\n              val editTextReminder = dialogView.findViewById<TextInputEditText>(R.id.editTextReminder)\n              val buttonCancel = dialogView.findViewById<Button>(R.id.buttonCancel)\n              val buttonConfirm = dialogView.findViewById<Button>(R.id.buttonConfirm)\n      ~~~\n      3. 设置默认日期和日期选择器\n      ~~~kotlin\n              // 3. 设置默认日期为今天，若有选择的日期，则使用选择的日期\n              val selectedDate = getSelectedDate()\n              val defaultDate = selectedDate ?: LocalDate.now() // 若无选择日期，则使用今天\n              val formatter = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\") // 日期格式\n              editTextDate.setText(defaultDate.format(formatter)) // 设置默认日期\n\n              // 设置日期选择器\n              editTextDate.setOnClickListener {\n                  showDatePicker(editTextDate)\n              }\n\n              // 设置提醒时间选择器\n              editTextReminder.setOnClickListener {\n                  showTimePicker(editTextReminder)\n              }\n      ~~~\n      4. 设置按钮并显示对话框\n      ~~~kotlin\n              // 设置取消按钮\n              buttonCancel.setOnClickListener {\n                  dialog.dismiss()\n              }\n\n              // 设置确认按钮\n              buttonConfirm.setOnClickListener {\n                  val title = editTextTitle.text.toString()\n                  val content = editTextContent.text.toString()\n                  val date = editTextDate.text.toString()\n                  val reminder = editTextReminder.text.toString()\n\n                  // 处理添加事件逻辑\n                  Toast.makeText(this, \"日程已添加\", Toast.LENGTH_SHORT).show()\n                  dialog.dismiss()\n              }\n              \n              // 显示对话框\n              dialog.show()\n          }\n      ~~~\n\n   4. 实现 showDatePicker() 方法和 showTimePicker() 方法\n      1. 实现 showTimePicker() 方法\n      ~~~kotlin\n          private fun showTimePicker(editTextReminder: TextInputEditText) {\n              // 创建时间选择器对象\n              val timePicker = TimePickerDialog(\n                  this,\n                  {_, hourOfDay, minute ->\n                      val selectedTime = String.format(\"%02d:%02d\", hourOfDay, minute) // 将时间格式化为HH:mm\n                      editTextReminder.setText(selectedTime) // 设置选中的时间\n                  },\n                  9, // 默认选中的时间为9:00\n                  0,\n                  true // 是否使用24小时制\n              )\n              timePicker.show()\n          }\n      ~~~\n\n      2. 实现 showDatePicker() 方法\n\n      ~~~kotlin\n          private fun showDatePicker(editTextDate: TextInputEditText) {\n              val today = LocalDate.now()\n              val datePicker = DatePickerDialog(\n                  this,\n                  {_, year, month, dayOfMonth ->\n                      val selectedDate = LocalDate.of(year, month + 1, dayOfMonth) // 创建选中日期的 LocalDate 对象（需要将月份+1，因为DatePicker的月份是从0开始的）\n                      val formatter = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\") // 日期格式\n                      editTextDate.setText(selectedDate.format(formatter)) // 显示选中的日期\n                  },\n                  today.year, \n                  today.monthValue - 1, // month: today.monthValue - 1 - 日期选择器的初始月份设置为当前月份（需要减1，因为DatePicker的月份是从0开始的）\n                  today.dayOfMonth\n              )\n              datePicker.show()\n          }\n      ~~~\n\n   5. 实现 getSelectedDate() 方法\n   ~~~kotlin\n       private fun getSelectedDate(): LocalDate?{\n           val viewPager = binding.viewPager\n           val currentFragment = supportFragmentManager.findFragmentByTag(\"f\" + viewPager.currentItem)\n\n           return when(currentFragment){\n               is DayViewFragment -> {\n                   // 从日视图中获取选中日期\n                   null\n               }\n               is WeekViewFragment -> {\n                   // 从周视图中获取选中日期\n                   currentFragment.getSelectedDate()\n               }\n               is MonthViewFragment -> {\n                   // 从月视图中获取选中日期\n                   currentFragment.getSelectedDate()\n               }\n               else -> null\n           }\n       }\n   ~~~\n   * 首先通过 binding.viewPager 获取应用中的**ViewPager组件**\n   * 通过 viewPager.currentItem 获取当前显示页面的**索引**\n   * 使用 supportFragmentManager.findFragmentByTag(\"f\" + viewPager.currentItem) 根据标签查找当前Fragment\n     * ViewPager2会自动为每个页面的Fragment分配标签，格式为 **\"f\"+页面索引**\n     * 这样就可以获取到当前显示的具体Fragment实例\n\n3. 在 MonthViewFragment 和 WeekViewFragment 中添加 getSelectedDate() 方法\n\n   * MonthViewFragment 的 getSelectedDate() 方法实现如下：\n\n   ~~~kotlin\n       fun getSelectedDate(): LocalDate?{\n           val monthViewBinder = binding.monthCalendarView.dayBinder as? MonthDayViewBinder // 将 dayBinder 安全转换为 MonthDayViewBinder\n           return  monthViewBinder?.getSelectedDate()\n       }\n   ~~~\n\n\n   * WeekViewFragment 的 getSelectedDate() 方法实现如下：\n   ~~~kotlin\n       fun getSelectedDate(): LocalDate?{\n           // 获取 WeekViewBinder 实例并返回其选中的日期\n           val weekViewBinder = binding.weekCalendarView.dayBinder as? WeekViewBinder // 将 dayBinder 安全转换为WeekViewBinder\n           return weekViewBinder?.getSelectedDate()\n       }\n   ~~~\n\n4. 在 WeekViewBinder 和 MonthDayViewBinder 中分别实现在其fragment中调用的 getSelectedDate() 方法\n\n* WeekViewBinder 的 getSelectedDate() 方法实现如下：\n\n~~~kotlin\n    fun getSelectedDate(): LocalDate?{\n        return selectedDate\n    }\n~~~\n\n* MonthDayViewBinder 的 getSelectedDate() 方法实现如下：\n\n~~~kotlin\n    fun getSelectedDate(): LocalDate?{\n        return selectedDate\n    }\n~~~\n\n至此，我们可以通过按钮打开添加日程的表单，并选择日期和时间，添加内容\n\n### 日程列表实现\n\n1. 创建日程卡片视图 item_event_card.xml\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- 日程卡片布局 -->\n<com.google.android.material.card.MaterialCardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_margin=\"8dp\"\n    app:cardCornerRadius=\"12dp\"\n    app:cardElevation=\"4dp\"\n    app:strokeWidth=\"0dp\">\n\n    <androidx.constraintlayout.widget.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"16dp\">\n\n        <!-- 事件颜色标识 -->\n        <View\n            android:id=\"@+id/eventColorIndicator\"\n            android:layout_width=\"6dp\"\n            android:layout_height=\"0dp\"\n            android:background=\"@color/magenta_500\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"/>\n\n        <!-- 事件标题 -->\n        <TextView\n            android:id=\"@+id/eventTitle\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"12dp\"\n            android:layout_marginEnd=\"8dp\"\n            android:text=\"事件标题\"\n            android:textAppearance=\"@style/TextAppearance.Material3.TitleMedium\"\n            android:textColor=\"?attr/colorOnSurface\"\n            app:layout_constraintEnd_toStartOf=\"@+id/editEventButton\"\n            app:layout_constraintStart_toEndOf=\"@+id/eventColorIndicator\"\n            app:layout_constraintTop_toTopOf=\"parent\"/>\n\n        <!-- 事件内容摘要 -->\n        <TextView\n            android:id=\"@+id/eventContent\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"4dp\"\n            android:ellipsize=\"end\"\n            android:maxLines=\"1\"\n            android:text=\"事件内容摘要，超出十个字显示省略号\"\n            android:textAppearance=\"@style/TextAppearance.Material3.BodyMedium\"\n            android:textColor=\"?attr/colorOnSurface\"\n            app:layout_constraintEnd_toEndOf=\"@+id/eventTitle\"\n            app:layout_constraintStart_toStartOf=\"@+id/eventTitle\"\n            app:layout_constraintTop_toBottomOf=\"@+id/eventTitle\"/>\n\n        <!-- 时间信息 -->\n        <TextView\n            android:id=\"@+id/eventTime\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"持续时间\"\n            android:textAppearance=\"@style/TextAppearance.Material3.BodySmall\"\n            android:textColor=\"?attr/colorOnSurfaceVariant\"\n            app:layout_constraintEnd_toEndOf=\"@+id/eventTitle\"\n            app:layout_constraintStart_toStartOf=\"@+id/eventTitle\"\n            app:layout_constraintTop_toBottomOf=\"@+id/eventContent\"/>\n\n        <!-- 提醒时间 -->\n        <TextView\n            android:id=\"@+id/eventReminder\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"4dp\"\n            android:drawableStart=\"@drawable/ic_notification\"\n            android:drawablePadding=\"4dp\"\n            android:text=\"提前15分钟提醒\"\n            android:textAppearance=\"@style/TextAppearance.Material3.BodySmall\"\n            android:textColor=\"?attr/colorOnSurfaceVariant\"\n            app:layout_constraintEnd_toEndOf=\"@+id/eventTitle\"\n            app:layout_constraintStart_toStartOf=\"@+id/eventTitle\"\n            app:layout_constraintTop_toBottomOf=\"@+id/eventTime\" />\n\n        <!-- 编辑按钮 -->\n        <ImageButton\n            android:id=\"@+id/editEventButton\"\n            android:layout_width=\"36dp\"\n            android:layout_height=\"36dp\"\n            android:layout_marginEnd=\"8dp\"\n            android:background=\"?attr/selectableItemBackgroundBorderless\"\n            android:contentDescription=\"编辑事件\"\n            android:src=\"@drawable/ic_edit\"\n            app:layout_constraintEnd_toStartOf=\"@+id/eventCompletedCheckbox\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:tint=\"?attr/colorOnSurfaceVariant\" />\n\n        <!-- 完成状态复选框 -->\n        <CheckBox\n            android:id=\"@+id/eventCompletedCheckbox\"\n            android:layout_width=\"36dp\"\n            android:layout_height=\"36dp\"\n            android:layout_marginEnd=\"8dp\"\n            app:layout_constraintEnd_toStartOf=\"@+id/deleteEventButton\"\n            app:layout_constraintTop_toTopOf=\"parent\" />\n\n        <!-- 删除按钮 -->\n        <ImageButton\n            android:id=\"@+id/deleteEventButton\"\n            android:layout_width=\"36dp\"\n            android:layout_height=\"36dp\"\n            android:background=\"?attr/selectableItemBackgroundBorderless\"\n            android:contentDescription=\"删除事件\"\n            android:src=\"@drawable/ic_delete\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:tint=\"?attr/colorError\" />\n    </androidx.constraintlayout.widget.ConstraintLayout>\n</com.google.android.material.card.MaterialCardView>\n~~~\n* **MaterialCardView** 是 Google Material Design 组件库中的一个核心 UI 组件，它是一个现代化的**卡片视图**实现\n\n2. 修改日视图 fragment_day_view.xml\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!--\n    日视图 Fragment 的布局文件\n    包含标题和日视图内容区域\n-->\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:orientation=\"vertical\">\n\n    <!-- 日视图标题文本 -->\n    <TextView\n        android:id=\"@+id/dayHeaderText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"16dp\"\n        android:text=\"日视图\"\n        android:textAlignment=\"center\"\n        android:textAppearance=\"@style/TextAppearance.Material3.HeadlineSmall\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"/>\n\n    <!-- 无事件提示 -->\n    <TextView\n        android:id=\"@+id/noEventText\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"32dp\"\n        android:text=\"今天暂无事件\"\n        android:textAppearance=\"@style/TextAppearance.Material3.BodyLarge\"\n        android:textColor=\"?attr/colorOnSurfaceVariant\"\n        android:visibility=\"gone\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/dayHeaderText\"/>\n\n    <!-- 事件列表 -->\n    <androidx.recyclerview.widget.RecyclerView\n        android:id=\"@+id/eventRecyclerView\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        android:layout_marginTop=\"16dp\"\n        android:clipToPadding=\"false\"\n        android:paddingBottom=\"16dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/dayHeaderText\"/>\n</androidx.constraintlayout.widget.ConstraintLayout>\n~~~\n\n* RecyclerView 是 Android 中一个非常重要的 UI 组件，用于在有限的窗口中展示大量数据列表\n* RecyclerView 需要 Adapter 类适配器为其绑定数据源\n* Adapter 的内部类 ViewHolder 可以持有RecyclerView 的子项视图\n\n3. 创建适配器为 RecyclerView 绑定数据\n\n~~~kotlin\n/**\n * 事件卡片适配器类\n * 用于在 RecyclerView 中显示日程事件列表，每个事件以卡片形式展示\n *\n * @param events 初始事件列表\n * @param onEditClick 编辑按钮点击回调函数\n * @param onDeleteClick 删除按钮点击回调函数\n * @param onCompleteToggle 完成状态切换回调函数\n */\nclass EventCardAdapter(\n    private var events: List<CalendarEvent>, // 事件列表数据\n    private val onEditClick: (CalendarEvent) -> Unit, // 编辑事件回调\n    private val onDeleteClick: (CalendarEvent) -> Unit, // 删除事件回调\n    private val onCompleteToggle: (CalendarEvent, Boolean) -> Unit // 完成状态切换回调\n): RecyclerView.Adapter<EventCardAdapter.EventViewHolder>() {\n    /**\n     * 创建 ViewHolder 实例\n     *\n     * @param parent 父 ViewGroup\n     * @param viewType 视图类型\n     * @return 返回新创建的 EventViewHolder 实例\n     */\n    override fun onCreateViewHolder(\n        parent: ViewGroup,\n        viewType: Int\n    ): EventCardAdapter.EventViewHolder {\n        val view = LayoutInflater.from(parent.context)\n            .inflate(R.layout.item_event_card, parent, false) // 从布局文件创建视图\n        return EventViewHolder(view)\n    }\n\n    /**\n     * 绑定数据到 ViewHolder\n     *\n     * @param holder 要绑定数据的 ViewHolder\n     * @param position 数据在列表中的位置\n     */\n    override fun onBindViewHolder(holder: EventCardAdapter.EventViewHolder, position: Int) {\n        holder.bind(events[position]) // 绑定指定位置的数据到 ViewHolder\n    }\n\n    /**\n     * 获取事件列表的大小\n     *\n     * @return 返回事件列表的大小\n     */\n    override fun getItemCount(): Int {\n        return events.size // 返回事件列表大小\n    }\n\n    /**\n     * 更新事件列表数据\n     *\n     * @param newEvents 新的事件列表\n     */\n    fun updateEvents(newEvents: List<CalendarEvent>){\n        events = newEvents\n        notifyDataSetChanged() // 通知数据变更，刷新界面\n    }\n\n    /**\n     * 事件卡片 ViewHolder 类\n     * 用于持有和管理事件卡片中的各个 UI 元素\n     */\n    inner class EventViewHolder(itemView: View): RecyclerView.ViewHolder(itemView){\n        private val colorIndicator: View = itemView.findViewById(R.id.eventColorIndicator) // 事件颜色指示器\n        private val titleText: TextView = itemView.findViewById(R.id.eventTitle) // 事件标题文本\n        private val contentText: TextView = itemView.findViewById(R.id.eventContent) // 事件内容文本\n        private val timeText: TextView = itemView.findViewById(R.id.eventTime) // 事件时间文本\n        private val reminders: TextView = itemView.findViewById(R.id.eventReminder) // 提醒时间文本\n        private val editButton: ImageButton = itemView.findViewById(R.id.editEventButton) // 编辑按钮\n        private val completeCheckbox: CheckBox = itemView.findViewById(R.id.eventCompletedCheckbox) // 完成状态复选框\n        private val deleteButton: ImageButton = itemView.findViewById(R.id.deleteEventButton) // 删除按钮\n\n        /**\n         * 绑定事件数据到视图元素\n         *\n         * @param event 要绑定的事件数据\n         */\n        fun bind(event: CalendarEvent){\n            // 设置事件颜色\n            colorIndicator.setBackgroundColor(event.eventColor) // 根据事件颜色设置指示器背景色\n\n            // 设置事件标题\n            titleText.text = event.title // 显示事件标题\n\n            // 设置内容摘要(超过十个字省略后面的字)\n            contentText.text = if (event.content.length > 10){\n                \"${event.content.take(10)}...\" // 截取前10个字符并添加省略号\n            }else{\n                event.content // 内容不足10个字符则完整显示\n            }\n\n            // 设置时间\n            val startTime = formatTime(event.startTime) // 格式化开始时间\n            val endTime = formatTime(event.endTime) // 格式化结束时间\n            timeText.text = \"$startTime - $endTime\" // 显示时间范围\n\n            // 设置提醒时间\n            reminders.text = formatReminderTime(event.reminderTime) // 显示提醒时间\n\n            // 设置完成状态\n            completeCheckbox.isChecked = event.isCompleted // 根据事件状态设置复选框选中状态\n\n            // 设置点击事件\n            editButton.setOnClickListener { onEditClick(event) } // 点击编辑按钮触发回调\n            deleteButton.setOnClickListener { onDeleteClick(event) } // 点击删除按钮触发回调\n            completeCheckbox.setOnCheckedChangeListener { _, isChecked ->\n                onCompleteToggle(event, isChecked) // 切换完成状态时触发回调\n            }\n        }\n\n        /**\n         * 格式化时间戳为 HH:mm 格式的字符串\n         *\n         * @param timeStamp 时间戳\n         * @return 格式化后的时间字符串，如果时间戳为0则返回\"无\"\n         */\n        private fun formatTime(timeStamp: Long): String{\n            return if (timeStamp == 0L){\n                \"无\" // 时间戳为0时显示\"无\"\n            }else{\n                val date = Date(timeStamp)\n                val format = SimpleDateFormat(\"HH:mm\", Locale.getDefault()) // 使用 HH:mm 格式\n                format.format(date) // 格式化时间戳\n            }\n        }\n\n        /**\n         * 格式化提醒时间戳为 HH:mm 格式的字符串\n         *\n         * @param timeStamp 提醒时间戳\n         * @return 格式化后的提醒时间字符串，如果时间戳为0则返回\"无\"\n         */\n        private fun formatReminderTime(timeStamp: Long): String{\n            return if (timeStamp == 0L){\n                \"无\" // 时间戳为0时显示\"无\"\n            }else{\n                val date = Date(timeStamp)\n                val format = SimpleDateFormat(\"HH:mm\", Locale.getDefault()) // 使用 HH:mm 格式\n                format.format(date) // 格式化时间戳\n            }\n        }\n    }\n}\n~~~\n* 实现 ViewHolder 模式\n* 绑定数据到视图\n* 处理用户交互（增加、修改、删除）\n\n4. 准备图标按钮需要的矢量图标资源\n\n* 删除按钮图标 ic_delete.xml\n\n~~~xml\n<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"24dp\"\n    android:height=\"24dp\"\n    android:viewportWidth=\"24\"\n    android:viewportHeight=\"24\"\n    android:tint=\"?attr/colorError\">\n    <path\n        android:fillColor=\"@android:color/white\"\n        android:pathData=\"M6,19c0,1.1 0.9,2 2,2h8c1.1,0 2,-0.9 2,-2V7H6v12zM19,4h-3.5l-1,-1h-5l-1,1H5v2h14V4z\"/>\n</vector>\n~~~\n\n* 编辑按钮图标 ic_edit.xml\n\n~~~xml\n<!-- res/drawable/ic_edit.xml -->\n<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"24dp\"\n    android:height=\"24dp\"\n    android:viewportWidth=\"24\"\n    android:viewportHeight=\"24\">\n    <path\n        android:fillColor=\"#FF000000\"\n        android:pathData=\"M3,17.25V21h3.75L17.81,9.94l-3.75,-3.75L3,17.25zM20.71,7.04c0.39,-0.39 0.39,-1.02 0,-1.41l-2.34,-2.34c-0.39,-0.39 -1.02,-0.39 -1.41,0l-1.83,1.83 3.75,3.75 1.83,-1.83z\"/>\n</vector>\n~~~\n\n* 确认完成图标 ic_notification.xml\n\n~~~xml\n<!-- res/drawable/ic_notification.xml -->\n<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"24dp\"\n    android:height=\"24dp\"\n    android:viewportWidth=\"24\"\n    android:viewportHeight=\"24\"\n    android:tint=\"?attr/colorOnSurfaceVariant\">\n    <path\n        android:fillColor=\"@android:color/white\"\n        android:pathData=\"M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.89,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32L13.5,4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z\"/>\n</vector>\n~~~\n\n5. 修改日视图 DayViewFragment.kt 以初始化适配器，并启动数据库，为适配器设置数据源\n\n~~~kotlin\n/**\n * 日视图 Fragment\n * 负责显示和管理日历的日视图，显示特定日期的详细信息\n */\nclass DayViewFragment: Fragment() {\n    private var _binding: FragmentDayViewBinding? = null\n    private val binding get() = _binding!!\n\n    private lateinit var dayTitle: TextView\n    private lateinit var noEventsText: TextView\n    private lateinit var eventsRecyclerView: RecyclerView\n    private lateinit var eventAdapter: EventCardAdapter\n\n    /**\n     * 事件更新观察者\n     * 当收到事件更新通知时，重新加载当天的事件列表\n     */\n    private val eventUpdateObserver = Observer<Boolean> { _ ->\n        // 当收到事件更新时，刷新日程列表\n        loadEventsForDate()\n    }\n\n    /**\n     * 创建 Fragment 的视图层次结构\n     *\n     * @param inflater 用于 inflate 视图的 LayoutInflater\n     * @param container 此 Fragment 的父 ViewGroup\n     * @param savedInstanceState 保存的状态信息，如果 Fragment 是重新创建的，则不为 null\n     * @return 返回此 Fragment 的根视图\n     */\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        _binding = FragmentDayViewBinding.inflate(inflater, container, false)\n        val view = _binding!!.root\n\n        dayTitle = binding.dayHeaderText\n        noEventsText = binding.noEventText\n        eventsRecyclerView = binding.eventRecyclerView\n\n        return view\n    }\n\n    /**\n     * 设置 RecyclerView 及其适配器\n     * 初始化事件列表的显示组件\n     */\n    private fun setupRecyclerView() {\n        eventAdapter = EventCardAdapter(\n            events = emptyList(),\n            onEditClick = { event ->\n                editEvent(event)\n            },\n            onDeleteClick = { event ->\n                deleteEvent(event)\n            },\n            onCompleteToggle = { event, isCompleted ->\n                toggleEventCompletion(event, isCompleted)\n            }\n        )\n\n        eventsRecyclerView.apply {\n            layoutManager = LinearLayoutManager(context)\n            adapter = eventAdapter\n        }\n    }\n\n    /**\n     * 加载指定日期的事件\n     * 触发从数据库加载事件数据的操作\n     */\n    private fun loadEventsForDate(){\n        loadEventFromDatabase()\n    }\n\n    /**\n     * 更新事件列表显示\n     * 根据事件列表是否为空来控制空提示文本的显示\n     *\n     * @param events 要显示的事件列表\n     */\n    private fun updateEventList(events: List<CalendarEvent>){\n        eventAdapter.updateEvents(events)\n        noEventsText.visibility = if (events.isEmpty()) View.VISIBLE else View.GONE\n    }\n\n    /**\n     * 从数据库加载事件数据\n     * 异步查询数据库获取当天的所有事件，并更新UI显示\n     */\n    private fun loadEventFromDatabase(){\n        lifecycleScope.launch {\n            try {\n                // 获取数据库实例\n                val database = CalendarDatabase.getInstance(requireContext())\n                val eventDao = database.eventDao()\n\n                // 计算当天的开始和结束日期\n                val currentDate = LocalDate.now()\n                val startOfDay = currentDate.atStartOfDay()\n                val endOfDay = currentDate.atTime(23, 59, 59)\n\n                val startTimeStamp = startOfDay.toInstant(ZoneOffset.UTC).toEpochMilli()\n                val endTimeStamp = endOfDay.toInstant(ZoneOffset.UTC).toEpochMilli()\n\n                // 查询数据库并获取事件\n                val events = eventDao.getEventsInRange(startTimeStamp, endTimeStamp)\n\n                // 更新UI\n                updateEventList(events)\n            } catch (e: Exception){\n                // 处理异常\n                Toast.makeText(context, \"加载事件失败：${e.message}\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n\n    /**\n     * 编辑指定事件\n     *\n     * @param event 需要编辑的事件对象\n     */\n    private fun editEvent(event: CalendarEvent) {\n        // 添加编辑事件逻辑\n    }\n    \n    /**\n     * 删除指定事件\n     *\n     * @param event 需要删除的事件对象\n     */\n    private fun deleteEvent(event: CalendarEvent) {\n        // 添加删除事件逻辑\n    }\n    \n    /**\n     * 切换事件完成状态\n     *\n     * @param event 需要切换状态的事件对象\n     * @param isCompleted 事件的完成状态\n     */\n    private fun toggleEventCompletion(event: CalendarEvent, isCompleted: Boolean) {\n        // 添加切换事件完成状态逻辑\n    }\n\n    /**\n     * 当 Fragment 的视图创建完成后调用\n     * 在这里进行视图相关的初始化操作\n     *\n     * @param view 此 Fragment 的根视图\n     * @param savedInstanceState 保存的状态信息\n     */\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        // 观察事件更新\n        EventUpdateManager.getInstance().eventUpdated.observe(\n            viewLifecycleOwner,\n            eventUpdateObserver\n        )\n\n        \n        // 初始化 ViewModel\n        val database = CalendarDatabase.getInstance(requireContext())\n        val eventDao = database.eventDao()\n        \n        setupRecyclerView()\n        \n        // 加载初始数据\n        loadEventsForDate()\n        setupDayView()\n    }\n\n    /**\n     * 设置日视图的相关配置\n     * 包括设置当前日期标题等\n     */\n    private fun setupDayView(){\n        val currentDate = LocalDate.now()\n        // 设置日视图头部显示的日期文本\n        binding.dayHeaderText.text = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\").format(currentDate)\n    }\n\n    /**\n     * 当 Fragment 的视图被销毁时调用\n     * 清理资源，避免内存泄漏\n     */\n    override fun onDestroyView() {\n        super.onDestroyView()\n        _binding = null\n    }\n}\n~~~\n* 初始化界面组件\n* 设置 RecyclerView 和适配器\n* 从数据库加载当天事件数据\n* 更新界面显示\n* 使用 Room 数据库查询当天事件\n* 计算查询时间范围（当天开始到结束）\n* 异步加载数据并更新 UI\n* 处理空数据状态显示\n* 声明观察者，并在 **OnViewCreated** 中激活观察者，通过 **EventUpdateManager.getInstance().eventUpdated.observe()** 来监听 **eventUpdated** 的改变\n\n6. 创建事件管理类 EventUpdateManager.kt 使用 LiveData 机制，监听数据更新，刷新UI\n\n~~~kotlin\n/**\n * 事件更新管理器\n * 使用单例模式管理事件更新通知，防止频繁更新UI\n */\nclass EventUpdateManager private constructor(){\n    private val _eventUpdated = MutableLiveData<Boolean>()\n    val eventUpdated: LiveData<Boolean> = _eventUpdated\n\n    /**\n     * 上次通知时间戳\n     * 用于防抖处理，避免过于频繁的更新通知\n     */\n    private var lastNotifyTime = 0L\n    \n    /**\n     * 防抖间隔时间（毫秒）\n     * 两次通知之间的最小时间间隔\n     */\n    private val debounceInterval = 500L\n\n    /**\n     * 通知事件已添加\n     * 通过防抖机制控制通知频率，避免短时间内重复通知\n     */\n    fun notifyEventAdded(){\n        val currentTime = System.currentTimeMillis()\n        // 如果当前时间间隔小于防抖间隔，则不执行通知\n        if (currentTime - lastNotifyTime > debounceInterval){\n            _eventUpdated.value = true\n            lastNotifyTime = currentTime\n        }\n    }\n\n    companion object{\n        @Volatile\n        private var INSTANCE: EventUpdateManager? = null\n\n        /**\n         * 获取 EventUpdateManager 的单例实例\n         *\n         * @return EventUpdateManager 的单例对象\n         */\n        fun getInstance(): EventUpdateManager{\n            return INSTANCE ?: synchronized(this){\n                val instance = EventUpdateManager()\n                INSTANCE = instance\n                instance\n            }\n        }\n    }\n}\n~~~\n* 使用 **LiveData 机制**，可变的_eventUpdated 属性保存事件更新状态，不可变的eventUpdated 属性提供外部访问\n* 当事件变化调用 notifyEventAdded() 方法时，LiveData机制会通知所有**活跃的观察者**\n* 观察者调用相关方法，更新UI\n\n7. 在主活动 MainActivity.kt 中 **saveEventToDatabase** 方法中，当操作完成后，调用 EventUpdateManager.getInstance().notifyEventAdded() 方法通知事件已添加，通过 LiveData 机制，更新UI\n\n~~~kotlin\n// 在主线程中显示成功消息\nwithContext(Dispatchers.Main){\n    Toast.makeText(this@MainActivity, \"日程已添加，ID：$eventId\", Toast.LENGTH_SHORT).show()\n\n    // 通知日程列表刷新\n    EventUpdateManager.getInstance().notifyEventAdded()\n\n}\n~~~\n\n### 日程修改实现\n\n* 该步骤要实现 **DayViewFragment.kt** 中的 **editEvent()** 方法\n* 该方法的传递逻辑为 *editEvent() -> setupRecyclerView() -> onViewCreated()* \n* 通过 EventCardAdapter 类中的 editButton.setOnClickListener() 方法触发调用\n\n~~~kotlin\n/**\n * 编辑指定事件\n *\n * @param event 需要编辑的事件对象\n */\nprivate fun editEvent(event: CalendarEvent) {\n    // 添加编辑事件逻辑\n\n}\n~~~\n\n1. 创建对话框\n\n~~~kotlin\n// 创建对话框\nval dialogView = LayoutInflater.from(context).inflate(R.layout.dialog_add_event, null)\nval dialogBuilder = AlertDialog.Builder(requireContext())\ndialogBuilder.setView(dialogView)\n~~~\n\n2. 获取对话框的视图元素\n\n~~~kotlin\n// 获取对话框的视图元素\nval dialogTitle = dialogView.findViewById<TextView>(R.id.dialogTitle)\nval eventIdText = dialogView.findViewById<TextView>(R.id.eventIdText)\nval editTextDate = dialogView.findViewById<TextInputEditText>(R.id.editTextDate)\nval editTextTitle = dialogView.findViewById<TextInputEditText>(R.id.editTextTitle)\nval editTextContent = dialogView.findViewById<TextInputEditText>(R.id.editTextContent)\nval editTextReminder = dialogView.findViewById<TextInputEditText>(R.id.editTextReminder)\nval buttonCancel = dialogView.findViewById<Button>(R.id.buttonCancel)\nval buttonConfirm = dialogView.findViewById<Button>(R.id.buttonConfirm)\n~~~\n\n3. 对话框视图信息回显\n\n~~~kotlin\n// 回显事件信息 - 将当前事件的信息显示在对话框中供用户编辑\neventIdText.text = event.id.toString()\neditTextTitle.setText(event.title)\neditTextContent.setText(event.content)\n\n// 格式化显示日期 - 将事件开始时间格式化为\"yyyy年MM月dd日\"格式显示\nval eventDate = Date(event.startTime)\nval dateFormat = SimpleDateFormat(\"yyyy年MM月dd日\", Locale.getDefault())\neditTextDate.setText(dateFormat.format(eventDate))\n\n// 格式化并显示提醒时间 - 如果事件设置了提醒时间，则格式化为\"HH:mm\"格式显示\nval timeFormatter = SimpleDateFormat(\"HH:mm\", Locale.getDefault())\nif (event.reminderTime != 0L){\n    editTextReminder.setText(timeFormatter.format(Date(event.reminderTime)))\n}\n~~~\n\n4. 设置日期选择器和时间选择器\n\n~~~kotlin\n// 设置日期选择器 - 点击日期输入框时弹出日期选择器\neditTextDate.setOnClickListener {\n    showDatePicker(editTextDate)\n}\n\n// 设置提醒时间选择器 - 点击提醒时间输入框时弹出时间选择器\neditTextReminder.setOnClickListener {\n    showTimePicker(editTextReminder)\n}\n~~~\n\n* 日期选择器\n\n~~~kotlin\nprivate fun showDatePicker(editTextDate: TextInputEditText) {\n    val today = LocalDate.now()\n    val datePicker = DatePickerDialog(\n        requireContext(),\n        {_, year, month, dayOfMonth ->\n            val selectedDate = LocalDate.of(year, month + 1, dayOfMonth)\n            val formatter = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\")\n            editTextDate.setText(selectedDate.format(formatter))\n        },\n        today.year,\n        today.monthValue - 1,\n        today.dayOfMonth\n    )\n    datePicker.show()\n}\n~~~\n\n* 时间选择器\n\n~~~kotlin\nprivate fun showTimePicker(editTextReminder: TextInputEditText) {\n    val timePicker = TimePickerDialog(\n        requireContext(),\n        {_, hourOfDay, minute ->\n            val selectedTime = String.format(\"%02d:%02d\", hourOfDay, minute)\n            editTextReminder.setText(selectedTime)\n        },\n        9,\n        0,\n        true\n    )\n    timePicker.show()\n}\n~~~\n\n5. 创建并显示对话框\n\n~~~kotlin\nval dialog = dialogBuilder.create()\n~~~\n\n6. 设置取消按钮事件\n\n~~~kotlin\nbuttonCancel.setOnClickListener {\n    dialog.dismiss()\n}\n~~~\n\n7. 设置确认按钮事件\n\n~~~kotlin\nbuttonConfirm.setOnClickListener {\n    // 添加修改事件逻辑\n    try {\n        // 事件逻辑\n    } catch (e: Exception) {\n        // 失败处理\n    }\n}\n~~~\n\n* 使用协程作用于执行数据库的耗时操作\n\n~~~kotlin\nlifecycleScope.launch {\n    // 修改数据库相关操作\n}\n~~~\n\n* 获取数据库实例和事件数据访问对象\n\n~~~kotlin\nval database = CalendarDatabase.getInstance(requireContext())\nval eventDao = database.eventDao()\n~~~\n\n* 获取修改的数据并解析\n\n~~~kotlin\n// 获取用户输入的数据\nval title = editTextTitle.text.toString()\nval content = editTextContent.text.toString()\nval reminder = editTextReminder.text.toString()\n\n// 解析日期 - 将用户输入的日期字符串转换为LocalDate对象\nval dateFormatter = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日\")\nval localDate = LocalDate.parse(editTextDate.text.toString(), dateFormatter)\n// 计算事件开始时间和结束时间的时间戳\nval startTime = localDate.atStartOfDay(ZoneId.systemDefault()).toInstant().toEpochMilli()\nval endTime = localDate.atTime(23, 59, 59).atZone(ZoneId.systemDefault()).toInstant().toEpochMilli()\n\n// 解析提醒时间 - 如果设置了提醒时间，则计算提醒时间的时间戳\nval reminderTime = if (reminder.isNotEmpty()){\n    val timeFormatter = DateTimeFormatter.ofPattern(\"HH:mm\")\n    val localTime = LocalTime.parse(reminder, timeFormatter)\n    val reminderDateTime = localDate.atTime(localTime)\n    reminderDateTime.atZone((ZoneId.systemDefault())).toInstant().toEpochMilli()\n}else {\n    0L // 如果未设置提醒时间，则设为0\n}\n~~~\n\n* 创建修改事件对象，校验关键信息非空，并提交修改\n\n~~~kotlin\n// 更新事件对象 - 使用新的数据创建更新后的事件对象\nval updatedEvent = event.copy(\n    title = title,\n    content = content,\n    startTime = startTime,\n    endTime = endTime,\n    reminderTime = reminderTime\n)\n\n// 验证必填字段 - 检查标题是否为空\nif (title.isEmpty()){\n    editTextTitle.error = \"请输入日程标题\"\n    return@launch\n}\n\n// 验证必填字段 - 检查日期是否为空\nif (content.isEmpty()){\n    editTextDate.error = \"请选择日程日期\"\n    return@launch\n}\n\n// 更新事件到数据库\neventDao.updateEvent(updatedEvent)\n~~~\n\n* 通知观察者，刷新视图\n\n~~~kotlin\nEventUpdateManager.getInstance().notifyEventAdded()\n~~~\n\n* 关闭对话框并显示成功提示\n\n~~~kotlin\ndialog.dismiss()\nToast.makeText(context, \"修改成功\", Toast.LENGTH_SHORT).show()\n~~~\n\n* 捕获异常并显示错误提示\n\n~~~kotlin\nToast.makeText(context, \"修改失败：${e.message}\", Toast.LENGTH_SHORT).show()\n~~~\n\n8. 展示对话框\n\n~~~kotlin\ndialog.show()\n~~~\n\n至此，我们可以通过点击修改按钮，弹出修改事件对话框，并完成修改事件操作\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"my_calendar_app","published":1,"updated":"2025-11-10T13:23:37.024Z","_id":"cmholdtpu0005lsu7gpxq0hyv","comments":1,"layout":"post","photos":[],"content":"<h1>MyCalendarApp</h1>\n<h2 id=\"目录\">目录</h2>\n<ul>\n<li><a href=\"#mycalendarapp\">MyCalendarApp</a>\n<ul>\n<li><a href=\"#%E7%9B%AE%E5%BD%95\">目录</a></li>\n<li><a href=\"#kizitonwosecalendarview-%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8\">kizitonwose/CalendarView 框架的使用</a>\n<ul>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8\">基本使用</a></li>\n<li><a href=\"#%E5%91%A8%E8%A7%86%E5%9B%BE%E5%8A%9F%E8%83%BD%E7%BB%86%E5%88%86\">周视图功能细分</a>\n<ul>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E6%98%9F%E6%9C%9F%E6%A0%87%E9%A2%98\">添加星期标题</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E6%97%A5%E6%9C%9F%E9%80%89%E6%8B%A9%E5%8A%9F%E8%83%BD\">添加日期选择功能</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E4%BB%8A%E6%97%A5%E9%BB%98%E8%AE%A4%E8%83%8C%E6%99%AF\">添加今日默认背景</a></li>\n<li><a href=\"#%E5%91%A8%E7%9A%84%E6%BB%9A%E5%8A%A8%E5%88%87%E6%8D%A2\">周的滚动切换</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E5%B9%B4%E6%9C%88%E6%A0%87%E9%A2%98\">添加年月标题</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E6%97%A5%E7%A8%8B%E6%B7%BB%E5%8A%A0\">日程添加</a>\n<ul>\n<li><a href=\"#%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%E6%89%93%E5%BC%80%E6%97%A5%E7%A8%8B%E6%B7%BB%E5%8A%A0%E8%A1%A8%E5%8D%95\">点击按钮打开日程添加表单</a></li>\n<li><a href=\"#%E6%97%A5%E7%A8%8B%E5%88%97%E8%A1%A8%E5%AE%9E%E7%8E%B0\">日程列表实现</a></li>\n<li><a href=\"#%E6%97%A5%E7%A8%8B%E4%BF%AE%E6%94%B9%E5%AE%9E%E7%8E%B0\">日程修改实现</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"kizitonwose-CalendarView-框架的使用\">kizitonwose/CalendarView 框架的使用</h2>\n<p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3 id=\"基本使用\">基本使用</h3>\n<p><a href=\"#kizitonwosecalendarview-%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8\">回到上一级</a></p>\n<ol>\n<li>添加依赖<br>\n在 gradle/libs.versions.toml 中：</li>\n</ol>\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[versions]</span></span><br><span class=\"line\"><span class=\"attr\">kizitonwose-calendar</span> = <span class=\"string\">&quot;2.9.0&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[libraries]</span></span><br><span class=\"line\"><span class=\"attr\">kizitonwose-calendar</span> = &#123; module = <span class=\"string\">&quot;com.kizitonwose.calendar:view&quot;</span>, version.ref = <span class=\"string\">&quot;kizitonwose-calendar&quot;</span> &#125;</span><br></pre></td></tr></table></figure>\n<p>在 app/build.gradle.kts 中：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">    implementation(libs.kizitonwose.calendar)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>创建日视图布局资源</li>\n</ol>\n<p>在layout中创建日视图布局资源，例如 calendar_day_layout.xml 来为日历中的每一天创建一个布局</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/calendarDayText&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">tools:text</span>=<span class=\"string\">&quot;22&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>创建 ViewContainer 类</li>\n</ol>\n<p>为每个视图类型创建容器类来持有视图元素</p>\n<p>月视图容器 (MonthDayViewContainer.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MonthDayViewContainer</span>(view: View) : ViewContainer(view) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> textView: TextView = view.findViewById(R.id.calendarDayText)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>周视图容器 (DayViewContainer.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DayViewContainer</span>(view: View) : ViewContainer(view) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> textView: TextView = view.findViewById&lt;TextView&gt;(R.id.calendarDayText)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>创建 ViewBinder 类</li>\n</ol>\n<p>创建绑定器类来控制如何显示日历中的每一天</p>\n<p>月视图绑定器 (MonthDayViewBinder.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MonthDayViewBinder</span> : <span class=\"type\">MonthDayBinder</span>&lt;<span class=\"type\">MonthDayViewContainer</span>&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">create</span><span class=\"params\">(view: <span class=\"type\">View</span>)</span></span> = MonthDayViewContainer(view)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(container: <span class=\"type\">MonthDayViewContainer</span>, <span class=\"keyword\">data</span>: <span class=\"type\">CalendarDay</span>)</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 根据日期是否属于当前月份设置不同的透明度</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">data</span>.position == DayPosition.MonthDate) &#123;</span><br><span class=\"line\">            container.textView.alpha = <span class=\"number\">1f</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            container.textView.alpha = <span class=\"number\">0.3f</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>周视图绑定器 (WeekViewBinder.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewBinder</span>: <span class=\"type\">WeekDayBinder</span>&lt;<span class=\"type\">DayViewContainer</span>&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">create</span><span class=\"params\">(view: <span class=\"type\">View</span>)</span></span>: DayViewContainer = DayViewContainer(view)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">DayViewContainer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        <span class=\"keyword\">data</span>: <span class=\"type\">WeekDay</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>创建 Fragment 布局</li>\n</ol>\n<p>月视图布局 (fragment_month_view.xml)：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">com.kizitonwose.calendar.view.CalendarView</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/month_calendar_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:cv_dayViewResource</span>=<span class=\"string\">&quot;@layout/calendar_day_layout&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>周视图布局 (fragment_week_view.xml)：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">com.kizitonwose.calendar.view.WeekCalendarView</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/week_calendar_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:cv_dayViewResource</span>=<span class=\"string\">&quot;@layout/calendar_day_layout&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>实现 Fragment 逻辑</li>\n</ol>\n<p>月视图 Fragment (MonthViewFragment.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MonthViewFragment</span> : <span class=\"type\">Fragment</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> _binding: FragmentMonthViewBinding? = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> binding <span class=\"keyword\">get</span>() = _binding!!</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreateView</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        inflater: <span class=\"type\">LayoutInflater</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">ViewGroup</span>?,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        savedInstanceState: <span class=\"type\">Bundle</span>?</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span>: View? &#123;</span><br><span class=\"line\">        _binding = FragmentMonthViewBinding.inflate(inflater, container, <span class=\"literal\">false</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> binding.root</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onViewCreated</span><span class=\"params\">(view: <span class=\"type\">View</span>, savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onViewCreated(view, savedInstanceState)</span><br><span class=\"line\">        setupMonthView()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupMonthView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentMonth = YearMonth.now()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> startMonth = currentMonth.minusMonths(<span class=\"number\">100</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> endMonth = currentMonth.plusMonths(<span class=\"number\">100</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> firstDayOfWeek = firstDayOfWeekFromLocale()</span><br><span class=\"line\"></span><br><span class=\"line\">        binding.monthCalendarView.dayBinder = MonthDayViewBinder()</span><br><span class=\"line\">        binding.monthCalendarView.setup(startMonth, endMonth, firstDayOfWeek)</span><br><span class=\"line\">        binding.monthCalendarView.scrollToMonth(currentMonth)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onDestroyView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onDestroyView()</span><br><span class=\"line\">        _binding = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>周视图 Fragment (WeekViewFragment.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewFragment</span>: <span class=\"type\">Fragment</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> _binding: FragmentWeekViewBinding? = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> binding <span class=\"keyword\">get</span>() = _binding!!</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreateView</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        inflater: <span class=\"type\">LayoutInflater</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">ViewGroup</span>?,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        savedInstanceState: <span class=\"type\">Bundle</span>?</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span>: View? &#123;</span><br><span class=\"line\">        _binding = FragmentWeekViewBinding.inflate(inflater, container, <span class=\"literal\">false</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> binding.root</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onViewCreated</span><span class=\"params\">(view: <span class=\"type\">View</span>, savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onViewCreated(view, savedInstanceState)</span><br><span class=\"line\">        setupWeekView()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupWeekView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekCalendarView = binding.weekCalendarView</span><br><span class=\"line\">        weekCalendarView.dayBinder = WeekViewBinder()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentMonth = YearMonth.now()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> startMonth = currentMonth.minusMonths(<span class=\"number\">100</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> endMonth = currentMonth.plusMonths(<span class=\"number\">100</span>) </span><br><span class=\"line\">        <span class=\"keyword\">val</span> firstDayOfWeek = firstDayOfWeekFromLocale()</span><br><span class=\"line\">        </span><br><span class=\"line\">        weekCalendarView.setup(startMonth.atDay(<span class=\"number\">1</span>), endMonth.atEndOfMonth(), firstDayOfWeek)</span><br><span class=\"line\">        weekCalendarView.scrollToWeek(currentDate)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onDestroyView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onDestroyView()</span><br><span class=\"line\">        _binding = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>至此，就完成了基于kizitonwose/CalendarView的日历视图的基本使用</p>\n<h3 id=\"周视图功能细分\">周视图功能细分</h3>\n<p><a href=\"#kizitonwosecalendarview-%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8\">回到上一级</a></p>\n<h4 id=\"添加星期标题\">添加星期标题</h4>\n<ol>\n<li>在layout中创建calendar_day_title_text.xml定义<strong>单个</strong>星期标题的样式</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">TextView</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">&quot;1&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:textSize</span>=<span class=\"string\">&quot;12sp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>同目录下创建calendar_day_titles_container.xml，使用<strong>水平线性布局</strong>，包含七个上一步创建的星期标题，代表一周七天</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:weightSum</span>=<span class=\"string\">&quot;7&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;horizontal&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span> <span class=\"attr\">layout</span>=<span class=\"string\">&quot;@layout/calendar_day_title_text&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 重复6次 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>将上一步的容器引入fragment_week_view.xml中</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;vertical&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/titlesContainer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">layout</span>=<span class=\"string\">&quot;@layout/calendar_day_titles_container&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 周视图日历控件，用于显示一周的日期 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.kizitonwose.calendar.view.WeekCalendarView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/week_calendar_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:cv_dayViewResource</span>=<span class=\"string\">&quot;@layout/calendar_day_layout&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>在 WeekViewFragment.kt 中，通过 setDayOfWeekTitles() 方法动态设置星期标题文本</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupWeekView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekCalendarView = binding.weekCalendarView</span><br><span class=\"line\">        weekCalendarView.dayBinder = weekViewBinder</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 获取标题容器并设置星期标题</span></span><br><span class=\"line\">        setDayOfWeekTitles()</span><br><span class=\"line\">        </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setDayOfWeekTitles</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 获取标题容器</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> titlesContainer = binding.root.findViewById&lt;ViewGroup&gt;(R.id.titlesContainer)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 遍历每个标题容器并设置文本</span></span><br><span class=\"line\">    titlesContainer.children</span><br><span class=\"line\">        .map &#123; it <span class=\"keyword\">as</span> TextView &#125;</span><br><span class=\"line\">        .forEachIndexed &#123; index, textView -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> dayOfWeek = daysOfWeek()[index]</span><br><span class=\"line\">            <span class=\"keyword\">val</span> title = dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.getDefault())</span><br><span class=\"line\">            textView.text = title</span><br><span class=\"line\">            textView.gravity = Gravity.CENTER</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>至此，添加星期标题功能完成</p>\n<h4 id=\"添加日期选择功能\">添加日期选择功能</h4>\n<ol>\n<li>在presentation/calendarContainer/下的DayViewContainer.kt中<strong>添加</strong>点击监听器</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DayViewContainer</span>(view: View) : ViewContainer(view) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 添加一个函数来设置点击监听器</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setOnClickListener</span><span class=\"params\">(listener: (<span class=\"type\">View</span>) -&gt; <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">        textView.setOnClickListener(listener)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中listener参数是一个<strong>函数类型</strong>，是以View为参数，且返回值为Unit(void,即无返回值)的函数</p>\n<ol start=\"2\">\n<li>在presentation/calendarBinder/WeekViewBinder.kt中<strong>设置</strong>点击监听器</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewBinder</span>: <span class=\"type\">WeekDayBinder</span>&lt;<span class=\"type\">DayViewContainer</span>&gt; &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">DayViewContainer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        <span class=\"keyword\">data</span>: <span class=\"type\">WeekDay</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 设置点击监听器</span></span><br><span class=\"line\">        container.setOnClickListener &#123;</span><br><span class=\"line\">            selectedDate = <span class=\"keyword\">data</span>.date</span><br><span class=\"line\">            onDateClickListener?.invoke(<span class=\"keyword\">data</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中<code>?.invoke</code> 是一个<strong>可选调用</strong>，用于调用一个可能为 null 的函数。如果函数不为 null，则调用它，否则不执行任何操作。<br>\n这里只有点击日期时才触发点击回调data，并更新选中日期的视觉效果</p>\n<ol start=\"3\">\n<li>在 presentation/ui/calendar/WeekViewFragment.kt 中设置点击回调</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewFragment</span>: <span class=\"type\">Fragment</span>() &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupWeekView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 步骤3：在Fragment中设置点击回调</span></span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekViewBinder = WeekViewBinder()</span><br><span class=\"line\">        weekViewBinder.onDateClickListener = &#123; weekDay -&gt;</span><br><span class=\"line\">            <span class=\"comment\">// 处理点击事件</span></span><br><span class=\"line\">            Toast.makeText(context, <span class=\"string\">&quot;Clicked: <span class=\"subst\">$&#123;weekDay.date&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class=\"line\">            <span class=\"comment\">// 更新选中日期的视觉效果</span></span><br><span class=\"line\">            weekViewBinder.selectDate(weekDay.date)</span><br><span class=\"line\">            <span class=\"comment\">// 通知日历重新绘制以更新选中状态</span></span><br><span class=\"line\">            binding.weekCalendarView.notifyCalendarChanged()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekCalendarView = binding.weekCalendarView</span><br><span class=\"line\">        weekCalendarView.dayBinder = weekViewBinder</span><br><span class=\"line\">        </span><br><span class=\"line\">        ...</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>在presentation/calendarBinder/WeekViewBinder.kt中添加选中日期的追踪</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewBinder</span>: <span class=\"type\">WeekDayBinder</span>&lt;<span class=\"type\">DayViewContainer</span>&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">DayViewContainer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        <span class=\"keyword\">data</span>: <span class=\"type\">WeekDay</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 设置点击监听器</span></span><br><span class=\"line\">        container.setOnClickListener &#123;</span><br><span class=\"line\">            selectedDate = <span class=\"keyword\">data</span>.date</span><br><span class=\"line\">            onDateClickListener?.invoke(<span class=\"keyword\">data</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 更新选中的视觉效果</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (selectedDate == <span class=\"keyword\">data</span>.date) &#123;</span><br><span class=\"line\">            container.textView.setBackgroundResource(R.drawable.modern_selected_date_ripple)</span><br><span class=\"line\">            <span class=\"comment\">// 选中日期使用白色文字以便在洋红色背景上清晰可见</span></span><br><span class=\"line\">            container.textView.setTextColor(Color.WHITE)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            container.textView.background = <span class=\"literal\">null</span></span><br><span class=\"line\">            <span class=\"comment\">// 非选中日期使用黑色文字</span></span><br><span class=\"line\">            container.textView.setTextColor(Color.BLACK)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这里的背景资源需要自行创建</p>\n<h4 id=\"添加今日默认背景\">添加今日默认背景</h4>\n<p><a href=\"#%E5%91%A8%E8%A7%86%E5%9B%BE%E5%8A%9F%E8%83%BD%E7%BB%86%E5%88%86\">回到上一级</a></p>\n<ol>\n<li>在presentation/calendarBinder/WeekViewBinder.kt的bind()方法中获取今天的日期</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> today = LocalDate.now()</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在presentation/calendarBinder/WeekViewBinder.kt的bind()方法中判断当前日期是否为今天，如果是则设置背景</li>\n</ol>\n<p>完整方法</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">DayViewContainer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        <span class=\"keyword\">data</span>: <span class=\"type\">WeekDay</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 设置点击监听器</span></span><br><span class=\"line\">        container.setOnClickListener &#123;</span><br><span class=\"line\">            selectedDate = <span class=\"keyword\">data</span>.date</span><br><span class=\"line\">            onDateClickListener?.invoke(<span class=\"keyword\">data</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 获取今天的日期</span></span><br><span class=\"line\">        <span class=\"keyword\">val</span> today = LocalDate.now()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 更新选中的视觉效果</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (selectedDate == <span class=\"keyword\">data</span>.date) &#123;</span><br><span class=\"line\">            container.textView.setBackgroundResource(R.drawable.modern_selected_date_ripple)</span><br><span class=\"line\">            <span class=\"comment\">// 选中日期使用白色文字以便在洋红色背景上清晰可见</span></span><br><span class=\"line\">            container.textView.setTextColor(Color.WHITE)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">data</span>.date == today) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 今天的日期使用与选中日期相同形状的背景高亮显示</span></span><br><span class=\"line\">            container.textView.setBackgroundResource(R.drawable.modern_today_background)</span><br><span class=\"line\">            container.textView.setTextColor(Color.BLACK)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            container.textView.background = <span class=\"literal\">null</span></span><br><span class=\"line\">            <span class=\"comment\">// 非选中日期使用黑色文字</span></span><br><span class=\"line\">            container.textView.setTextColor(Color.BLACK)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>背景资源需要自行创建</p>\n<h4 id=\"周的滚动切换\">周的滚动切换</h4>\n<p><a href=\"#%E5%91%A8%E8%A7%86%E5%9B%BE%E5%8A%9F%E8%83%BD%E7%BB%86%E5%88%86\">回到上一级</a></p>\n<ol>\n<li>在WeekViewFragment.kt中的setupWeekView()方法内添加滚动监听器，并实现更新逻辑</li>\n</ol>\n<ul>\n<li>添加<strong>滚动监听器</strong></li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupWeekView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekCalendarView = binding.weekCalendarView</span><br><span class=\"line\">        weekCalendarView.dayBinder = weekViewBinder</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 添加滚动监听器以同步星期标题</span></span><br><span class=\"line\">        weekCalendarView.weekScrollListener = &#123; weekStart -&gt;</span><br><span class=\"line\">            <span class=\"comment\">// 更新星期标题以匹配当前周</span></span><br><span class=\"line\">            updateDayOfWeekTitles(weekStart.days.first().date)</span><br><span class=\"line\">            <span class=\"comment\">// 更新年月标题</span></span><br><span class=\"line\">            <span class=\"comment\">// updateMonthYearHeader(weekStart.days.first().date)</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 获取标题容器并设置星期标题</span></span><br><span class=\"line\">        setDayOfWeekTitles()</span><br><span class=\"line\">        </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实现更新逻辑 <strong>updateDayOfWeekTitles()</strong></li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 更新星期标题</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> date 当前周的起始日期</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">updateDayOfWeekTitles</span><span class=\"params\">(date: <span class=\"type\">LocalDate</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> titlesContainer = binding.root.findViewById&lt;ViewGroup&gt;(R.id.titlesContainer)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 计算指定日期所在周到起始日期</span></span><br><span class=\"line\">        <span class=\"keyword\">val</span> firstDayOfWeek = firstDayOfWeekFromLocale()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekStart = date.minusDays(date.dayOfWeek.ordinal.toLong())</span><br><span class=\"line\">            .plusDays(firstDayOfWeek.ordinal.toLong())</span><br><span class=\"line\">            .minusDays(<span class=\"keyword\">if</span> (firstDayOfWeek.ordinal &lt;= date.dayOfWeek.ordinal) <span class=\"number\">0</span> <span class=\"keyword\">else</span> <span class=\"number\">7</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 更新每个标题党文本</span></span><br><span class=\"line\">        titlesContainer.children</span><br><span class=\"line\">            .map &#123; it <span class=\"keyword\">as</span> TextView &#125;</span><br><span class=\"line\">            .forEachIndexed &#123; index, textView -&gt;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> currentDay = weekStart.plusDays(index.toLong())</span><br><span class=\"line\">                <span class=\"keyword\">val</span> title = currentDay.dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.getDefault())</span><br><span class=\"line\">                textView.text = title</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>其中,计算逻辑：</p>\n<ol>\n<li>\n<p>date.dayOfWeek.ordinal：获取指定日期是星期几（星期一为0，星期日为6）</p>\n</li>\n<li>\n<p>date.minusDays(date.dayOfWeek.ordinal.toLong())：从指定日期减去对应的天数，得到该周的星期一</p>\n</li>\n<li>\n<p>plusDays(firstDayOfWeek.ordinal.toLong())：加上本地化星期起始日的偏移量</p>\n</li>\n<li>\n<p>minusDays(if (firstDayOfWeek.ordinal &lt;= date.dayOfWeek.ordinal) 0 else 7)：如果本地化星期起始日在指定日期的星期几之前或当天，则不需要调整否则需要减去7天以得到正确的周起始日</p>\n</li>\n<li>\n<p>在fragment_week_view.xml中的周视图日历控件中添加属性，优化滑动效果</p>\n</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 将app:cv_scrollPaged=&quot;true&quot;添加到WeekCalendarView控件中 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">com.kizitonwose.calendar.view.WeekCalendarView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/week_calendar_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:cv_dayViewResource</span>=<span class=\"string\">&quot;@layout/calendar_day_layout&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:cv_scrollPaged</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"添加年月标题\">添加年月标题</h4>\n<p><a href=\"#%E5%91%A8%E8%A7%86%E5%9B%BE%E5%8A%9F%E8%83%BD%E7%BB%86%E5%88%86\">回到上一级</a></p>\n<ol>\n<li>首先需要修改 fragment_week_view.xml 文件，添加年月标题：</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 添加年月标题 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/monthYearHeader&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textSize</span>=<span class=\"string\">&quot;18sp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textStyle</span>=<span class=\"string\">&quot;bold&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;@color/black&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">tools:text</span>=<span class=\"string\">&quot;2023年10月&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在 WeekViewFragment.kt 中添加年月标题的处理逻辑：</li>\n</ol>\n<ul>\n<li>在类中添加年月标题变量声明</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 添加年月标题变量声明</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> monthYearHeader: TextView</span><br></pre></td></tr></table></figure>\n<ul>\n<li>在 setupWeekView() 方法中初始化年月标题变量</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 初始化年月标题</span></span><br><span class=\"line\">monthYearHeader = binding.root.findViewById&lt;TextView&gt;(R.id.monthYearHeader)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>在 setupWeekView() 方法中的滚动监听器中同步更新年月标题</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 添加滚动监听器以同步星期标题</span></span><br><span class=\"line\">weekCalendarView.weekScrollListener = &#123; weekStart -&gt;</span><br><span class=\"line\">    <span class=\"comment\">// 更新星期标题以匹配当前周</span></span><br><span class=\"line\">    updateDayOfWeekTitles(weekStart.days.first().date)</span><br><span class=\"line\">    <span class=\"comment\">// 更新年月标题</span></span><br><span class=\"line\">    updateMonthYearHeader(weekStart.days.first().date)</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>实现更新逻辑 <strong>updateMonthYearHeader()</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 更新年月标题</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> date 当前周的起始日期</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">updateMonthYearHeader</span><span class=\"params\">(date: <span class=\"type\">LocalDate</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> formatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">val</span> monthYearText = date.format(formatter)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 如果文本没变化，不更新</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (monthYearHeader.text.toString() == monthYearText)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    monthYearHeader.text = monthYearText</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"日程添加\">日程添加</h2>\n<p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3 id=\"点击按钮打开日程添加表单\">点击按钮打开日程添加表单</h3>\n<p><a href=\"#%E6%97%A5%E7%A8%8B%E6%B7%BB%E5%8A%A0\">回到上一级</a></p>\n<ol>\n<li>在layout中准备表单界面 dialog_add_event.xml</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 添加日程表格 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;vertical&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;16dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;添加日程&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textSize</span>=<span class=\"string\">&quot;20sp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textStyle</span>=<span class=\"string\">&quot;bold&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;16dp&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;8dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputEditText</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editTextDate&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:hint</span>=<span class=\"string\">&quot;日期&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:focusable</span>=<span class=\"string\">&quot;false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:clickable</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;8dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputEditText</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editTextTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:hint</span>=<span class=\"string\">&quot;日程标题&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;8dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputEditText</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editTextContent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:hint</span>=<span class=\"string\">&quot;日程内容&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:minLines</span>=<span class=\"string\">&quot;3&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;16dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputEditText</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editTextReminder&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:hint</span>=<span class=\"string\">&quot;提醒时间&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:focusable</span>=<span class=\"string\">&quot;false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:clickable</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;horizontal&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;end&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Button</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/buttonCancel&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;取消&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">style</span>=<span class=\"string\">&quot;@style/Widget.MaterialComponents.Button.TextButton&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Button</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/buttonConfirm&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;确认&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">style</span>=<span class=\"string\">&quot;@style/Widget.MaterialComponents.Button.TextButton&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>其中，TextInputLayout 相比于传统的 EditText 增加了很多功能\n<ul>\n<li>浮动标签：提示词在输入内容后不会消失，而是显示于左上方中</li>\n<li>错误提示：可以方便地显示错误信息，帮助用户理解输入要求</li>\n<li>辅助文本：支持显示帮助文本或字符计数等辅助信息</li>\n<li>图标支持：可以在文本框内添加前缀、后缀图标</li>\n</ul>\n</li>\n<li>每个 TextInputLayout 都围起一个 TextInputEditText 子元素\n<ul>\n<li>属性 focusable=“false” 表明该元素不能获得焦点，即不通过键盘直接输入</li>\n<li>属性 clickable=“true” 表明该元素可以通过点击触发，通过触发事件，间接输入到输入框中</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p>在MainActivity中添加点击按钮打开表单的逻辑</p>\n<ol>\n<li>\n<p>在onCreate()方法中调用 <strong>setupFloatingActionButton()</strong> 方法</p>\n</li>\n<li>\n<p>在MainActivity类内实现 <strong>setupFloatingActionButton()</strong> 方法</p>\n  <figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupFloatingActionButton</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    binding.fabAddEvent.setOnClickListener &#123;</span><br><span class=\"line\">        showAddEventDialog()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>绑定FAB按钮触发点击事件</li>\n<li>通过点击事件触发显示表单方法 <strong>showAddEventDialog()</strong></li>\n</ul>\n</li>\n<li>\n<p>实现 showAddEventDialog() 方法</p>\n<ol>\n<li>创建对话框</li>\n</ol>\n  <figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showAddEventDialog</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 1. 创建对话框</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> builder = AlertDialog.Builder(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    <span class=\"keyword\">val</span> inflater = layoutInflater</span><br><span class=\"line\">    <span class=\"keyword\">val</span> dialogView = inflater.inflate(R.layout.dialog_add_event, <span class=\"literal\">null</span>)</span><br><span class=\"line\">    builder.setView(dialogView)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">val</span> dialog = builder.create()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用 AlertDialog.Builder 创建<strong>对话框构建器</strong></li>\n<li>通过 layoutInflater 加载 dialog_add_event.xml 布局文件</li>\n<li>将加载的视图设置为对话框的内容视图</li>\n<li>通过 builder.create() 创建<strong>实际的对话框对象</strong></li>\n</ul>\n<ol start=\"2\">\n<li>获取对话框中的UI组件</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 2. 查找对话框中的UI组件</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextDate = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextDate)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextTitle = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextTitle)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextContent = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextContent)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextReminder = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextReminder)</span><br><span class=\"line\"><span class=\"keyword\">val</span> buttonCancel = dialogView.findViewById&lt;Button&gt;(R.id.buttonCancel)</span><br><span class=\"line\"><span class=\"keyword\">val</span> buttonConfirm = dialogView.findViewById&lt;Button&gt;(R.id.buttonConfirm)</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>设置默认日期和日期选择器</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 3. 设置默认日期为今天，若有选择的日期，则使用选择的日期</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> selectedDate = getSelectedDate()</span><br><span class=\"line\"><span class=\"keyword\">val</span> defaultDate = selectedDate ?: LocalDate.now() <span class=\"comment\">// 若无选择日期，则使用今天</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> formatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>) <span class=\"comment\">// 日期格式</span></span><br><span class=\"line\">editTextDate.setText(defaultDate.format(formatter)) <span class=\"comment\">// 设置默认日期</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置日期选择器</span></span><br><span class=\"line\">editTextDate.setOnClickListener &#123;</span><br><span class=\"line\">    showDatePicker(editTextDate)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置提醒时间选择器</span></span><br><span class=\"line\">editTextReminder.setOnClickListener &#123;</span><br><span class=\"line\">    showTimePicker(editTextReminder)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>设置按钮并显示对话框</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\">// 设置取消按钮</span></span><br><span class=\"line\">    buttonCancel.setOnClickListener &#123;</span><br><span class=\"line\">        dialog.dismiss()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 设置确认按钮</span></span><br><span class=\"line\">    buttonConfirm.setOnClickListener &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> title = editTextTitle.text.toString()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> content = editTextContent.text.toString()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> date = editTextDate.text.toString()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> reminder = editTextReminder.text.toString()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 处理添加事件逻辑</span></span><br><span class=\"line\">        Toast.makeText(<span class=\"keyword\">this</span>, <span class=\"string\">&quot;日程已添加&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class=\"line\">        dialog.dismiss()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 显示对话框</span></span><br><span class=\"line\">    dialog.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>实现 showDatePicker() 方法和 showTimePicker() 方法</p>\n<ol>\n<li>实现 showTimePicker() 方法</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showTimePicker</span><span class=\"params\">(editTextReminder: <span class=\"type\">TextInputEditText</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 创建时间选择器对象</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> timePicker = TimePickerDialog(</span><br><span class=\"line\">        <span class=\"keyword\">this</span>,</span><br><span class=\"line\">        &#123;_, hourOfDay, minute -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> selectedTime = String.format(<span class=\"string\">&quot;%02d:%02d&quot;</span>, hourOfDay, minute) <span class=\"comment\">// 将时间格式化为HH:mm</span></span><br><span class=\"line\">            editTextReminder.setText(selectedTime) <span class=\"comment\">// 设置选中的时间</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"number\">9</span>, <span class=\"comment\">// 默认选中的时间为9:00</span></span><br><span class=\"line\">        <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"literal\">true</span> <span class=\"comment\">// 是否使用24小时制</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">    timePicker.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>实现 showDatePicker() 方法</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showDatePicker</span><span class=\"params\">(editTextDate: <span class=\"type\">TextInputEditText</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> today = LocalDate.now()</span><br><span class=\"line\">    <span class=\"keyword\">val</span> datePicker = DatePickerDialog(</span><br><span class=\"line\">        <span class=\"keyword\">this</span>,</span><br><span class=\"line\">        &#123;_, year, month, dayOfMonth -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> selectedDate = LocalDate.of(year, month + <span class=\"number\">1</span>, dayOfMonth) <span class=\"comment\">// 创建选中日期的 LocalDate 对象（需要将月份+1，因为DatePicker的月份是从0开始的）</span></span><br><span class=\"line\">            <span class=\"keyword\">val</span> formatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>) <span class=\"comment\">// 日期格式</span></span><br><span class=\"line\">            editTextDate.setText(selectedDate.format(formatter)) <span class=\"comment\">// 显示选中的日期</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        today.year, </span><br><span class=\"line\">        today.monthValue - <span class=\"number\">1</span>, <span class=\"comment\">// month: today.monthValue - 1 - 日期选择器的初始月份设置为当前月份（需要减1，因为DatePicker的月份是从0开始的）</span></span><br><span class=\"line\">        today.dayOfMonth</span><br><span class=\"line\">    )</span><br><span class=\"line\">    datePicker.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>实现 getSelectedDate() 方法</p>\n</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> viewPager = binding.viewPager</span><br><span class=\"line\">    <span class=\"keyword\">val</span> currentFragment = supportFragmentManager.findFragmentByTag(<span class=\"string\">&quot;f&quot;</span> + viewPager.currentItem)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">when</span>(currentFragment)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">is</span> DayViewFragment -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 从日视图中获取选中日期</span></span><br><span class=\"line\">            <span class=\"literal\">null</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">is</span> WeekViewFragment -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 从周视图中获取选中日期</span></span><br><span class=\"line\">            currentFragment.getSelectedDate()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">is</span> MonthViewFragment -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 从月视图中获取选中日期</span></span><br><span class=\"line\">            currentFragment.getSelectedDate()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> -&gt; <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>首先通过 binding.viewPager 获取应用中的<strong>ViewPager组件</strong></li>\n<li>通过 viewPager.currentItem 获取当前显示页面的<strong>索引</strong></li>\n<li>使用 supportFragmentManager.findFragmentByTag(“f” + viewPager.currentItem) 根据标签查找当前Fragment\n<ul>\n<li>ViewPager2会自动为每个页面的Fragment分配标签，格式为 <strong>“f”+页面索引</strong></li>\n<li>这样就可以获取到当前显示的具体Fragment实例</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>在 MonthViewFragment 和 WeekViewFragment 中添加 getSelectedDate() 方法</p>\n<ul>\n<li>MonthViewFragment 的 getSelectedDate() 方法实现如下：</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> monthViewBinder = binding.monthCalendarView.dayBinder <span class=\"keyword\">as</span>? MonthDayViewBinder <span class=\"comment\">// 将 dayBinder 安全转换为 MonthDayViewBinder</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span>  monthViewBinder?.getSelectedDate()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>WeekViewFragment 的 getSelectedDate() 方法实现如下：</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 获取 WeekViewBinder 实例并返回其选中的日期</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> weekViewBinder = binding.weekCalendarView.dayBinder <span class=\"keyword\">as</span>? WeekViewBinder <span class=\"comment\">// 将 dayBinder 安全转换为WeekViewBinder</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> weekViewBinder?.getSelectedDate()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在 WeekViewBinder 和 MonthDayViewBinder 中分别实现在其fragment中调用的 getSelectedDate() 方法</p>\n</li>\n</ol>\n<ul>\n<li>WeekViewBinder 的 getSelectedDate() 方法实现如下：</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selectedDate</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>MonthDayViewBinder 的 getSelectedDate() 方法实现如下：</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selectedDate</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>至此，我们可以通过按钮打开添加日程的表单，并选择日期和时间，添加内容</p>\n<h3 id=\"日程列表实现\">日程列表实现</h3>\n<ol>\n<li>创建日程卡片视图 item_event_card.xml</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 日程卡片布局 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.card.MaterialCardView</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_margin</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:cardCornerRadius</span>=<span class=\"string\">&quot;12dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:cardElevation</span>=<span class=\"string\">&quot;4dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:strokeWidth</span>=<span class=\"string\">&quot;0dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;16dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 事件颜色标识 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">View</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventColorIndicator&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;6dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/magenta_500&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 事件标题 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginStart</span>=<span class=\"string\">&quot;12dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginEnd</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;事件标题&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.TitleMedium&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurface&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toStartOf</span>=<span class=\"string\">&quot;@+id/editEventButton&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toEndOf</span>=<span class=\"string\">&quot;@+id/eventColorIndicator&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 事件内容摘要 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventContent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;4dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:ellipsize</span>=<span class=\"string\">&quot;end&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:maxLines</span>=<span class=\"string\">&quot;1&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;事件内容摘要，超出十个字显示省略号&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.BodyMedium&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurface&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 时间信息 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventTime&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;持续时间&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.BodySmall&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/eventContent&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 提醒时间 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventReminder&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;4dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:drawableStart</span>=<span class=\"string\">&quot;@drawable/ic_notification&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:drawablePadding</span>=<span class=\"string\">&quot;4dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;提前15分钟提醒&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.BodySmall&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/eventTime&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 编辑按钮 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ImageButton</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editEventButton&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginEnd</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;?attr/selectableItemBackgroundBorderless&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:contentDescription</span>=<span class=\"string\">&quot;编辑事件&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:src</span>=<span class=\"string\">&quot;@drawable/ic_edit&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toStartOf</span>=<span class=\"string\">&quot;@+id/eventCompletedCheckbox&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:tint</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 完成状态复选框 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">CheckBox</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventCompletedCheckbox&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginEnd</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toStartOf</span>=<span class=\"string\">&quot;@+id/deleteEventButton&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 删除按钮 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ImageButton</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/deleteEventButton&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;?attr/selectableItemBackgroundBorderless&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:contentDescription</span>=<span class=\"string\">&quot;删除事件&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:src</span>=<span class=\"string\">&quot;@drawable/ic_delete&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:tint</span>=<span class=\"string\">&quot;?attr/colorError&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>MaterialCardView</strong> 是 Google Material Design 组件库中的一个核心 UI 组件，它是一个现代化的<strong>卡片视图</strong>实现</li>\n</ul>\n<ol start=\"2\">\n<li>修改日视图 fragment_day_view.xml</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">    日视图 Fragment 的布局文件</span></span><br><span class=\"line\"><span class=\"comment\">    包含标题和日视图内容区域</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;vertical&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 日视图标题文本 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/dayHeaderText&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;16dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;日视图&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textAlignment</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.HeadlineSmall&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 无事件提示 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/noEventText&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;32dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;今天暂无事件&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.BodyLarge&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:visibility</span>=<span class=\"string\">&quot;gone&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/dayHeaderText&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 事件列表 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventRecyclerView&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;16dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:clipToPadding</span>=<span class=\"string\">&quot;false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:paddingBottom</span>=<span class=\"string\">&quot;16dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/dayHeaderText&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>RecyclerView 是 Android 中一个非常重要的 UI 组件，用于在有限的窗口中展示大量数据列表</li>\n<li>RecyclerView 需要 Adapter 类适配器为其绑定数据源</li>\n<li>Adapter 的内部类 ViewHolder 可以持有RecyclerView 的子项视图</li>\n</ul>\n<ol start=\"3\">\n<li>创建适配器为 RecyclerView 绑定数据</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 事件卡片适配器类</span></span><br><span class=\"line\"><span class=\"comment\"> * 用于在 RecyclerView 中显示日程事件列表，每个事件以卡片形式展示</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> events 初始事件列表</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> onEditClick 编辑按钮点击回调函数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> onDeleteClick 删除按钮点击回调函数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> onCompleteToggle 完成状态切换回调函数</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EventCardAdapter</span>(</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> events: List&lt;CalendarEvent&gt;, <span class=\"comment\">// 事件列表数据</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> onEditClick: (CalendarEvent) -&gt; <span class=\"built_in\">Unit</span>, <span class=\"comment\">// 编辑事件回调</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> onDeleteClick: (CalendarEvent) -&gt; <span class=\"built_in\">Unit</span>, <span class=\"comment\">// 删除事件回调</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> onCompleteToggle: (CalendarEvent, <span class=\"built_in\">Boolean</span>) -&gt; <span class=\"built_in\">Unit</span> <span class=\"comment\">// 完成状态切换回调</span></span><br><span class=\"line\">): RecyclerView.Adapter&lt;EventCardAdapter.EventViewHolder&gt;() &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建 ViewHolder 实例</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> parent 父 ViewGroup</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> viewType 视图类型</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 返回新创建的 EventViewHolder 实例</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreateViewHolder</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        parent: <span class=\"type\">ViewGroup</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        viewType: <span class=\"type\">Int</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span>: EventCardAdapter.EventViewHolder &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> view = LayoutInflater.from(parent.context)</span><br><span class=\"line\">            .inflate(R.layout.item_event_card, parent, <span class=\"literal\">false</span>) <span class=\"comment\">// 从布局文件创建视图</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> EventViewHolder(view)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 绑定数据到 ViewHolder</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> holder 要绑定数据的 ViewHolder</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> position 数据在列表中的位置</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onBindViewHolder</span><span class=\"params\">(holder: <span class=\"type\">EventCardAdapter</span>.<span class=\"type\">EventViewHolder</span>, position: <span class=\"type\">Int</span>)</span></span> &#123;</span><br><span class=\"line\">        holder.bind(events[position]) <span class=\"comment\">// 绑定指定位置的数据到 ViewHolder</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取事件列表的大小</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 返回事件列表的大小</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getItemCount</span><span class=\"params\">()</span></span>: <span class=\"built_in\">Int</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> events.size <span class=\"comment\">// 返回事件列表大小</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 更新事件列表数据</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> newEvents 新的事件列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">updateEvents</span><span class=\"params\">(newEvents: <span class=\"type\">List</span>&lt;<span class=\"type\">CalendarEvent</span>&gt;)</span></span>&#123;</span><br><span class=\"line\">        events = newEvents</span><br><span class=\"line\">        notifyDataSetChanged() <span class=\"comment\">// 通知数据变更，刷新界面</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 事件卡片 ViewHolder 类</span></span><br><span class=\"line\"><span class=\"comment\">     * 用于持有和管理事件卡片中的各个 UI 元素</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">inner</span> <span class=\"keyword\">class</span> <span class=\"title class_\">EventViewHolder</span>(itemView: View): RecyclerView.ViewHolder(itemView)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> colorIndicator: View = itemView.findViewById(R.id.eventColorIndicator) <span class=\"comment\">// 事件颜色指示器</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> titleText: TextView = itemView.findViewById(R.id.eventTitle) <span class=\"comment\">// 事件标题文本</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> contentText: TextView = itemView.findViewById(R.id.eventContent) <span class=\"comment\">// 事件内容文本</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> timeText: TextView = itemView.findViewById(R.id.eventTime) <span class=\"comment\">// 事件时间文本</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> reminders: TextView = itemView.findViewById(R.id.eventReminder) <span class=\"comment\">// 提醒时间文本</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> editButton: ImageButton = itemView.findViewById(R.id.editEventButton) <span class=\"comment\">// 编辑按钮</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> completeCheckbox: CheckBox = itemView.findViewById(R.id.eventCompletedCheckbox) <span class=\"comment\">// 完成状态复选框</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> deleteButton: ImageButton = itemView.findViewById(R.id.deleteEventButton) <span class=\"comment\">// 删除按钮</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 绑定事件数据到视图元素</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@param</span> event 要绑定的事件数据</span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>)</span></span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 设置事件颜色</span></span><br><span class=\"line\">            colorIndicator.setBackgroundColor(event.eventColor) <span class=\"comment\">// 根据事件颜色设置指示器背景色</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置事件标题</span></span><br><span class=\"line\">            titleText.text = event.title <span class=\"comment\">// 显示事件标题</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置内容摘要(超过十个字省略后面的字)</span></span><br><span class=\"line\">            contentText.text = <span class=\"keyword\">if</span> (event.content.length &gt; <span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;<span class=\"subst\">$&#123;event.content.take(<span class=\"number\">10</span>)&#125;</span>...&quot;</span> <span class=\"comment\">// 截取前10个字符并添加省略号</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                event.content <span class=\"comment\">// 内容不足10个字符则完整显示</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置时间</span></span><br><span class=\"line\">            <span class=\"keyword\">val</span> startTime = formatTime(event.startTime) <span class=\"comment\">// 格式化开始时间</span></span><br><span class=\"line\">            <span class=\"keyword\">val</span> endTime = formatTime(event.endTime) <span class=\"comment\">// 格式化结束时间</span></span><br><span class=\"line\">            timeText.text = <span class=\"string\">&quot;<span class=\"variable\">$startTime</span> - <span class=\"variable\">$endTime</span>&quot;</span> <span class=\"comment\">// 显示时间范围</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置提醒时间</span></span><br><span class=\"line\">            reminders.text = formatReminderTime(event.reminderTime) <span class=\"comment\">// 显示提醒时间</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置完成状态</span></span><br><span class=\"line\">            completeCheckbox.isChecked = event.isCompleted <span class=\"comment\">// 根据事件状态设置复选框选中状态</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置点击事件</span></span><br><span class=\"line\">            editButton.setOnClickListener &#123; onEditClick(event) &#125; <span class=\"comment\">// 点击编辑按钮触发回调</span></span><br><span class=\"line\">            deleteButton.setOnClickListener &#123; onDeleteClick(event) &#125; <span class=\"comment\">// 点击删除按钮触发回调</span></span><br><span class=\"line\">            completeCheckbox.setOnCheckedChangeListener &#123; _, isChecked -&gt;</span><br><span class=\"line\">                onCompleteToggle(event, isChecked) <span class=\"comment\">// 切换完成状态时触发回调</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 格式化时间戳为 HH:mm 格式的字符串</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@param</span> timeStamp 时间戳</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@return</span> 格式化后的时间字符串，如果时间戳为0则返回&quot;无&quot;</span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">formatTime</span><span class=\"params\">(timeStamp: <span class=\"type\">Long</span>)</span></span>: String&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> (timeStamp == <span class=\"number\">0L</span>)&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;无&quot;</span> <span class=\"comment\">// 时间戳为0时显示&quot;无&quot;</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> date = Date(timeStamp)</span><br><span class=\"line\">                <span class=\"keyword\">val</span> format = SimpleDateFormat(<span class=\"string\">&quot;HH:mm&quot;</span>, Locale.getDefault()) <span class=\"comment\">// 使用 HH:mm 格式</span></span><br><span class=\"line\">                format.format(date) <span class=\"comment\">// 格式化时间戳</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 格式化提醒时间戳为 HH:mm 格式的字符串</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@param</span> timeStamp 提醒时间戳</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@return</span> 格式化后的提醒时间字符串，如果时间戳为0则返回&quot;无&quot;</span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">formatReminderTime</span><span class=\"params\">(timeStamp: <span class=\"type\">Long</span>)</span></span>: String&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> (timeStamp == <span class=\"number\">0L</span>)&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;无&quot;</span> <span class=\"comment\">// 时间戳为0时显示&quot;无&quot;</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> date = Date(timeStamp)</span><br><span class=\"line\">                <span class=\"keyword\">val</span> format = SimpleDateFormat(<span class=\"string\">&quot;HH:mm&quot;</span>, Locale.getDefault()) <span class=\"comment\">// 使用 HH:mm 格式</span></span><br><span class=\"line\">                format.format(date) <span class=\"comment\">// 格式化时间戳</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实现 ViewHolder 模式</li>\n<li>绑定数据到视图</li>\n<li>处理用户交互（增加、修改、删除）</li>\n</ul>\n<ol start=\"4\">\n<li>准备图标按钮需要的矢量图标资源</li>\n</ol>\n<ul>\n<li>删除按钮图标 ic_delete.xml</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportWidth</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportHeight</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:tint</span>=<span class=\"string\">&quot;?attr/colorError&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:fillColor</span>=<span class=\"string\">&quot;@android:color/white&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:pathData</span>=<span class=\"string\">&quot;M6,19c0,1.1 0.9,2 2,2h8c1.1,0 2,-0.9 2,-2V7H6v12zM19,4h-3.5l-1,-1h-5l-1,1H5v2h14V4z&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑按钮图标 ic_edit.xml</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- res/drawable/ic_edit.xml --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportWidth</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportHeight</span>=<span class=\"string\">&quot;24&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:fillColor</span>=<span class=\"string\">&quot;#FF000000&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:pathData</span>=<span class=\"string\">&quot;M3,17.25V21h3.75L17.81,9.94l-3.75,-3.75L3,17.25zM20.71,7.04c0.39,-0.39 0.39,-1.02 0,-1.41l-2.34,-2.34c-0.39,-0.39 -1.02,-0.39 -1.41,0l-1.83,1.83 3.75,3.75 1.83,-1.83z&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>确认完成图标 ic_notification.xml</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- res/drawable/ic_notification.xml --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportWidth</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportHeight</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:tint</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:fillColor</span>=<span class=\"string\">&quot;@android:color/white&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:pathData</span>=<span class=\"string\">&quot;M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.89,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32L13.5,4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>修改日视图 DayViewFragment.kt 以初始化适配器，并启动数据库，为适配器设置数据源</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 日视图 Fragment</span></span><br><span class=\"line\"><span class=\"comment\"> * 负责显示和管理日历的日视图，显示特定日期的详细信息</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DayViewFragment</span>: <span class=\"type\">Fragment</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> _binding: FragmentDayViewBinding? = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> binding <span class=\"keyword\">get</span>() = _binding!!</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> dayTitle: TextView</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> noEventsText: TextView</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> eventsRecyclerView: RecyclerView</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> eventAdapter: EventCardAdapter</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 事件更新观察者</span></span><br><span class=\"line\"><span class=\"comment\">     * 当收到事件更新通知时，重新加载当天的事件列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> eventUpdateObserver = Observer&lt;<span class=\"built_in\">Boolean</span>&gt; &#123; _ -&gt;</span><br><span class=\"line\">        <span class=\"comment\">// 当收到事件更新时，刷新日程列表</span></span><br><span class=\"line\">        loadEventsForDate()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建 Fragment 的视图层次结构</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> inflater 用于 inflate 视图的 LayoutInflater</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> container 此 Fragment 的父 ViewGroup</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> savedInstanceState 保存的状态信息，如果 Fragment 是重新创建的，则不为 null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 返回此 Fragment 的根视图</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreateView</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        inflater: <span class=\"type\">LayoutInflater</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">ViewGroup</span>?,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        savedInstanceState: <span class=\"type\">Bundle</span>?</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span>: View? &#123;</span><br><span class=\"line\">        _binding = FragmentDayViewBinding.inflate(inflater, container, <span class=\"literal\">false</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> view = _binding!!.root</span><br><span class=\"line\"></span><br><span class=\"line\">        dayTitle = binding.dayHeaderText</span><br><span class=\"line\">        noEventsText = binding.noEventText</span><br><span class=\"line\">        eventsRecyclerView = binding.eventRecyclerView</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> view</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置 RecyclerView 及其适配器</span></span><br><span class=\"line\"><span class=\"comment\">     * 初始化事件列表的显示组件</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupRecyclerView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        eventAdapter = EventCardAdapter(</span><br><span class=\"line\">            events = emptyList(),</span><br><span class=\"line\">            onEditClick = &#123; event -&gt;</span><br><span class=\"line\">                editEvent(event)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            onDeleteClick = &#123; event -&gt;</span><br><span class=\"line\">                deleteEvent(event)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            onCompleteToggle = &#123; event, isCompleted -&gt;</span><br><span class=\"line\">                toggleEventCompletion(event, isCompleted)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        eventsRecyclerView.apply &#123;</span><br><span class=\"line\">            layoutManager = LinearLayoutManager(context)</span><br><span class=\"line\">            adapter = eventAdapter</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 加载指定日期的事件</span></span><br><span class=\"line\"><span class=\"comment\">     * 触发从数据库加载事件数据的操作</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">loadEventsForDate</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        loadEventFromDatabase()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 更新事件列表显示</span></span><br><span class=\"line\"><span class=\"comment\">     * 根据事件列表是否为空来控制空提示文本的显示</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> events 要显示的事件列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">updateEventList</span><span class=\"params\">(events: <span class=\"type\">List</span>&lt;<span class=\"type\">CalendarEvent</span>&gt;)</span></span>&#123;</span><br><span class=\"line\">        eventAdapter.updateEvents(events)</span><br><span class=\"line\">        noEventsText.visibility = <span class=\"keyword\">if</span> (events.isEmpty()) View.VISIBLE <span class=\"keyword\">else</span> View.GONE</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 从数据库加载事件数据</span></span><br><span class=\"line\"><span class=\"comment\">     * 异步查询数据库获取当天的所有事件，并更新UI显示</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">loadEventFromDatabase</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        lifecycleScope.launch &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 获取数据库实例</span></span><br><span class=\"line\">                <span class=\"keyword\">val</span> database = CalendarDatabase.getInstance(requireContext())</span><br><span class=\"line\">                <span class=\"keyword\">val</span> eventDao = database.eventDao()</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// 计算当天的开始和结束日期</span></span><br><span class=\"line\">                <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">                <span class=\"keyword\">val</span> startOfDay = currentDate.atStartOfDay()</span><br><span class=\"line\">                <span class=\"keyword\">val</span> endOfDay = currentDate.atTime(<span class=\"number\">23</span>, <span class=\"number\">59</span>, <span class=\"number\">59</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">val</span> startTimeStamp = startOfDay.toInstant(ZoneOffset.UTC).toEpochMilli()</span><br><span class=\"line\">                <span class=\"keyword\">val</span> endTimeStamp = endOfDay.toInstant(ZoneOffset.UTC).toEpochMilli()</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// 查询数据库并获取事件</span></span><br><span class=\"line\">                <span class=\"keyword\">val</span> events = eventDao.getEventsInRange(startTimeStamp, endTimeStamp)</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// 更新UI</span></span><br><span class=\"line\">                updateEventList(events)</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (e: Exception)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// 处理异常</span></span><br><span class=\"line\">                Toast.makeText(context, <span class=\"string\">&quot;加载事件失败：<span class=\"subst\">$&#123;e.message&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 编辑指定事件</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> event 需要编辑的事件对象</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">editEvent</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 添加编辑事件逻辑</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除指定事件</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> event 需要删除的事件对象</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">deleteEvent</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 添加删除事件逻辑</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 切换事件完成状态</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> event 需要切换状态的事件对象</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> isCompleted 事件的完成状态</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">toggleEventCompletion</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>, isCompleted: <span class=\"type\">Boolean</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 添加切换事件完成状态逻辑</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当 Fragment 的视图创建完成后调用</span></span><br><span class=\"line\"><span class=\"comment\">     * 在这里进行视图相关的初始化操作</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> view 此 Fragment 的根视图</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> savedInstanceState 保存的状态信息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onViewCreated</span><span class=\"params\">(view: <span class=\"type\">View</span>, savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onViewCreated(view, savedInstanceState)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 观察事件更新</span></span><br><span class=\"line\">        EventUpdateManager.getInstance().eventUpdated.observe(</span><br><span class=\"line\">            viewLifecycleOwner,</span><br><span class=\"line\">            eventUpdateObserver</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 初始化 ViewModel</span></span><br><span class=\"line\">        <span class=\"keyword\">val</span> database = CalendarDatabase.getInstance(requireContext())</span><br><span class=\"line\">        <span class=\"keyword\">val</span> eventDao = database.eventDao()</span><br><span class=\"line\">        </span><br><span class=\"line\">        setupRecyclerView()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 加载初始数据</span></span><br><span class=\"line\">        loadEventsForDate()</span><br><span class=\"line\">        setupDayView()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置日视图的相关配置</span></span><br><span class=\"line\"><span class=\"comment\">     * 包括设置当前日期标题等</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupDayView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">        <span class=\"comment\">// 设置日视图头部显示的日期文本</span></span><br><span class=\"line\">        binding.dayHeaderText.text = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>).format(currentDate)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当 Fragment 的视图被销毁时调用</span></span><br><span class=\"line\"><span class=\"comment\">     * 清理资源，避免内存泄漏</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onDestroyView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onDestroyView()</span><br><span class=\"line\">        _binding = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>初始化界面组件</li>\n<li>设置 RecyclerView 和适配器</li>\n<li>从数据库加载当天事件数据</li>\n<li>更新界面显示</li>\n<li>使用 Room 数据库查询当天事件</li>\n<li>计算查询时间范围（当天开始到结束）</li>\n<li>异步加载数据并更新 UI</li>\n<li>处理空数据状态显示</li>\n<li>声明观察者，并在 <strong>OnViewCreated</strong> 中激活观察者，通过 <strong>EventUpdateManager.getInstance().eventUpdated.observe()</strong> 来监听 <strong>eventUpdated</strong> 的改变</li>\n</ul>\n<ol start=\"6\">\n<li>创建事件管理类 EventUpdateManager.kt 使用 LiveData 机制，监听数据更新，刷新UI</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 事件更新管理器</span></span><br><span class=\"line\"><span class=\"comment\"> * 使用单例模式管理事件更新通知，防止频繁更新UI</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EventUpdateManager</span> <span class=\"keyword\">private</span> <span class=\"keyword\">constructor</span>()&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _eventUpdated = MutableLiveData&lt;<span class=\"built_in\">Boolean</span>&gt;()</span><br><span class=\"line\">    <span class=\"keyword\">val</span> eventUpdated: LiveData&lt;<span class=\"built_in\">Boolean</span>&gt; = _eventUpdated</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 上次通知时间戳</span></span><br><span class=\"line\"><span class=\"comment\">     * 用于防抖处理，避免过于频繁的更新通知</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> lastNotifyTime = <span class=\"number\">0L</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 防抖间隔时间（毫秒）</span></span><br><span class=\"line\"><span class=\"comment\">     * 两次通知之间的最小时间间隔</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> debounceInterval = <span class=\"number\">500L</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 通知事件已添加</span></span><br><span class=\"line\"><span class=\"comment\">     * 通过防抖机制控制通知频率，避免短时间内重复通知</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">notifyEventAdded</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentTime = System.currentTimeMillis()</span><br><span class=\"line\">        <span class=\"comment\">// 如果当前时间间隔小于防抖间隔，则不执行通知</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (currentTime - lastNotifyTime &gt; debounceInterval)&#123;</span><br><span class=\"line\">            _eventUpdated.value = <span class=\"literal\">true</span></span><br><span class=\"line\">            lastNotifyTime = currentTime</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">companion</span> <span class=\"keyword\">object</span>&#123;</span><br><span class=\"line\">        <span class=\"meta\">@Volatile</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> INSTANCE: EventUpdateManager? = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 获取 EventUpdateManager 的单例实例</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@return</span> EventUpdateManager 的单例对象</span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>: EventUpdateManager&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> INSTANCE ?: synchronized(<span class=\"keyword\">this</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> instance = EventUpdateManager()</span><br><span class=\"line\">                INSTANCE = instance</span><br><span class=\"line\">                instance</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用 <strong>LiveData 机制</strong>，可变的_eventUpdated 属性保存事件更新状态，不可变的eventUpdated 属性提供外部访问</li>\n<li>当事件变化调用 notifyEventAdded() 方法时，LiveData机制会通知所有<strong>活跃的观察者</strong></li>\n<li>观察者调用相关方法，更新UI</li>\n</ul>\n<ol start=\"7\">\n<li>在主活动 MainActivity.kt 中 <strong>saveEventToDatabase</strong> 方法中，当操作完成后，调用 EventUpdateManager.getInstance().notifyEventAdded() 方法通知事件已添加，通过 LiveData 机制，更新UI</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 在主线程中显示成功消息</span></span><br><span class=\"line\">withContext(Dispatchers.Main)&#123;</span><br><span class=\"line\">    Toast.makeText(<span class=\"keyword\">this</span><span class=\"symbol\">@MainActivity</span>, <span class=\"string\">&quot;日程已添加，ID：<span class=\"variable\">$eventId</span>&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 通知日程列表刷新</span></span><br><span class=\"line\">    EventUpdateManager.getInstance().notifyEventAdded()</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"日程修改实现\">日程修改实现</h3>\n<ul>\n<li>该步骤要实现 <strong>DayViewFragment.kt</strong> 中的 <strong>editEvent()</strong> 方法</li>\n<li>该方法的传递逻辑为 <em>editEvent() -&gt; setupRecyclerView() -&gt; onViewCreated()</em></li>\n<li>通过 EventCardAdapter 类中的 editButton.setOnClickListener() 方法触发调用</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 编辑指定事件</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> event 需要编辑的事件对象</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">editEvent</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 添加编辑事件逻辑</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>创建对话框</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建对话框</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> dialogView = LayoutInflater.from(context).inflate(R.layout.dialog_add_event, <span class=\"literal\">null</span>)</span><br><span class=\"line\"><span class=\"keyword\">val</span> dialogBuilder = AlertDialog.Builder(requireContext())</span><br><span class=\"line\">dialogBuilder.setView(dialogView)</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>获取对话框的视图元素</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取对话框的视图元素</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> dialogTitle = dialogView.findViewById&lt;TextView&gt;(R.id.dialogTitle)</span><br><span class=\"line\"><span class=\"keyword\">val</span> eventIdText = dialogView.findViewById&lt;TextView&gt;(R.id.eventIdText)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextDate = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextDate)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextTitle = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextTitle)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextContent = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextContent)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextReminder = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextReminder)</span><br><span class=\"line\"><span class=\"keyword\">val</span> buttonCancel = dialogView.findViewById&lt;Button&gt;(R.id.buttonCancel)</span><br><span class=\"line\"><span class=\"keyword\">val</span> buttonConfirm = dialogView.findViewById&lt;Button&gt;(R.id.buttonConfirm)</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>对话框视图信息回显</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 回显事件信息 - 将当前事件的信息显示在对话框中供用户编辑</span></span><br><span class=\"line\">eventIdText.text = event.id.toString()</span><br><span class=\"line\">editTextTitle.setText(event.title)</span><br><span class=\"line\">editTextContent.setText(event.content)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 格式化显示日期 - 将事件开始时间格式化为&quot;yyyy年MM月dd日&quot;格式显示</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> eventDate = Date(event.startTime)</span><br><span class=\"line\"><span class=\"keyword\">val</span> dateFormat = SimpleDateFormat(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>, Locale.getDefault())</span><br><span class=\"line\">editTextDate.setText(dateFormat.format(eventDate))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 格式化并显示提醒时间 - 如果事件设置了提醒时间，则格式化为&quot;HH:mm&quot;格式显示</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> timeFormatter = SimpleDateFormat(<span class=\"string\">&quot;HH:mm&quot;</span>, Locale.getDefault())</span><br><span class=\"line\"><span class=\"keyword\">if</span> (event.reminderTime != <span class=\"number\">0L</span>)&#123;</span><br><span class=\"line\">    editTextReminder.setText(timeFormatter.format(Date(event.reminderTime)))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>设置日期选择器和时间选择器</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 设置日期选择器 - 点击日期输入框时弹出日期选择器</span></span><br><span class=\"line\">editTextDate.setOnClickListener &#123;</span><br><span class=\"line\">    showDatePicker(editTextDate)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置提醒时间选择器 - 点击提醒时间输入框时弹出时间选择器</span></span><br><span class=\"line\">editTextReminder.setOnClickListener &#123;</span><br><span class=\"line\">    showTimePicker(editTextReminder)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>日期选择器</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showDatePicker</span><span class=\"params\">(editTextDate: <span class=\"type\">TextInputEditText</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> today = LocalDate.now()</span><br><span class=\"line\">    <span class=\"keyword\">val</span> datePicker = DatePickerDialog(</span><br><span class=\"line\">        requireContext(),</span><br><span class=\"line\">        &#123;_, year, month, dayOfMonth -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> selectedDate = LocalDate.of(year, month + <span class=\"number\">1</span>, dayOfMonth)</span><br><span class=\"line\">            <span class=\"keyword\">val</span> formatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>)</span><br><span class=\"line\">            editTextDate.setText(selectedDate.format(formatter))</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        today.year,</span><br><span class=\"line\">        today.monthValue - <span class=\"number\">1</span>,</span><br><span class=\"line\">        today.dayOfMonth</span><br><span class=\"line\">    )</span><br><span class=\"line\">    datePicker.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>时间选择器</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showTimePicker</span><span class=\"params\">(editTextReminder: <span class=\"type\">TextInputEditText</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> timePicker = TimePickerDialog(</span><br><span class=\"line\">        requireContext(),</span><br><span class=\"line\">        &#123;_, hourOfDay, minute -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> selectedTime = String.format(<span class=\"string\">&quot;%02d:%02d&quot;</span>, hourOfDay, minute)</span><br><span class=\"line\">            editTextReminder.setText(selectedTime)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"number\">9</span>,</span><br><span class=\"line\">        <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"literal\">true</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">    timePicker.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>创建并显示对话框</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> dialog = dialogBuilder.create()</span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>设置取消按钮事件</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">buttonCancel.setOnClickListener &#123;</span><br><span class=\"line\">    dialog.dismiss()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"7\">\n<li>设置确认按钮事件</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">buttonConfirm.setOnClickListener &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 添加修改事件逻辑</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 事件逻辑</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e: Exception) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 失败处理</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用协程作用于执行数据库的耗时操作</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lifecycleScope.launch &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 修改数据库相关操作</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>获取数据库实例和事件数据访问对象</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> database = CalendarDatabase.getInstance(requireContext())</span><br><span class=\"line\"><span class=\"keyword\">val</span> eventDao = database.eventDao()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>获取修改的数据并解析</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取用户输入的数据</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> title = editTextTitle.text.toString()</span><br><span class=\"line\"><span class=\"keyword\">val</span> content = editTextContent.text.toString()</span><br><span class=\"line\"><span class=\"keyword\">val</span> reminder = editTextReminder.text.toString()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 解析日期 - 将用户输入的日期字符串转换为LocalDate对象</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> dateFormatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">val</span> localDate = LocalDate.parse(editTextDate.text.toString(), dateFormatter)</span><br><span class=\"line\"><span class=\"comment\">// 计算事件开始时间和结束时间的时间戳</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> startTime = localDate.atStartOfDay(ZoneId.systemDefault()).toInstant().toEpochMilli()</span><br><span class=\"line\"><span class=\"keyword\">val</span> endTime = localDate.atTime(<span class=\"number\">23</span>, <span class=\"number\">59</span>, <span class=\"number\">59</span>).atZone(ZoneId.systemDefault()).toInstant().toEpochMilli()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 解析提醒时间 - 如果设置了提醒时间，则计算提醒时间的时间戳</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> reminderTime = <span class=\"keyword\">if</span> (reminder.isNotEmpty())&#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> timeFormatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;HH:mm&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">val</span> localTime = LocalTime.parse(reminder, timeFormatter)</span><br><span class=\"line\">    <span class=\"keyword\">val</span> reminderDateTime = localDate.atTime(localTime)</span><br><span class=\"line\">    reminderDateTime.atZone((ZoneId.systemDefault())).toInstant().toEpochMilli()</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"number\">0L</span> <span class=\"comment\">// 如果未设置提醒时间，则设为0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>创建修改事件对象，校验关键信息非空，并提交修改</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 更新事件对象 - 使用新的数据创建更新后的事件对象</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> updatedEvent = event.copy(</span><br><span class=\"line\">    title = title,</span><br><span class=\"line\">    content = content,</span><br><span class=\"line\">    startTime = startTime,</span><br><span class=\"line\">    endTime = endTime,</span><br><span class=\"line\">    reminderTime = reminderTime</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 验证必填字段 - 检查标题是否为空</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (title.isEmpty())&#123;</span><br><span class=\"line\">    editTextTitle.error = <span class=\"string\">&quot;请输入日程标题&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span><span class=\"symbol\">@launch</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 验证必填字段 - 检查日期是否为空</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (content.isEmpty())&#123;</span><br><span class=\"line\">    editTextDate.error = <span class=\"string\">&quot;请选择日程日期&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span><span class=\"symbol\">@launch</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 更新事件到数据库</span></span><br><span class=\"line\">eventDao.updateEvent(updatedEvent)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>通知观察者，刷新视图</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUpdateManager.getInstance().notifyEventAdded()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>关闭对话框并显示成功提示</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dialog.dismiss()</span><br><span class=\"line\">Toast.makeText(context, <span class=\"string\">&quot;修改成功&quot;</span>, Toast.LENGTH_SHORT).show()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>捕获异常并显示错误提示</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Toast.makeText(context, <span class=\"string\">&quot;修改失败：<span class=\"subst\">$&#123;e.message&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()</span><br></pre></td></tr></table></figure>\n<ol start=\"8\">\n<li>展示对话框</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dialog.show()</span><br></pre></td></tr></table></figure>\n<p>至此，我们可以通过点击修改按钮，弹出修改事件对话框，并完成修改事件操作</p>\n","excerpt":"","more":"<h1>MyCalendarApp</h1>\n<h2 id=\"目录\">目录</h2>\n<ul>\n<li><a href=\"#mycalendarapp\">MyCalendarApp</a>\n<ul>\n<li><a href=\"#%E7%9B%AE%E5%BD%95\">目录</a></li>\n<li><a href=\"#kizitonwosecalendarview-%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8\">kizitonwose/CalendarView 框架的使用</a>\n<ul>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8\">基本使用</a></li>\n<li><a href=\"#%E5%91%A8%E8%A7%86%E5%9B%BE%E5%8A%9F%E8%83%BD%E7%BB%86%E5%88%86\">周视图功能细分</a>\n<ul>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E6%98%9F%E6%9C%9F%E6%A0%87%E9%A2%98\">添加星期标题</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E6%97%A5%E6%9C%9F%E9%80%89%E6%8B%A9%E5%8A%9F%E8%83%BD\">添加日期选择功能</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E4%BB%8A%E6%97%A5%E9%BB%98%E8%AE%A4%E8%83%8C%E6%99%AF\">添加今日默认背景</a></li>\n<li><a href=\"#%E5%91%A8%E7%9A%84%E6%BB%9A%E5%8A%A8%E5%88%87%E6%8D%A2\">周的滚动切换</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E5%B9%B4%E6%9C%88%E6%A0%87%E9%A2%98\">添加年月标题</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E6%97%A5%E7%A8%8B%E6%B7%BB%E5%8A%A0\">日程添加</a>\n<ul>\n<li><a href=\"#%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%E6%89%93%E5%BC%80%E6%97%A5%E7%A8%8B%E6%B7%BB%E5%8A%A0%E8%A1%A8%E5%8D%95\">点击按钮打开日程添加表单</a></li>\n<li><a href=\"#%E6%97%A5%E7%A8%8B%E5%88%97%E8%A1%A8%E5%AE%9E%E7%8E%B0\">日程列表实现</a></li>\n<li><a href=\"#%E6%97%A5%E7%A8%8B%E4%BF%AE%E6%94%B9%E5%AE%9E%E7%8E%B0\">日程修改实现</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"kizitonwose-CalendarView-框架的使用\">kizitonwose/CalendarView 框架的使用</h2>\n<p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3 id=\"基本使用\">基本使用</h3>\n<p><a href=\"#kizitonwosecalendarview-%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8\">回到上一级</a></p>\n<ol>\n<li>添加依赖<br>\n在 gradle/libs.versions.toml 中：</li>\n</ol>\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[versions]</span></span><br><span class=\"line\"><span class=\"attr\">kizitonwose-calendar</span> = <span class=\"string\">&quot;2.9.0&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[libraries]</span></span><br><span class=\"line\"><span class=\"attr\">kizitonwose-calendar</span> = &#123; module = <span class=\"string\">&quot;com.kizitonwose.calendar:view&quot;</span>, version.ref = <span class=\"string\">&quot;kizitonwose-calendar&quot;</span> &#125;</span><br></pre></td></tr></table></figure>\n<p>在 app/build.gradle.kts 中：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">    implementation(libs.kizitonwose.calendar)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>创建日视图布局资源</li>\n</ol>\n<p>在layout中创建日视图布局资源，例如 calendar_day_layout.xml 来为日历中的每一天创建一个布局</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/calendarDayText&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">tools:text</span>=<span class=\"string\">&quot;22&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>创建 ViewContainer 类</li>\n</ol>\n<p>为每个视图类型创建容器类来持有视图元素</p>\n<p>月视图容器 (MonthDayViewContainer.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MonthDayViewContainer</span>(view: View) : ViewContainer(view) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> textView: TextView = view.findViewById(R.id.calendarDayText)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>周视图容器 (DayViewContainer.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DayViewContainer</span>(view: View) : ViewContainer(view) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> textView: TextView = view.findViewById&lt;TextView&gt;(R.id.calendarDayText)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>创建 ViewBinder 类</li>\n</ol>\n<p>创建绑定器类来控制如何显示日历中的每一天</p>\n<p>月视图绑定器 (MonthDayViewBinder.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MonthDayViewBinder</span> : <span class=\"type\">MonthDayBinder</span>&lt;<span class=\"type\">MonthDayViewContainer</span>&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">create</span><span class=\"params\">(view: <span class=\"type\">View</span>)</span></span> = MonthDayViewContainer(view)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(container: <span class=\"type\">MonthDayViewContainer</span>, <span class=\"keyword\">data</span>: <span class=\"type\">CalendarDay</span>)</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 根据日期是否属于当前月份设置不同的透明度</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">data</span>.position == DayPosition.MonthDate) &#123;</span><br><span class=\"line\">            container.textView.alpha = <span class=\"number\">1f</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            container.textView.alpha = <span class=\"number\">0.3f</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>周视图绑定器 (WeekViewBinder.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewBinder</span>: <span class=\"type\">WeekDayBinder</span>&lt;<span class=\"type\">DayViewContainer</span>&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">create</span><span class=\"params\">(view: <span class=\"type\">View</span>)</span></span>: DayViewContainer = DayViewContainer(view)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">DayViewContainer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        <span class=\"keyword\">data</span>: <span class=\"type\">WeekDay</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>创建 Fragment 布局</li>\n</ol>\n<p>月视图布局 (fragment_month_view.xml)：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">com.kizitonwose.calendar.view.CalendarView</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/month_calendar_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:cv_dayViewResource</span>=<span class=\"string\">&quot;@layout/calendar_day_layout&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>周视图布局 (fragment_week_view.xml)：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">com.kizitonwose.calendar.view.WeekCalendarView</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/week_calendar_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:cv_dayViewResource</span>=<span class=\"string\">&quot;@layout/calendar_day_layout&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>实现 Fragment 逻辑</li>\n</ol>\n<p>月视图 Fragment (MonthViewFragment.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MonthViewFragment</span> : <span class=\"type\">Fragment</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> _binding: FragmentMonthViewBinding? = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> binding <span class=\"keyword\">get</span>() = _binding!!</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreateView</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        inflater: <span class=\"type\">LayoutInflater</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">ViewGroup</span>?,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        savedInstanceState: <span class=\"type\">Bundle</span>?</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span>: View? &#123;</span><br><span class=\"line\">        _binding = FragmentMonthViewBinding.inflate(inflater, container, <span class=\"literal\">false</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> binding.root</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onViewCreated</span><span class=\"params\">(view: <span class=\"type\">View</span>, savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onViewCreated(view, savedInstanceState)</span><br><span class=\"line\">        setupMonthView()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupMonthView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentMonth = YearMonth.now()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> startMonth = currentMonth.minusMonths(<span class=\"number\">100</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> endMonth = currentMonth.plusMonths(<span class=\"number\">100</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> firstDayOfWeek = firstDayOfWeekFromLocale()</span><br><span class=\"line\"></span><br><span class=\"line\">        binding.monthCalendarView.dayBinder = MonthDayViewBinder()</span><br><span class=\"line\">        binding.monthCalendarView.setup(startMonth, endMonth, firstDayOfWeek)</span><br><span class=\"line\">        binding.monthCalendarView.scrollToMonth(currentMonth)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onDestroyView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onDestroyView()</span><br><span class=\"line\">        _binding = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>周视图 Fragment (WeekViewFragment.kt)：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewFragment</span>: <span class=\"type\">Fragment</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> _binding: FragmentWeekViewBinding? = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> binding <span class=\"keyword\">get</span>() = _binding!!</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreateView</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        inflater: <span class=\"type\">LayoutInflater</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">ViewGroup</span>?,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        savedInstanceState: <span class=\"type\">Bundle</span>?</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span>: View? &#123;</span><br><span class=\"line\">        _binding = FragmentWeekViewBinding.inflate(inflater, container, <span class=\"literal\">false</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> binding.root</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onViewCreated</span><span class=\"params\">(view: <span class=\"type\">View</span>, savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onViewCreated(view, savedInstanceState)</span><br><span class=\"line\">        setupWeekView()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupWeekView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekCalendarView = binding.weekCalendarView</span><br><span class=\"line\">        weekCalendarView.dayBinder = WeekViewBinder()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentMonth = YearMonth.now()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> startMonth = currentMonth.minusMonths(<span class=\"number\">100</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> endMonth = currentMonth.plusMonths(<span class=\"number\">100</span>) </span><br><span class=\"line\">        <span class=\"keyword\">val</span> firstDayOfWeek = firstDayOfWeekFromLocale()</span><br><span class=\"line\">        </span><br><span class=\"line\">        weekCalendarView.setup(startMonth.atDay(<span class=\"number\">1</span>), endMonth.atEndOfMonth(), firstDayOfWeek)</span><br><span class=\"line\">        weekCalendarView.scrollToWeek(currentDate)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onDestroyView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onDestroyView()</span><br><span class=\"line\">        _binding = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>至此，就完成了基于kizitonwose/CalendarView的日历视图的基本使用</p>\n<h3 id=\"周视图功能细分\">周视图功能细分</h3>\n<p><a href=\"#kizitonwosecalendarview-%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%BF%E7%94%A8\">回到上一级</a></p>\n<h4 id=\"添加星期标题\">添加星期标题</h4>\n<ol>\n<li>在layout中创建calendar_day_title_text.xml定义<strong>单个</strong>星期标题的样式</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">TextView</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">&quot;1&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:textSize</span>=<span class=\"string\">&quot;12sp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>同目录下创建calendar_day_titles_container.xml，使用<strong>水平线性布局</strong>，包含七个上一步创建的星期标题，代表一周七天</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:weightSum</span>=<span class=\"string\">&quot;7&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;horizontal&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span> <span class=\"attr\">layout</span>=<span class=\"string\">&quot;@layout/calendar_day_title_text&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 重复6次 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>将上一步的容器引入fragment_week_view.xml中</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;vertical&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/titlesContainer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">layout</span>=<span class=\"string\">&quot;@layout/calendar_day_titles_container&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 周视图日历控件，用于显示一周的日期 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.kizitonwose.calendar.view.WeekCalendarView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/week_calendar_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:cv_dayViewResource</span>=<span class=\"string\">&quot;@layout/calendar_day_layout&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>在 WeekViewFragment.kt 中，通过 setDayOfWeekTitles() 方法动态设置星期标题文本</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupWeekView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekCalendarView = binding.weekCalendarView</span><br><span class=\"line\">        weekCalendarView.dayBinder = weekViewBinder</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 获取标题容器并设置星期标题</span></span><br><span class=\"line\">        setDayOfWeekTitles()</span><br><span class=\"line\">        </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setDayOfWeekTitles</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 获取标题容器</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> titlesContainer = binding.root.findViewById&lt;ViewGroup&gt;(R.id.titlesContainer)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 遍历每个标题容器并设置文本</span></span><br><span class=\"line\">    titlesContainer.children</span><br><span class=\"line\">        .map &#123; it <span class=\"keyword\">as</span> TextView &#125;</span><br><span class=\"line\">        .forEachIndexed &#123; index, textView -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> dayOfWeek = daysOfWeek()[index]</span><br><span class=\"line\">            <span class=\"keyword\">val</span> title = dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.getDefault())</span><br><span class=\"line\">            textView.text = title</span><br><span class=\"line\">            textView.gravity = Gravity.CENTER</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>至此，添加星期标题功能完成</p>\n<h4 id=\"添加日期选择功能\">添加日期选择功能</h4>\n<ol>\n<li>在presentation/calendarContainer/下的DayViewContainer.kt中<strong>添加</strong>点击监听器</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DayViewContainer</span>(view: View) : ViewContainer(view) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 添加一个函数来设置点击监听器</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setOnClickListener</span><span class=\"params\">(listener: (<span class=\"type\">View</span>) -&gt; <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">        textView.setOnClickListener(listener)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中listener参数是一个<strong>函数类型</strong>，是以View为参数，且返回值为Unit(void,即无返回值)的函数</p>\n<ol start=\"2\">\n<li>在presentation/calendarBinder/WeekViewBinder.kt中<strong>设置</strong>点击监听器</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewBinder</span>: <span class=\"type\">WeekDayBinder</span>&lt;<span class=\"type\">DayViewContainer</span>&gt; &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">DayViewContainer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        <span class=\"keyword\">data</span>: <span class=\"type\">WeekDay</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 设置点击监听器</span></span><br><span class=\"line\">        container.setOnClickListener &#123;</span><br><span class=\"line\">            selectedDate = <span class=\"keyword\">data</span>.date</span><br><span class=\"line\">            onDateClickListener?.invoke(<span class=\"keyword\">data</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中<code>?.invoke</code> 是一个<strong>可选调用</strong>，用于调用一个可能为 null 的函数。如果函数不为 null，则调用它，否则不执行任何操作。<br>\n这里只有点击日期时才触发点击回调data，并更新选中日期的视觉效果</p>\n<ol start=\"3\">\n<li>在 presentation/ui/calendar/WeekViewFragment.kt 中设置点击回调</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewFragment</span>: <span class=\"type\">Fragment</span>() &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupWeekView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 步骤3：在Fragment中设置点击回调</span></span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekViewBinder = WeekViewBinder()</span><br><span class=\"line\">        weekViewBinder.onDateClickListener = &#123; weekDay -&gt;</span><br><span class=\"line\">            <span class=\"comment\">// 处理点击事件</span></span><br><span class=\"line\">            Toast.makeText(context, <span class=\"string\">&quot;Clicked: <span class=\"subst\">$&#123;weekDay.date&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class=\"line\">            <span class=\"comment\">// 更新选中日期的视觉效果</span></span><br><span class=\"line\">            weekViewBinder.selectDate(weekDay.date)</span><br><span class=\"line\">            <span class=\"comment\">// 通知日历重新绘制以更新选中状态</span></span><br><span class=\"line\">            binding.weekCalendarView.notifyCalendarChanged()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekCalendarView = binding.weekCalendarView</span><br><span class=\"line\">        weekCalendarView.dayBinder = weekViewBinder</span><br><span class=\"line\">        </span><br><span class=\"line\">        ...</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>在presentation/calendarBinder/WeekViewBinder.kt中添加选中日期的追踪</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">WeekViewBinder</span>: <span class=\"type\">WeekDayBinder</span>&lt;<span class=\"type\">DayViewContainer</span>&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">DayViewContainer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        <span class=\"keyword\">data</span>: <span class=\"type\">WeekDay</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 设置点击监听器</span></span><br><span class=\"line\">        container.setOnClickListener &#123;</span><br><span class=\"line\">            selectedDate = <span class=\"keyword\">data</span>.date</span><br><span class=\"line\">            onDateClickListener?.invoke(<span class=\"keyword\">data</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 更新选中的视觉效果</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (selectedDate == <span class=\"keyword\">data</span>.date) &#123;</span><br><span class=\"line\">            container.textView.setBackgroundResource(R.drawable.modern_selected_date_ripple)</span><br><span class=\"line\">            <span class=\"comment\">// 选中日期使用白色文字以便在洋红色背景上清晰可见</span></span><br><span class=\"line\">            container.textView.setTextColor(Color.WHITE)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            container.textView.background = <span class=\"literal\">null</span></span><br><span class=\"line\">            <span class=\"comment\">// 非选中日期使用黑色文字</span></span><br><span class=\"line\">            container.textView.setTextColor(Color.BLACK)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这里的背景资源需要自行创建</p>\n<h4 id=\"添加今日默认背景\">添加今日默认背景</h4>\n<p><a href=\"#%E5%91%A8%E8%A7%86%E5%9B%BE%E5%8A%9F%E8%83%BD%E7%BB%86%E5%88%86\">回到上一级</a></p>\n<ol>\n<li>在presentation/calendarBinder/WeekViewBinder.kt的bind()方法中获取今天的日期</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> today = LocalDate.now()</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在presentation/calendarBinder/WeekViewBinder.kt的bind()方法中判断当前日期是否为今天，如果是则设置背景</li>\n</ol>\n<p>完整方法</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">DayViewContainer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        <span class=\"keyword\">data</span>: <span class=\"type\">WeekDay</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span> &#123;</span><br><span class=\"line\">        container.textView.text = <span class=\"keyword\">data</span>.date.dayOfMonth.toString()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 设置点击监听器</span></span><br><span class=\"line\">        container.setOnClickListener &#123;</span><br><span class=\"line\">            selectedDate = <span class=\"keyword\">data</span>.date</span><br><span class=\"line\">            onDateClickListener?.invoke(<span class=\"keyword\">data</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 获取今天的日期</span></span><br><span class=\"line\">        <span class=\"keyword\">val</span> today = LocalDate.now()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 更新选中的视觉效果</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (selectedDate == <span class=\"keyword\">data</span>.date) &#123;</span><br><span class=\"line\">            container.textView.setBackgroundResource(R.drawable.modern_selected_date_ripple)</span><br><span class=\"line\">            <span class=\"comment\">// 选中日期使用白色文字以便在洋红色背景上清晰可见</span></span><br><span class=\"line\">            container.textView.setTextColor(Color.WHITE)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">data</span>.date == today) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 今天的日期使用与选中日期相同形状的背景高亮显示</span></span><br><span class=\"line\">            container.textView.setBackgroundResource(R.drawable.modern_today_background)</span><br><span class=\"line\">            container.textView.setTextColor(Color.BLACK)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            container.textView.background = <span class=\"literal\">null</span></span><br><span class=\"line\">            <span class=\"comment\">// 非选中日期使用黑色文字</span></span><br><span class=\"line\">            container.textView.setTextColor(Color.BLACK)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>背景资源需要自行创建</p>\n<h4 id=\"周的滚动切换\">周的滚动切换</h4>\n<p><a href=\"#%E5%91%A8%E8%A7%86%E5%9B%BE%E5%8A%9F%E8%83%BD%E7%BB%86%E5%88%86\">回到上一级</a></p>\n<ol>\n<li>在WeekViewFragment.kt中的setupWeekView()方法内添加滚动监听器，并实现更新逻辑</li>\n</ol>\n<ul>\n<li>添加<strong>滚动监听器</strong></li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupWeekView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekCalendarView = binding.weekCalendarView</span><br><span class=\"line\">        weekCalendarView.dayBinder = weekViewBinder</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 添加滚动监听器以同步星期标题</span></span><br><span class=\"line\">        weekCalendarView.weekScrollListener = &#123; weekStart -&gt;</span><br><span class=\"line\">            <span class=\"comment\">// 更新星期标题以匹配当前周</span></span><br><span class=\"line\">            updateDayOfWeekTitles(weekStart.days.first().date)</span><br><span class=\"line\">            <span class=\"comment\">// 更新年月标题</span></span><br><span class=\"line\">            <span class=\"comment\">// updateMonthYearHeader(weekStart.days.first().date)</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 获取标题容器并设置星期标题</span></span><br><span class=\"line\">        setDayOfWeekTitles()</span><br><span class=\"line\">        </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实现更新逻辑 <strong>updateDayOfWeekTitles()</strong></li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 更新星期标题</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> date 当前周的起始日期</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">updateDayOfWeekTitles</span><span class=\"params\">(date: <span class=\"type\">LocalDate</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> titlesContainer = binding.root.findViewById&lt;ViewGroup&gt;(R.id.titlesContainer)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 计算指定日期所在周到起始日期</span></span><br><span class=\"line\">        <span class=\"keyword\">val</span> firstDayOfWeek = firstDayOfWeekFromLocale()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> weekStart = date.minusDays(date.dayOfWeek.ordinal.toLong())</span><br><span class=\"line\">            .plusDays(firstDayOfWeek.ordinal.toLong())</span><br><span class=\"line\">            .minusDays(<span class=\"keyword\">if</span> (firstDayOfWeek.ordinal &lt;= date.dayOfWeek.ordinal) <span class=\"number\">0</span> <span class=\"keyword\">else</span> <span class=\"number\">7</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 更新每个标题党文本</span></span><br><span class=\"line\">        titlesContainer.children</span><br><span class=\"line\">            .map &#123; it <span class=\"keyword\">as</span> TextView &#125;</span><br><span class=\"line\">            .forEachIndexed &#123; index, textView -&gt;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> currentDay = weekStart.plusDays(index.toLong())</span><br><span class=\"line\">                <span class=\"keyword\">val</span> title = currentDay.dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.getDefault())</span><br><span class=\"line\">                textView.text = title</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>其中,计算逻辑：</p>\n<ol>\n<li>\n<p>date.dayOfWeek.ordinal：获取指定日期是星期几（星期一为0，星期日为6）</p>\n</li>\n<li>\n<p>date.minusDays(date.dayOfWeek.ordinal.toLong())：从指定日期减去对应的天数，得到该周的星期一</p>\n</li>\n<li>\n<p>plusDays(firstDayOfWeek.ordinal.toLong())：加上本地化星期起始日的偏移量</p>\n</li>\n<li>\n<p>minusDays(if (firstDayOfWeek.ordinal &lt;= date.dayOfWeek.ordinal) 0 else 7)：如果本地化星期起始日在指定日期的星期几之前或当天，则不需要调整否则需要减去7天以得到正确的周起始日</p>\n</li>\n<li>\n<p>在fragment_week_view.xml中的周视图日历控件中添加属性，优化滑动效果</p>\n</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 将app:cv_scrollPaged=&quot;true&quot;添加到WeekCalendarView控件中 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">com.kizitonwose.calendar.view.WeekCalendarView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/week_calendar_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:cv_dayViewResource</span>=<span class=\"string\">&quot;@layout/calendar_day_layout&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:cv_scrollPaged</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"添加年月标题\">添加年月标题</h4>\n<p><a href=\"#%E5%91%A8%E8%A7%86%E5%9B%BE%E5%8A%9F%E8%83%BD%E7%BB%86%E5%88%86\">回到上一级</a></p>\n<ol>\n<li>首先需要修改 fragment_week_view.xml 文件，添加年月标题：</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 添加年月标题 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/monthYearHeader&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textSize</span>=<span class=\"string\">&quot;18sp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textStyle</span>=<span class=\"string\">&quot;bold&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;@color/black&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">tools:text</span>=<span class=\"string\">&quot;2023年10月&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在 WeekViewFragment.kt 中添加年月标题的处理逻辑：</li>\n</ol>\n<ul>\n<li>在类中添加年月标题变量声明</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 添加年月标题变量声明</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> monthYearHeader: TextView</span><br></pre></td></tr></table></figure>\n<ul>\n<li>在 setupWeekView() 方法中初始化年月标题变量</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 初始化年月标题</span></span><br><span class=\"line\">monthYearHeader = binding.root.findViewById&lt;TextView&gt;(R.id.monthYearHeader)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>在 setupWeekView() 方法中的滚动监听器中同步更新年月标题</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 添加滚动监听器以同步星期标题</span></span><br><span class=\"line\">weekCalendarView.weekScrollListener = &#123; weekStart -&gt;</span><br><span class=\"line\">    <span class=\"comment\">// 更新星期标题以匹配当前周</span></span><br><span class=\"line\">    updateDayOfWeekTitles(weekStart.days.first().date)</span><br><span class=\"line\">    <span class=\"comment\">// 更新年月标题</span></span><br><span class=\"line\">    updateMonthYearHeader(weekStart.days.first().date)</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>实现更新逻辑 <strong>updateMonthYearHeader()</strong></li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 更新年月标题</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> date 当前周的起始日期</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">updateMonthYearHeader</span><span class=\"params\">(date: <span class=\"type\">LocalDate</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> formatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">val</span> monthYearText = date.format(formatter)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 如果文本没变化，不更新</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (monthYearHeader.text.toString() == monthYearText)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    monthYearHeader.text = monthYearText</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"日程添加\">日程添加</h2>\n<p><a href=\"#%E7%9B%AE%E5%BD%95\">回到目录</a></p>\n<h3 id=\"点击按钮打开日程添加表单\">点击按钮打开日程添加表单</h3>\n<p><a href=\"#%E6%97%A5%E7%A8%8B%E6%B7%BB%E5%8A%A0\">回到上一级</a></p>\n<ol>\n<li>在layout中准备表单界面 dialog_add_event.xml</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 添加日程表格 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;vertical&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;16dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;添加日程&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textSize</span>=<span class=\"string\">&quot;20sp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textStyle</span>=<span class=\"string\">&quot;bold&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;16dp&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;8dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputEditText</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editTextDate&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:hint</span>=<span class=\"string\">&quot;日期&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:focusable</span>=<span class=\"string\">&quot;false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:clickable</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;8dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputEditText</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editTextTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:hint</span>=<span class=\"string\">&quot;日程标题&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;8dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputEditText</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editTextContent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:hint</span>=<span class=\"string\">&quot;日程内容&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:minLines</span>=<span class=\"string\">&quot;3&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">&quot;16dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.textfield.TextInputEditText</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editTextReminder&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:hint</span>=<span class=\"string\">&quot;提醒时间&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:focusable</span>=<span class=\"string\">&quot;false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:clickable</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.textfield.TextInputLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;horizontal&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">&quot;end&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Button</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/buttonCancel&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;取消&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">style</span>=<span class=\"string\">&quot;@style/Widget.MaterialComponents.Button.TextButton&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Button</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/buttonConfirm&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;确认&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">style</span>=<span class=\"string\">&quot;@style/Widget.MaterialComponents.Button.TextButton&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>其中，TextInputLayout 相比于传统的 EditText 增加了很多功能\n<ul>\n<li>浮动标签：提示词在输入内容后不会消失，而是显示于左上方中</li>\n<li>错误提示：可以方便地显示错误信息，帮助用户理解输入要求</li>\n<li>辅助文本：支持显示帮助文本或字符计数等辅助信息</li>\n<li>图标支持：可以在文本框内添加前缀、后缀图标</li>\n</ul>\n</li>\n<li>每个 TextInputLayout 都围起一个 TextInputEditText 子元素\n<ul>\n<li>属性 focusable=“false” 表明该元素不能获得焦点，即不通过键盘直接输入</li>\n<li>属性 clickable=“true” 表明该元素可以通过点击触发，通过触发事件，间接输入到输入框中</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p>在MainActivity中添加点击按钮打开表单的逻辑</p>\n<ol>\n<li>\n<p>在onCreate()方法中调用 <strong>setupFloatingActionButton()</strong> 方法</p>\n</li>\n<li>\n<p>在MainActivity类内实现 <strong>setupFloatingActionButton()</strong> 方法</p>\n  <figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupFloatingActionButton</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    binding.fabAddEvent.setOnClickListener &#123;</span><br><span class=\"line\">        showAddEventDialog()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>绑定FAB按钮触发点击事件</li>\n<li>通过点击事件触发显示表单方法 <strong>showAddEventDialog()</strong></li>\n</ul>\n</li>\n<li>\n<p>实现 showAddEventDialog() 方法</p>\n<ol>\n<li>创建对话框</li>\n</ol>\n  <figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showAddEventDialog</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 1. 创建对话框</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> builder = AlertDialog.Builder(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    <span class=\"keyword\">val</span> inflater = layoutInflater</span><br><span class=\"line\">    <span class=\"keyword\">val</span> dialogView = inflater.inflate(R.layout.dialog_add_event, <span class=\"literal\">null</span>)</span><br><span class=\"line\">    builder.setView(dialogView)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">val</span> dialog = builder.create()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用 AlertDialog.Builder 创建<strong>对话框构建器</strong></li>\n<li>通过 layoutInflater 加载 dialog_add_event.xml 布局文件</li>\n<li>将加载的视图设置为对话框的内容视图</li>\n<li>通过 builder.create() 创建<strong>实际的对话框对象</strong></li>\n</ul>\n<ol start=\"2\">\n<li>获取对话框中的UI组件</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 2. 查找对话框中的UI组件</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextDate = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextDate)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextTitle = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextTitle)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextContent = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextContent)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextReminder = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextReminder)</span><br><span class=\"line\"><span class=\"keyword\">val</span> buttonCancel = dialogView.findViewById&lt;Button&gt;(R.id.buttonCancel)</span><br><span class=\"line\"><span class=\"keyword\">val</span> buttonConfirm = dialogView.findViewById&lt;Button&gt;(R.id.buttonConfirm)</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>设置默认日期和日期选择器</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 3. 设置默认日期为今天，若有选择的日期，则使用选择的日期</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> selectedDate = getSelectedDate()</span><br><span class=\"line\"><span class=\"keyword\">val</span> defaultDate = selectedDate ?: LocalDate.now() <span class=\"comment\">// 若无选择日期，则使用今天</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> formatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>) <span class=\"comment\">// 日期格式</span></span><br><span class=\"line\">editTextDate.setText(defaultDate.format(formatter)) <span class=\"comment\">// 设置默认日期</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置日期选择器</span></span><br><span class=\"line\">editTextDate.setOnClickListener &#123;</span><br><span class=\"line\">    showDatePicker(editTextDate)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置提醒时间选择器</span></span><br><span class=\"line\">editTextReminder.setOnClickListener &#123;</span><br><span class=\"line\">    showTimePicker(editTextReminder)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>设置按钮并显示对话框</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\">// 设置取消按钮</span></span><br><span class=\"line\">    buttonCancel.setOnClickListener &#123;</span><br><span class=\"line\">        dialog.dismiss()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 设置确认按钮</span></span><br><span class=\"line\">    buttonConfirm.setOnClickListener &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> title = editTextTitle.text.toString()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> content = editTextContent.text.toString()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> date = editTextDate.text.toString()</span><br><span class=\"line\">        <span class=\"keyword\">val</span> reminder = editTextReminder.text.toString()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 处理添加事件逻辑</span></span><br><span class=\"line\">        Toast.makeText(<span class=\"keyword\">this</span>, <span class=\"string\">&quot;日程已添加&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class=\"line\">        dialog.dismiss()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 显示对话框</span></span><br><span class=\"line\">    dialog.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>实现 showDatePicker() 方法和 showTimePicker() 方法</p>\n<ol>\n<li>实现 showTimePicker() 方法</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showTimePicker</span><span class=\"params\">(editTextReminder: <span class=\"type\">TextInputEditText</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 创建时间选择器对象</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> timePicker = TimePickerDialog(</span><br><span class=\"line\">        <span class=\"keyword\">this</span>,</span><br><span class=\"line\">        &#123;_, hourOfDay, minute -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> selectedTime = String.format(<span class=\"string\">&quot;%02d:%02d&quot;</span>, hourOfDay, minute) <span class=\"comment\">// 将时间格式化为HH:mm</span></span><br><span class=\"line\">            editTextReminder.setText(selectedTime) <span class=\"comment\">// 设置选中的时间</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"number\">9</span>, <span class=\"comment\">// 默认选中的时间为9:00</span></span><br><span class=\"line\">        <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"literal\">true</span> <span class=\"comment\">// 是否使用24小时制</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">    timePicker.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>实现 showDatePicker() 方法</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showDatePicker</span><span class=\"params\">(editTextDate: <span class=\"type\">TextInputEditText</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> today = LocalDate.now()</span><br><span class=\"line\">    <span class=\"keyword\">val</span> datePicker = DatePickerDialog(</span><br><span class=\"line\">        <span class=\"keyword\">this</span>,</span><br><span class=\"line\">        &#123;_, year, month, dayOfMonth -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> selectedDate = LocalDate.of(year, month + <span class=\"number\">1</span>, dayOfMonth) <span class=\"comment\">// 创建选中日期的 LocalDate 对象（需要将月份+1，因为DatePicker的月份是从0开始的）</span></span><br><span class=\"line\">            <span class=\"keyword\">val</span> formatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>) <span class=\"comment\">// 日期格式</span></span><br><span class=\"line\">            editTextDate.setText(selectedDate.format(formatter)) <span class=\"comment\">// 显示选中的日期</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        today.year, </span><br><span class=\"line\">        today.monthValue - <span class=\"number\">1</span>, <span class=\"comment\">// month: today.monthValue - 1 - 日期选择器的初始月份设置为当前月份（需要减1，因为DatePicker的月份是从0开始的）</span></span><br><span class=\"line\">        today.dayOfMonth</span><br><span class=\"line\">    )</span><br><span class=\"line\">    datePicker.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>实现 getSelectedDate() 方法</p>\n</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> viewPager = binding.viewPager</span><br><span class=\"line\">    <span class=\"keyword\">val</span> currentFragment = supportFragmentManager.findFragmentByTag(<span class=\"string\">&quot;f&quot;</span> + viewPager.currentItem)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">when</span>(currentFragment)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">is</span> DayViewFragment -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 从日视图中获取选中日期</span></span><br><span class=\"line\">            <span class=\"literal\">null</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">is</span> WeekViewFragment -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 从周视图中获取选中日期</span></span><br><span class=\"line\">            currentFragment.getSelectedDate()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">is</span> MonthViewFragment -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 从月视图中获取选中日期</span></span><br><span class=\"line\">            currentFragment.getSelectedDate()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> -&gt; <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>首先通过 binding.viewPager 获取应用中的<strong>ViewPager组件</strong></li>\n<li>通过 viewPager.currentItem 获取当前显示页面的<strong>索引</strong></li>\n<li>使用 supportFragmentManager.findFragmentByTag(“f” + viewPager.currentItem) 根据标签查找当前Fragment\n<ul>\n<li>ViewPager2会自动为每个页面的Fragment分配标签，格式为 <strong>“f”+页面索引</strong></li>\n<li>这样就可以获取到当前显示的具体Fragment实例</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>在 MonthViewFragment 和 WeekViewFragment 中添加 getSelectedDate() 方法</p>\n<ul>\n<li>MonthViewFragment 的 getSelectedDate() 方法实现如下：</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> monthViewBinder = binding.monthCalendarView.dayBinder <span class=\"keyword\">as</span>? MonthDayViewBinder <span class=\"comment\">// 将 dayBinder 安全转换为 MonthDayViewBinder</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span>  monthViewBinder?.getSelectedDate()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>WeekViewFragment 的 getSelectedDate() 方法实现如下：</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 获取 WeekViewBinder 实例并返回其选中的日期</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> weekViewBinder = binding.weekCalendarView.dayBinder <span class=\"keyword\">as</span>? WeekViewBinder <span class=\"comment\">// 将 dayBinder 安全转换为WeekViewBinder</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> weekViewBinder?.getSelectedDate()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在 WeekViewBinder 和 MonthDayViewBinder 中分别实现在其fragment中调用的 getSelectedDate() 方法</p>\n</li>\n</ol>\n<ul>\n<li>WeekViewBinder 的 getSelectedDate() 方法实现如下：</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selectedDate</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>MonthDayViewBinder 的 getSelectedDate() 方法实现如下：</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSelectedDate</span><span class=\"params\">()</span></span>: LocalDate?&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selectedDate</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>至此，我们可以通过按钮打开添加日程的表单，并选择日期和时间，添加内容</p>\n<h3 id=\"日程列表实现\">日程列表实现</h3>\n<ol>\n<li>创建日程卡片视图 item_event_card.xml</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 日程卡片布局 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">com.google.android.material.card.MaterialCardView</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_margin</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:cardCornerRadius</span>=<span class=\"string\">&quot;12dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:cardElevation</span>=<span class=\"string\">&quot;4dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">app:strokeWidth</span>=<span class=\"string\">&quot;0dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;16dp&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 事件颜色标识 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">View</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventColorIndicator&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;6dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/magenta_500&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 事件标题 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginStart</span>=<span class=\"string\">&quot;12dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginEnd</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;事件标题&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.TitleMedium&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurface&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toStartOf</span>=<span class=\"string\">&quot;@+id/editEventButton&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toEndOf</span>=<span class=\"string\">&quot;@+id/eventColorIndicator&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 事件内容摘要 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventContent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;4dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:ellipsize</span>=<span class=\"string\">&quot;end&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:maxLines</span>=<span class=\"string\">&quot;1&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;事件内容摘要，超出十个字显示省略号&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.BodyMedium&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurface&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 时间信息 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventTime&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;持续时间&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.BodySmall&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/eventContent&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 提醒时间 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventReminder&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;4dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:drawableStart</span>=<span class=\"string\">&quot;@drawable/ic_notification&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:drawablePadding</span>=<span class=\"string\">&quot;4dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;提前15分钟提醒&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.BodySmall&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;@+id/eventTitle&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/eventTime&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 编辑按钮 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ImageButton</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/editEventButton&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginEnd</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;?attr/selectableItemBackgroundBorderless&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:contentDescription</span>=<span class=\"string\">&quot;编辑事件&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:src</span>=<span class=\"string\">&quot;@drawable/ic_edit&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toStartOf</span>=<span class=\"string\">&quot;@+id/eventCompletedCheckbox&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:tint</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 完成状态复选框 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">CheckBox</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventCompletedCheckbox&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_marginEnd</span>=<span class=\"string\">&quot;8dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toStartOf</span>=<span class=\"string\">&quot;@+id/deleteEventButton&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 删除按钮 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ImageButton</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/deleteEventButton&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;36dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;?attr/selectableItemBackgroundBorderless&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:contentDescription</span>=<span class=\"string\">&quot;删除事件&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:src</span>=<span class=\"string\">&quot;@drawable/ic_delete&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:tint</span>=<span class=\"string\">&quot;?attr/colorError&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>MaterialCardView</strong> 是 Google Material Design 组件库中的一个核心 UI 组件，它是一个现代化的<strong>卡片视图</strong>实现</li>\n</ul>\n<ol start=\"2\">\n<li>修改日视图 fragment_day_view.xml</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">    日视图 Fragment 的布局文件</span></span><br><span class=\"line\"><span class=\"comment\">    包含标题和日视图内容区域</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;vertical&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 日视图标题文本 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/dayHeaderText&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:padding</span>=<span class=\"string\">&quot;16dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;日视图&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textAlignment</span>=<span class=\"string\">&quot;center&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.HeadlineSmall&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 无事件提示 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/noEventText&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;32dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;今天暂无事件&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textAppearance</span>=<span class=\"string\">&quot;@style/TextAppearance.Material3.BodyLarge&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:textColor</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:visibility</span>=<span class=\"string\">&quot;gone&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/dayHeaderText&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 事件列表 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/eventRecyclerView&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">&quot;16dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:clipToPadding</span>=<span class=\"string\">&quot;false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:paddingBottom</span>=<span class=\"string\">&quot;16dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toBottomOf</span>=<span class=\"string\">&quot;@+id/dayHeaderText&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>RecyclerView 是 Android 中一个非常重要的 UI 组件，用于在有限的窗口中展示大量数据列表</li>\n<li>RecyclerView 需要 Adapter 类适配器为其绑定数据源</li>\n<li>Adapter 的内部类 ViewHolder 可以持有RecyclerView 的子项视图</li>\n</ul>\n<ol start=\"3\">\n<li>创建适配器为 RecyclerView 绑定数据</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 事件卡片适配器类</span></span><br><span class=\"line\"><span class=\"comment\"> * 用于在 RecyclerView 中显示日程事件列表，每个事件以卡片形式展示</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> events 初始事件列表</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> onEditClick 编辑按钮点击回调函数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> onDeleteClick 删除按钮点击回调函数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> onCompleteToggle 完成状态切换回调函数</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EventCardAdapter</span>(</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> events: List&lt;CalendarEvent&gt;, <span class=\"comment\">// 事件列表数据</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> onEditClick: (CalendarEvent) -&gt; <span class=\"built_in\">Unit</span>, <span class=\"comment\">// 编辑事件回调</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> onDeleteClick: (CalendarEvent) -&gt; <span class=\"built_in\">Unit</span>, <span class=\"comment\">// 删除事件回调</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> onCompleteToggle: (CalendarEvent, <span class=\"built_in\">Boolean</span>) -&gt; <span class=\"built_in\">Unit</span> <span class=\"comment\">// 完成状态切换回调</span></span><br><span class=\"line\">): RecyclerView.Adapter&lt;EventCardAdapter.EventViewHolder&gt;() &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建 ViewHolder 实例</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> parent 父 ViewGroup</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> viewType 视图类型</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 返回新创建的 EventViewHolder 实例</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreateViewHolder</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        parent: <span class=\"type\">ViewGroup</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        viewType: <span class=\"type\">Int</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span>: EventCardAdapter.EventViewHolder &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> view = LayoutInflater.from(parent.context)</span><br><span class=\"line\">            .inflate(R.layout.item_event_card, parent, <span class=\"literal\">false</span>) <span class=\"comment\">// 从布局文件创建视图</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> EventViewHolder(view)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 绑定数据到 ViewHolder</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> holder 要绑定数据的 ViewHolder</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> position 数据在列表中的位置</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onBindViewHolder</span><span class=\"params\">(holder: <span class=\"type\">EventCardAdapter</span>.<span class=\"type\">EventViewHolder</span>, position: <span class=\"type\">Int</span>)</span></span> &#123;</span><br><span class=\"line\">        holder.bind(events[position]) <span class=\"comment\">// 绑定指定位置的数据到 ViewHolder</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取事件列表的大小</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 返回事件列表的大小</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getItemCount</span><span class=\"params\">()</span></span>: <span class=\"built_in\">Int</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> events.size <span class=\"comment\">// 返回事件列表大小</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 更新事件列表数据</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> newEvents 新的事件列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">updateEvents</span><span class=\"params\">(newEvents: <span class=\"type\">List</span>&lt;<span class=\"type\">CalendarEvent</span>&gt;)</span></span>&#123;</span><br><span class=\"line\">        events = newEvents</span><br><span class=\"line\">        notifyDataSetChanged() <span class=\"comment\">// 通知数据变更，刷新界面</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 事件卡片 ViewHolder 类</span></span><br><span class=\"line\"><span class=\"comment\">     * 用于持有和管理事件卡片中的各个 UI 元素</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">inner</span> <span class=\"keyword\">class</span> <span class=\"title class_\">EventViewHolder</span>(itemView: View): RecyclerView.ViewHolder(itemView)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> colorIndicator: View = itemView.findViewById(R.id.eventColorIndicator) <span class=\"comment\">// 事件颜色指示器</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> titleText: TextView = itemView.findViewById(R.id.eventTitle) <span class=\"comment\">// 事件标题文本</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> contentText: TextView = itemView.findViewById(R.id.eventContent) <span class=\"comment\">// 事件内容文本</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> timeText: TextView = itemView.findViewById(R.id.eventTime) <span class=\"comment\">// 事件时间文本</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> reminders: TextView = itemView.findViewById(R.id.eventReminder) <span class=\"comment\">// 提醒时间文本</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> editButton: ImageButton = itemView.findViewById(R.id.editEventButton) <span class=\"comment\">// 编辑按钮</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> completeCheckbox: CheckBox = itemView.findViewById(R.id.eventCompletedCheckbox) <span class=\"comment\">// 完成状态复选框</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> deleteButton: ImageButton = itemView.findViewById(R.id.deleteEventButton) <span class=\"comment\">// 删除按钮</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 绑定事件数据到视图元素</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@param</span> event 要绑定的事件数据</span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">bind</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>)</span></span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 设置事件颜色</span></span><br><span class=\"line\">            colorIndicator.setBackgroundColor(event.eventColor) <span class=\"comment\">// 根据事件颜色设置指示器背景色</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置事件标题</span></span><br><span class=\"line\">            titleText.text = event.title <span class=\"comment\">// 显示事件标题</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置内容摘要(超过十个字省略后面的字)</span></span><br><span class=\"line\">            contentText.text = <span class=\"keyword\">if</span> (event.content.length &gt; <span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;<span class=\"subst\">$&#123;event.content.take(<span class=\"number\">10</span>)&#125;</span>...&quot;</span> <span class=\"comment\">// 截取前10个字符并添加省略号</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                event.content <span class=\"comment\">// 内容不足10个字符则完整显示</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置时间</span></span><br><span class=\"line\">            <span class=\"keyword\">val</span> startTime = formatTime(event.startTime) <span class=\"comment\">// 格式化开始时间</span></span><br><span class=\"line\">            <span class=\"keyword\">val</span> endTime = formatTime(event.endTime) <span class=\"comment\">// 格式化结束时间</span></span><br><span class=\"line\">            timeText.text = <span class=\"string\">&quot;<span class=\"variable\">$startTime</span> - <span class=\"variable\">$endTime</span>&quot;</span> <span class=\"comment\">// 显示时间范围</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置提醒时间</span></span><br><span class=\"line\">            reminders.text = formatReminderTime(event.reminderTime) <span class=\"comment\">// 显示提醒时间</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置完成状态</span></span><br><span class=\"line\">            completeCheckbox.isChecked = event.isCompleted <span class=\"comment\">// 根据事件状态设置复选框选中状态</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 设置点击事件</span></span><br><span class=\"line\">            editButton.setOnClickListener &#123; onEditClick(event) &#125; <span class=\"comment\">// 点击编辑按钮触发回调</span></span><br><span class=\"line\">            deleteButton.setOnClickListener &#123; onDeleteClick(event) &#125; <span class=\"comment\">// 点击删除按钮触发回调</span></span><br><span class=\"line\">            completeCheckbox.setOnCheckedChangeListener &#123; _, isChecked -&gt;</span><br><span class=\"line\">                onCompleteToggle(event, isChecked) <span class=\"comment\">// 切换完成状态时触发回调</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 格式化时间戳为 HH:mm 格式的字符串</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@param</span> timeStamp 时间戳</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@return</span> 格式化后的时间字符串，如果时间戳为0则返回&quot;无&quot;</span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">formatTime</span><span class=\"params\">(timeStamp: <span class=\"type\">Long</span>)</span></span>: String&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> (timeStamp == <span class=\"number\">0L</span>)&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;无&quot;</span> <span class=\"comment\">// 时间戳为0时显示&quot;无&quot;</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> date = Date(timeStamp)</span><br><span class=\"line\">                <span class=\"keyword\">val</span> format = SimpleDateFormat(<span class=\"string\">&quot;HH:mm&quot;</span>, Locale.getDefault()) <span class=\"comment\">// 使用 HH:mm 格式</span></span><br><span class=\"line\">                format.format(date) <span class=\"comment\">// 格式化时间戳</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 格式化提醒时间戳为 HH:mm 格式的字符串</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@param</span> timeStamp 提醒时间戳</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@return</span> 格式化后的提醒时间字符串，如果时间戳为0则返回&quot;无&quot;</span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">formatReminderTime</span><span class=\"params\">(timeStamp: <span class=\"type\">Long</span>)</span></span>: String&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> (timeStamp == <span class=\"number\">0L</span>)&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;无&quot;</span> <span class=\"comment\">// 时间戳为0时显示&quot;无&quot;</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> date = Date(timeStamp)</span><br><span class=\"line\">                <span class=\"keyword\">val</span> format = SimpleDateFormat(<span class=\"string\">&quot;HH:mm&quot;</span>, Locale.getDefault()) <span class=\"comment\">// 使用 HH:mm 格式</span></span><br><span class=\"line\">                format.format(date) <span class=\"comment\">// 格式化时间戳</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实现 ViewHolder 模式</li>\n<li>绑定数据到视图</li>\n<li>处理用户交互（增加、修改、删除）</li>\n</ul>\n<ol start=\"4\">\n<li>准备图标按钮需要的矢量图标资源</li>\n</ol>\n<ul>\n<li>删除按钮图标 ic_delete.xml</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportWidth</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportHeight</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:tint</span>=<span class=\"string\">&quot;?attr/colorError&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:fillColor</span>=<span class=\"string\">&quot;@android:color/white&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:pathData</span>=<span class=\"string\">&quot;M6,19c0,1.1 0.9,2 2,2h8c1.1,0 2,-0.9 2,-2V7H6v12zM19,4h-3.5l-1,-1h-5l-1,1H5v2h14V4z&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑按钮图标 ic_edit.xml</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- res/drawable/ic_edit.xml --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportWidth</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportHeight</span>=<span class=\"string\">&quot;24&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:fillColor</span>=<span class=\"string\">&quot;#FF000000&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:pathData</span>=<span class=\"string\">&quot;M3,17.25V21h3.75L17.81,9.94l-3.75,-3.75L3,17.25zM20.71,7.04c0.39,-0.39 0.39,-1.02 0,-1.41l-2.34,-2.34c-0.39,-0.39 -1.02,-0.39 -1.41,0l-1.83,1.83 3.75,3.75 1.83,-1.83z&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>确认完成图标 ic_notification.xml</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- res/drawable/ic_notification.xml --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportWidth</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:viewportHeight</span>=<span class=\"string\">&quot;24&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:tint</span>=<span class=\"string\">&quot;?attr/colorOnSurfaceVariant&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:fillColor</span>=<span class=\"string\">&quot;@android:color/white&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:pathData</span>=<span class=\"string\">&quot;M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.89,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32L13.5,4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>修改日视图 DayViewFragment.kt 以初始化适配器，并启动数据库，为适配器设置数据源</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 日视图 Fragment</span></span><br><span class=\"line\"><span class=\"comment\"> * 负责显示和管理日历的日视图，显示特定日期的详细信息</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DayViewFragment</span>: <span class=\"type\">Fragment</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> _binding: FragmentDayViewBinding? = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> binding <span class=\"keyword\">get</span>() = _binding!!</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> dayTitle: TextView</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> noEventsText: TextView</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> eventsRecyclerView: RecyclerView</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> eventAdapter: EventCardAdapter</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 事件更新观察者</span></span><br><span class=\"line\"><span class=\"comment\">     * 当收到事件更新通知时，重新加载当天的事件列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> eventUpdateObserver = Observer&lt;<span class=\"built_in\">Boolean</span>&gt; &#123; _ -&gt;</span><br><span class=\"line\">        <span class=\"comment\">// 当收到事件更新时，刷新日程列表</span></span><br><span class=\"line\">        loadEventsForDate()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建 Fragment 的视图层次结构</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> inflater 用于 inflate 视图的 LayoutInflater</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> container 此 Fragment 的父 ViewGroup</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> savedInstanceState 保存的状态信息，如果 Fragment 是重新创建的，则不为 null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 返回此 Fragment 的根视图</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreateView</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        inflater: <span class=\"type\">LayoutInflater</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        container: <span class=\"type\">ViewGroup</span>?,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        savedInstanceState: <span class=\"type\">Bundle</span>?</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    )</span></span>: View? &#123;</span><br><span class=\"line\">        _binding = FragmentDayViewBinding.inflate(inflater, container, <span class=\"literal\">false</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> view = _binding!!.root</span><br><span class=\"line\"></span><br><span class=\"line\">        dayTitle = binding.dayHeaderText</span><br><span class=\"line\">        noEventsText = binding.noEventText</span><br><span class=\"line\">        eventsRecyclerView = binding.eventRecyclerView</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> view</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置 RecyclerView 及其适配器</span></span><br><span class=\"line\"><span class=\"comment\">     * 初始化事件列表的显示组件</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupRecyclerView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        eventAdapter = EventCardAdapter(</span><br><span class=\"line\">            events = emptyList(),</span><br><span class=\"line\">            onEditClick = &#123; event -&gt;</span><br><span class=\"line\">                editEvent(event)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            onDeleteClick = &#123; event -&gt;</span><br><span class=\"line\">                deleteEvent(event)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            onCompleteToggle = &#123; event, isCompleted -&gt;</span><br><span class=\"line\">                toggleEventCompletion(event, isCompleted)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        eventsRecyclerView.apply &#123;</span><br><span class=\"line\">            layoutManager = LinearLayoutManager(context)</span><br><span class=\"line\">            adapter = eventAdapter</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 加载指定日期的事件</span></span><br><span class=\"line\"><span class=\"comment\">     * 触发从数据库加载事件数据的操作</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">loadEventsForDate</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        loadEventFromDatabase()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 更新事件列表显示</span></span><br><span class=\"line\"><span class=\"comment\">     * 根据事件列表是否为空来控制空提示文本的显示</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> events 要显示的事件列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">updateEventList</span><span class=\"params\">(events: <span class=\"type\">List</span>&lt;<span class=\"type\">CalendarEvent</span>&gt;)</span></span>&#123;</span><br><span class=\"line\">        eventAdapter.updateEvents(events)</span><br><span class=\"line\">        noEventsText.visibility = <span class=\"keyword\">if</span> (events.isEmpty()) View.VISIBLE <span class=\"keyword\">else</span> View.GONE</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 从数据库加载事件数据</span></span><br><span class=\"line\"><span class=\"comment\">     * 异步查询数据库获取当天的所有事件，并更新UI显示</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">loadEventFromDatabase</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        lifecycleScope.launch &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 获取数据库实例</span></span><br><span class=\"line\">                <span class=\"keyword\">val</span> database = CalendarDatabase.getInstance(requireContext())</span><br><span class=\"line\">                <span class=\"keyword\">val</span> eventDao = database.eventDao()</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// 计算当天的开始和结束日期</span></span><br><span class=\"line\">                <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">                <span class=\"keyword\">val</span> startOfDay = currentDate.atStartOfDay()</span><br><span class=\"line\">                <span class=\"keyword\">val</span> endOfDay = currentDate.atTime(<span class=\"number\">23</span>, <span class=\"number\">59</span>, <span class=\"number\">59</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">val</span> startTimeStamp = startOfDay.toInstant(ZoneOffset.UTC).toEpochMilli()</span><br><span class=\"line\">                <span class=\"keyword\">val</span> endTimeStamp = endOfDay.toInstant(ZoneOffset.UTC).toEpochMilli()</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// 查询数据库并获取事件</span></span><br><span class=\"line\">                <span class=\"keyword\">val</span> events = eventDao.getEventsInRange(startTimeStamp, endTimeStamp)</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// 更新UI</span></span><br><span class=\"line\">                updateEventList(events)</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (e: Exception)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// 处理异常</span></span><br><span class=\"line\">                Toast.makeText(context, <span class=\"string\">&quot;加载事件失败：<span class=\"subst\">$&#123;e.message&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 编辑指定事件</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> event 需要编辑的事件对象</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">editEvent</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 添加编辑事件逻辑</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除指定事件</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> event 需要删除的事件对象</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">deleteEvent</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 添加删除事件逻辑</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 切换事件完成状态</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> event 需要切换状态的事件对象</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> isCompleted 事件的完成状态</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">toggleEventCompletion</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>, isCompleted: <span class=\"type\">Boolean</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 添加切换事件完成状态逻辑</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当 Fragment 的视图创建完成后调用</span></span><br><span class=\"line\"><span class=\"comment\">     * 在这里进行视图相关的初始化操作</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> view 此 Fragment 的根视图</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> savedInstanceState 保存的状态信息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onViewCreated</span><span class=\"params\">(view: <span class=\"type\">View</span>, savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onViewCreated(view, savedInstanceState)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 观察事件更新</span></span><br><span class=\"line\">        EventUpdateManager.getInstance().eventUpdated.observe(</span><br><span class=\"line\">            viewLifecycleOwner,</span><br><span class=\"line\">            eventUpdateObserver</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 初始化 ViewModel</span></span><br><span class=\"line\">        <span class=\"keyword\">val</span> database = CalendarDatabase.getInstance(requireContext())</span><br><span class=\"line\">        <span class=\"keyword\">val</span> eventDao = database.eventDao()</span><br><span class=\"line\">        </span><br><span class=\"line\">        setupRecyclerView()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 加载初始数据</span></span><br><span class=\"line\">        loadEventsForDate()</span><br><span class=\"line\">        setupDayView()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置日视图的相关配置</span></span><br><span class=\"line\"><span class=\"comment\">     * 包括设置当前日期标题等</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setupDayView</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentDate = LocalDate.now()</span><br><span class=\"line\">        <span class=\"comment\">// 设置日视图头部显示的日期文本</span></span><br><span class=\"line\">        binding.dayHeaderText.text = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>).format(currentDate)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当 Fragment 的视图被销毁时调用</span></span><br><span class=\"line\"><span class=\"comment\">     * 清理资源，避免内存泄漏</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onDestroyView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onDestroyView()</span><br><span class=\"line\">        _binding = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>初始化界面组件</li>\n<li>设置 RecyclerView 和适配器</li>\n<li>从数据库加载当天事件数据</li>\n<li>更新界面显示</li>\n<li>使用 Room 数据库查询当天事件</li>\n<li>计算查询时间范围（当天开始到结束）</li>\n<li>异步加载数据并更新 UI</li>\n<li>处理空数据状态显示</li>\n<li>声明观察者，并在 <strong>OnViewCreated</strong> 中激活观察者，通过 <strong>EventUpdateManager.getInstance().eventUpdated.observe()</strong> 来监听 <strong>eventUpdated</strong> 的改变</li>\n</ul>\n<ol start=\"6\">\n<li>创建事件管理类 EventUpdateManager.kt 使用 LiveData 机制，监听数据更新，刷新UI</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 事件更新管理器</span></span><br><span class=\"line\"><span class=\"comment\"> * 使用单例模式管理事件更新通知，防止频繁更新UI</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EventUpdateManager</span> <span class=\"keyword\">private</span> <span class=\"keyword\">constructor</span>()&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _eventUpdated = MutableLiveData&lt;<span class=\"built_in\">Boolean</span>&gt;()</span><br><span class=\"line\">    <span class=\"keyword\">val</span> eventUpdated: LiveData&lt;<span class=\"built_in\">Boolean</span>&gt; = _eventUpdated</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 上次通知时间戳</span></span><br><span class=\"line\"><span class=\"comment\">     * 用于防抖处理，避免过于频繁的更新通知</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> lastNotifyTime = <span class=\"number\">0L</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 防抖间隔时间（毫秒）</span></span><br><span class=\"line\"><span class=\"comment\">     * 两次通知之间的最小时间间隔</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> debounceInterval = <span class=\"number\">500L</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 通知事件已添加</span></span><br><span class=\"line\"><span class=\"comment\">     * 通过防抖机制控制通知频率，避免短时间内重复通知</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">notifyEventAdded</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> currentTime = System.currentTimeMillis()</span><br><span class=\"line\">        <span class=\"comment\">// 如果当前时间间隔小于防抖间隔，则不执行通知</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (currentTime - lastNotifyTime &gt; debounceInterval)&#123;</span><br><span class=\"line\">            _eventUpdated.value = <span class=\"literal\">true</span></span><br><span class=\"line\">            lastNotifyTime = currentTime</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">companion</span> <span class=\"keyword\">object</span>&#123;</span><br><span class=\"line\">        <span class=\"meta\">@Volatile</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> INSTANCE: EventUpdateManager? = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 获取 EventUpdateManager 的单例实例</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@return</span> EventUpdateManager 的单例对象</span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>: EventUpdateManager&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> INSTANCE ?: synchronized(<span class=\"keyword\">this</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> instance = EventUpdateManager()</span><br><span class=\"line\">                INSTANCE = instance</span><br><span class=\"line\">                instance</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用 <strong>LiveData 机制</strong>，可变的_eventUpdated 属性保存事件更新状态，不可变的eventUpdated 属性提供外部访问</li>\n<li>当事件变化调用 notifyEventAdded() 方法时，LiveData机制会通知所有<strong>活跃的观察者</strong></li>\n<li>观察者调用相关方法，更新UI</li>\n</ul>\n<ol start=\"7\">\n<li>在主活动 MainActivity.kt 中 <strong>saveEventToDatabase</strong> 方法中，当操作完成后，调用 EventUpdateManager.getInstance().notifyEventAdded() 方法通知事件已添加，通过 LiveData 机制，更新UI</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 在主线程中显示成功消息</span></span><br><span class=\"line\">withContext(Dispatchers.Main)&#123;</span><br><span class=\"line\">    Toast.makeText(<span class=\"keyword\">this</span><span class=\"symbol\">@MainActivity</span>, <span class=\"string\">&quot;日程已添加，ID：<span class=\"variable\">$eventId</span>&quot;</span>, Toast.LENGTH_SHORT).show()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 通知日程列表刷新</span></span><br><span class=\"line\">    EventUpdateManager.getInstance().notifyEventAdded()</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"日程修改实现\">日程修改实现</h3>\n<ul>\n<li>该步骤要实现 <strong>DayViewFragment.kt</strong> 中的 <strong>editEvent()</strong> 方法</li>\n<li>该方法的传递逻辑为 <em>editEvent() -&gt; setupRecyclerView() -&gt; onViewCreated()</em></li>\n<li>通过 EventCardAdapter 类中的 editButton.setOnClickListener() 方法触发调用</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 编辑指定事件</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> event 需要编辑的事件对象</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">editEvent</span><span class=\"params\">(event: <span class=\"type\">CalendarEvent</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 添加编辑事件逻辑</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>创建对话框</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建对话框</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> dialogView = LayoutInflater.from(context).inflate(R.layout.dialog_add_event, <span class=\"literal\">null</span>)</span><br><span class=\"line\"><span class=\"keyword\">val</span> dialogBuilder = AlertDialog.Builder(requireContext())</span><br><span class=\"line\">dialogBuilder.setView(dialogView)</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>获取对话框的视图元素</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取对话框的视图元素</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> dialogTitle = dialogView.findViewById&lt;TextView&gt;(R.id.dialogTitle)</span><br><span class=\"line\"><span class=\"keyword\">val</span> eventIdText = dialogView.findViewById&lt;TextView&gt;(R.id.eventIdText)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextDate = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextDate)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextTitle = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextTitle)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextContent = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextContent)</span><br><span class=\"line\"><span class=\"keyword\">val</span> editTextReminder = dialogView.findViewById&lt;TextInputEditText&gt;(R.id.editTextReminder)</span><br><span class=\"line\"><span class=\"keyword\">val</span> buttonCancel = dialogView.findViewById&lt;Button&gt;(R.id.buttonCancel)</span><br><span class=\"line\"><span class=\"keyword\">val</span> buttonConfirm = dialogView.findViewById&lt;Button&gt;(R.id.buttonConfirm)</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>对话框视图信息回显</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 回显事件信息 - 将当前事件的信息显示在对话框中供用户编辑</span></span><br><span class=\"line\">eventIdText.text = event.id.toString()</span><br><span class=\"line\">editTextTitle.setText(event.title)</span><br><span class=\"line\">editTextContent.setText(event.content)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 格式化显示日期 - 将事件开始时间格式化为&quot;yyyy年MM月dd日&quot;格式显示</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> eventDate = Date(event.startTime)</span><br><span class=\"line\"><span class=\"keyword\">val</span> dateFormat = SimpleDateFormat(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>, Locale.getDefault())</span><br><span class=\"line\">editTextDate.setText(dateFormat.format(eventDate))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 格式化并显示提醒时间 - 如果事件设置了提醒时间，则格式化为&quot;HH:mm&quot;格式显示</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> timeFormatter = SimpleDateFormat(<span class=\"string\">&quot;HH:mm&quot;</span>, Locale.getDefault())</span><br><span class=\"line\"><span class=\"keyword\">if</span> (event.reminderTime != <span class=\"number\">0L</span>)&#123;</span><br><span class=\"line\">    editTextReminder.setText(timeFormatter.format(Date(event.reminderTime)))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>设置日期选择器和时间选择器</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 设置日期选择器 - 点击日期输入框时弹出日期选择器</span></span><br><span class=\"line\">editTextDate.setOnClickListener &#123;</span><br><span class=\"line\">    showDatePicker(editTextDate)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置提醒时间选择器 - 点击提醒时间输入框时弹出时间选择器</span></span><br><span class=\"line\">editTextReminder.setOnClickListener &#123;</span><br><span class=\"line\">    showTimePicker(editTextReminder)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>日期选择器</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showDatePicker</span><span class=\"params\">(editTextDate: <span class=\"type\">TextInputEditText</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> today = LocalDate.now()</span><br><span class=\"line\">    <span class=\"keyword\">val</span> datePicker = DatePickerDialog(</span><br><span class=\"line\">        requireContext(),</span><br><span class=\"line\">        &#123;_, year, month, dayOfMonth -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> selectedDate = LocalDate.of(year, month + <span class=\"number\">1</span>, dayOfMonth)</span><br><span class=\"line\">            <span class=\"keyword\">val</span> formatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>)</span><br><span class=\"line\">            editTextDate.setText(selectedDate.format(formatter))</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        today.year,</span><br><span class=\"line\">        today.monthValue - <span class=\"number\">1</span>,</span><br><span class=\"line\">        today.dayOfMonth</span><br><span class=\"line\">    )</span><br><span class=\"line\">    datePicker.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>时间选择器</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">showTimePicker</span><span class=\"params\">(editTextReminder: <span class=\"type\">TextInputEditText</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> timePicker = TimePickerDialog(</span><br><span class=\"line\">        requireContext(),</span><br><span class=\"line\">        &#123;_, hourOfDay, minute -&gt;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> selectedTime = String.format(<span class=\"string\">&quot;%02d:%02d&quot;</span>, hourOfDay, minute)</span><br><span class=\"line\">            editTextReminder.setText(selectedTime)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"number\">9</span>,</span><br><span class=\"line\">        <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"literal\">true</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">    timePicker.show()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>创建并显示对话框</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> dialog = dialogBuilder.create()</span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>设置取消按钮事件</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">buttonCancel.setOnClickListener &#123;</span><br><span class=\"line\">    dialog.dismiss()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"7\">\n<li>设置确认按钮事件</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">buttonConfirm.setOnClickListener &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 添加修改事件逻辑</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 事件逻辑</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e: Exception) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 失败处理</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用协程作用于执行数据库的耗时操作</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lifecycleScope.launch &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 修改数据库相关操作</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>获取数据库实例和事件数据访问对象</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> database = CalendarDatabase.getInstance(requireContext())</span><br><span class=\"line\"><span class=\"keyword\">val</span> eventDao = database.eventDao()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>获取修改的数据并解析</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取用户输入的数据</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> title = editTextTitle.text.toString()</span><br><span class=\"line\"><span class=\"keyword\">val</span> content = editTextContent.text.toString()</span><br><span class=\"line\"><span class=\"keyword\">val</span> reminder = editTextReminder.text.toString()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 解析日期 - 将用户输入的日期字符串转换为LocalDate对象</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> dateFormatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy年MM月dd日&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">val</span> localDate = LocalDate.parse(editTextDate.text.toString(), dateFormatter)</span><br><span class=\"line\"><span class=\"comment\">// 计算事件开始时间和结束时间的时间戳</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> startTime = localDate.atStartOfDay(ZoneId.systemDefault()).toInstant().toEpochMilli()</span><br><span class=\"line\"><span class=\"keyword\">val</span> endTime = localDate.atTime(<span class=\"number\">23</span>, <span class=\"number\">59</span>, <span class=\"number\">59</span>).atZone(ZoneId.systemDefault()).toInstant().toEpochMilli()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 解析提醒时间 - 如果设置了提醒时间，则计算提醒时间的时间戳</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> reminderTime = <span class=\"keyword\">if</span> (reminder.isNotEmpty())&#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> timeFormatter = DateTimeFormatter.ofPattern(<span class=\"string\">&quot;HH:mm&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">val</span> localTime = LocalTime.parse(reminder, timeFormatter)</span><br><span class=\"line\">    <span class=\"keyword\">val</span> reminderDateTime = localDate.atTime(localTime)</span><br><span class=\"line\">    reminderDateTime.atZone((ZoneId.systemDefault())).toInstant().toEpochMilli()</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"number\">0L</span> <span class=\"comment\">// 如果未设置提醒时间，则设为0</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>创建修改事件对象，校验关键信息非空，并提交修改</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 更新事件对象 - 使用新的数据创建更新后的事件对象</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> updatedEvent = event.copy(</span><br><span class=\"line\">    title = title,</span><br><span class=\"line\">    content = content,</span><br><span class=\"line\">    startTime = startTime,</span><br><span class=\"line\">    endTime = endTime,</span><br><span class=\"line\">    reminderTime = reminderTime</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 验证必填字段 - 检查标题是否为空</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (title.isEmpty())&#123;</span><br><span class=\"line\">    editTextTitle.error = <span class=\"string\">&quot;请输入日程标题&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span><span class=\"symbol\">@launch</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 验证必填字段 - 检查日期是否为空</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (content.isEmpty())&#123;</span><br><span class=\"line\">    editTextDate.error = <span class=\"string\">&quot;请选择日程日期&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span><span class=\"symbol\">@launch</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 更新事件到数据库</span></span><br><span class=\"line\">eventDao.updateEvent(updatedEvent)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>通知观察者，刷新视图</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUpdateManager.getInstance().notifyEventAdded()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>关闭对话框并显示成功提示</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dialog.dismiss()</span><br><span class=\"line\">Toast.makeText(context, <span class=\"string\">&quot;修改成功&quot;</span>, Toast.LENGTH_SHORT).show()</span><br></pre></td></tr></table></figure>\n<ul>\n<li>捕获异常并显示错误提示</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Toast.makeText(context, <span class=\"string\">&quot;修改失败：<span class=\"subst\">$&#123;e.message&#125;</span>&quot;</span>, Toast.LENGTH_SHORT).show()</span><br></pre></td></tr></table></figure>\n<ol start=\"8\">\n<li>展示对话框</li>\n</ol>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dialog.show()</span><br></pre></td></tr></table></figure>\n<p>至此，我们可以通过点击修改按钮，弹出修改事件对话框，并完成修改事件操作</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cmfwpff400002t8tl42079fks","category_id":"cmfwpg9v10000ugtlbce15dne","_id":"cmfwpg9v50003ugtl6sg1aeyf"},{"post_id":"cmfs3zg9r0000gwtl2q1j32rk","category_id":"cmfwpg9v10000ugtlbce15dne","_id":"cmfwpipii0004ugtl9b720oi4"},{"post_id":"cmfs3zg9x000cgwtl34b2ghyq","category_id":"cmfwpg9v10000ugtlbce15dne","_id":"cmfwpjo530005ugtl0u1bafmu"},{"post_id":"cmg22ta0g0003wotlb4vj1mx0","category_id":"cmfwpg9v10000ugtlbce15dne","_id":"cmg22ta0o0007wotlcosr86vs"},{"post_id":"cmf88q04a0003c4tl7ruk57xr","category_id":"cmg22ta0b0001wotl6ge6ge9d","_id":"cmg22ta0p0008wotlgmt5gm9j"},{"post_id":"cmfs3zg9u0002gwtlhb459op3","category_id":"cmfwpg9v10000ugtlbce15dne","_id":"cmg22ta0p0009wotlcrgia9l4"},{"post_id":"cmg22ta090000wotl1wgo5c5c","category_id":"cmg22ta0j0004wotlg4lnacog","_id":"cmg22ta0p000bwotlcrf7cf45"},{"post_id":"cmf88q0440000c4tlhzl9avjf","category_id":"cmg22ta0b0001wotl6ge6ge9d","_id":"cmghqwkr10000sctl2lui78f3"},{"post_id":"cmholdtpp0000lsu75mnj9w03","category_id":"cmfwpg9v10000ugtlbce15dne","_id":"cmholdtpt0002lsu79d85c1kz"},{"post_id":"cmholdtpu0005lsu7gpxq0hyv","category_id":"cmg22ta0j0004wotlg4lnacog","_id":"cmholdtpw0007lsu72d0gcrcd"}],"PostTag":[{"post_id":"cmewhlst20000c0tl6a4l66i8","tag_id":"cmewhlst60001c0tlbeh77vu4","_id":"cmewhlst70002c0tl4tnbg9ic"},{"post_id":"cmf88q0440000c4tlhzl9avjf","tag_id":"cmf88q0470001c4tl9al0aoia","_id":"cmf88q0490002c4tl0gpf4zj9"},{"post_id":"cmf88q04a0003c4tl7ruk57xr","tag_id":"cmf88qxn100000stl9kmugljk","_id":"cmf88qxn300010stlhv83g16l"},{"post_id":"cmfs3zg9r0000gwtl2q1j32rk","tag_id":"cmfs3zg9t0001gwtl3im58ztx","_id":"cmfs3zg9w0006gwtl8gas4x9w"},{"post_id":"cmfs3zg9r0000gwtl2q1j32rk","tag_id":"cmfs3zg9v0003gwtlerc63m7y","_id":"cmfs3zg9w0007gwtl9hukg5gm"},{"post_id":"cmfs3zg9r0000gwtl2q1j32rk","tag_id":"cmfs3zg9v0004gwtl2e5hci1f","_id":"cmfs3zg9x0009gwtl7wtkbe4n"},{"post_id":"cmfs3zg9u0002gwtlhb459op3","tag_id":"cmfs3zg9t0001gwtl3im58ztx","_id":"cmfs3zg9x000agwtl0nq01fos"},{"post_id":"cmfs3zg9u0002gwtlhb459op3","tag_id":"cmfs3zg9v0003gwtlerc63m7y","_id":"cmfs3zg9x000bgwtl07uhgfny"},{"post_id":"cmfs3zg9x000cgwtl34b2ghyq","tag_id":"cmfs3zg9t0001gwtl3im58ztx","_id":"cmfs3zg9y000egwtlglbf4tfu"},{"post_id":"cmfwpff3u0000t8tl9ypkdwm1","tag_id":"cmfs3zg9t0001gwtl3im58ztx","_id":"cmfwpff3z0001t8tl1vhy4tkr"},{"post_id":"cmfwpff400002t8tl42079fks","tag_id":"cmfs3zg9t0001gwtl3im58ztx","_id":"cmfwpk0q80007ugtlhfjp9kqw"},{"post_id":"cmfwpff400002t8tl42079fks","tag_id":"cmfwpk0q60006ugtl8f8j76kn","_id":"cmfwpk0q80008ugtlas0a7m50"},{"post_id":"cmg22ta090000wotl1wgo5c5c","tag_id":"cmg22ta0f0002wotl4lsj3l9e","_id":"cmg22ta0n0006wotlb3v2gq0r"},{"post_id":"cmg22ta0g0003wotlb4vj1mx0","tag_id":"cmfs3zg9t0001gwtl3im58ztx","_id":"cmg22ta0p000awotl7stud06v"},{"post_id":"cmg22ta0g0003wotlb4vj1mx0","tag_id":"cmg22ta0m0005wotlcdf28zwz","_id":"cmg22ta0p000cwotl6m27f5yr"},{"post_id":"cmfwpff3u0000t8tl9ypkdwm1","tag_id":"cmf88qxn100000stl9kmugljk","_id":"cmghqwkr10001sctl2cosgscm"},{"post_id":"cmholdtpp0000lsu75mnj9w03","tag_id":"cmfs3zg9t0001gwtl3im58ztx","_id":"cmholdtpt0003lsu79lnf34o4"},{"post_id":"cmholdtpp0000lsu75mnj9w03","tag_id":"cmholdtpr0001lsu7bwnqcnu6","_id":"cmholdtpt0004lsu75hbj98yj"},{"post_id":"cmholdtpu0005lsu7gpxq0hyv","tag_id":"cmg22ta0f0002wotl4lsj3l9e","_id":"cmholdtpw0006lsu7dvps6nr2"}],"Tag":[{"name":"txt","_id":"cmewhlst60001c0tlbeh77vu4"},{"name":"Java","_id":"cmf88q0470001c4tl9al0aoia"},{"name":"Python","_id":"cmf88qxn100000stl9kmugljk"},{"name":"算法","_id":"cmfs3zg9t0001gwtl3im58ztx"},{"name":"动态规划","_id":"cmfs3zg9v0003gwtlerc63m7y"},{"name":"递归","_id":"cmfs3zg9v0004gwtl2e5hci1f"},{"name":"algorithm","_id":"cmfwpg9v30001ugtl0kmj7ob4"},{"name":"二分法","_id":"cmfwpk0q60006ugtl8f8j76kn"},{"name":"Android","_id":"cmg22ta0f0002wotl4lsj3l9e"},{"name":"栈","_id":"cmg22ta0m0005wotlcdf28zwz"},{"name":"位运算","_id":"cmholdtpr0001lsu7bwnqcnu6"}]}}